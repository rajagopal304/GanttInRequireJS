/*!
* RadiantQ jQuery Gantt
* @author RadiantQ
* @version 4.0.2
* http://www.radiantq.com
*
* Copyright RadiantQ
*/
(function(a,b){function c(c){var d=c||window.event,e=[].slice.call(arguments,1),g=0,f=0,m=0;c=a.event.fix(d);c.type="mousewheel";d.wheelDelta&&(g=d.wheelDelta/120);d.detail&&(g=-d.detail/3);m=g;d.axis!==b&&d.axis===d.HORIZONTAL_AXIS&&(m=0,f=-1*g);d.wheelDeltaY!==b&&(m=d.wheelDeltaY/120);d.wheelDeltaX!==b&&(f=-1*d.wheelDeltaX/120);e.unshift(c,g,f,m);return(a.event.dispatch||a.event.handle).apply(this,e)}var d=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks)for(var e=d.length;e;)a.event.fixHooks[d[--e]]=
a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=d.length;a;)this.addEventListener(d[--a],c,!1);else this.onmousewheel=c},teardown:function(){if(this.removeEventListener)for(var a=d.length;a;)this.removeEventListener(d[--a],c,!1);else this.onmousewheel=null}};a.fn.mousewheel==b&&a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}});if(a.observable==
b){a.observable=function(a){return new g(a)};var f=[].splice,g=a.observable.Observable=function(a){this.data=a};g.prototype={data:null,_set:function(a,b){var c=a.split("."),d=c.pop();this._get(c)[d]=b},_get:function(b){b="string"===a.type(b)?b.split("."):b;var c,d=this.data;if(0===b.length)return d;for(;1<b.length;)c=b.shift(),d=d[c];return d[b[0]]},property:function(b,c){if("object"===a.type(b)){var d={},e={},g=!1,f;for(f in b){var q=this._get(f);q!=b[f]&&(g=!0,d[f]=q,e[f]=b[f])}if(g)return this._property(d,
e)}else{if(1==arguments.length)return this._get(b);q=this._get(b);if(q!=c)return d={},d[b]=q,e={},e[b]=c,this._property(d,e)}return this},_property:function(b,c){var d=this;a.each(c,function(a,b){d._set(a,b)});return this._trigger("change",{oldValues:b,newValues:c})},insert:function(b,c){"object"===a.type(b)?(c=[b],b=this.data.length):a.isArray(c)||(c=[c]);return this._insert(b,c)},_insert:function(a,b){this.data.splice.apply(this.data,[a,0].concat(b));return this._trigger("insert",{index:a,items:b})},
remove:function(b,c){var d=!1;if("array"===a.type(b)){var e,g,f,q,d=[],r=b;e=0;for(f=this.data.length;e<f;e++)for(g=0,q=r.length;g<q;g++)if(r[g]===this.data[e]){d.push({index:e,item:this.data[g]});break}e=g=0;for(f=d.length;e<f;e++)this.data.splice(d[e].index-g,1),g+=1;return this._trigger("remove",{items:d})}"number"===a.type(b)&&b<=this.data.length-1&&(d=!0);if("object"===a.type(b))for(e=0,f=this.data.length;e<f;e++)if(this.data[e]===b){b=e;d=!0;break}c||(c=1);return this._remove(b,c,d)},_remove:function(a,
b,c){if(!0==c)return c=this.data.slice(a,a+b),this.data.splice(a,b),this._trigger("remove",{index:a,items:c})},replaceAll:function(a){var b={oldItems:this.data.slice(0),newItems:a};f.apply(this.data,[0,this.data.length].concat(a));return this._trigger("replaceAll",b)}};a.each({bind:"bind",unbind:"unbind",_trigger:"triggerHandler"},function(b,c){g.prototype[b]=function(){var b=a([this.data]);b[c].apply(b,arguments);return this}})}})(jQuery);
(function(a){var b=/^[\],:{}\s]*$/,c=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,d=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,e=/(?:^|:|,)(?:\s*\[)+/g,f=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:[.,]\d+)?Z/i,g=/\/Date\((\d+)(?:-\d+)?\)\//i,h=/\/Date\((-\d+)(?:-\d+)?\)\//i,k=/"(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:[.,](\d+))?Z"/gi,l=/"\\\/Date\((\d+)(?:-\d+)?\)\\\/"/gi,n=/^(\d*.\d{2}:\d{2}:\d{2})$/,p=/^(\d{2}:\d{2}:\d{2})/,m=window.JSON&&window.JSON.parse?!0:!1,q=m&&"Y"===
window.JSON.parse('{"x":9}',function(a,b){return"Y"});a.extend({parseJSON:function(r,s,t,u){if("string"!==typeof r||!r)return null;null!=Date.prototype._toString&&-1==Date.prototype._toString.toString().indexOf("[native code]")&&console.error("Multiple references to 'date.js' is found. Correct this and ensure that there is only a single reference.");r=a.trim(r);this.jsonDateConverter=function(a,b){if("string"===typeof b){if(n.test(b)||p.test(b))return RQTimeSpan.parse(b);if(f.test(b)){var c=new Date(b);
if(isNaN(c)){var d=/^(\d{4})-(\d{2})-(\d{2})((T)(\d{2}):(\d{2})(:(\d{2})(\.\d*)?)?)?(Z)?$/;(d="string"===typeof b&&b.match(d))&&(c=new Date(+d[1],+d[2]-1,+d[3],+d[6]||0,+d[7]||0,+d[9]||0,parseInt(1E3*+d[10])||0))}if("Invalid Date"==c)return b;!0==t&&c.addMinutes(c.getTimezoneOffset());return c}if(g.test(b))return new Date(parseInt(g.exec(b)[1],10));if(h.test(b))return Date.MinValue}return u&&(c=u.apply(this,arguments),null!=c)?c:b};if(b.test(r.replace(c,"@").replace(d,"]").replace(e,""))){if(q||m&&
!0!==s)return window.JSON.parse(r,!0===s?this.jsonDateConverter:void 0);r=!0===s?r.replace(k,"new Date(parseInt('$1',10),parseInt('$2',10)-1,parseInt('$3',10),parseInt('$4',10),parseInt('$5',10),parseInt('$6',10),(function(s){return parseInt(s,10)||0;})('$7'))").replace(l,"new Date($1)"):r;return(new Function("return "+r))()}a.error("Invalid JSON: "+r)}})})(jQuery);
(function(a){a.widget("radiantq.ResourcePicker",{version:"1.10.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},ResourceNameProperty:"ResourceName",ResourceIDProperty:"ResourceID",SelectedResources:null,delay:0,source:null,minLength:0},_create:function(){this.element.attr("readonly",!0);this._draw();this._on(this._events);this._refresh();this.selectedItems=new RadiantQ.Gantt.Dictionary;this.createAutoComplet();this.element.data("ResourcePicker",
this);this.element.addClass("ResourcePicker");this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},selectedItems:null,changedItems:null,createAutoComplet:function(){var b=this;this.updateSelectedItem();this.options.close=function(c,d){var e=a(this);b.updateDispalyText(e)};this.element.autocomplete(this.options).data("ui-autocomplete")._renderItem=function(c,d){var e=a("<div class='rq-grid-resourcepicker-item' ></div>").data("item",d).appendTo(c),f=a("<input type='checkbox'/>");
b.selectedItems.Contains(d[b.options.ResourceIDProperty])&&(f[0].checked=!0);f.bind("change",b,b.selected);e.append(f).append(d[b.options.ResourceNameProperty]);return e};this.element.data("ui-autocomplete")._normalize=function(a){return a}},updateDispalyText:function(){for(var a=this.element,c=this.selectedItems.asArray,d="",e=0;e<c.length;e++)d+=c[e][this.options.ResourceNameProperty]+",";a.val(d.replace(/\,$/,""))},updateSelectedItem:function(){var a=this.options.SelectedResources;if(null!=a)for(var c=
0;c<a.length;c++){var d=a[c];this.selectedItems.Add(d[this.options.ResourceIDProperty],d)}this.updateDispalyText()},selected:function(b,c){var d=b.data,e=a(this).closest(".rq-grid-resourcepicker-item").data("item");if(!0==this.checked){var f=e[d.options.ResourceIDProperty];d.selectedItems.Add(f,e);!0==d.changedItems.Contains(f)?d.changedItems.Remove(f):d.changedItems.Add(f)}else f=e[d.options.ResourceIDProperty],b.data.selectedItems.Remove(f),!0==b.data.changedItems.Contains(f)?b.data.changedItems.Remove(f):
b.data.changedItems.Add(f);b.data.updateDispalyText()},IsChanged:function(){return 0<this.changedItems.asArray.length},close:function(){this.element.data().uiAutocomplete.close()},wasOpen:null,_events:{"mousedown .ui-spinner-button":function(a){this.wasOpen=this.element.autocomplete("widget").is(":visible")},"click .ui-spinner-button":function(){var a=this.element;this.wasOpen||a.data().uiAutocomplete.search("")}},_draw:function(){var b=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete",
"off").wrap(this._uiSpinnerHtml()).parent().append(a(this._buttonHtml()).css("height","100%"));this.element.attr("role","spinbutton");this.buttons=b.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all");this.options.disabled&&this.disable()},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+
"'>&#9660;</span></a>"},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments);switch(b){case "SelectedResources":this.updateSelectedItem();break;case "source":a.isArray(arguments[1]),array=arguments[1],source=function(b,c){c(a.ui.autocomplete.filter(array,b.term))},this.element.autocomplete("option","source",source),this.changedItems=new RadiantQ.Gantt.Dictionary,this.selectedItems=new RadiantQ.Gantt.Dictionary}},_refresh:function(){},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",
!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.uiSpinner.replaceWith(this.element)},widget:function(){return this.uiSpinner}})})(jQuery);
(function(a){a.extend(!0,{i18n:{properties:function(b){b=a.extend({name:"Messages",language:"",path:"",mode:"vars",cache:!1,encoding:"UTF-8",callback:null,ApplyOptimizedLookup:!0},b);if(null===b.language||""==b.language)b.language=a.i18n.browserLang();null===b.language&&(b.language="");var c=getFiles(b.name);for(i=0;i<c.length;i++){var d=!1;!0==b.ApplyOptimizedLookup?(5<=b.language.length&&(loadAndParseFile(b.path+c[i]+"_"+b.language.substring(0,5)+".txt",b),d=!0),2<=b.language.length&&!1==d&&(d=
!0,loadAndParseFile(b.path+c[i]+"_"+b.language.substring(0,2)+".txt",b)),!1==d&&loadAndParseFile(b.path+c[i]+".txt",b)):(loadAndParseFile(b.path+c[i]+".txt",b),2<=b.language.length&&loadAndParseFile(b.path+c[i]+"_"+b.language.substring(0,2)+".txt",b),5<=b.language.length&&loadAndParseFile(b.path+c[i]+"_"+b.language.substring(0,5)+".txt",b))}b.callback&&b.callback()}}})})(jQuery);
function loadAndParseFile(a,b){var c=2<arguments.length?arguments[2]:!1;$.ajax({url:a,async:!1,cache:b.cache,contentType:"text/plain;charset="+b.encoding,dataType:"text",success:function(a,c){parseData(a,b.mode)},error:function(){c&&window.console?console.error('The specified "String Resource file" is not found. Make sure that the path reference to this file is correct.'):(window.console&&console.log('The culture file "'+a+'".txt specified is not found, trying to load the default culture file.'),
loadAndParseFile(a.split("_")[0]+".txt",b,"failed"))}})}
function parseData(a,b){for(var c="",d=a.split(/\n/),e=/(\{\d+\})/g,f=/\{(\d+)\}/g,g=/(\\u.{4})/ig,h=0;h<d.length;h++)if(d[h]=d[h].replace(/^\s\s*/,"").replace(/\s\s*$/,""),0<d[h].length&&"#"!=d[h].match("^#")){var k=d[h].split("=");if(0<k.length){for(var l=unescape(k[0]).replace(/^\s\s*/,"").replace(/\s\s*$/,""),n=1==k.length?"":k[1];"\\"==n.match(/\\$/);)n=n.substring(0,n.length-1),n+=d[++h].replace(/\s\s*$/,"");for(var p=2;p<k.length;p++)n+="="+k[p];n=n.replace(/^\s\s*/,"").replace(/\s\s*$/,"");
if("map"==b||"both"==b){if(k=n.match(g))for(p=0;p<k.length;p++)n=n.replace(k[p],unescapeUnicode(k[p]));$.i18n.map[l]=n}if("vars"==b||"both"==b)if(n=n.replace(/"/g,'\\"'),checkKeyNamespace(l),e.test(n)){for(var k=n.split(e),p=!0,m="",q=[],r=0;r<k.length;r++)!e.test(k[r])||0!=q.length&&-1!=q.indexOf(k[r])||(p||(m+=","),m+=k[r].replace(f,"v$1"),q.push(k[r]),p=!1);c+=l+"=function("+m+"){";l='"'+n.replace(f,'"+v$1+"')+'"';c+="return "+l+";};"}else c+=l+'="'+n+'";'}}eval(c)}
function checkKeyNamespace(a){if(/\./.test(a)){var b="";a=a.split(/\./);for(var c=0;c<a.length;c++)0<c&&(b+="."),b+=a[c],eval("typeof "+b+' == "undefined"')&&eval(b+"={};")}}function getFiles(a){return a&&a.constructor==Array?a:[a]}function normaliseLanguageCode(a){a=a.toLowerCase();3<a.length&&(a=a.substring(0,3)+a.substring(3).toUpperCase());return a}
function unescapeUnicode(a){var b=[];a=parseInt(a.substr(2),16);0<=a&&a<Math.pow(2,16)&&b.push(a);a="";for(var c=0;c<b.length;++c)a+=String.fromCharCode(b[c]);return a}function ObjectEvent(a,b){this.type=a;this.fn=[];this._thisArgs=[];this._crntIndex=-1;"function"==typeof b&&(this.fn[0]=b);this.__noOfDirtyItems=0;this.__addedDirtyItemIndices=[];this.__removedDirtyItemIndices=[]}ObjectEvent.prototype.isSubscribed=function(a){return a?-1==$.inArray(a,this.fn)?!1:!0:0<this.fn.length?!0:!1};
ObjectEvent.prototype.raise=function(a,b){this.__noOfDirtyItems=0;this.__addedDirtyItemIndices=[];this.__removedDirtyItemIndices=[];for(var c=0;c<this.fn.length-this.__addedDirtyItemIndices.length;c++)"function"==typeof this.fn[c]&&(this._crntIndex=c,this.fn[c].apply(this._thisArgs[c],arguments),-1!=this._crntIndex&&this._crntIndex<c&&(c=this._crntIndex));this._crntIndex=-1;this.__noOfDirtyItems=0;this.__addedDirtyItemIndices=[];this.__removedDirtyItemIndices=[]};
ObjectEvent.prototype.subscribe=function(a,b){-1<this._crntIndex&&this.__addedDirtyItemIndices.push(this.fn.length);b?this._thisArgs.push(b):this._callee?this._thisArgs.push(this._callee):this._thisArgs.push(this);this.fn[this.fn.length]=a};
ObjectEvent.prototype.unsubscribe=function(a,b){this.__noOfDirtyItems=this.__noOfDirtyItems||0;if(b)for(var c=0;c<this._thisArgs.length;c++){if(this._thisArgs[c]===b&&this.fn[c]==a){this._crntIndex==c&&(this._crntIndex--,this.__noOfDirtyItems++,this.__removedDirtyItemIndices.push(c));this.fn.splice(c,1);this._thisArgs.splice(c,1);break}}else for(c=0;c<this.fn.length;c++)if(this.fn[c]===a){-1<this._crntIndex&&(this.__noOfDirtyItems++,this.__removedDirtyItemIndices.push(c));this.fn.splice(c,1);this._thisArgs.splice(c,
1);break}};ObjectEvent.prototype.clear=function(){ObjectEvent.call(this,this.type)};ObjectEvent.prototype.IsEqual=function(a){var b=null,c=null;if(!this.isSubscribed()&&a.isSubscribed()||this.isSubscribed()&&!a.isSubscribed())return!1;if(this.isSubscribed()&&a.isSubscribed()){b=this.fn;c=a.fn;if(this.fn.length!=a.fn.length)return!1;for(a=0;a<b.length;a++)if(b[a]!=c[a])return!1}return!0};function NotifyPropertyChanged(){this.PropertyChanged=new ObjectEvent("PropertyChanged")}
NotifyPropertyChanged.prototype.OnPropertyChanged=function(a,b,c){c?this.PropertyChanged.raise(this,{PropertyName:a,value:b,context:c}):this.PropertyChanged.raise(this,{PropertyName:a,value:b})};
function Binding(a,b,c,d,e,f,g){this.source=a;this.sourcePropertyName=b;this.targetPropertyName=d;this.converterFn=e;this.ConvertBack=this.Convert=null;this.target=c;this.targetKOSubscriberInstance=this.sourceKOSubscriberInstance=null;this.bindingMode=void 0==f?"OneWay":f;this.ConverterContext=g;null!=this.converterFn&&(this.Convert=e.Convert?e.Convert:null,this.ConvertBack=e.ConvertBack?e.ConvertBack:null);this.targetChanging=this.sourceChanging=!1;var h=this;this.SourcePropertyChangeListener=function(a,
b){b.PropertyName==h.sourcePropertyName&&(h.sourceChanging=!0,!1==h.targetChanging&&h.updateTarget(),h.sourceChanging=!1)};this.TargetPropertyChangeListener=function(a,b){b.PropertyName==h.targetPropertyName&&(h.targetChanging=!0,!1==h.sourceChanging&&h.updateSource(),h.targetChanging=!1)};this.subscribePropchangeNotifier();h.sourceChanging=!0;this.updateTarget.apply(this,arguments);h.sourceChanging=!1;this.Dispose=function(){void 0==this.sourceKOSubscriberInstance?this.source.PropertyChanged.unsubscribe(this.SourcePropertyChangeListener):
this.sourceKOSubscriberInstance.dispose();this.bindingMode==RadiantQ.Gantt.BindingMode.TwoWay&&(void 0==this.targetKOSubscriberInstance?this.target.PropertyChanged.unsubscribe(this.TargetPropertyChangeListener):this.targetKOSubscriberInstance.dispose())}}
Binding.prototype.subscribePropchangeNotifier=function(){var a=this;"function"===typeof this.source[this.sourcePropertyName]&&this.source[this.sourcePropertyName].subscribe&&(this.sourceKOSubscriberInstance=this.source[this.sourcePropertyName].subscribe(function(b){Binding.prototype.updateTarget.apply(a,arguments)}.bind(this)));null==this.sourceKOSubscriberInstance&&this.source.PropertyChanged&&this.source.PropertyChanged.subscribe(this.SourcePropertyChangeListener);if(this.bindingMode==RadiantQ.Gantt.BindingMode.TwoWay){"function"===
typeof this.target[this.targetPropertyName]&&this.target[this.targetPropertyName].subscribe&&(this.targetKOSubscriberInstance=this.target[this.targetPropertyName].subscribe(function(b){Binding.prototype.updateSource.apply(a,arguments)}.bind(this)));if(this.target.PropertyChanged)null==this.targetKOSubscriberInstance&&this.target.PropertyChanged.subscribe(this.TargetPropertyChangeListener);else throw Error("Binding should be used with a source that is of type NotifyPropertyChanged");if(!this.ConvertBack&&
this.Convert)throw Error("Two Way binding requires ConvertBack");}};Binding.prototype.updateTarget=function(){this.updateValue(this.source,this.sourcePropertyName,this.target,this.targetPropertyName,this.Convert)};Binding.prototype.updateSource=function(){this.updateValue(this.target,this.targetPropertyName,this.source,this.sourcePropertyName,this.ConvertBack)};
Binding.prototype.updateValue=function(a,b,c,d,e){var f=null,g=this.ConverterContext||this,f="function"===typeof a[b]?a[b]():a[b];null!=e&&(f=e.call(g,f,a,c));if("function"===typeof c[d])c[d](f);else c[d]=f};var RadiantQ={};if(Object.defineProperty){RadiantQ.CanUseDefineProperty=!0;try{Object.defineProperty({},"test",{get:function(){return!0}})}catch(e$$12){RadiantQ.CanUseDefineProperty=!1}}else RadiantQ.CanUseDefineProperty=!1;RadiantQ.Gantt={};RadiantQ.Gantt.Utils={};
RadiantQ.Gantt.ContextMenuImpl={};var rqTCUtils=RadiantQ.Gantt.Utils.TimeComputingUtils;RadiantQ.Gantt.TimeScaleType={Minutes:90,Hours:180,Days:270,Weeks:360,Months:450,Years:540,Custom:630};RadiantQ.Gantt.RoundToOptions={None:"None",Auto:"Auto",Minute:"Minute",FifteenMinutes:"FifteenMinutes",ThirtyMinutes:"ThirtyMinutes",Hour:"Hour",HalfDay:"HalfDay",Day:"Day"};
RadiantQ.Gantt.DependencyType={FinishToStart:"FinishToStart",StartToStart:"StartToStart",FinishToFinish:"FinishToFinish",StartToFinish:"StartToFinish",None:"None"};
RadiantQ.Gantt.TimeUnitsCache=function(){this._timeUnitsByRange=new RadiantQ.Gantt.Dictionary;this.GetRangeString=function(a,b){return a.toString()+"-"+b.toString()};this.SetTimeUnitsCacheForRange=function(a,b,c){a=this.GetRangeString(a,b);4<this._timeUnitsByRange.Keys.length&&(this._timeUnitsByRange.Keys.First(),this._timeUnitsByRange.Remove(this._timeUnitsByRange.Keys.First()));this._timeUnitsByRange.Add(a,c)};this.GetTimeUnitsCacheForRange=function(a,b){var c=this.GetRangeString(a,b);return this._timeUnitsByRange.GetItemByKey(c)};
this.ClearTimeUnitsCacheForRange=function(a,b){var c=this.GetRangeString(a,b);this._timeUnitsByRange.Remove(c)}};
RadiantQ.Gantt.CustomTimeScaleTypeHint=function(a,b){this.EquivalentUnits=a;this.EquivalentType=b;this.Clone=function(){var a=new RadiantQ.Gantt.CustomTimeScaleTypeHint;a.EquivalentType=this.EquivalentType;a.EquivalentUnits=this.EquivalentUnits;return a};this.IsEqual=function(a){if(this instanceof RadiantQ.Gantt.CustomTimeScaleTypeHint&&a instanceof RadiantQ.Gantt.CustomTimeScaleTypeHint)return null==this&&null==a?!0:null==this||null==a||this.EquivalentType!=a.EquivalentType||this.EquivalentUnits!=
a.EquivalentUnits?!1:!0}};
RadiantQ.Gantt.ContextMenuImpl.ContextMenu=function(a){this.ItemClicked=new ObjectEvent("ItemClicked");this.BeforeContextMenu=new ObjectEvent("BeforeContextMenu");this.selector=a;this.position={x:-1,y:-1};var b=this;this.Items=[];$.contextMenu&&$.contextMenu({selector:a,position:function(a,d,e){a.$menu.css({top:e,left:d});b.position={x:d,y:e}},build:function(a,d){b.Items&&0<b.Items.length&&b.BeforeContextMenu.raise(a,d);return void 0==d.data.items||$.isEmptyObject(d.data.items)?!1:{GetPosition:function(){return b.position},
callback:function(a,c){b.ItemClicked.raise(a,c)}}}});this.BeforeContextMenu.subscribe(function(a,b){for(var e=this.Items,f=0;f<e.length;f++){var g=e[f].keyName||e[f].name;!0==e[f].separator?b.data.items["separator"+f]="separator"+f:b.data.items[g]={name:e[f].name,icon:e[f].icon,callback:e[f].callback}}},this);this.AddNewItems=function(a,b){this.Items=!1==b?a:this.Items.concat(a)};return this};
RadiantQ.Gantt.TimeScaleHeaderDefinition=function(){NotifyPropertyChanged.apply(this,arguments);this.ProvideCustomTimeIntervals=new ObjectEvent("ProvideCustomTimeIntervals");this.ProvideCustomHeaderText=new ObjectEvent("ProvideCustomHeaderText");this.TimeUnitsCache=new RadiantQ.Gantt.TimeUnitsCache;this._name=null;this.Type=RadiantQ.Gantt.TimeScaleType.Days;this.CustomTimeScaleTypeHint=null;this.BaseTimeUnitWidth=25;this.BaseTimeScaleType=RadiantQ.Gantt.TimeScaleType.Hours;RadiantQ.CanUseDefineProperty?
(this.textFormat="",Object.defineProperty(this,"TextFormat",{get:function(){return this._textFormat},set:function(a){this._textFormat!=a&&(this._textFormat=a,this.OnPropertyChanged("TextFormat",a))},enumerable:!0,configurable:!0})):this.TextFormat="";this.HeaderHeight=22;this.name=function(a){if(void 0==a)if(null==this._name||""==this._name)if(this.Type!=RadiantQ.Gantt.TimeScaleType.Custom)for(key in RadiantQ.Gantt.TimeScaleType){if(RadiantQ.Gantt.TimeScaleType[key]==this.Type)return key.toString()}else return new String;
else return this._name;else this._name=a};this.Clone=function(){var a=new RadiantQ.Gantt.TimeScaleHeaderDefinition;a.CustomTimeScaleTypeHint=this.CustomTimeScaleTypeHint;a.HeaderHeight=this.HeaderHeight;a.TextFormat=this.TextFormat;a.Type=this.Type;a.TimeUnitTemplate=this.TimeUnitTemplate;if(this.ProvideCustomHeaderText.isSubscribed())for(var b=0;b<this.ProvideCustomHeaderText.fn.length;b++)a.ProvideCustomHeaderText.subscribe(this.ProvideCustomHeaderText.fn[b]);if(this.ProvideCustomTimeIntervals.isSubscribed())for(b=
0;b<this.ProvideCustomTimeIntervals.fn.length;b++)a.ProvideCustomTimeIntervals.subscribe(this.ProvideCustomTimeIntervals.fn[b]);return a};this.IsEqual=function(a){var b=null,c=null;if(null==this&&null==a)return!0;if(null==this||null==a)return!1;if(null!=this.CustomTimeScaleTypeHint&&null!=a.CustomTimeScaleTypeHint){if(!this.CustomTimeScaleTypeHint.IsEqual(a.CustomTimeScaleTypeHint))return!1}else{if(this.HeaderHeight!=a.HeaderHeight||this.TextFormat!=a.TextFormat||this.Type!=a.Type||this.TimeUnitTemplate!=
a.TimeUnitTemplate||!this.ProvideCustomHeaderText.IsEqual(a.ProvideCustomHeaderText))return!1;if(this.ProvideCustomHeaderText.IsEqual(a.ProvideCustomHeaderText)){b=this.ProvideCustomHeaderText.fn;c=a.ProvideCustomHeaderText.fn;if(this.ProvideCustomHeaderText.fn.length!=a.ProvideCustomHeaderText.fn.length)return!1;for(var d=0;d<b.length;d++)if(b[d]!=c[d])return!1}}if(!this.ProvideCustomTimeIntervals.IsEqual(a.ProvideCustomTimeIntervals))return!1;if(this.ProvideCustomTimeIntervals.IsEqual(a.ProvideCustomTimeIntervals)){b=
this.ProvideCustomTimeIntervals.fn;c=a.ProvideCustomTimeIntervals.fn;if(this.ProvideCustomTimeIntervals.fn.length!=a.ProvideCustomTimeIntervals.fn.length)return!1;for(d=0;d<b.length;d++)if(b[d]!=c[d])return!1}return!0};this.IsGreater=function(a){var b=this.Type,c=a.Type;if(b==RadiantQ.Gantt.TimeScaleType.Custom){if(null==this.CustomTimeScaleTypeHint)throw"Encountered a Custom TimeScaleType header with CustomTimeScaleTypeHint not set in TimeScaleHeaderDefinition's > operator.";b=this.CustomTimeScaleTypeHint.EquivalentType}if(c==
RadiantQ.Gantt.TimeScaleType.Custom){if(null==a.CustomTimeScaleTypeHint)throw"Encountered a Custom TimeScaleType header with CustomTimeScaleTypeHint not set in TimeScaleHeaderDefinition's > operator.";c=a.CustomTimeScaleTypeHint.EquivalentType}return b>c?!0:b!=c||this.Type!=RadiantQ.Gantt.TimeScaleType.Custom&&a.Type!=RadiantQ.Gantt.TimeScaleType.Custom?!1:(this.Type==RadiantQ.Gantt.TimeScaleType.Custom?this.CustomTimeScaleTypeHint.EquivalentUnits:1)>(a.Type==RadiantQ.Gantt.TimeScaleType.Custom?a.CustomTimeScaleTypeHint.EquivalentUnits:
1)?!0:!1}};RadiantQ.Gantt.TimeScaleHeaderDefinition.prototype=new NotifyPropertyChanged;RadiantQ.Gantt.ProvideCustomerHeaderTextEventArgs=function(a){this.dateTime=a;this.tooltipText=this.text=null};RadiantQ.Gantt.ProvideCustomTimeIntervalsEventArgs=function(a,b){this.ViewStartTime=a;this.ViewEndTime=b;this.TimeIntervals=[]};RadiantQ.Gantt.RoundDownDuration=function(a){var b=Date.today();a=b.addTimeSpan(a);a=this.RoundTimeDown(a,this.GetActualRoundToOption());return rqTCUtils.GetTimeSpan(b,a)};
RadiantQ.Gantt.RoundDown=function(a){return this.RoundTimeDown(a,this.GetActualRoundToOption())};
RadiantQ.Gantt.RoundTimeDown=function(a,b){var c=a.getHours(),d=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0);switch(b){case RadiantQ.Gantt.RoundToOptions.HalfDay:if(d==a||d.addHours((new RQTimeSpan(0,12,0,0)).getTotalHours())==a)break;return 12>c?a.Date():a.Date().addHours(12);case RadiantQ.Gantt.RoundToOptions.Day:return a.Date();case RadiantQ.Gantt.RoundToOptions.Hour:return c=new Date(a.getFullYear(),a.getMonth(),a.getDate(),c,0,0);case RadiantQ.Gantt.RoundToOptions.ThirtyMinutes:if(d=
a.getMinutes(),!(0==d||30>d)&&(30==d||59>=d))return d=30,new Date(a.getFullYear(),a.getMonth(),a.getDate(),c,d,0,DateTimeKind.Utc);case RadiantQ.Gantt.RoundToOptions.FifteenMinutes:d=a.getMinutes();if(0==d||15>d)d=0;else if(15==d||30>d)d=15;else if(30==d||45>d)d=30;else if(45==d||59>=d)d=45;return new Date(a.getFullYear(),a.getMonth(),a.getDate(),c,d,0,DateTimeKind.Utc);case RadiantQ.Gantt.RoundToOptions.Minute:return c=new Date(a.getFullYear(),a.getMonth(),a.getDate(),c,a.Minute,0,DateTimeKind.Utc)}return a};
RadiantQ.Gantt.TimeSpanHeaderMouseTracker=function(a){this.Headers=function(){return a};this.LatestPos=function(a){if(void 0==a){if(null!=this.xLatestPos)return this.xLatestPos}else this.xLatestPos=a};this.IsDragging=function(a){if(void 0==a){if(null!=this._isDragging)return this._isDragging}else this._isDragging=a,RadiantQ.Gantt.TimeSpanHeaderMouseTracker.IsDraggingGlobal=a,this._isDragging||this.OnDoneDragging()}};RadiantQ.Gantt.TimeSpanHeaderMouseTracker.IsDraggingGlobal=!1;
RadiantQ.Gantt.TimeSpanHeaderZoomTracker=function(){this.StartDragging=function(a,b){this.LatestPos(a);this.StartBTUW=b;this.IsDragging(!0);return!0};this.MouseMovedTo=function(a,b){if(this.IsDragging()){var c=this.LatestPos()-a;b._trigger("zoomed",this,this.StartBTUW-c/5)}};this.OnDoneDragging=function(){}};RadiantQ.Gantt.TimeSpanHeaderZoomTracker.prototype=new RadiantQ.Gantt.TimeSpanHeaderMouseTracker;
RadiantQ.Gantt.TimeSpanHeaderScrollTracker=function(){this.StartDragging=function(a,b,c){this.LatestPos(a);this.StartBTUW=b;c.StartPanning();this.IsDragging(!0);return!0};this.MouseMovedTo=function(a,b){if(this.IsDragging()){var c=this.LatestPos()-a;b.ScrollBy(c);this.LatestPos(a)}};this.OnDoneDragging=function(){}};RadiantQ.Gantt.TimeSpanHeaderScrollTracker.prototype=new RadiantQ.Gantt.TimeSpanHeaderMouseTracker;RadiantQ.Gantt.AnchorTimeToStartTimeConverter=function(){};
RadiantQ.Gantt.AnchorTimeToStartTimeConverter.RoundAnchorTime=function(a,b){b>RadiantQ.Gantt.TimeScaleType.Hours&&(a=(new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0)).clone());return a.clone()};
RadiantQ.Gantt.AnchorTimeToStartTimeConverter.Convert=function(a){if(!0==a.options.ResizeToFit)return a.options.AnchorTime.clone();var b=a.options.AnchorTime.clone(),c=a.options.BaseTimeScaleType,d=0,d=RadiantQ.Gantt.TimeSpanHeaderMouseTracker.IsDraggingGlobal?a.options.ViewWidth/2/a.options.BaseTimeUnitWidth:Math.ceil(a.options.ViewWidth/2/a.options.BaseTimeUnitWidth);a=rqTCUtils.ConvertTimeUnitsToTimeSpan(c,d);b=b.clone().add({millisecond:-a.millisecond,seconds:-a.seconds,minutes:-a.minutes,hours:-a.hours,
days:-a.days});return b=RadiantQ.Gantt.AnchorTimeToStartTimeConverter.RoundAnchorTime(b,c)};RadiantQ.Gantt.AnchorTimeToEndTimeConverter=function(){};
RadiantQ.Gantt.AnchorTimeToEndTimeConverter.Convert=function(a){var b=RadiantQ.Gantt.AnchorTimeToStartTimeConverter.Convert(a),c=a.options.BaseTimeScaleType;a=Math.ceil(a.options.ViewWidth/a.options.BaseTimeUnitWidth);a=rqTCUtils.ConvertTimeUnitsToTimeSpan(c,a);b=b.addTimeSpan(a);return b=c==RadiantQ.Gantt.TimeScaleType.Minutes?rqTCUtils.CeilToNextMinute(b):c==RadiantQ.Gantt.TimeScaleType.Hours?rqTCUtils.CeilToNextHour(b):rqTCUtils.CeilToNextDay(b)};
RadiantQ.Gantt.GanttChartPanningUtil=function(a,b,c){this.IntermediateAnchorTime=a.clone();this.CurAnchorTime=a.clone();this.BaseTimeScaleType=b;this.BaseTimeUnitWidth=c;this.AnchorTimeChanged=new ObjectEvent("AnchorTimeChanged");this.ApplyXChange=function(a){a=rqTCUtils.ConvertTimeUnitsToTimeSpan(this.BaseTimeScaleType,a/this.BaseTimeUnitWidth);this.IntermediateAnchorTime=this.IntermediateAnchorTime.addTimeSpan(a);a=RadiantQ.Gantt.AnchorTimeToStartTimeConverter.RoundAnchorTime(this.IntermediateAnchorTime,
this.BaseTimeScaleType);a.equals(this.CurAnchorTime)||(this.CurAnchorTime=a.clone(),this.AnchorTimeChanged.raise(this,null))}};RadiantQ.Gantt.ChartZoomOptions={None:0,ShowZoomSliderInHeader:1,MouseWheelZoomOnTimeScaleHeaders:2,MouseWheelZoomOnGanttChart:4,LeftMouseButtonDownDrag:8};RadiantQ.Gantt.ChartScrollOptions={None:0,LeftMouseButtonDownDrag:1,CtrlAndLeftMouseButtonDownDrag:2};
RadiantQ.Gantt.CustomRangeInformationEventArgs=function(a,b){this.ViewStartTime=a;this.ViewEndTime=b;this.CustomRanges=[]};RadiantQ.Gantt.CustomRangeInfo=function(a,b,c){this.StartTime=a;this.EndTime=b;if(b<a)throw"endTime cannot be earlier than startTime in a call to CustomRangeInfo constructor.";this.DataTemplate=c};
RadiantQ.Gantt.CustomRangesInfos=function(){this.ProvideRepeatingCustomRanges=new ObjectEvent("ProvideRepeatingCustomRanges");this.DiscreetCustomRanges=new ObservableCollection;this.RaiseProvideRepeatingCustomRanges=function(a){this.ProvideRepeatingCustomRanges.raise(this,a)}};RadiantQ.Gantt.CustomRangeTimeUnit=function(a,b,c){this.Width=a;this.CanvasLeft=b;this.CustomRangeInfo=c};
RadiantQ.Gantt.Utils.GanttChartTimeScaleHeaderSettings=function(a){this.AutoHidingTimeScaleHeaders=!0;this.MaximumTimeScaleHeadersCount=2;this.DefaultBottomHeaderWidth=-1;this.BottomHeaderMaxWidth=35;this.TopHeaderMinWidth=40;this.ResizeToFit=!1;var b=a,c=a;this.IsProjectGantt=!1;this.TimeScaleHeaders=function(a){if(void 0==a)return c;c=a};var d=null;this.BoundGantt=function(a){if(void 0==a)return d;if(d!=a){if(!$(a).hasClass("rq-ganttBase"))throw"Invalid Selector";d=$(a);this.IsProjectGantt=null!=
d.data("GanttControl");null!=d&&this.ApplySettingsOnGantt()}};this.SelectedHeaders=function(a){if(void 0==a)return b;b=a};this.Clone=function(){var a=new RadiantQ.Gantt.Utils.GanttChartTimeScaleHeaderSettings(this.SelectedHeaders);a.AutoHidingTimeScaleHeaders=this.AutoHidingTimeScaleHeaders;a.TimeScaleHeaders(this.TimeScaleHeaders().Clone());a.BottomHeaderMaxWidth=this.BottomHeaderMaxWidth;a.DefaultBottomHeaderWidth=this.DefaultBottomHeaderWidth;a.MaximumTimeScaleHeadersCount=this.MaximumTimeScaleHeadersCount;
a.TopHeaderMinWidth=this.TopHeaderMinWidth;a.ResizeToFit=this.ResizeToFit;return a};this.IsEqual=function(a){if(null==this&&null==a)return!0;if(null==this||null==a||this.AutoHidingTimeScaleHeaders!=a.AutoHidingTimeScaleHeaders||this.BottomHeaderMaxWidth!=a.BottomHeaderMaxWidth||this.DefaultBottomHeaderWidth!=a.DefaultBottomHeaderWidth||this.MaximumTimeScaleHeadersCount!=a.MaximumTimeScaleHeadersCount||this.TopHeaderMinWidth!=a.TopHeaderMinWidth||this.ResizeToFit!=a.ResizeToFit||!this.TimeScaleHeaders().IsEqual(a.TimeScaleHeaders())||
this.SelectedHeaders().length!=a.SelectedHeaders().length)return!1;for(var b=0;b<this.SelectedHeaders().length;b++)if(-1==$.inArray(this.SelectedHeaders()[b],a.SelectedHeaders()))return!1;return!0};this.ConvertWidths=function(a,b,c){if(a==b)return c;switch(a){case RadiantQ.Gantt.TimeScaleType.Minutes:return b==RadiantQ.Gantt.TimeScaleType.Years?c/525600:b==RadiantQ.Gantt.TimeScaleType.Months?c/43200:b==RadiantQ.Gantt.TimeScaleType.Weeks?c/10080:b==RadiantQ.Gantt.TimeScaleType.Days?c/1440:c/60;case RadiantQ.Gantt.TimeScaleType.Hours:return b==
RadiantQ.Gantt.TimeScaleType.Years?c/8760:b==RadiantQ.Gantt.TimeScaleType.Months?c/720:b==RadiantQ.Gantt.TimeScaleType.Weeks?c/168:c/24;case RadiantQ.Gantt.TimeScaleType.Days:return b==RadiantQ.Gantt.TimeScaleType.Years?c/365:b==RadiantQ.Gantt.TimeScaleType.Months?c/30:c/7}return c};this.GetDefaultBottomHeaderWidth=function(){if(-1==this.DefaultBottomHeaderWidth){var a=RadiantQ.Gantt.TimeScaleType.Days;0<this.SelectedHeaders().length&&(a=this.SelectedHeaders().Last().BaseTimeScaleType);switch(a){default:return 25;
case TimeScaleType.Months:return 50;case TimeScaleType.Weeks:return 65;case TimeScaleType.Years:return 100}}else return this.DefaultBottomHeaderWidth};this.GetDefaultBaseTimeUnitWidth=function(){var a=this.SelectedHeaders();if(0==a.length)return this.GetDefaultBottomHeaderWidth();var b=a.Last().BaseTimeScaleType,b=RadiantQ.Gantt.AdjustBaseScaleType(b),a=a.Last().Type;return this.ConvertWidths(b,a,this.GetDefaultBottomHeaderWidth())};this.GetPreferredMaximumBaseTimeUnitWidth=function(){var a=this.SelectedHeaders();
if(0==a.length)return 40;var b=a.Last().BaseTimeScaleType,b=RadiantQ.Gantt.AdjustBaseScaleType(b),a=a.Last().Type;return this.ConvertWidths(b,a,this.BottomHeaderMaxWidth)};this.GetPreferredMinimumBaseTimeUnitWidth=function(){var a=this.SelectedHeaders();if(0==a.length)return 20;var b=a.Last().BaseTimeScaleType,b=RadiantQ.Gantt.AdjustBaseScaleType(b),a=a.First().Type;return this.ConvertWidths(b,a,this.TopHeaderMinWidth)};this.UpdateHeadersOnZoom=function(){var a=this.SelectedHeaders();if(0!=a.lenght){var b=
this.getGanttChartProperty("TimeScaleHeaders"),c=this.getGanttChartProperty("BaseTimeScaleType"),d=this.getGanttChartProperty("BaseTimeUnitWidth"),k=this.getGanttChartProperty("MinTimeUnitWidthForHeaderVisibility");if(!(null==a.Last()||a.lenght<=this.MaximumTimeScaleHeadersCount))for(var l=0,n=a.length-1;0<=n;n--)l<this.MaximumTimeScaleHeadersCount?(-1==$.inArray(a[n],b)&&b.insertInOrder(a[n]),RadiantQ.Gantt.IsHeaderViewable(a[n],c,d,k)&&l++):b.remove(a[n])}};this.ApplyTimeScaleHeaderSettings=function(){var a=
null,a=this.BoundGantt(),a=!1==this.IsProjectGantt?a.FlexyGantt("option","TimeScaleHeaders"):a.GanttControl("option","TimeScaleHeaders");a.clear();for(var b=this.SelectedHeaders(),c=0;c<b.length;c++)a.insertInOrder(b[c])};this.ApplySettingsOnGantt=function(){$(this.BoundGantt());if(1>=this.MaximumTimeScaleHeadersCount)throw"MaximumTimeScaleHeadersCount cannot be less than 2.";if(10>this.BottomHeaderMaxWidth||100<this.BottomHeaderMaxWidth)throw"BottomHeaderMaxWidth cannot be less than 10 or greater than 100.";
if(10>this.TopHeaderMinWidth||200<this.TopHeaderMinWidth)throw"TopHeaderMinWidth cannot be less than 10 or greater than 200.";if(-1>this.DefaultBottomHeaderWidth||100<this.DefaultBottomHeaderWidth)throw"DefaultBottomHeaderWidth cannot be less than -1 or greater than 100.";if(null==this.TimeScaleHeaders())throw"TimeScaleHeaders in GanttChartTimeScaleHeaderSettings cannot be null when BoundGantt property is set.";if(0==this.SelectedHeaders().length)throw"There are no selected TimeScaleHeaders to apply on the gantt in the call to ApplySettingsOnGantt.";
this.ApplyTimeScaleHeaderSettings();var a=this.GetPreferredMinimumBaseTimeUnitWidth(),b=this.GetPreferredMaximumBaseTimeUnitWidth(),c=this.GetDefaultBaseTimeUnitWidth();c<a&&(c=a);c>b&&(c=b);var d=this.BoundGantt();!1==this.IsProjectGantt?d.FlexyGantt("BeginUpdate"):d.GanttControl("BeginUpdate");this.setGanttChartProperty("BaseTimeUnitWidthMinimum",a);this.setGanttChartProperty("BaseTimeUnitWidthMaximum",b);this.setGanttChartProperty("BaseTimeUnitWidth",c);this.setGanttChartProperty("ResizeToFit",
this.ResizeToFit);!1==this.IsProjectGantt?d.FlexyGantt("EndUpdate"):d.GanttControl("EndUpdate");var k=this;this.AutoHidingTimeScaleHeaders&&(!1==this.IsProjectGantt?$(this.BoundGantt()).bind("flexyganttbeforezooming",function(a,b){k.UpdateHeadersOnZoom()}):$(this.BoundGantt()).bind("ganttcontrolbeforezooming",function(a,b){k.UpdateHeadersOnZoom()}));this.UpdateHeadersOnZoom()};this.setGanttChartProperty=function(a,b){var c=this.BoundGantt();!1==this.IsProjectGantt?c.FlexyGantt("option",a,b):c.GanttControl("option",
a,b)};this.getGanttChartProperty=function(a){var b=this.BoundGantt();return!1==this.IsProjectGantt?b.FlexyGantt("option",a):b.GanttControl("option",a)}};ObservableCollection=function(){Array.apply(this,arguments);this.CollectionChanged=new ObjectEvent("CollectionChanged");$.observable(this).unbind("insert remove replaceAll",this.collectionChanged);$.observable(this).bind("insert remove replaceAll",this.collectionChanged)};ObservableCollection.prototype=[];
ObservableCollection.prototype.OnCollectionChanged=function(a,b){this.CollectionChanged.raise(a,b)};ObservableCollection.prototype.collectionChanged=function(a,b){a.target.OnCollectionChanged(a,b)};
ObservableCollection.prototype.remove=function(a,b){var c=!1;if("number"===$.type(a))if(b){if("number"===$.type(b))for(var d=a;d<b;d++)if(void 0!=this[d])c=!0;else{c=!1;break}}else void 0!=this[a]&&(c=!0);else"string"===$.type(a)?(d=$.inArray(a,this),-1!=d&&(c=!0,a=d)):-1!=$.inArray(a,this)&&(c=!0);c&&b?$.observable(this).remove(a,b):c&&$.observable(this).remove(a)};ObservableCollection.prototype.insert=function(a,b){$.observable(this).insert(a,b)};
ObservableCollection.prototype.contains=function(a){return-1!=$.inArray(a,this)};ObservableCollection.prototype.replaceAll=function(a){$.observable(this).replaceAll(a)};ObservableCollection.prototype.clear=function(){0!=this.length&&this.remove(0,this.length)};ObservableCollection.prototype.add=function(a){$.observable(this).insert(this.length,a)};
ObservableCollection.prototype.indexOf=function(a,b){var c=this.length,d=Number(b)||0,d=0>d?Math.ceil(d):Math.floor(d);for(0>d&&(d+=c);d<c;d++)if(d in this&&this[d]===a)return d;return-1};
RadiantQ.Gantt.TimeScaleHeaderDefinitions=function(){ObservableCollection.apply(this,arguments);this.getById=function(a){if(this.isValidateIndex(a))return this[a]};this.getByType=function(a){for(var b=0;b<this.length;b++){var c=this[b];if(c.Type==a)return c}};this.insertInOrder=function(a){for(var b=0;b<this.length;b++)if(!this[b].IsGreater(a)){this.insert(b,a);return}this.add(a)};this.removeType=function(a){if(a==RadiantQ.Gantt.TimeScaleType)throw"RemoveType is not supported for TimeScaleType.Custom type.";
for(var b=0;b<this.length;b++){var c=this.getById(b);if(c.Type==a){this.remove(c);break}}};this.IsContentEqual=function(a){if(null==this&&null==a)return!0;if(null==this&&null!=a||null!=this&&null==a||this.length!=a.length)return!1;for(var b=0;b<this.length;b++)if(!this.getById(b).IsEqual(a.getById(b)))return!1;return!0};this.Clone=function(){for(var a=new RadiantQ.Gantt.TimeScaleHeaderDefinitions,b=0;b<this.length;b++){var c=this[b].Clone();a.add(c)}return a};this.IsEqual=function(a){if(null==this&&
null==a)return!0;if(null==this||null==a||this.length!=a.length)return!1;for(var b=0;b<this.length;b++)if(!this.getById(b).IsEqual(a.getById(b)))return!1;return!0};this.isValidateIndex=function(a){return this.length>a}};RadiantQ.Gantt.TimeScaleHeaderDefinitions.prototype=new ObservableCollection;
RadiantQ.Gantt.BottomTwoHeaderDefinitions=function(){RadiantQ.Gantt.TimeScaleHeaderDefinitions.apply(this,arguments);this.UpdateIndexProperties=function(){for(var a=0,c=0;c<this.length;c++)this.SetIndex(this[c],a++)};var a=this;this.collectionChanged=function(b,c){"insert"==b.type?a.UpdateIndexProperties():a.remove(c.items[0])};this.CollectionChanged.isSubscribed()?this.CollectionChanged.unsubscribe(this.collectionChanged):this.CollectionChanged.subscribe(this.collectionChanged);this.SetIndex=function(a,
c){a.IndexProperty=c};this.remove=function(a){a.IndexProperty=-1}};RadiantQ.Gantt.BottomTwoHeaderDefinitions.GetIndex=function(a){return a.IndexProperty};RadiantQ.Gantt.BottomTwoHeaderDefinitions.prototype=new RadiantQ.Gantt.TimeScaleHeaderDefinitions;
RadiantQ.Gantt.IsHeaderViewable=function(a,b,c,d){var e=a.Type,f=1;if(e==ns_gantt.TimeScaleType.Custom){if(null==a.CustomTimeScaleTypeHint)throw new "CustomTimeScaleTypeHint is not set in TimeScaleHeaderDefinition of TimeScaleType.Custom.";e=a.CustomTimeScaleTypeHint.EquivalentType;f=a.CustomTimeScaleTypeHint.EquivalentUnits}a=rqTCUtils.ConvertToApproxUnitsOfBaseType(b,e,f)*c;return Math.round(a)<d?!1:!0};
RadiantQ.Gantt.AdjustBaseScaleType=function(a){return a>RadiantQ.Gantt.TimeScaleType.Days?RadiantQ.Gantt.TimeScaleType.Days:a};Array.prototype.Last=function(){return this[this.length-1]};Array.prototype.First=function(){return this[0]};Array.prototype.remove=function(a){a=this.indexOf(a);this.splice(a,1)};RadiantQ.Gantt.isModifierKeyIsPresed=function(a){return a.ctrlKey||a.shiftKey||a.altKey||a.metaKey};
RadiantQ.Gantt.addMethod=function(a,b,c){var d=a[b];a[b]=d?function(){if(c.length==arguments.length)return c.apply(this,arguments);if("function"==typeof d)return d.apply(this,arguments)}:c};
RadiantQ.Gantt.TimeUnit=function(){this.Type=this.Width=this.ToolTipText=this.TextFormat=this.Text=this.Tag=0;this.IsWorkingTime=!0;this.PropertyChanged=new ObjectEvent("PropertyChanged");this._binding=null;this.BindingObject=function(a){if(void 0==a||null==a)return this._binding;null!=this._binding&&this._binding.Dispose();this._binding=a};this._isHighlighted=!1;this.IsHighlighted=function(a){if(void 0==a||null==a)return this._isHighlighted;this._isHighlighted!=a&&(this._isHighlighted=a,this.OnPropertyChanged("IsHighlighted",
a))};this.OnPropertyChanged=function(a,b){this.PropertyChanged.raise(this,{PropertyName:a,value:b})}};RadiantQ.Gantt.TimeUnit.prototype=new NotifyPropertyChanged;RadiantQ.Gantt.SpecialLineInfo=function(){this.ToolTipText="";this.LineColor=void 0;this.LineDateTime=new Date};RadiantQ.Gantt.ActivityTimeChangedEventArgs=function(a,b,c){this.Activity=a;this.Type=b;this.UserSpecifiedTime=c};RadiantQ.Gantt.TimeRangeHighlightBehavior={None:0,HighlightInChartOnHeaderMouseHover:1};
RadiantQ.Gantt.ActivityTimeChangeType={StartTimeChanged:"StartTimeChanged",DurationResized:"DurationResized"};RadiantQ.Gantt.SelectionMode={Multiple:"Multiple",Single:"Single"};RadiantQ.Gantt.TimeIndicatorLines={None:0,Always:1,OnHover:2,OnResize:3};RadiantQ.Gantt.SelectionChanged=function(a,b){this.AddedItems=a;this.RemovedItems=b};RadiantQ.Gantt.DefaultStyles={};var style=RadiantQ.Gantt.DefaultStyles;style.direction=["top","bottom","right","left"];
style.CreateCssTxt=function(a,b,c){var d=$.isArray(b);2==b.length&&(b.splice.apply(b,[1,0].concat(b[0])),b.push(b[b.length-1]));return $.map(style.direction,function(e,f){var g=void 0==c?a+"-"+e+":":a+"-"+e+"-"+c+":";return d?g+b[f]+";":g+b+";"}).toString().replace(/,/g,"")};style.ZeroMargin=function(){return style.CreateCss("margin","0px").toString()};
style.init=function(){style.GanttTableTRStyleTxt=RQStyle.CreateCssTxt("padding","0px")+RQStyle.CreateCssTxt("margin","0px")+RQStyle.CreateCssTxt("border","0px","width");style.GanttTableTDStyleTxt=RQStyle.CreateCssTxt("padding",["0.2em","0.4em"])+RQStyle.CreateCssTxt("margin","0px")+RQStyle.CreateCssTxt("border",["0px","1px","1px","0px"],"width");style.ZeroStyle=RQStyle.CreateCssTxt("padding","0px")+RQStyle.CreateCssTxt("margin","0px")+RQStyle.CreateCssTxt("border","0px","width")+"border-collapse: collapse;border-spacing: 0;width:100%;height:100%;"};
document.mouseButtonPressed=!1;var EXPANDER_WIDTH=12;RadiantQ.Gantt.LevelToIndentWidth=function(a,b){var c=0;0<a&&(c+=a*EXPANDER_WIDTH);!1==b&&(c+=EXPANDER_WIDTH);return c};function Expander(){this._isExpanded=!1}Expander.prototype=new NotifyPropertyChanged;Expander.prototype.IsExpanded=function(a){if(null==a)return this._isExpanded;this._isExpanded!=a&&(this._isExpanded=a,this.OnPropertyChanged("IsExpanded"))};RadiantQ.FlexyGantt={};var rqFG=RadiantQ.FlexyGantt;
rqFG.FlexyNodeData=function(a){NotifyPropertyChanged.apply(this,arguments);this._data=a.data;this.HierarchicalItem=a;var b=1;this._displayIndex=-1;this._guid=RadiantQ.Gantt.guidGenerator();var c,d;this.MaxOverlappingBlocksRowCount=function(a){if(void 0==a||null==a)return b;b=a;this.OnPropertyChanged("MaxOverlappingBlocksRowCount",a)};this.TableRow=function(a){if(void 0==a||null==a)return c;if(!this.IsSelected)return 0;if(void 0!=c){this.IsSelected()&&a.addClass("rq-row-selected ui-state-active");
var b=$(c).height();$(a).height(b)}c=a;this.OnPropertyChanged("TableRow",a)};this.ChartRow=function(a){if(void 0==a||null==a)return d;if(void 0!=d){var b=$(d).height();$(a).height(b)}d=a;this.OnPropertyChanged("ChartRow",a)};this._isSelected=!1;this.IsSelected=function(a){if(void 0==a||null==a)return this._isSelected;this._isSelected!=a&&(this._isSelected=a,this.OnPropertyChanged("IsSelected",a),this.UpdateSelection(a))};this._isMouseIn=!1;this.IsMouseIn=function(a){if(void 0==a||null==a)return this._isMouseIn;
this._isMouseIn!=a&&(this._isMouseIn=a,this.UpdateHoverStyle(a))};this.UpdateHoverStyle=function(a){if(!0==a&&void 0!=a)$(c).addClass("rq-row-hover ui-state-hover"),$(d).find("td").addClass("rq-row-hover ui-state-hover");else if(!1==a||void 0==a)$(c).removeClass("rq-row-hover ui-state-hover"),$(d).find("td").removeClass("rq-row-hover ui-state-hover")};this.UpdateSelection=function(a){if(!0==a&&void 0!=a)$(c).addClass("rq-row-selected ui-state-active"),$(d).find("td").addClass("rq-row-selected ui-state-active");
else if(!1==a||void 0==a)$(c).removeClass("rq-row-selected ui-state-active"),$(d).find("td").removeClass("rq-row-selected ui-state-active")};this.DataPropertyChangeListener=function(a){this.OnPropertyChanged("Data")};this._data.PropertyChanged&&this._data.PropertyChanged.subscribe();this.Dispose=function(){this.DisplayIndex(-1);this._data.PropertyChanged&&this._data.PropertyChanged.unsubscribe(this.DataPropertyChangeListener)};return this};rqFG.FlexyNodeData.prototype=new NotifyPropertyChanged;
rqFG.FlexyNodeData.prototype.IsParentType=function(){var a=this.HierarchicalItem.GetChildList();return null==a||void 0==a?!1:0<a.length||!1==this.HierarchicalItem._parent._fxGantt.ForceParentTemplateEvenIfChildless?!0:!1};rqFG.FlexyNodeData.prototype.IsExpandable=function(){return null!=this.HierarchicalItem._childItems&&0<this.HierarchicalItem._childItems.length};rqFG.FlexyNodeData.prototype.Data=function(){return this._data};
rqFG.FlexyNodeData.prototype.DisplayIndex=function(a){if(null==a)return this._displayIndex;this._displayIndex!=a&&(this._displayIndex=a,this.OnPropertyChanged("DisplayIndex",a))};rqFG.FlexyNodeData.prototype.Level=function(){return this.HierarchicalItem._level};Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c=this.length,d=Number(b)||0,d=0>d?Math.ceil(d):Math.floor(d);for(0>d&&(d+=c);d<c;d++)if(d in this&&this[d]===a)return d;return-1});rqFG=RadiantQ.FlexyGantt;
rqFG.HierarchicalItem=function(a,b,c,d){NotifyPropertyChanged.apply(this,arguments);this.isExpanded=!1;this.data=c;this._level=d;this._childListResolved=!1;this._resolvedChildList=null;this._parent=a;this._parentItem=b;this._childItems=new ObservableCollection;this._forceToCreateNewChildList=!1;var e,f,g=this;this.notifyChange=function(a,b,c){g.OnPropertyChanged("Data."+a,c,b)};this.subscribChangeListener=function(a){for(var b in a){var c=a[b];if(!c)break;if(c.subscribe&&void 0!=c.getSubscriptionsCount&&
0==c.getSubscriptionsCount())if($.isArray(c())&&!this.isExpandable())for(var d=0;d<c().length;d++)this.subscribChangeListener(c()[d]);else c.subscribe(this.notifyChange.bind(c,b,a))}};this.subscribChangeListener(this.data);this.TableRow=function(a){if(void 0==a||null==a)return e;void 0!=this.tableRow&&(this.IsSelected()&&newValue.addClass("rq-row-selected ui-state-active"),a=$(e).height(),$(newValue).height(a));e=newValue};this.ChartRow=function(a){if(void 0==a||null==a)return f;void 0!=f&&(this.IsSelected()&&
newValue.addClass("rq-row-selected ui-state-active"),a=$(f).height(),$(newValue).height(a));f=newValue};_canShow=null;this.CanShowCue=function(a){if(void 0==a||null==a)return _canShow;_canShow!=a&&(_canShow=a,this.OnPropertyChanged("CanShowCue",a))};this.isSelected=!1;this.IsSelected=function(a){if(!0==a&&void 0!=a)$(this.TableRow).addClass("rq-row-selected ui-state-active"),$(this.ChartRow).addClass("rq-row-selected ui-state-active"),this.isSelected=!0;else if(!1==a&&void 0!=a)$(this.TableRow).removeClass("rq-row-selected ui-state-active"),
$(this.ChartRow).removeClass("rq-row-selected ui-state-active"),this.isSelected=!1;else if(void 0==a)return this.isSelected};this.isExpanding=!1;return this};rqFG.HierarchicalItem.prototype=new NotifyPropertyChanged;rqFG.HierarchicalItem.prototype.FlatItemsSource=function(){return this._parent.FlatItemsSource};rqFG.HierarchicalItem.prototype.FlatHierarchicalItemsList=function(){return this._parent.FlatHierarchicalItemsList};
rqFG.HierarchicalItem.prototype.isExpandable=function(){var a=this.GetChildList();return void 0==a||null==a?!1:!0};
rqFG.HierarchicalItem.prototype.GetChildList=function(){!1==this._childListResolved?(this._childListResolved=!0,this._resolvedChildList=null,null!=this._parent._fnChildListResolver&&(this._resolvedChildList=this._parent._fnChildListResolver(this.data,this))):null!=this._parent.dynamicResolver&&!0==this._forceToCreateNewChildList&&(this._forceToCreateNewChildList=!1,this._resolvedChildList=this._parent.dynamicResolver(this.data));return this._resolvedChildList};
rqFG.HierarchicalItem.prototype.IsExpanded=function(a){if(null==a)return this._parent.IsCollapsed.raise(this),this.isExpanded;this.isExpanded!=a&&(!0==a?this.PrepareChildrenHierarchicalList():(this._parent.ClearHierarchyFromList(this,!1),this.isExpanded=!1,this.OnPropertyChanged("IsExpanded",!1)),0!=this._parent.NodeExpansionStateChanged.fn.length&&this._parent.NodeExpansionStateChanged.raise(this));this._parent.IsCollapsed.raise(this)};
rqFG.HierarchicalItem.prototype.PrepareChildrenHierarchicalList=function(){this.isExpandable()&&(this.isExpanding=this.isExpanded=!0,0==this._childItems.length?this.CreateChildList():this.PrepareChildren(),this.isExpanding=!1,this.OnPropertyChanged("IsExpanded",!0))};
rqFG.HierarchicalItem.prototype.CreateChildList=function(){var a=this.GetChildList(),b=this;$.observable(a).bind("insert remove replaceAll",function(a,c){if("insert"==a.type)b.AddItemToChildList(c.index,c.items[0]);else if("remove"==a.type){var f=b._parent.GetFlatHierarchicalItemByData(c.items[0]);b._childItems.remove(f);b._parent.ClearHierarchyFromList(f,!0)}b.CanShowCue(0<b._childItems.length)});for(var c=0;c<a.length;c++)null!=a[c]&&this.AddItemToChildList(c,a[c]);b.CanShowCue(0<b._childItems.length)};
rqFG.HierarchicalItem.prototype.AddItemToChildList=function(a,b){b=new rqFG.HierarchicalItem(this._parent,this,b,this._level+1);this._childItems.insert(a,b);this.isExpanded&&this.PrepareNewFlexyTreeViewItem(b)};rqFG.HierarchicalItem.prototype.PrepareChildren=function(){if(this.isExpanded){this.isExpanding=!0;for(var a=0;a<this._childItems.length;a++)this.PrepareNewFlexyTreeViewItem(this._childItems[a]);this.isExpanding=!1}};
rqFG.HierarchicalItem.prototype.PrepareNewFlexyTreeViewItem=function(a){if(0==this._childItems.indexOf(a)){var b=this.FlatHierarchicalItemsList().indexOf(this);this.FlatHierarchicalItemsList().insert(b+1,a);var c=new rqFG.FlexyNodeData(a);this.FlatItemsSource().insert(b+1,c)}else{c=a;b=-1;do if(b=-1,c=this.GetNextItem(c),null==c)break;else b=this.FlatHierarchicalItemsList().indexOf(c);while(null!=c&&-1==b);null!=c?(this.FlatHierarchicalItemsList().insert(b,a),c=new rqFG.FlexyNodeData(a),this.FlatItemsSource().insert(b,
c)):(this.FlatHierarchicalItemsList().add(a),c=new rqFG.FlexyNodeData(a),this.FlatItemsSource().add(c))}a.corrFlexyNodeData=c;a.isExpandable()&&this._parent._fxGantt.AutoExpandNodes&&a.IsExpanded(!0)};rqFG.HierarchicalItem.prototype.GetNextItem=function(a){a=this._childItems.indexOf(a);return!this.isExpanding&&a+1<this._childItems.length?this._childItems[a+1]:null!=this._parentItem?this._parentItem.GetNextItem(this):this._parent.GetNextItem(this)};
rqFG.HierarchicalItem.prototype.ExpandAll=function(){var a=0;if(this.isExpandable()){this.isExpanding=this.isExpanded=!0;if(0==this._childItems.length)for(var b=this.GetChildList(),c=0;c<b.length;c++){var d=new rqFG.HierarchicalItem(this._parent,this,b[c],this._level+1);this._childItems.add(d);this.isExpanded&&(this.PrepareNewFlexyTreeViewItem(d),d=d.ExpandAll(),a+=d)}else this.PrepareChildren();this.isExpanding=!1;this.OnPropertyChanged("IsExpanded")}return++a};
rqFG.HierarchicalItem.prototype.CollapseAll=function(){if(this.isExpandable()){for(var a=0;a<this._childItems.length;a++)this._childItems[a].CollapseAll();this.IsExpanded(!1)}};
rqFG.HierarchyToList=function(a,b,c){if(null==a)return null;this._fnChildListResolver=b;this._fxGantt=c;this.data=a;this.IsCollapsed=new ObjectEvent("IsCollapsed");this.NodeExpansionStateChanged=new ObjectEvent("NodeExpansionStateChanged");this.FlatHierarchicalItemsList=new ObservableCollection;this.FlatItemsSource=new ObservableCollection;this._topLevelItems=new ObservableCollection;this.FlatItemsSource.CollectionChanged.subscribe(this.FlatItemsSourceCollectionChange);this.FlatHierarchicalItemsList.CollectionChanged.subscribe(this.FlatHierarchicalItemsListCollectionChange);
this.init(a);var d=this;$.observable(a).bind("insert remove replaceAll",function(a,b){if("insert"==a.type){var c=new rqFG.HierarchicalItem(d,null,b.items[0],0);d._topLevelItems.insert(b.index,c);d.createList(c,b.index)}"remove"==a.type&&(c=d.GetFlatHierarchicalItemByData(b.items[0]),d._topLevelItems.remove(c),d.ClearHierarchyFromList(c,!0))})};rqFG.HierarchyToList.prototype.GetItemFromDataSource=function(a){if((a=this.GetFlatHierarchicalItemByData(a))&&a.corrFlexyNodeData)return a.corrFlexyNodeData};
rqFG.HierarchyToList.prototype.GetFlatHierarchicalItemByData=function(a){for(var b=this.FlatHierarchicalItemsList,c=0;c<b.length;c++){var d=b[c];if(d.data===a)return d}};
rqFG.HierarchyToList.prototype.init=function(a){0<this.FlatItemsSource.length&&0<this.FlatHierarchicalItemsList.length&&(this.FlatItemsSource.remove(0,this.FlatItemsSource.length),this.FlatHierarchicalItemsList.remove(0,this.FlatHierarchicalItemsList.length));if(jQuery.isArray(a))for(var b=0;b<a.length;b++){var c=new rqFG.HierarchicalItem(this,null,a[b],0);this._topLevelItems.add(c);this.createList(c,b)}else a=new rqFG.HierarchicalItem(this,null,a,0),this._topLevelItems.add(a),this.FlatHierarchicalItemsList.add(a),
a=new rqFG.FlexyNodeData(a),this.FlatItemsSource.add(a)};
rqFG.HierarchyToList.prototype.createList=function(a,b){void 0==this._fxGantt.AutoExpandNodes&&(this._fxGantt.AutoExpandNodes=!0);var c=null;if(0==b)this.FlatHierarchicalItemsList.insert(0,a),c=new rqFG.FlexyNodeData(a),this.FlatItemsSource.insert(0,c);else if(c=this.GetNextItem(a),null!=c){var d=this.FlatHierarchicalItemsList.indexOf(c),c=new rqFG.FlexyNodeData(a);this.FlatHierarchicalItemsList.insert(d,a);this.FlatItemsSource.insert(d,c)}else this.FlatHierarchicalItemsList.add(a),c=new rqFG.FlexyNodeData(a),
this.FlatItemsSource.add(c);null!=c&&this._fxGantt.AutoExpandNodes&&c.HierarchicalItem.IsExpanded(!0)};rqFG.HierarchyToList.prototype.FlatHierarchicalItemsListCollectionChange=function(a,b){for(var c=0;c<b.items.length;c++);};rqFG.HierarchyToList.prototype.FlatItemsSourceCollectionChange=function(a,b){if("insert"==a.type)for(var c=0;c<b.items.length;c++)b.items[c].HierarchicalItem.corrFlexyNodeData=b.items[c];else for(c=0;c<b.items.length;c++);};
rqFG.HierarchyToList.prototype.ClearHierarchyFromList=function(a,b){if(b){var c=this.FlatHierarchicalItemsList,d=c.indexOf(a),d=c[d];c.remove(d);c=this.FlatItemsSource;d=c.indexOf(a.corrFlexyNodeData);d=c[d];c.remove(d)}if(a.isExpanded)for(a.isExpanded=!1,c=0;c<a._childItems.length;c++)this.ClearHierarchyFromList(a._childItems[c],!0)};rqFG.HierarchyToList.prototype.GetNextItem=function(a){a=this._topLevelItems.indexOf(a);return this._topLevelItems.length>a+1?this._topLevelItems[a+1]:null};
rqFG.HierarchyToList.prototype.ExpandAll=function(){for(var a=0;a<this.FlatHierarchicalItemsList.length;){var b=this.FlatHierarchicalItemsList[a];b.isExpandable()&&(b=b.ExpandAll(),a+=b-1);a++}};rqFG.HierarchyToList.prototype.CollapseAll=function(){};RadiantQ.FlexyGantt.ConvertToValidTimes=function(a,b,c,d,e){d.Value=b.clone();e.Value=b.addMilliseconds(c.totalMilliseconds)};RadiantQ.FlexyGantt.TaskItemControl={};RadiantQ.FlexyGantt.TaskItemControl.TaskBar_BorderTopWidth=1;
RadiantQ.FlexyGantt.TaskItemControl.TaskBar_BorderBottomWidth=1;RadiantQ.FlexyGantt.TaskItemControl.ParentBar_BorderTopWidth=0;RadiantQ.FlexyGantt.TaskItemControl.ParentBar_BorderBottomWidth=0;if("Microsoft Internet Explorer"==navigator.appName){var ieVersion=parseInt(navigator.userAgent.split(";")[1].split(" ")[2]);window.msie={version:ieVersion};9>ieVersion&&window.console&&console.error("It appears that the gantt is loaded in a IE browser version earlier than IE9, this is not supported. Or you might be running IE 9+ in Compatibility View mode, which is also not supported by the gantt.")}
var _marginForBars=2;try{Object.defineProperty(RadiantQ.FlexyGantt.TaskItemControl,"MarginForBars",{get:function(){return _marginForBars},set:function(a){0>a||5<a||(_marginForBars=a)}})}catch(e$$16){window.console&&console.error("Gantt will load only in browsers: IE: 9+, FF: 11+, Chrome: 11+, Safari: 4.0.4(531.21.10)+. \n Or you might be running IE 9+ in Compatibility View mode, which is also not supported by the gantt.")}
!1==RadiantQ.CanUseDefineProperty&&(RadiantQ.FlexyGantt.TaskItemControl.MarginForBars=2);RadiantQ.FlexyGantt.OverlappedTasksRenderingOptimization={None:"None",ShrinkHeight:"ShrinkHeight"};
RadiantQ.FlexyGantt.ItemsSourceListening=function(a,b,c,d){ObservableCollection.apply(this,arguments);this._fg=a;this._sourceItems=b;this._startTimeBinding=c;this._endTimeBinding=d;b&&this._sourceItems.CollectionChanged&&this._sourceItems.CollectionChanged.subscribe(this.TimeRangeBasedItemsFilter_CollectionChanged,this)};RadiantQ.FlexyGantt.ItemsSourceListening.prototype=new ObservableCollection;Object.defineProperty(RadiantQ.FlexyGantt.ItemsSourceListening.prototype,"FlexyGantt",{get:function(){return this._fg}});
Object.defineProperty(RadiantQ.FlexyGantt.ItemsSourceListening.prototype,"SourceItems",{get:function(){return this._sourceItems}});Object.defineProperty(RadiantQ.FlexyGantt.ItemsSourceListening.prototype,"StartTimeBinding",{get:function(){return this._startTimeBinding}});Object.defineProperty(RadiantQ.FlexyGantt.ItemsSourceListening.prototype,"EndTimeBinding",{get:function(){return this._endTimeBinding}});
RadiantQ.FlexyGantt.ItemsSourceListening.prototype.TimeRangeBasedItemsFilter_CollectionChanged=function(a,b){this.OnSourceItemsCollectionChanged(b)};RadiantQ.FlexyGantt.ItemsSourceListening.prototype.OnSourceItemsCollectionChanged=function(a){};
RadiantQ.FlexyGantt.TimeRangeFilteredItems=function(a,b,c,d){RadiantQ.FlexyGantt.ItemsSourceListening.apply(this,a,b,c,d);this._fg=a;this._sourceItems=b;this._startTime=c;this._endTime=d;var e=this;a=$(".rq-ganttChart",this._fg.element);$(a).bind("ganttchartrefreshui",function(a,b){e.Filter()});this.Filter=function(){this.clear();var a=this._fg.RaiseFilterTasksByTimeRange(this._sourceItems);if(a&&0!=a.length)for(var b=0;b<a.length;b++)this.insert(this.length,a[b]);else for(a=0;a<this._sourceItems.length;a++)this.IsInTimeRange(this._sourceItems[a])&&
this.insert(this.length,this._sourceItems[a])};this._fg.GanttChartIsLoaded&&this.Filter();this.GanttChart_Loaded=function(a,b){e._fg.GanttChartLoaded.unsubscribe(this.GanttChart_Loaded);e.Filter()};this.IsInTimeRange=function(a){var b=a.StartTime;a=a.EndTime;var c=RQTimeSpan.parse(this._fg.options.TimeRangeFilteredTasksTimeBuffer),d=new RQTimeSpan(-c.totalMilliseconds);return b==DateTime.MinValue||a==DateTime.MinValue||b<$(this._fg.GetGanttChart()).data().radiantqGanttChart.options.ComputedStartTime.addTimeSpan(d)&&
a<$(this._fg.GetGanttChart()).data().radiantqGanttChart.options.ComputedStartTime.addTimeSpan(d)||b>$(this._fg.GetGanttChart()).data().radiantqGanttChart.options.ComputedEndTime.addTimeSpan(c)&&a>$(this._fg.GetGanttChart()).data().radiantqGanttChart.options.ComputedEndTime.addTimeSpan(c)?!1:!0};this.OnSourceItemsCollectionChanged=function(a,b){switch(b.Action){case NotifyCollectionChangedAction.Add:for(var c in b.NewItems)this.IsInTimeRange(c)&&this.add(c);break;case NotifyCollectionChangedAction.Remove:for(c in b.OldItems)this.add(c);
break;case NotifyCollectionChangedAction.Reset:case NotifyCollectionChangedAction.Replace:this.Filter()}}};RadiantQ.FlexyGantt.TimeRangeFilteredItems.prototype=new RadiantQ.FlexyGantt.ItemsSourceListening;
RadiantQ.FlexyGantt.FilterTasksByTimeRangeEventArgs=function(a,b,c){var d=a;Object.defineProperty(this,"SourceList",{get:function(){if(d)return d;d=null},set:function(a){d=a},enumerable:!0,configurable:!0});var e=b;Object.defineProperty(this,"TimeRangeStart",{get:function(){if(e)return e;e=null},set:function(a){e=a},enumerable:!0,configurable:!0});var f=c;Object.defineProperty(this,"TimeRangeEnd",{get:function(){if(f)return f;f=null},set:function(a){f=a},enumerable:!0,configurable:!0});var g=null;
Object.defineProperty(this,"FilteredList",{get:function(){if(g)return g;g=null},set:function(a){g=a},enumerable:!0,configurable:!0})};
function RQTimeSpan(a,b,c,d,e){this._seconds=this._minutes=this._hours=0;this._isInit=!0;if(1==arguments.length){var f=0>a?-1:1;this.milliseconds=Math.abs(a);this.days=Math.floor(this.milliseconds/864E5)*f;this.milliseconds%=864E5;this.hours=Math.floor(this.milliseconds/36E5)*f;this.milliseconds%=36E5;this.minutes=Math.floor(this.milliseconds/6E4)*f;this.milliseconds%=6E4;this.seconds=Math.floor(this.milliseconds/1E3)*f;this.milliseconds%=1E3}else 4==arguments.length?(this.days=a,this.hours=b,this.minutes=
c,this.seconds=d,this.milliseconds=0):5==arguments.length?(this.days=a,this.hours=b,this.minutes=c,this.seconds=d,this.milliseconds=e):this.milliseconds=0;return this}
(function(){var a=new RQTimeSpan(10675199,2,48,5,477);Object.defineProperty(RQTimeSpan,"MaxValue",{get:function(){return a},set:function(){},enumerable:!0,configurable:!1});var b=new RQTimeSpan(-10675199,-2,-48,-5,-477);Object.defineProperty(RQTimeSpan,"MinValue",{get:function(){return b},set:function(){},enumerable:!0,configurable:!1});var c=new RQTimeSpan(0);Object.defineProperty(RQTimeSpan,"Zero",{get:function(){return c},set:function(){},enumerable:!0,configurable:!1})})();
RQTimeSpan.parse=function(a){if(a instanceof RQTimeSpan)return a;if("string"!=typeof a)return RQTimeSpan.Zero;try{var b=a.split(".");if(2==b.length){var c=parseInt(b[0]),d=b[1].split(":"),e=parseInt(d[0]),f=parseInt(d[1]),g=parseInt(d[2]);return new RQTimeSpan(c,e,f,g,0)}d=b[0].split(":");e=parseInt(d[0]);f=parseInt(d[1]);g=parseInt(d[2]);return new RQTimeSpan(0,e,f,g,0)}catch(h){return RQTimeSpan.Zero}};RQTimeSpan.fromTicks=function(a){return new RQTimeSpan(a/1E4)};
RQTimeSpan.FromDays=function(a){if(!a)return RQTimeSpan.Zero;var b=0>a?-1:1;a=Math.abs(a);return new RQTimeSpan(b*Math.floor(a),24*b*(a%1),0,0)};RQTimeSpan.FromHours=function(a){if(!a)return RQTimeSpan.Zero;var b=0>a?-1:1;a=Math.abs(a);return new RQTimeSpan(0,b*Math.floor(a),60*b*(a%1),0)};Object.defineProperty(RQTimeSpan.prototype,"hours",{get:function(){return this._hours},set:function(a){var b=a%1;b&&(this.minutes=60*b);for(;24<=a;)this.days++,a-=24;b=0>a?-1:1;a=Math.abs(a);this._hours=b*Math.floor(a)}});
Object.defineProperty(RQTimeSpan.prototype,"minutes",{get:function(){return this._minutes},set:function(a){var b=a%1;b&&(this.seconds=60*b);for(;60<=a;)this.hours++,a-=60;this._isInit&&(a+=this._minutes);b=0>a?-1:1;a=Math.abs(a);this._minutes=b*Math.floor(a)}});Object.defineProperty(RQTimeSpan.prototype,"seconds",{get:function(){return this._seconds},set:function(a){for(;60<=a;)this.minutes++,a-=60;this._isInit&&(a+=this._seconds);this._seconds=Math.round(a)}});
Object.defineProperty(RQTimeSpan.prototype,"totalMilliseconds",{get:function(){return 864E5*this.days+36E5*this._hours+6E4*this._minutes+1E3*this._seconds},set:function(){},enumerable:!0,configurable:!0});Object.defineProperty(RQTimeSpan.prototype,"Ticks",{get:function(){return 1E4*this.totalMilliseconds},set:function(){},enumerable:!0,configurable:!0});RQTimeSpan.prototype.valueOf=function(){return this.totalMilliseconds};
RQTimeSpan.prototype.getTotalDays=function(){return this.totalMilliseconds/864E5};RQTimeSpan.prototype.getTotalHours=function(){return this.totalMilliseconds/36E5};RQTimeSpan.prototype.getTotalMinutes=function(){return this.totalMilliseconds/6E4};RQTimeSpan.prototype.getTotalSeconds=function(){return this.totalMilliseconds/1E3};RQTimeSpan.prototype.equals=function(a){return 0===this.compareTo(a)};RQTimeSpan.prototype.add=function(a){return null===a?this:this.addSeconds(a.totalMilliseconds/1E3)};
RQTimeSpan.prototype.subtract=function(a){return null===a?this:this.addSeconds(-a.totalMilliseconds/1E3)};RQTimeSpan.prototype.addDays=function(a){return new RQTimeSpan(this.totalMilliseconds+864E5*a)};RQTimeSpan.prototype.addHours=function(a){return new RQTimeSpan(this.totalMilliseconds+36E5*a)};RQTimeSpan.prototype.addMinutes=function(a){return new RQTimeSpan(this.totalMilliseconds+6E4*a)};RQTimeSpan.prototype.addSeconds=function(a){return new RQTimeSpan(this.totalMilliseconds+1E3*a)};
RQTimeSpan.prototype.addMilliseconds=function(a){return new RQTimeSpan(this.totalMilliseconds+a)};RQTimeSpan.prototype.get12Hour=function(){return 12<this.hours?this.hours-12:0===this.hours?12:this.hours};RQTimeSpan.prototype.getDesignator=function(){return 12>this.hours?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator};RQTimeSpan.prototype.isGreaterThan=function(a){return this.totalMilliseconds>a.totalMilliseconds?!0:!1};
RQTimeSpan.prototype.isGreaterThanOrEqualTo=function(a){return this.totalMilliseconds>=a.totalMilliseconds?!0:!1};RQTimeSpan.prototype.isLessThan=function(a){return this.totalMilliseconds<a.totalMilliseconds?!0:!1};RQTimeSpan.prototype.compareTo=function(a){a||(a=RQTimeSpan.Zero);return this.isGreaterThan(a)?1:this.isLessThan(a)?-1:0};
RQTimeSpan.prototype.toString=function(){var a=10>this.hours?"0"+this.hours:this.hours,b=10>this.minutes?"0"+this.minutes:this.minutes,c=10>this.seconds?"0"+this.seconds:this.seconds;return 0<this.days?""+this.days+"."+a+":"+b+":"+c+"":""+a+":"+b+":"+c+""};RQTimeSpan.prototype.toJSON=function(){return this.toString()};RQTimeSpan.prototype.getEqualNegative=function(){return new RQTimeSpan(-this.totalMilliseconds)};window.TimeSpan||(TimeSpan=RQTimeSpan);RadiantQ.Gantt.Utils.TimeComputingUtils={};
RadiantQ.Gantt.Utils.TimeComputingUtils.AddLagToStartTime=function(a,b,c){return null==c?a.addTimeSpan(b):b.isGreaterThanOrEqualTo(RQTimeSpan.Zero)?c.GetEnd(a,b):c.GetStart(a,new RQTimeSpan(-b.totalMilliseconds))};
RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToUnitsOfBaseType=function(a,b,c){var d=RadiantQ.Gantt;if(b==d.TimeScaleType.Weeks)switch(a){case d.TimeScaleType.Minutes:return 10080*c;case d.TimeScaleType.Hours:return 168*c;case d.TimeScaleType.Days:return 7*c;case d.TimeScaleType.Weeks:return c;case d.TimeScaleType.Months:case d.TimeScaleType.Years:return 1}else if(b==d.TimeScaleType.Days)switch(a){case d.TimeScaleType.Minutes:return 1440*c;case d.TimeScaleType.Hours:return 24*c;case d.TimeScaleType.Days:return c;
case d.TimeScaleType.Weeks:return c/7;case d.TimeScaleType.Months:case d.TimeScaleType.Years:return 1}else if(b==d.TimeScaleType.Hours)switch(a){case d.TimeScaleType.Minutes:return 60*c;case d.TimeScaleType.Hours:return c;case d.TimeScaleType.Days:return c/24;case d.TimeScaleType.Weeks:return c/168;case d.TimeScaleType.Months:case d.TimeScaleType.Years:return 1}else if(b==d.TimeScaleType.Minutes)switch(a){case d.TimeScaleType.Minutes:return c;case d.TimeScaleType.Hours:return c/60;case d.TimeScaleType.Days:return c/
1440;case d.TimeScaleType.Weeks:return c/10080;case d.TimeScaleType.Months:case d.TimeScaleType.Years:return 1}throw"Not yet supported 2";};
RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertTimeSpanToTimeUnits=function(a,b){var c=RadiantQ.Gantt;switch(a){case c.TimeScaleType.Minutes:return b.getTotalMinutes();case c.TimeScaleType.Hours:return b.getTotalHours();case c.TimeScaleType.Days:return b.getTotalDays();case c.TimeScaleType.Months:return b.getTotalDays()/30;case c.TimeScaleType.Weeks:return b.getTotalDays()/7;case c.TimeScaleType.Years:return b.getTotalDays()/365;default:throw"Missing case for TimeScaleType: "+a+" in ConvertTimeSpanToTimeUnits";
}};
RadiantQ.Gantt.Utils.TimeComputingUtils.IsWorkingTime=function(a,b,c){var d=RadiantQ.Gantt;if(null!=c)switch(c=null==c?a:c.ConvertToNextWorkingTime(a),b){case d.TimeScaleType.Minutes:return!a.Date().compareTo(c.Date())&&c.getHours()==a.getHours()&&c.getMinutes()==a.getMinutes();case d.TimeScaleType.Hours:return!a.Date().compareTo(c.Date())&&c.getHours()==a.getHours();case d.TimeScaleType.Days:return!a.Date().compareTo(c.Date());case d.TimeScaleType.Weeks:return this.FirstDayOfWeek(c).equals(this.FirstDayOfWeek(a));case d.TimeScaleType.Months:return c.getFullYear()==
a.getFullYear()&&c.getMonth()==a.getMonth();case d.TimeScaleType.Years:return c.getFullYear()==a.getFullYear()}return!0};RadiantQ.Gantt.Utils.TimeComputingUtils.FirstDayOfWeek=function(a){return a.Date().clone().addDays(-a.getDay())};RadiantQ.Gantt.Utils.TimeComputingUtils.GetRemainingDaysInWeek=function(a){var b=a.getDay(),b=b-Date.CultureInfo.firstDayOfWeek;0>b&&(b=7+b);return 7-b-a.getHours()/24-a.getMinutes()/1440};
RadiantQ.Gantt.Utils.TimeComputingUtils.GetRemainingDaysInMonth=function(a){var b=(new Date(a.getFullYear(),a.getMonth(),1)).addMonths(1).addDays(-1);return rqTCUtils.GetTimeSpan(a,b).getTotalDays()+1};RadiantQ.Gantt.Utils.TimeComputingUtils.GetRemainingDaysInYear=function(a){var b=(new Date(a.getFullYear(),0,1)).clone().addYears(1).addDays(-1);return rqTCUtils.GetTimeSpan(a,b).getTotalDays()+1};
RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToFractionalWorkingDay=function(a,b,c,d){if(b.equals(c))return 0;if(null==d)return(new RQTimeSpan(c.totalMilliseconds-b.totalMilliseconds)).getTotalHours()/24;var e=new RadiantQ.Gantt.TimePeriod(a.addTimeSpan(b),a.addTimeSpan(c)),f=RQTimeSpan.Zero;a=d.WorkTimeScheduleProvider(a);if(null!=a){b=a._intervals;for(c=0;c<b.length;c++)(d=b[c].Intersect(e))&&(f=f.add(d.Duration));return f.getTotalHours()/a.Duration.getTotalHours()}return(c.Ticks-b.Ticks)/RQTimeSpan.FromDays(1).Ticks};
RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToFractionalDurationInHours=function(a,b,c){if(null==c)return 24*b;a=c.WorkTimeScheduleProvider(a);return null!=a?a.Duration.getTotalHours()*b:0};RadiantQ.Gantt.Utils.TimeComputingUtils.GetLeadingNonWorkingHours=function(a,b){if(null==b)return RQTimeSpan.Zero;var c=b.WorkTimeScheduleProvider(a.Date);return null!=c?c.Start-a.Date:RQTimeSpan.Zero};
RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToApproxUnitsOfBaseType=function(a,b,c){var d=RadiantQ.Gantt;if(b==d.TimeScaleType.Years)switch(a){case d.TimeScaleType.Minutes:return 525600*c;case d.TimeScaleType.Hours:return 8760*c;case d.TimeScaleType.Days:return 365*c;case d.TimeScaleType.Weeks:return 52*c;case d.TimeScaleType.Months:return 12*c;case d.TimeScaleType.Years:return c}else if(b==d.TimeScaleType.Months)switch(a){case d.TimeScaleType.Minutes:return 43200*c;case d.TimeScaleType.Hours:return 720*
c;case d.TimeScaleType.Days:return 31*c;case d.TimeScaleType.Weeks:return 4*c;case d.TimeScaleType.Months:return c;case d.TimeScaleType.Years:return 1}return d.Utils.TimeComputingUtils.ConvertToUnitsOfBaseType(a,b,c)};RadiantQ.Gantt.Utils.TimeComputingUtils.CeilToNextDay=function(a){var b=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0);return 0<a.compareTo(b)?b.clone().addDays(1):a};
RadiantQ.Gantt.Utils.TimeComputingUtils.CeilToNextHour=function(a){var b=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),0,0);0<a.compareTo(b)&&b.addHours(1);return b};RadiantQ.Gantt.Utils.TimeComputingUtils.CeilToNextMinute=function(a){var b=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),0);0<a.compareTo(b)&&b.addMinutes(1);return b};RadiantQ.Gantt.Utils.TimeComputingUtils.GetStartOfNextYear=function(a){return(new Date(a.getFullYear(),0,1,0,0,0)).addYears(1)};
RadiantQ.Gantt.Utils.TimeComputingUtils.GetStartOfNextWeek=function(a){a=a.addDays(RadiantQ.Gantt.Utils.TimeComputingUtils.GetRemainingDaysInWeek(a));return RadiantQ.Gantt.Utils.TimeComputingUtils.CeilToNextDay(a)};RadiantQ.Gantt.Utils.TimeComputingUtils.GetStartOfNextMonth=function(a){return(new Date(a.getFullYear(),a.getMonth(),1,0,0,0)).addMonths(1)};
RadiantQ.Gantt.Utils.TimeComputingUtils.GetTimeBreaks=function(a,b,c,d){if(!1!=a instanceof Date&&!1!=b instanceof Date){d||(d=[]);var e=new RQTimeSpan(b-a);if(e<=RQTimeSpan.Zero)return!1;if(null!=c){var f=c.ConvertToNextWorkingTime(a).equals(a)?!0:!1;d.push(a);a=c.ConvertToNextWorkingTimeIntervals(a,e);if(0==a.length)return!1;!f&&a[0].Start.isLessThan(b)&&d.push(a[0].Start);for(c=1;c<a.length;c++)if(!1==a[c].Start.equals(a[c-1].End)){if(0<=a[c-1].End.compareTo(b))break;d.push(a[c-1].End);if(0<=a[c].Start.compareTo(b))break;
d.push(a[c].Start)}c==a.length&&a[c-1].End.isLessThan(b)&&d.push(a[c-1].End);d.push(b);return f}d.push(a);d.push(b);return!0}};RadiantQ.Gantt.BindingMode={OneWay:"OneWay",TwoWay:"TwoWay"};
RadiantQ.Gantt.Utils.ValueBinder=function(a,b,c,d,e){if(null!=b)return this.model=e,this._isValueUpdating=!1,this.property=b.Property,b.Converter&&(b.Convert=b.Converter.Convert,b.ConvertBack=b.Converter.ConvertBack),this.BindingMode=d,this.boundedObj=a,this._binding=this.OriginalBinding=b,this._isdisposed=!1,this._value=null,this.ValueChanged=new ObjectEvent("ValueChanged"),e&&e.canInsertPropertyChangeTriggeringPropertiesInData&&(this.PropertyChangedTrigger=new InsertPropertyChangedTriggeringProperty(this,
a,this.property)),this._value=b.Convert&&"function"==typeof b.Convert?"function"==typeof a[this.property]?b.Convert.call(a,a[this.property]()):b.Convert.call(a,a[this.property],a):"function"==typeof a[this.property]?a[this.property]():a[this.property],a.PropertyChanged&&!1==a.PropertyChanged.isSubscribed(this.sourcePropertyChanged,this)&&a.PropertyChanged.subscribe(this.sourcePropertyChanged,this),a._boundProps||(a._boundProps={}),a._boundProps[this.property]=this,this};
RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.Gantt.Utils.ValueBinder.prototype,"IsBound",{get:function(){return null!=this._binding},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Utils.ValueBinder.prototype,"Binding",{get:function(){return this._binding},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Utils.ValueBinder.prototype,"Value",{get:function(){return this._value},set:function(a){if(this._value!==
a){this._isValueUpdating=!0;var b=this.boundedObj[this.property];!this._binding.TargetNullValue||null!=b&&void 0!=b||(b=this._binding.TargetNullValue);if(this._binding.Convert)this._binding.TargetType&&a instanceof this._binding.TargetType?(this._value=this._binding.Convert.call(this.boundedObj,a,this.boundedObj),"function"==typeof b?b(a):this.boundedObj[this.property]=a):b&&b.constructor===a.constructor||"function"==typeof b&&b()&&b().constructor===a.constructor?(this._value=this._binding.Convert.call(this.boundedObj,
a,this.boundedObj),"function"==typeof b?b(a):this.boundedObj[this.property]=a):(this._isValueUpdating=!1,this.BindingMode==RadiantQ.Gantt.BindingMode.TwoWay&&this._binding.ConvertBack&&(a=this._binding.ConvertBack.call(this.boundedObj,a,this.boundedObj),"function"==typeof b?b(a):this.boundedObj[this.property]=a));else{if(null==b||void 0==b)this.boundedObj[this.property]=a;this._value=a;"function"==typeof b?b(a):this.boundedObj[this.property]=this._value}this._isValueUpdating&&this.ValueChanged&&this.ValueChanged.raise(this,
this._value);this._isValueUpdating=!1}},enumerable:!0,configurable:!0}));RadiantQ.Gantt.Utils.ValueBinder.prototype.sourcePropertyChanged=function(a,b){var c=this.boundedObj;if(this.model&&this.model.GetActivityById&&(c=-1,c="function"==typeof a.ID?a.ID():a.ID,c=this.model.GetActivityById(c),null==c||0<c.ChildActivities.length&&("StartTime"==b.PropertyName||"EndTime"==b.PropertyName||"Effort"==b.PropertyName)))return;(c=c._boundProps[b.PropertyName])&&!1==c._isValueUpdating&&(c.Value=b.Value)};
RadiantQ.Gantt.Utils.ValueBinder.prototype.Dispose=function(){this.model.canInsertPropertyChangeTriggeringPropertiesInData&&this.UnBindDataWithGantt();this._isdisposed=!0;delete this.PropertyChanged;delete this.ValueChanged;delete this.Value};RadiantQ.Gantt.Utils.ValueBinder.prototype.UnBindDataWithGantt=function(){var a=this._binding.Property,b=this.boundedObj["Bounded_"+a];delete this.boundedObj[a];delete this[a+"_Binder"];delete this.boundedObj[a+"_Binder"];this.boundedObj[a]=b};
function InsertPropertyChangedTriggeringProperty(a,b,c){var d=b[c];if(void 0===d){var e="function"==typeof b.ID,f=e?{}:b;!0==RadiantQ.CanUseDefineProperty&&Object.defineProperty(f,c,{get:function(){return"function"==typeof d?d():d},set:function(a){"function"==typeof d?d()!=a&&(d(a),this.PropertyChanged.raise(this,{PropertyName:c,Value:a})):d!=a&&(d=a,this.PropertyChanged.raise(this,{PropertyName:c,Value:a}))},enumerable:!0,configurable:!0});e&&(e=ko.mapping.fromJS(f[c]),b[c]=e,e=function(a){b.PropertyChanged.raise(b,
{PropertyName:c,Value:a})},b[c].subscribe(e))}else"function"==typeof d?(e=function(a){b.PropertyChanged.raise(b,{PropertyName:c,Value:a})},b[c].subscribe(e)):Object.defineProperty(b,c,{get:function(){return"function"==typeof d?d():d},set:function(a){"function"==typeof d?d()!=a&&(d(a),b.PropertyChanged.raise(this,{PropertyName:c,Value:a})):d!=a&&(d=a,b.PropertyChanged.raise(this,{PropertyName:c,Value:a}))},enumerable:!0,configurable:!0});a._isdisposed=!1;a.PropertyChanged=new ObjectEvent("PropertyChanged");
b.PropertyChanged||(b.PropertyChanged=new ObjectEvent("PropertyChanged"),Object.defineProperty(b,"PropertyChanged",{enumerable:!1}));!1==b.PropertyChanged instanceof ObjectEvent&&(b.PropertyChanged=new ObjectEvent("PropertyChanged"),Object.defineProperty(b,"PropertyChanged",{enumerable:!1}))}Date.prototype.Date=function(){return new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0)};
Date.prototype.addTimeSpan=function(a){return a?this.clone().add({millisecond:a.millisecond||a.milliseconds,seconds:a.seconds,minutes:a.minutes,hours:a.hours,days:a.days}):this};Date.MaxValue=new Date(9999,11,30,11,59,59);Date.MinValue=new Date(1E3,0,1,12,0,0);var DateTime={};DateTime.MaxValue=new Date(9999,11,30,11,59,59);DateTime.MinValue=new Date(1E3,0,1,12,0,0);Date.prototype.isGreaterThan=function(a){return 1==this.compareTo(a)?!0:!1};
Date.prototype.isLessThan=function(a){return-1==this.compareTo(a)?!0:!1};Date.prototype.subtract=function(a){return this-a};String.prototype.trim=function(){if(0==arguments.length)return this.replace(/^\s+|\s+$/,"");for(var a=this,b=0;b<arguments.length;b++)a=a.replace(arguments[b],"");return a};String.prototype.trimEnd=function(){if(0==arguments.length)return this.replace(/^\s+|\s+$/,"");var a=this.lastIndexOf(arguments[0]),b=this.slice(0,a),a=this.slice(a+1);return b+a};
RadiantQ.CanUseDefineProperty&&(Object.defineProperty(String,"trim",{enumerable:!1}),Object.defineProperty(String,"trimEnd",{enumerable:!1}));try{window.JSON.toXML=function(a,b,c){if(a instanceof Array){for(var d="<"+b+">",e=0;e<a.length;e++){var f=a[e],d=d+"\n",g="<"+c+" ",h;for(h in f)void 0!=f[h]&&(g+=h+'="'+f[h]+'" ');g+="/>";d+=g}return'<?xml version="1.0" encoding="utf-8" ?>\n'+(d+("\n</"+b+">"))}}}catch(e$$22){}
RadiantQ.RQ_ObservableCollection=function(a){Array.call(a);a.DataSource=a;a.CollectionChanged=new ObjectEvent("CollectionChanged");a.push=function(a){Array.prototype.push.call(this,a);args={Action:"Add",NewItems:[a]};this.CollectionChanged.raise(this,args)};a.splice=function(a,c,d){var e=[],e=void 0==d?Array.prototype.splice.call(this,a,c):Array.prototype.splice.call(this,a,c,d);args={};d&&(args.Action="Add",args.NewItems=d instanceof Array?d:[d]);c&&0<c&&(args.Action="Remove",args.OldItems=e);this.CollectionChanged.raise(this,
args)};a.pop=function(){var a=Array.prototype.pop.call(this);args={};a&&(args.Action="Remove",args.OldItems=[a]);this.CollectionChanged.raise(this,args);return a};a.remove=function(a){var c=Array.prototype.remove.call(this,a);args={};a&&(args.Action="Remove",args.OldItems=[a]);this.CollectionChanged.raise(this,args);return c};return a};RadiantQ.RQ_ObservableCollection.prototype=[];
window.ko&&(ko.bindingHandlers.GanttControl={init:function(a,b,c,d,e){$(a).GanttControl(b())},update:function(a,b,c,d,e){}},ko.bindingHandlers.FlexyGantt={init:function(a,b,c,d,e){$(a).FlexyGantt(b())},update:function(a,b,c,d,e){}});
RadiantQ.Gantt.Utils.SaveCanvasAsImage=function(a,b){if(a.msToBlob&&window.navigator.msSaveOrOpenBlob)window.ganttBlob=a.msToBlob(),window.navigator.msSaveOrOpenBlob(ganttBlob,b);else if(a.mozGetAsFile||window.webkitURL){window.readyState=0;var c=document.createElementNS("http://www.w3.org/1999/xhtml","a");c.href=a.toDataURL("image/png");c.download=b;var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null);c.dispatchEvent(d);window.readyState=2;
setTimeout(function(){window.close()},1E3)}};var ns_gantt=RadiantQ.Gantt,rqTCUtils=RadiantQ.Gantt.Utils.TimeComputingUtils;RadiantQ.Gantt.Global={};
RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToUnitsOfBaseScaleType=function(a,b,c,d){var e=b>c,f=0;if(e){var g=c;c=b;b=g}var g=new Date(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0),h=new Date(c.getFullYear(),c.getMonth(),c.getDate(),0,0,0);switch(a){case ns_gantt.TimeScaleType.Minutes:f=rqTCUtils.GetTimeSpan(b,c).getTotalMinutes();break;case ns_gantt.TimeScaleType.Hours:f=rqTCUtils.GetTimeSpan(b,c).getTotalHours();break;case ns_gantt.TimeScaleType.Days:h.equals(g)?f=rqTCUtils.ConvertToFractionalWorkingDay(h,
rqTCUtils.GetTimeSpan(g,b),rqTCUtils.GetTimeSpan(h,c),d):(a=rqTCUtils.ConvertToFractionalWorkingDay(g,rqTCUtils.GetTimeSpan(g,b),new RQTimeSpan(0,24,0,0),d),a+=rqTCUtils.GetTimeSpan(g,c).days-1,f=a+=rqTCUtils.ConvertToFractionalWorkingDay(h,RQTimeSpan.Zero,rqTCUtils.GetTimeSpan(h,c),d));break;case ns_gantt.TimeScaleType.Weeks:f=rqTCUtils.ConvertToUnitsOfBaseScaleType(ns_gantt.TimeScaleType.Days,b,c,d)/7;break;case ns_gantt.TimeScaleType.Years:f=rqTCUtils.ConvertToUnitsOfBaseScaleType(ns_gantt.TimeScaleType.Days,
b,c,d)/365}e&&(f=-f);return f};RadiantQ.Gantt.Utils.TimeComputingUtils.GetTimeSpan=function(a,b){b=rqTCUtils.GetAdjustEndForDSTChange(a,b);return new RQTimeSpan(b-a)};RadiantQ.Gantt.Utils.TimeComputingUtils.GetAdjustEndForDSTChange=function(a,b){var c=a.getTimezoneOffset(),d=b.getTimezoneOffset();return c!=d?b.clone().addHours((c-d)/60):b};
RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertTimeUnitsToTimeSpan=function(a,b){switch(a){case ns_gantt.TimeScaleType.Minutes:return new RQTimeSpan(0,0,b,0);case ns_gantt.TimeScaleType.Hours:return new RQTimeSpan(0,b,0,0);case ns_gantt.TimeScaleType.Days:return new RQTimeSpan(b,0,0,0);case ns_gantt.TimeScaleType.Months:return new RQTimeSpan(30*b,0,0,0);case ns_gantt.TimeScaleType.Weeks:return new RQTimeSpan(7*b,0,0,0);case ns_gantt.TimeScaleType.Years:return new RQTimeSpan(365*b,0,0,0);default:throw"Missing case for TimeScaleType: {0} in ConvertTimeUnitsToTimeSpan"+
a.toString();}};
RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertUnitsInBaseScaleTypeToDurationInHours=function(a,b,c,d,e){var f=0;if(null!=b)switch(f=new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds()),a){case ns_gantt.TimeScaleType.Minutes:if(null==e)return(d-c)/60;d=b+new RQTimeSpan(0,d-c,0,0);e=e.GetEffort(b,d);return e.TotalHours;case ns_gantt.TimeScaleType.Hours:if(null==e)return d-c;d=b+new RQTimeSpan(0,d-c,0,0);e=e.GetEffort(b,d);return e.TotalHours;case ns_gantt.TimeScaleType.Days:var g=
Math.floor(c);a=Math.floor(d);if(g==a)return rqTCUtils.ConvertToFractionalDurationInHours(b,d-c,e);if(d>c){b=f;var h=new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds()),f=rqTCUtils.ConvertToFractionalDurationInHours(h,1-(c-g),e);c=parseInt(Math.floor(d-g))-1;for(g=1;g<=c;g++)b=b.addDays((new RQTimeSpan(1,0,0,0)).getTotalDays()),h=new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds()),f+=rqTCUtils.ConvertToFractionalDurationInHours(h,
1,e);b=b.addDays((new RQTimeSpan(1,0,0,0)).getTotalDays());h=new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds());f+=rqTCUtils.ConvertToFractionalDurationInHours(h,d-a,e)}else{b=f;h=new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds());f=rqTCUtils.ConvertToFractionalDurationInHours(h,c-g,e);c=Math.abs(parseInt(Math.floor(d-g))-1);for(g=1;g<=c;g++)b=b.addDays(-(new RQTimeSpan(1,0,0,0)).getTotalDays()),h=new Date(b.getFullYear(),
b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds()),f+=rqTCUtils.ConvertToFractionalDurationInHours(h,1,e);b=b.addDays(-(new RQTimeSpan(1,0,0,0)).getTotalDays());h=new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds());f+=rqTCUtils.ConvertToFractionalDurationInHours(h,1-(d-a),e);f=-f}break;default:throw new Exception("Not supported yet.");}return f};
RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToEndTimeInBaseScaleType=function(a,b,c,d,e){var f=new Date(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0);switch(a){case ns_gantt.TimeScaleType.Minutes:if(null==e)return b.addMinutes((new RQTimeSpan(0,d-c,0,0)).getTotalHours());d=new RQTimeSpan(0,0,d-c,0);d=new RQTimeSpan(b+d);return e.ConvertToNextWorkingTime(d);case ns_gantt.TimeScaleType.Hours:if(null==e)return b.addHours((new RQTimeSpan(0,d-c,0,0)).getTotalHours());d=new RQTimeSpan(0,d-c,0,0);d=
new RQTimeSpan(b+d);return e.ConvertToNextWorkingTime(d);case ns_gantt.TimeScaleType.Days:var g=Math.floor(c);a=Math.floor(d);if(g==a)return b.addHours((new RQTimeSpan(0,rqTCUtils.ConvertToFractionalDurationInHours(b,d-c,e),0,0)).getTotalHours());d>c?(b=f,c=parseInt(Math.floor(d-g)),b.addDays(c),c=new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds())):(b=f,c=parseInt(Math.ceil(g-d)),b.addDays(-c),c=new Date(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0));f=
rqTCUtils.GetLeadingNonWorkingHours(c,e);b=b.addHours(rqTCUtils.ConvertToFractionalDurationInHours(c,d-a,e));return b=b.addHours(f.getTotalHours());default:throw"Not supported yet.";}};RadiantQ.Gantt.Print=function(a,b){RadiantQ.Gantt.ConvertHTMLToCanvas(b,a,!0)};
RadiantQ.Gantt.ConvertHTMLToCanvas=function(a,b,c){function d(a,c){var d="";$(".resizer-style",a).remove();$(".rq-gc-progressbar-resizer",a).remove();var e,g;e=$(".ui-grid-body",a);g=$(".ui-grid-head",a);var f=$(".timeSpanHeader",a);if(b.VisibleColumnIndices&&b.VisibleColumnIndices instanceof Array){var h=b.VisibleColumnIndices;$(".gridcols",a).css("display","none");for(var k=0;k<h.length;k++)var l=h[k],d=d+(".rq-grid-col"+l+" {display:table-column !important;}"),d=d+(".rq-grid-column-"+l+" {display:table-cell !important;}")}$("tr.ui-widget-header",
a).height(f.outerHeight());f=$(".rq-grid-head-parent",a);$(".header",f).remove();$("td#gridContainer>:first-child",a);e.css("height","100%");g.css("width","100%");g=$(".ui-grid-body-table",a).height();e.height(g);e=f.height()+g;a.height(e);if(void 0===b.IsChartVisible||!1!==b.IsChartVisible)$(".rq-gc-rowsParent-table",a).height(g),$(".rq-gc-rowsParent",a).css({height:g+"px","margin-top":"0px"}),$(".rq-gc-chartArea-div",a).height(g),$(".rq-gc-chartArea",a).height(e),$(".rq-ganttChart",a)[0].style.setProperty("height",
e+"px","important"),$(".ui-GanttTimeUnitBackground-unit",a).css("height","100%"),$(".rq-gc-customRange-background",a).height(g),$(".ui-GanttChartScaleBackground",a).height(g),$(".rq-gc-dependencysParent",a).height(g),$(a).append("<style>td.rq-fg-gc-row{overflow: inherit !important;}\n"+d+"</style>")}a||(a=$(".rq-ganttBase"),a=a.data("FlexyGantt")||a.data("GanttControl"));if(a&&a.widgetName&&!1!=("FlexyGantt"==a.widgetName?!0:"GanttControl"==a.widgetName?!0:!1)){var e=a.element;b=b||{};a=$(".ui-gridpanel",
e);var f=$(".rq-ganttChart",e),g=e.data(),h=g.GanttControl||g.FlexyGantt,k=$.extend(!0,k,f.data("GanttChart").options);k.Parent.UseTimeRangeFilteredTasksInRows?(_useTimeRangeFilteredTasksInRows=k.Parent.UseTimeRangeFilteredTasksInRows(),k.Parent={UseTimeRangeFilteredTasksInRows:function(){return _useTimeRangeFilteredTasksInRows}}):k.Parent={};k.ResizeToFit=!0;k.IsPrinting=!0;k.UseChartVirtualization=!1;k.UseVirtualization=!1;k.BaseTimeUnitWidthMinimum=0.1;var l=$("<div id='printableGanttChart'></div>"),
n=a.clone(),g=0;void 0==b.IsGridVisible&&(b.IsGridVisible=!0);if(b.VisibleColumnIndices===[]||null===b.VisibleColumnIndices||!1===b.VisibleColumnIndices)b.IsGridVisible=!1;if(!1!==b.IsGridVisible){var p=$("tr.ui-widget-header>th",e),m=b.VisibleColumnIndices;if(m&&$.isArray(m)&&m.length<p.length)for(e=g=0;e<m.length;e++)g+=$(p[m[e]]).width();e=$("table.ui-grid-body-table",a);e=e.data("FlexyTable")||e.data("GanttTable");e.renderRows(e._toArray(),$("div.ui-grid-body",n),!0)}g=!1===b.IsGridVisible?0:
g||$(".ui-grid-body>table",a).width();$tempCont=$("<div id='tempCont'></div>").append(n);!1!==b.IsChartVisible&&($tempCont.append(l),l.css({width:window.outerWidth-g-8+"px",height:f.height()+"px",position:"absolute","z-index":0,"margin-left":"6px"}),k=l.GanttChart(k).data("GanttChart"),b.ViewStartTime&&k.SetStartTime(b.ViewStartTime),b.ViewEndTime&&k.TrySetEndTime(b.ViewEndTime),k._trigger("RefreshUi",k,{options:k.options}),h&&h.options.KnockoutObjectName&&(l.css("display","none"),$(document.body).append(l),
k=eval(h.options.KnockoutObjectName),ko.applyBindings(k,l[0]),ko.cleanNode(l[0]),l.remove(),l.css("display","block")));var q=l.clone();n.css({width:g+"px",position:"absolute"});q.css({left:g+5+"px"});$("script[src*=jquery]",document);if(0==$("script[src*=html2canvas]",document).length)window.console?console.error("html2canvas.js file is not found."):alert("html2canvas.js file is not found.");else{for(var g=$("link",document),k=$("style"),r="",e=0;e<g.length;e++)r+=g[e].outerHTML+"\n";for(e=0;e<k.length;e++)g=
location.href.replace(/([^\/]*$)/,""),r+=k[e].outerHTML.replace(/url\(/g,"url("+g+"");!1===b.IsChartVisible?$('<div id="__gantt__test" style="height:'+$("tbody",a).height()+'px;">\n'+n[0].outerHTML+"\n</div>\n"):$('<div id="__gantt__test" style="height:'+l.height()+'px;">\n'+n[0].outerHTML+"\n"+q[0].outerHTML+"\n</div>\n");var s=function(a,c){var d=void 0==b.Format?"png":b.Format,e=!0;try{if(b.AfterCanvasGenerated&&"function"==typeof b.AfterCanvasGenerated&&(e=b.AfterCanvasGenerated(a)),!1!=e){var g=
a.toDataURL("image/"+d+"");$image=$("<img src="+g+"></img>");$(newWindow.document.body).html("<img src="+g+"></img>").ready(function(){var b=this.document.title;if(c)this.focus(),this.print(),this.close();else if(window.Blob)RadiantQ.Gantt.Utils.SaveCanvasAsImage(a,b+"."+d+""),u||alert("Please close this new window when download is complete.");else{var e=window.open("","_blank");e.document.write("<!DOCTYPE html>\n",'<html xmlns="http://www.w3.org/1999/xhtml">\n',"<head>\n","<title>"+b+"</title>\n",
"</head>\n","<body>\n","<img src="+g+"/>\n","</body>\n","</html>");e.document.close()}}.bind(newWindow))}}catch(f){window.console&&console.error(f.message+" in afterCanvasGenerated.")}},t=b.Title||document.title,u;(function(){window.RadiantQ.Gantt.Utils.AfterIframeContentLoad=function(a){delete window.RadiantQ.Gantt.Utils.AfterIframeContentLoad;var b=$("#__gantt__test",a.document);d(b,c);$(a.document).ready(function(){html2canvas(b,{allowTaint:!0,useCORS:!0,onrendered:function(a){s(a,c);$("#__iframeCont").remove()}})})};
u=document.createElement("iframe");u.id="__iframe";u.width=window.innerWidth;u.height=window.innerHeight;var a=$("<div id='__iframeCont' style='height: 0px;overflow: hidden;'></div>").append(u);$(document.body).append(a);u.contentWindow.document.open();newWindow=u.contentWindow;u.contentWindow.document.write("<!DOCTYPE html>\n",'<html xmlns="http://www.w3.org/1999/xhtml">\n',"<head>\n","<title>"+t+"</title>\n",""+r+"\n","<style>\n",'.rq-gc-progressbar,.progressbarStyle{border-radius:0px !important; border:0px solid green !important;border-top-width: "0px"; border-right-width: "0px"; border-bottom-width: "0px"; border-left-width: "0px"}\n',
".rq-timeUnit-div{overflow:initial !important;}\n",".rq-gc-progressbar,.progressbarStyle {border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; border-left-width: 0px !important;}\n",".rq-grid-head-parent {overflow-x: hidden !important;}\n",".ui-grid-head {width: 100%;}\n",".ui-grid-body {overflow-x: hidden !important; overflow-y: hidden !important;}\n","</style>\n",'<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">\n','<body onload="window.parent.RadiantQ.Gantt.Utils.AfterIframeContentLoad(this)">\n',
'<div id="__gantt__test" style="height:'+l.height()+"px; width:"+window.innerWidth+'px;">\n',""+n[0].outerHTML+"\n",""+q[0].outerHTML+"\n","</div>\n","</body>\n","</html>");u.contentWindow.document.close();return u.contentWindow})()}}};RadiantQ.Gantt.ExportToImage=function(a,b){RadiantQ.Gantt.ConvertHTMLToCanvas(b,a)};
RadiantQ.Gantt&&(RadiantQ.Gantt.Dictionary=function(){this._collections=[];this.currIndex=-1;this.keys=[];this._asArray=[];this.keys.indexOf=function(a){if(a&&a.equals){for(var b=0;b<this.length;b++)if(this[b].equals(a))return b;return-1}return Array.prototype.indexOf.call(this,a)};this.length=this._collections.length;this.asArray=this._asArray;return this},RadiantQ.Gantt.Dictionary.prototype.Add=function(a,b){null==a||void 0==a?window.console&&console.log(a+" is not a valid key for Dictionary."):
("string"===typeof a||"number"===typeof a?this[a]=b:void 0!=a.ID&&(this[a.ID]=b),this.currIndex=this.keys.indexOf(a),-1==this.currIndex?(this.keys.push(a),this._collections.push({key:a,value:b}),this._asArray.push(b)):(this._collections[this.currIndex].value=b,this._asArray[this.currIndex]=b),this.length=this._collections.length,this.asArray=this._asArray,this.Keys=this.keys)},RadiantQ.Gantt.Dictionary.prototype.Contains=function(a){this.currIndex=this.keys.indexOf(a);return-1==this.currIndex?!1:
!0},RadiantQ.Gantt.Dictionary.prototype.indexOf=function(a){return this._asArray.indexOf(a)},RadiantQ.Gantt.Dictionary.prototype.Remove=function(a){"string"===typeof a||"number"===typeof a?delete this[a]:a.ID&&delete this[a.ID];a=this.keys.indexOf(a);this._collections.splice(a,1);this.keys.splice(a,1);this._asArray.splice(a,1);this.length=this._collections.length;this.asArray=this._asArray;this.Keys=this.keys;return!1},RadiantQ.Gantt.Dictionary.prototype.Clear=function(){var a=this.keys.indexOf;this.keys=
[];this.keys.indexOf=a;this._collections=[];this._asArray=[];this.length=this._collections.length;this.asArray=this._asArray;this.Keys=this.keys},RadiantQ.Gantt.Dictionary.prototype.GetItemByKey=function(a){a=this.keys.indexOf(a);return-1==a||a>=this.length?null:this._collections[a].value},RadiantQ.Gantt.Dictionary.prototype.GetItemByIndex=function(a){return this._collections.length<=a||0>a?null:this._collections[a].value},RadiantQ.Gantt.Dictionary.prototype.subscribe=function(a){this._collections.CollectionChanged.subscribe(a)},
RadiantQ.Gantt.NotifyCollectionChangedEventArgs=function(a,b){a||b||(this.NewItems=this.OldItems=null,this.Action=RadiantQ.Gantt.NotifyCollectionChangedAction.Reset);a&&(this.type="remove",a instanceof Array?this.OldItems=a.slice(0):(this.OldItems=[],this.OldItems.push(a)));b&&(this.type="insert",b instanceof Array?this.NewItems=b.slice(0):(this.NewItems=[],this.NewItems.push(b)))},RadiantQ.Gantt.NotifyCollectionChangedAction={Add:0,Remove:1,Replace:2,Reset:4});var Utils=RadiantQ.Gantt.Utils;
Utils.DelayUpdateUtil={};Utils.DelayUpdateUtil._dirtyDic=new RadiantQ.Gantt.Dictionary;Utils.DelayUpdateUtil._dirtyList=[];Utils.DelayUpdateUtil._isUpdating=!1;Utils.DelayUpdateUtil.IsUpdating=function(){return Utils.DelayUpdateUtil._isUpdating};Utils.DelayUpdateUtil.BeginUpdate=function(){if(Utils.DelayUpdateUtil.IsUpdating())return!1;Utils.DelayUpdateUtil._dirtyDic.Clear();Utils.DelayUpdateUtil._dirtyList=[];return Utils.DelayUpdateUtil._isUpdating=!0};
Utils.DelayUpdateUtil.TryDelayedUpdate=function(a,b,c){Utils.DelayUpdateUtil.IsUpdating()?Utils.DelayUpdateUtil.DelayUpdate(a,b,c):a.PartialUpdate(b)};Utils.DelayUpdateUtil.RemoveUpdates=function(a){Utils.DelayUpdateUtil._dirtyList.remove(a)};
Utils.DelayUpdateUtil.DelayUpdate=function(a,b,c){var d=Utils.DelayUpdateUtil._dirtyList;try{if(!1==Utils.DelayUpdateUtil._dirtyList.containsValue(a)){if(null!=c)for(var e=-1,f=0;f<d.length;f++){if(g=d[f],e++,g instanceof c){d.splice(e,0,a);break}}else d.push(a);null!=b&&Utils.DelayUpdateUtil._dirtyDic.Add(a,b)}else{var g=Utils.DelayUpdateUtil._dirtyDic.GetItemByKey(a);g&&g!=b&&Utils.DelayUpdateUtil._dirtyDic.Remove(a)}}catch(h){window.console&&console.error(h.message+" from Utils.DelayUpdateUtil.DelayUpdate method.")}};
Utils.DelayUpdateUtil.EndUpdate=function(){Utils.DelayUpdateUtil._isUpdating=!1;var a=Utils.DelayUpdateUtil._dirtyList,b=Utils.DelayUpdateUtil._dirtyDic;Utils.DelayUpdateUtil._dirtyDic=new RadiantQ.Gantt.Dictionary;Utils.DelayUpdateUtil._dirtyList=[];for(var c=a.length-1;0<=c;c--){var d=a[c],e=b.GetItemByKey(d);e?(d.PartialUpdate(e),d.Model&&e instanceof RadiantQ.Gantt.Model.IActivity&&0<d.Model.ActivityUpdated.fn.length&&d.Model.ActivityUpdated.raise(d,e)):d.TotalUpdate()}};
Utils.DelayUpdateUtil.CopyDictionary=function(a,b){for(var c=0;c<a.Keys.length;c++){var d=a.Keys[c];b[d]=a[d]}};Utils.DelayUpdates=function(){this.startedBeginUpdate=Utils.DelayUpdateUtil.BeginUpdate();this.Dispose=function(){this.startedBeginUpdate&&Utils.DelayUpdateUtil.EndUpdate()}};Utils.IUIUpdateable=function(){this.PartialUpdate=function(a){};this.TotalUpdate=function(){}};
RadiantQ.FlexyGantt.TasksPositionTracker=function(a,b,c){this._fg=a;this._sourceItems=b;this._startTimeBinding=c;this._sourceItems.CollectionChanged&&this._sourceItems.CollectionChanged.subscribe(this.TimeRangeBasedItemsFilter_CollectionChanged,this);this._startTimesList=new RadiantQ.FlexyGantt.StartTimesList;this.InitOrderedList()};Object.defineProperty(RadiantQ.FlexyGantt.TasksPositionTracker.prototype,"FlexyGantt",{get:function(){return this._fg}});
Object.defineProperty(RadiantQ.FlexyGantt.TasksPositionTracker.prototype,"SourceItems",{get:function(){return this._sourceItems}});Object.defineProperty(RadiantQ.FlexyGantt.TasksPositionTracker.prototype,"StartTimeBinding",{get:function(){return this._startTimeBinding}});RadiantQ.FlexyGantt.TasksPositionTracker.prototype.UpdateTimes=function(a,b){this._startTimesList.RemoveStartTimeFromList(b);this._startTimesList.AddStartTimeToList(a)};
RadiantQ.FlexyGantt.TasksPositionTracker.prototype.AreTasksAvailableBefore=function(a){var b=this._startTimesList.GetMatchingEntry(a);return-1==b?!1:a<=this._startTimesList.GetTimeAtIndex(b)&&0<b?!0:a>this._startTimesList.GetTimeAtIndex(b)?!0:!1};
RadiantQ.FlexyGantt.TasksPositionTracker.prototype.GetNextTaskStartTimeLeft=function(a){var b=this._startTimesList.GetMatchingEntry(a);return-1==b?Date.MinValue:a<=this._startTimesList.GetTimeAtIndex(b)&&0<b?this._startTimesList.GetTimeAtIndex(b-1):a>this._startTimesList.GetTimeAtIndex(b)?this._startTimesList.GetTimeAtIndex(b):Date.MinValue};
RadiantQ.FlexyGantt.TasksPositionTracker.prototype.AreTasksAvailableAfter=function(a){var b=this._startTimesList.GetMatchingEntry(a);return-1==b?!1:a<=this._startTimesList.GetTimeAtIndex(b)?!0:!1};RadiantQ.FlexyGantt.TasksPositionTracker.prototype.GetNextTaskStartTimeRight=function(a){var b=this._startTimesList.GetMatchingEntry(a);return-1==b?Date.MinValue:a<=this._startTimesList.GetTimeAtIndex(b)?this._startTimesList.GetTimeAtIndex(b):Date.MinValue};
RadiantQ.FlexyGantt.TasksPositionTracker.prototype.GetStartTime=function(a){return null==a?Date.MinValue:(new ValueBinder(a,this.StartTimeBinding,null,RadiantQ.Gantt.BindingMode.OneWay)).Value};RadiantQ.FlexyGantt.TasksPositionTracker.prototype.TimeRangeBasedItemsFilter_CollectionChanged=function(a,b){this.OnSourceItemsCollectionChanged(b)};
RadiantQ.FlexyGantt.TasksPositionTracker.prototype.OnSourceItemsCollectionChanged=function(a){if("Add"==a.Action)for(var b=0;b<a.NewItems.length;b++){var c=a.NewItems[b];this._startTimesList.AddStartTimeToList(this.GetStartTime(c))}else if("Remove"==a.Action)for(b=0;b<a.OldItems.length;b++)c=a.OldItems[b],this._startTimesList.RemoveStartTimeFromList(this.GetStartTime(c));else this.InitOrderedList()};
RadiantQ.FlexyGantt.TasksPositionTracker.prototype.InitOrderedList=function(){this._startTimesList.Clear();for(var a=0;a<this.SourceItems.length;a++)this._startTimesList.AddStartTimeToList(this.GetStartTime(this.SourceItems[a]))};RadiantQ.FlexyGantt.TasksPositionTracker.prototype.Dispose=function(){this._sourceItems.CollectionChanged&&this._sourceItems.CollectionChanged.unsubscribe(this.TimeRangeBasedItemsFilter_CollectionChanged,this);this._startTimesList.Clear()};
RadiantQ.FlexyGantt.StartTimesList=function(){this._orderedStartTimes=[];this._timeVsEntries=new RadiantQ.Gantt.Dictionary};RadiantQ.FlexyGantt.StartTimesList.prototype.GetTimeAtIndex=function(a){return this._orderedStartTimes.length<=a?Date.MinValue:this._orderedStartTimes[a]};
RadiantQ.FlexyGantt.StartTimesList.prototype.AddStartTimeToList=function(a){if(0==this._orderedStartTimes.length)this._orderedStartTimes.push(a),this._timeVsEntries.Add(a,1);else{var b=this.GetMatchingEntryRecursively(0,this._orderedStartTimes.length-1,a);this._orderedStartTimes[b].equals(a)?(a=this._timeVsEntries.keys.indexOf(a),a=this._timeVsEntries._collections[a],this._timeVsEntries.Add(a.key,++a.value)):this._orderedStartTimes[b]<a?(this._orderedStartTimes.splice(b+1,0,a),this._timeVsEntries.Add(a,
1)):this._orderedStartTimes[b]>a&&(this._orderedStartTimes.splice(b,0,a),this._timeVsEntries.Add(a,1))}};RadiantQ.FlexyGantt.StartTimesList.prototype.RemoveStartTimeFromList=function(a){if(0!=this._orderedStartTimes.length){var b=this.GetMatchingEntryRecursively(0,this._orderedStartTimes.length-1,a);if(this._orderedStartTimes[b].equals(a)){var c=this._timeVsEntries.GetItemByKey(a);c--;0==c?(this._orderedStartTimes.splice(b,1),this._timeVsEntries.Remove(a)):this._timeVsEntries.Add(a,c)}}};
RadiantQ.FlexyGantt.StartTimesList.prototype.Clear=function(){this._timeVsEntries.Clear();this._orderedStartTimes=[]};RadiantQ.FlexyGantt.StartTimesList.prototype.GetMatchingEntry=function(a){return 0==this._orderedStartTimes.length?-1:this.GetMatchingEntryRecursively(0,this._orderedStartTimes.length-1,a)};
RadiantQ.FlexyGantt.StartTimesList.prototype.GetMatchingEntryRecursively=function(a,b,c){if(c<this._orderedStartTimes[a])return a;if(this._orderedStartTimes[b]<c)return b;if(c.equals(this._orderedStartTimes[a]))return a;if(c.equals(this._orderedStartTimes[b]))return b;var d=Math.floor((b+a)/2);return this._orderedStartTimes[d].equals(c)?d:this._orderedStartTimes[d]<c?this.GetMatchingEntryRecursively(d+1,b,c):this.GetMatchingEntryRecursively(a,d,c)};var Gantt=RadiantQ.Gantt;Gantt.TimePeriod={};
Gantt.TimePeriod=function(a,b,c,d){if(2>arguments.length)throw Error("Please pass the start and finish date or start and duration as args");this._start=a;b?c=new RadiantQ.Gantt.Utils.TimeComputingUtils.GetTimeSpan(a,b):c&&(b=a.addTimeSpan(c));this._end=b;this._duration=c;this.IsReadOnly=d;return this};Gantt.TimePeriod.prototype.notifyChange=function(a,b){"Start"==a?this.UpdateEnd():"End"==a?this.UpdateDuration():"Duration"==a&&this.UpdateEnd()};
Object.defineProperty(Gantt.TimePeriod.prototype,"Start",{get:function(){return this._start},set:function(a){if(!this._start||!Start.equals(a)){if(this.IsReadOnly)throw Error("Cannot set Start on a ReadOnly TimePeriod.");this._start=a;this.notifyChange("Start",a)}},enumerable:!0,configurable:!0});
Object.defineProperty(Gantt.TimePeriod.prototype,"End",{get:function(){return this._end},set:function(a){if(!this._end||!this._end.equals(a)){if(this.IsReadOnly)throw Error("Cannot set Duration on a ReadOnly TimePeriod.");this._end=a;this.notifyChange("End",a)}},enumerable:!0,configurable:!0});
Object.defineProperty(Gantt.TimePeriod.prototype,"Duration",{get:function(){return this._duration},set:function(a){if(!this._duration||!this._duration.equals(a)){if(this.IsReadOnly)throw Error("Cannot set End on a ReadOnly TimePeriod.");this._duration=a;this.notifyChange("Duration",a)}},enumerable:!0,configurable:!0});Gantt.TimePeriod.prototype.UpdateEnd=function(){this._end=this._start.clone().addTimeSpan(this._duration)};
Gantt.TimePeriod.prototype.UpdateDuration=function(){this._duration=new RadiantQ.Gantt.Utils.TimeComputingUtils.GetTimeSpan(this._start,this._end)};Gantt.TimePeriod.prototype.Equals=function(a){return this.Start.equals(a.Start)&&this.Duration.equals(a.Duration)};Gantt.TimePeriod.prototype.CompareTo=function(a){return this.Start.compareTo(a.Start)};Gantt.TimePeriod.prototype.clone=function(a){return new TimePeriod(a.Start,a.End,null,a.IsReadOnly)};
Gantt.TimePeriod.prototype.Intersect=function(a){if(!a)return null;var b,c,d,e,f=Gantt.TimePeriod.IsPositiveDuration;try{f(this)?(d=this.Start,e=this.End):(d=this.End,e=this.Start)}catch(g){window.console&&console(g.message+" Error found at Gantt.TimePeriod.Intersect")}f(a)?(b=a.Start,c=a.End):(b=a.End,c=a.Start);if(0<=d.compareTo(c)||0>=e.compareTo(b))return null;b=1==d.compareTo(b)?d:b;c=-1==e.compareTo(c)?e:c;return f(this)==f(a)?new RadiantQ.Gantt.TimePeriod(b,c):new RadiantQ.Gantt.TimePeriod(c,
b)};Gantt.TimePeriod.IsPositiveDuration=function(a){return 0<=a.Duration.totalMilliseconds};Gantt.TimePeriod.prototype.Union=function(a){if(!a)return this;var b,c,d,e,f=Gantt.TimePeriod.IsPositiveDuration;f(this)?(d=this.Start,e=this.End):(d=this.End,e=this.Start);f(a)?(b=a.Start,c=a.End):(b=a.End,c=a.Start);b=d<b?d:b;c=e>c?e:c;return f(this)==f(a)?new Gantt.TimePeriod(b,c):new Gantt.TimePeriod(c,b)};Gantt=RadiantQ.Gantt;Gantt.TimePeriodCollection={};
Gantt.TimePeriodCollection=function(a){this._intervals=[];this.Start=Date.MaxValue;this.Duration=RQTimeSpan.Zero;this.Finish=Date.MinValue;this.Count=function(){return this._intervals.length};this.length=this._intervals.length;a&&this.AddRange(a);return this};
Gantt.TimePeriodCollection.prototype.Add=function(a){a.IsReadOnly=!0;a.Duration<RQTimeSpan.Zero&&(a=new Gantt.TimePeriod(a.End,a.Start,!0));this.length=this._intervals.length;if(a.Start<this.Finish)for(var b=0;b<this.length;b++){var c=this._intervals[b];if(a.End<c.Start){this._intervals.splice(b,0,a);this.length=this._intervals.length;a.Start<this.Start&&(this.Start=a.Start);this.Duration=this.Duration.add(a.Duration);return}if(a.Start<c.Start){var d=0<b?this._intervals[b-1]:null;if(!d||a.Start>d.Value.End){a=
c.Union(a);this._intervals[b]=a;a.Start<this.Start&&(this.Start=a.Start);this.Duration=this.Duration.add(a.Duration.subtract(c.Duration));a.End>this.Finish&&(this.Finish=a.End);return}a=c.Union(d.Value);this._intervals.splice(b,1);this.length=this._intervals.length;this._intervals[b-1]=a;this.Duration=this.Duration.add(a.Duration.subtract(c.Duration));a.End>this.Finish&&(this.Finish=a.End);return}if(a.Start<c.End){if((d=b<this.length-1?this._intervals[b+1]:null)&&a.End<d.Start){a=c.Union(a);this._intervals[b]=
a;this.Duration=this.Duration.add(a.Duration.subtract(c.Duration));a.End>this.Finish&&(this.Finish=a.End);return}a=c.Union(d);this._intervals.splice(b,1);this.length=this._intervals.length;this._intervals[b]=a;this.Duration=this.Duration.add(a.Duration.subtract(c.Duration));a.End>this.Finish&&(this.Finish=a.End);return}}this._intervals.push(a);a.Start<this.Start&&(this.Start=a.Start);this.Finish=a.End;this.Duration=this.Duration.add(a.Duration)};
Gantt.TimePeriodCollection.prototype.AddRange=function(a){for(var b=0;b<a.length;b++)this.Add(a[b])};Gantt.TimePeriodCollection.prototype.Ascending=function(){return this._intervals.sort};Gantt.TimePeriodCollection.prototype.Descending=function(){this._intervals.sort();return this._intervals.sort()};Gantt.TimePeriodCollection.prototype.getItemByIndex=function(a){return this._intervals[a]};Gantt.TimePeriodCollection.prototype.Count=function(){return this._intervals.length};Gantt=RadiantQ.Gantt;
Gantt.WorkTimeSchedule={};Gantt.WorkTimeSchedule.TaskResolutionInfo={};RadiantQ.Gantt.guidGenerator=function(){var a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()};
Gantt.WorkTimeSchedule=function(a,b){this.IsCachingEnabled=!0;this._guid=RadiantQ.Gantt.guidGenerator();this._cachedResolvedIntervals=new Gantt.WorkTimeSchedule.CachedResolvedIntervals;if(null==b)throw Error("dayCalendarProvider","The specified CalendarProvider delegate cannot be null.");this.Name=a;this.scheduleProvider=b;this.WorkTimeScheduleProvider=function(a){return this.scheduleProvider(a)};return this};Gantt.WorkTimeSchedule.prototype.ClearCache=function(){this._cachedResolvedIntervals=new Gantt.WorkTimeSchedule.CachedResolvedIntervals};
Gantt.WorkTimeSchedule.CachedResolvedIntervals=function(){this._cachedResolvedIntervals={}};Gantt.WorkTimeSchedule.CachedResolvedIntervals.prototype.Add=function(a,b,c){this._cachedResolvedIntervals[a._testName]||(this._cachedResolvedIntervals[a._testName]=b)};Gantt.WorkTimeSchedule.CachedResolvedIntervals.prototype.ContainsKey=function(a,b){return this._cachedResolvedIntervals[a._testName]?!0:!1};
Gantt.WorkTimeSchedule.CachedResolvedIntervals.prototype.GetIntervalsFromCache=function(a,b){var c=this._cachedResolvedIntervals[a._testName];return c?c:null};Gantt.WorkTimeSchedule.CachedContWorkingTimes=function(){this._cachedContWorkingTimes={}};Gantt.WorkTimeSchedule.CachedContWorkingTimes.prototype.Add=function(a,b){this._cachedContWorkingTimes[a]||(this._cachedContWorkingTimes[a]=b)};
Gantt.WorkTimeSchedule.CachedContWorkingTimes.prototype.ContainsKey=function(a){return this._cachedContWorkingTimes[a]?!0:!1};Gantt.WorkTimeSchedule.CachedContWorkingTimes.prototype.GetIntervalsFromCache=function(a){return(a=this._cachedContWorkingTimes[a])?a:null};Gantt.WorkTimeSchedule._cachedStdWorkingTimes=new Gantt.WorkTimeSchedule.CachedContWorkingTimes;Gantt.WorkTimeSchedule._continuousSchedule=null;Gantt.WorkTimeSchedule.cachedContWorkingTimes=new Gantt.WorkTimeSchedule.CachedContWorkingTimes;
Gantt.WorkTimeSchedule.prototype.GetResolvedIntervals=function(a,b,c,d,e){b.isLessThan(RQTimeSpan.Zero)&&window.console&&console.error("requiredWorkEffort: Required work effort must be a positive TimeSpan.");d.isLessThan(RQTimeSpan.Zero)&&window.console&&console.error("maxSearchEffort: Maximum search effort must be a positive TimeSpan.");var f=this.IsCachingEnabled?new Gantt.WorkTimeSchedule.TaskResolutionInfo(a,b,c,d,e):null;if(f){var g=this._cachedResolvedIntervals.GetIntervalsFromCache(f,e);if(g)return g}var g=
[],h=b;searchRange=new RadiantQ.Gantt.TimePeriod(a,null,e?d:RQTimeSpan.Zero.subtract(d));var k=!1;if(e&&a<Date.MaxValue||!e&&a>Date.MinValue)for(var l=a.Date();h.isGreaterThanOrEqualTo(RQTimeSpan.Zero)&&!k&&!(e&&l>Date.MaxValue.clone().addDays(-1)||!e&&l==Date.MinValue||e&&(new RQTimeSpan(l-a)).isGreaterThan(d)||!e&&(new RQTimeSpan(a-l.clone().addDays(1))).isGreaterThan(d));l=l.addDays(e?1:-1)){var n=this.WorkTimeScheduleProvider(l);if(null!=n){if(l>Date.MaxValue.clone().addDays(-1))break;if(n.Start<
l||n.Finish>l.clone().addDays(1))throw Error("CalendarProvider must provide time intervals that start and finish on the specified date.");for(var n=n._intervals,p=0;p<n.length&&!k;p++)if(workingTime=n[p],(!e||workingTime.End>searchRange.Start)&&(e||workingTime.Start<searchRange.Start)){var m=workingTime.Intersect(searchRange);if(!m){k=!0;break}var q=[];q.push(m);m=q;if(null!=c)for(var r=0;r<c.length&&!k;r++)if(schedule=c[r],null!=schedule){for(var s=[],q=0;q<m.length;q++)for(var t=m[q],t=schedule.GetResolvedIntervals(t.Start,
RQTimeSpan.MaxValue,null,t.Duration.isGreaterThanOrEqualTo(RQTimeSpan.Zero)?t.Duration:new RQTimeSpan(-t.Duration.totalMilliseconds),e),u=0;u<t.length;u++)s.push(t[u]);m=s}for(q=0;q<m.length&&!k;q++)if(r=m[q],r.Duration!=RQTimeSpan.Zero||b<=RQTimeSpan.Zero){s=h.getEqualNegative();if(e&&r.Duration.isGreaterThan(h)||!e&&r.Duration.isLessThan(s))r.Duration=r.Duration.isGreaterThanOrEqualTo(RQTimeSpan.Zero)?h:s;r.Duration.equals(RQTimeSpan.Zero)&&!b.equals(RQTimeSpan.Zero)||g.push(r);h=e?h.subtract(r.Duration):
h.add(r.Duration);if(0==b.totalMilliseconds||0==h.totalMilliseconds){k=!0;break}}}}}void 0!=f&&this._cachedResolvedIntervals.Add(f,g,e);return g};
Gantt.WorkTimeSchedule.TwentyFourByFiveScheduleProvider=function(a){a||(a=new Date);_cachedContWorkingTimes=Gantt.WorkTimeSchedule.cachedContWorkingTimes;a=a.Date();if(!_cachedContWorkingTimes.ContainsKey(a)){var b=a.getDay();if(0<b&&5>=b)return intervals=new Gantt.TimePeriodCollection,intervals.Add(new Gantt.TimePeriod(a.Date(),null,new RQTimeSpan(1,0,0,0,0))),_cachedContWorkingTimes.Add(a,intervals),intervals;_cachedContWorkingTimes.Add(a,null)}return _cachedContWorkingTimes.GetIntervalsFromCache(a)};
Gantt.WorkTimeSchedule.EightHoursByFiveDaysScheduleProvider=function(a){a=a.Date();if(!Gantt.WorkTimeSchedule._cachedStdWorkingTimes.ContainsKey(a)){var b=a.getDay();if(0<b&&5>=b)return b=new Gantt.TimePeriodCollection,b.Add(new Gantt.TimePeriod(a.clone().addHours(8),null,new RQTimeSpan(0,8,0,0,0))),Gantt.WorkTimeSchedule._cachedStdWorkingTimes.Add(a,b),b;Gantt.WorkTimeSchedule._cachedStdWorkingTimes.Add(a,null);return null}return Gantt.WorkTimeSchedule._cachedStdWorkingTimes.GetIntervalsFromCache(a)};
Gantt.WorkTimeSchedule.SearchBreakTimeSpan=new RQTimeSpan(3650,0,0,0,0);Gantt.WorkTimeSchedule.prototype.GetEffort=function(a,b,c){b=Gantt.Utils.TimeComputingUtils.GetTimeSpan(a,b);return(new Gantt.TimePeriodCollection(this.ConvertToNextWorkingTimeIntervals(a,RQTimeSpan.MaxValue,c,b))).Duration};Gantt.WorkTimeSchedule.prototype.GetStart=function(a,b,c){return(new Gantt.TimePeriodCollection(this.ConvertToPreviousWorkingTimeIntervals(a,b,c))).Start};
Gantt.WorkTimeSchedule.prototype.GetEnd=function(a,b,c){return(new Gantt.TimePeriodCollection(this.ConvertToNextWorkingTimeIntervals(a,b,c))).Finish};Gantt.WorkTimeSchedule.prototype.ConvertToNextWorkingTime=function(a,b){var c=this.ConvertToNextWorkingTimeIntervals(a,RQTimeSpan.Zero,b);return 0<c.length?c[0].Start:Date.MaxValue};
Gantt.WorkTimeSchedule.prototype.ConvertToNextWorkingTimeIntervals=function(a,b,c,d){return d?this.GetResolvedIntervals(a,b,c,d,!0):this.GetResolvedIntervals(a,b,c,Gantt.WorkTimeSchedule.SearchBreakTimeSpan,!0)};Gantt.WorkTimeSchedule.prototype.ConvertToPreviousWorkingTime=function(a,b){var c=this.ConvertToPreviousWorkingTimeIntervals(a,RQTimeSpan.Zero,b);return 0<c.length?c[0].Start:Date.MinValue};
Gantt.WorkTimeSchedule.prototype.ConvertToPreviousWorkingTimeIntervals=function(a,b,c,d){return d?this.GetResolvedIntervals(a,b,c,d,!1):this.GetResolvedIntervals(a,b,c,Gantt.WorkTimeSchedule.SearchBreakTimeSpan,!1)};Gantt.WorkTimeSchedule.prototype.toString=function(){return null==this.Name?"":this.Name};Gantt.WorkTimeSchedule._continuousSchedule||(Gantt.WorkTimeSchedule._continuousSchedule=new Gantt.WorkTimeSchedule("24X5 Schedule",Gantt.WorkTimeSchedule.TwentyFourByFiveScheduleProvider));
Gantt.WorkTimeSchedule.Schedule24X5=Gantt.WorkTimeSchedule._continuousSchedule;null==Gantt.WorkTimeSchedule._cached8X5ScheduleTimes&&(Gantt.WorkTimeSchedule._cached8X5ScheduleTimes=new Gantt.WorkTimeSchedule("8X5 Schedule",Gantt.WorkTimeSchedule.EightHoursByFiveDaysScheduleProvider));Gantt.WorkTimeSchedule.Schedule8X5=Gantt.WorkTimeSchedule._cached8X5ScheduleTimes;
Gantt.WorkTimeSchedule.TaskResolutionInfo=function(a,b,c,d,e){this._start=a;a||(this._start=Date.MinValue);this._duration=b;b||(this._duration=RQTimeSpan.Zero);this._calenders=c;this._searchDuration=d;this.isForward=e;this._testName="start="+a.toString()+", duration="+b.toString()+", searchDuration="+d.toString()+", isForward="+e};
Gantt.WorkTimeSchedule.TaskResolutionInfo.prototype.CompareTo=function(a){var b=0;0==b&&(b=this._start.compareTo(a._start));0==b&&(b=this._duration.compareTo(a._duration));if(0==b&&null!=this._calenders&&null!=a._calenders&&(b=this._calenders.length-a._calenders.length,b=0<b?1:0>b?-1:0,0==b))for(var c=0;c<this._calenders.length;c++){var d=this._calenders[c],e=a._calenders[c];if(d!=e&&(null!=d&&null!=e?(b=d._guid-e._guid,b=0<b?1:0>b?-1:0):b=null==d?-1:1,0!=b))break}0==b&&(b=this._searchDuration.compareTo(a._searchDuration));
0==b&&this.isForward==a.isForward&&(b=0);return b};
Gantt.WorkTimeSchedule.TaskResolutionInfo.prototype.equals=function(a){if(this._testName!=a._testName||this.isForward!=a.isForward)return!1;var b=0;if(0==b&&null!=this._calenders&&null!=a._calenders&&(b=this._calenders.length-a._calenders.length,b=0<b?1:0>b?-1:0,0==b))for(var c=0;c<this._calenders.length;c++){var d=this._calenders[c],e=a._calenders[c];if(d!=e&&(null!=d&&null!=e?(b=d._guid-e._guid,b=0<b?1:0>b?-1:0):b=null==d?-1:1,0!=b))break}return 0==b?!0:!1};RadiantQ.Gantt.Calendar={};
RadiantQ.Gantt.Calendar=function(a,b,c){this.id=a;this.Name=this.WeekDays=null;this.HolidayList=new RadiantQ.Gantt.Dictionary;this.Schedule=null;3==arguments.length?(this.WeekDays=b,this.id=a,this.Name=c):1==arguments.length?(this.WeekDays=this.CreateWeekDayList(arguments[0]),this.CreateCalendarFromScheduleString(arguments[0]),this.id=-1,this.Name=""):2==arguments.length&&(this.WeekDays=this.CreateWeekDayList(arguments[1]),this.CreateCalendarFromScheduleString(arguments[1]),this.id=-1,this.Name=arguments[0])};
Gantt.Calendar.prototype.CreateCalendarFromScheduleString=function(a){var b=a.split("HOL"),c=null;b[0].replace(/[ ,;]+$/,"").split(";");-1!=a.indexOf("HOL")&&(c=b[1].trim().replace(/[ ,;]+$/,"").split(";"));if(null!=c)try{for(b=0;b<c.length;b++){var d=Gantt.ExceptionDay.ParseExceptionDay(c[b]),e=d.Date.getTime();!1==this.HolidayList.Contains(e)&&this.HolidayList.Add(e,d)}}catch(f){throw Error("Invalid  Date value encountered in this Calendar definition string: "+a);}};
Gantt.Calendar.prototype.CreateWeekDayList=function(a){a=a.split("HOL");return Gantt.Calendar.ParseWeekDays(a[0])};Gantt.Calendar.CreateSchedule=function(a){if(a instanceof Gantt.Calendar)return this.scheduleProvider=function(b){return a.GetWorkingTimes(b)},new Gantt.WorkTimeSchedule(a.Name,this.scheduleProvider);if("string"===typeof a){var b=new Gantt.Calendar(a);return Gantt.Calendar.CreateSchedule(b)}};
Gantt.Calendar.prototype.GetWorkingTimes=function(a){var b=this.WeekDays[parseInt(Date.getDayNumberFromName(a.getDayName()))];if(this.IsHoliday(a))return null;for(var c=new Gantt.TimePeriodCollection,d=0;d<b.WorkingTimes.length;d++){var e=b.WorkingTimes[d];c.Add(new Gantt.TimePeriod(a.clone().Date().addTimeSpan(e.From),a.clone().Date().addTimeSpan(e.To)))}return c};
Gantt.Calendar.prototype.IsHoliday=function(a){return!1==this.WeekDays[parseInt(Date.getDayNumberFromName(a.getDayName()))].IsWorkingDay||!0==this.HolidayList.Contains(a.getTime())};Gantt.Calendar.prototype.GetWorkDayWorkingTimes=function(a){a=this.WeekDays[a];return 0<a.WorkingTimes.length?a.WorkingTimes:[new Gantt.WorkDayWorkingTime(RQTimeSpan.Zero,new RQTimeSpan(0,24,0,0))]};
Gantt.Calendar.ParseWeekDays=function(a){for(var b=a.replace(/[ ,;]+$/,"").split(";"),c=[],d=0;7>d;d++)c.push(new Gantt.WeekDay(!1));if(0==a.length)return c;for(d=0;d<b.length;d++)if(a=b[d],0!=a.length){a=a.trim();if(3>a.length)throw Error("Encoutered a day value string: '"+a.toString()+"' that is smaller than 3 days.");var e=a.substring(0,3);switch(e.toLowerCase()){case "sun":c[0]=new Gantt.WeekDay(!0,Gantt.Calendar.GetWorkingTimes(a.substring(3)));break;case "mon":c[1]=new Gantt.WeekDay(!0,Gantt.Calendar.GetWorkingTimes(a.substring(3)));
break;case "tue":c[2]=new Gantt.WeekDay(!0,Gantt.Calendar.GetWorkingTimes(a.substring(3)));break;case "wed":c[3]=new Gantt.WeekDay(!0,Gantt.Calendar.GetWorkingTimes(a.substring(3)));break;case "thu":c[4]=new Gantt.WeekDay(!0,Gantt.Calendar.GetWorkingTimes(a.substring(3)));break;case "fri":c[5]=new Gantt.WeekDay(!0,Gantt.Calendar.GetWorkingTimes(a.substring(3)));break;case "sat":c[6]=new Gantt.WeekDay(!0,Gantt.Calendar.GetWorkingTimes(a.substring(3)));break;default:throw Error("Invalid day name encountered: '"+
e+"'. Expected a day name of the form 'SUN', 'MON', etc.");}}return c};
Gantt.Calendar.GetWorkingTimes=function(a){var b=[];if(a){a=a.trim();for(var c=a.split(","),d=0;d<c.length;d++){var e=c[d].trim(),f=e.split(" ");if(2>f.length)throw Error("Expected 2 time span strings of the form '09:00:00 17:00:00'. Encountered string '"+e+"'");try{var g=f[0].split(":");if(3>g.length)throw Error();var h=new RQTimeSpan(0,g[0],g[1],g[2])}catch(k){throw Error("Cannot parse working time string '"+f[0]+"'. Should be of the format 09:00:00.");}try{g=f[1].split(":");if(3>g.length)throw Error();
var l=new RQTimeSpan(0,g[0],g[1],g[2])}catch(n){throw Error("Cannot parse working time string '"+f[1]+"'. Should be of the format 09:00:00.");}if(l.isLessThan(h))throw Error(string.Format("Error in '{0}' syntax. The end time for a day is earlier than the start time.",a));b.push(new Gantt.WorkDayWorkingTime(h,l))}}else b.push(new Gantt.WorkDayWorkingTime(new RQTimeSpan(0,0,0,0),new RQTimeSpan(0,24,0,0)));return b};
Gantt.Calendar.prototype.getWorkingTimesString=function(a){for(var b="",c=0;c<a.length;c++)b+=a[c].toString()+",";return b.replace(/[ ,]+$/,"")};
Gantt.Calendar.prototype.toString=function(){for(var a="",b=0;b<this.WeekDays.length;b++){var c=this.WeekDays[b];if(!0==c.IsWorkingDay)switch(b){case 0:a+="SUN "+this.getWorkingTimesString(c.WorkingTimes)+";";break;case 1:a+="MON "+this.getWorkingTimesString(c.WorkingTimes)+";";break;case 2:a+="TUE "+this.getWorkingTimesString(c.WorkingTimes)+";";break;case 3:a+="WED "+this.getWorkingTimesString(c.WorkingTimes)+";";break;case 4:a+="THU "+this.getWorkingTimesString(c.WorkingTimes)+";";break;case 5:a+=
"FRI "+this.getWorkingTimesString(c.WorkingTimes)+";";break;case 6:a+="SAT "+this.getWorkingTimesString(c.WorkingTimes)+";"}}if(0<this.HolidayList.length){a+="HOL ";for(b=0;b<this.HolidayList.asArray.length;b++)a+=this.HolidayList.asArray[b].toString("yyyy-M-d")+";";a=a.replace(/[;]+$/,"").trim()}return a.trim()};Gantt.StringToWorkTimeScheduleConverter={Convert:function(a,b,c,d){return a?Gantt.Calendar.CreateSchedule(a):null}};
Gantt.WeekDay=function(a,b){this.IsWorkingDay=a;this.WorkingTimes=b?b:[];this.IsUndefined=!1};Gantt.WeekDay.Undefined=new Gantt.WeekDay(!0);Gantt.WeekDay.Undefined.IsUndefined=!0;Gantt.WeekDay.prototype.clone=function(){for(var a=new WeekDay(this.IsWorkingDay),b=0;b<this.WorkingTimes.length;b++)workingTime=this.WorkingTimes[b],a.WorkingTimes.Add(workingTime.clone());return a};Gantt.WorkDayWorkingTime=function(a,b){this.From=a;this.To=b};
Gantt.WorkDayWorkingTime.clone=function(){return new Gantt.WorkDayWorkingTime(this.From,this.To)};Gantt.WorkDayWorkingTime.prototype.toString=function(){return this.From.toString()+" "+this.To.toString()};Gantt.ExceptionDay=function(a,b,c){this.Name=a;this.Date=b.Date();this.TimePeriods=c?c:[]};
Gantt.ExceptionDay.ParseExceptionDay=function(a){var b=null,c="",d=Date.MinValue;a=a.split("TimePeriod");var e=a[0].split(":");2==e.length?(d=Date.parse(e[1]).Date(),c=e[0],b=new Gantt.ExceptionDay(c,d)):1==e.length&&(d=Date.parse(e[0]).Date(),b=new Gantt.ExceptionDay("",d));2==a.length&&(b=new Gantt.ExceptionDay(c,d,Gantt.Calendar.GetWorkingTimes(a[1])));return b};
Gantt.ExceptionDay.prototype.toString=function(){var a="",a="";if(null!=this.TimePeriods&&0<this.TimePeriods.length){for(var b=0;b<this.TimePeriods.length;b++)a+=this.TimePeriods[b].toString()+",";a=" TimePeriod "+a.replace(/[,]+$/,"").trim()}b=this.Date.toString("yyyy-M-d");return a=""===this.Name?b+" "+a:this.Name+":"+b+" "+a};RadiantQ.Gantt.CalendarWithExceptions={};
RadiantQ.Gantt.CalendarWithExceptions=function(a,b){this.WorkingDayExceptions=new RadiantQ.Gantt.Dictionary;this.NonWorkingdayExceptions=new Gantt.Dictionary;this.ExceptionWeekDays=[];this.BaseCalendar=a;this.Tag=null;Gantt.CalendarWithExceptions.ParseExceptionsList(b,this.WorkingDayExceptions,this.NonWorkingdayExceptions,this.ExceptionWeekDays)};
Gantt.CalendarWithExceptions.ParseExceptionDays=function(a,b){for(var c=0;c<a.length;c++){var d=Gantt.ExceptionDay.ParseExceptionDay(a[c]);if(null!=d){var e=d.Date.getTime();!1==b.Contains(e)&&b.Add(e,d)}}return b};
Gantt.CalendarWithExceptions.ParseExceptionsList=function(a,b,c,d){var e=[];Gantt.CalendarWithExceptions.splitString(a,e);try{null!=e.WorkDaySpecific&&Gantt.CalendarWithExceptions.ParseExceptionDays(e.WorkDaySpecific,b),null!=e.NonWorkDaySpecific&&Gantt.CalendarWithExceptions.ParseExceptionDays(e.NonWorkDaySpecific,c)}catch(f){throw Error("Invalid Date format encountered in this CalendarWithException definition string: "+a);}for(a=0;a<c.asArray.length;a++){var g=c.asArray[a].Date.getTime();null!=
b.Contains(g)&&b.Remove(g)}if(null!=e.WeekDaySpecific)Gantt.CalendarWithExceptions.ParseWeekDays(e.WeekDaySpecific,d);else for(a=0;7>a;a++)d.push(Gantt.WeekDay.Undefined)};
Gantt.CalendarWithExceptions.splitString=function(a,b){var c=[],d=a.indexOf("WeekDaySpecific"),e=a.indexOf("NonWorkDaySpecific"),f=a;-1!=e&&(f=a.replace("NonWorkDaySpecific",""));f=f.indexOf("WorkDaySpecific");f>e&&(f+=18);-1!=d&&c.push(d);-1!=e&&c.push(e);-1!=f&&c.push(f);c.sort();for(d=0;d<c.length;d++)d+1<=c.length&&(e=a.substring(c[d],c[d+1]),-1!=e.indexOf("WeekDaySpecific")?b.WeekDaySpecific=e.replace("WeekDaySpecific","").replace(/[ ; ]+$/,"").trim():-1!=e.indexOf("NonWorkDaySpecific")?b.NonWorkDaySpecific=
e.replace("NonWorkDaySpecific","").replace(/[ ; ]+$/,"").trim().split(";"):-1!=e.indexOf("WorkDaySpecific")&&-1==e.indexOf("NonWorkDaySpecific")&&(b.WorkDaySpecific=e.replace("WorkDaySpecific","").replace(/[ ; ]+$/,"").trim().split(";")))};
Gantt.CalendarWithExceptions.prototype.IsHoliday=function(a){if(this.WorkingDayExceptions.Contains(a.getTime()))return!1;if(this.NonWorkingdayExceptions.Contains(a.getTime()))return!0;var b=this.ExceptionWeekDays[parseInt(Date.getDayNumberFromName(a.getDayName()))];return!1==b.IsUndefined?!1==b.IsWorkingDay?!0:!1:this.BaseCalendar.IsHoliday(a)};
Gantt.CalendarWithExceptions.prototype.GetWorkingTimes=function(a){var b=this.WorkingDayExceptions.GetItemByKey(a.getTime());if(null!=b&&b.TimePeriods&&0<b.TimePeriods.length)return b.TimePeriods;a=parseInt(Date.getDayNumberFromName(a.getDayName()));return!1==this.ExceptionWeekDays[a].IsUndefined&&(b=this.ExceptionWeekDays[a].WorkingTimes,0<b.Count)?b:this.BaseCalendar.GetWorkDayWorkingTimes(a)};
Gantt.CalendarWithExceptions.ParseWeekDays=function(a,b){for(var c=a.replace(/[ ,;]+$/,"").split(";"),d=0;7>d;d++)b.push(Gantt.WeekDay.Undefined);if(0==a.length)return b;for(d=0;d<c.length;d++){var e=c[d];if(0!=e.length){var f=e.trim();if(3>f.length)throw Error("Encoutered a day value string: '"+f.toString()+"' that is smaller than 3 days.");e=f.substring(0,3);f=f.substring(3);"nwork"==f.trim().toLowerCase()?f=new Gantt.WeekDay(!1):(""===f&&(f="00:00:00 1.00:00:00"),f=new Gantt.WeekDay(!0,Gantt.Calendar.GetWorkingTimes(f)));
switch(e.toLowerCase()){case "sun":b[0]=f;break;case "mon":b[1]=f;break;case "tue":b[2]=f;break;case "wed":b[3]=f;break;case "thu":b[4]=f;break;case "fri":b[5]=f;break;case "sat":b[6]=f;break;default:throw Error("Invalid day name encountered: '"+e+"'. Expected a day name of the form 'SUN', 'MON', etc.");}}}return b};
Gantt.CalendarWithExceptions.CreateWorkTimeSchedule=function(a){this.scheduleProvider=function(b){if(!0==a.IsHoliday(b.Date()))return null;for(var c=new Gantt.TimePeriodCollection,d=a.GetWorkingTimes(b.Date()),e=0;e<d.length;e++){var f=d[e];c.Add(new Gantt.TimePeriod(b.Date().addTimeSpan(f.From),b.Date().addTimeSpan(f.To),!1))}return c};return new Gantt.WorkTimeSchedule(a.BaseCalendar.Name,this.scheduleProvider)};
Gantt.CalendarWithExceptions.prototype.toString=function(){for(var a="",b="",c="",d="",e=0;e<this.WorkingDayExceptions.asArray.length;e++)a+=this.WorkingDayExceptions.asArray[e].toString()+";";a.trim();for(e=0;e<this.NonWorkingdayExceptions.asArray.length;e++)b+=this.NonWorkingdayExceptions.asArray[e].toString()+";";b.trim();for(var f=!0,e=0;e<this.ExceptionWeekDays.length&&(f=this.ExceptionWeekDays[e].IsUndefined,f);e++);if(!1==f)for(c+=" WeekDaySpecific ",e=0;e<this.ExceptionWeekDays.length;e++){var f=
this.ExceptionWeekDays[e],g=Date.CultureInfo.dayNames[e].substring(0,3);if(!1==f.IsUndefined)if(!0==f.IsWorkingDay){for(var h="",k=0;k<f.WorkingTimes.length;k++)h+=f.WorkingTimes[k].toString()+",";h=h.replace(/[,]+$/,"").trim();c+=g+" "+h+";"}else c+=g+" NWork;"}""!=a&&(d+="WorkDaySpecific "+a);""!=b&&(d+=" NonWorkDaySpecific "+b);""!=c&&(d+=c);return d.trim()};RadiantQ.Gantt.ValueConverters={};RadiantQ.Gantt.ValueConverters.ConverterUtils={};
RadiantQ.Gantt.ValueConverters.ConverterUtils.GetResourcesText=function(a,b){for(var c="",d=0;d<a.length;d++)var e=a[d],c=c+((b?e.Resource.ResourceID:e.Resource.ResourceName)+" "+RadiantQ.Gantt.ValueConverters.ConverterUtils.AllocationUnitText(e)),c=c.trim(),c=c+",";return c.trimEnd(",")};RadiantQ.Gantt.ValueConverters.ConverterUtils.GetAssignedResourceInstances=function(a){for(var b=[],c=0;c<a.length;c++){var d=d[c];b.push(d.Resource)}return b};
RadiantQ.Gantt.ValueConverters.ConverterUtils.AllocationUnitText=function(a){return 100==a.AllocationUnits?"":"["+(100*(a.AllocationUnits/100)).toString()+"%]"};
RadiantQ.Gantt.ValueConverters.ConverterUtils.ConvertResourceTextToAssignments=function(a,b,c){var d=new RadiantQ.Gantt.Model.ResourceAssignmentCollection(null);if(a){var e=a.split(",");for(a=0;a<e.length;a++){var f=e[a],g=f,h=100;-1!=g.indexOf("[")&&(h=this.ParseAllocUnitsString(g.substring(f.indexOf("["))),g=f.substring(0,g.indexOf("[")));(f=b._resByID[g.trim()])&&!1==d.ContainsResource(f)&&d.add(new Model.ResourceAssignment(f,h))}}if(!1==this.IsContentEqual(d,c)){b=new RadiantQ.Gantt.Utils.DelayUpdates;
c.clear();for(a=0;a<d.length;a++)c.add(d[a]);b.Dispose()}};RadiantQ.Gantt.ValueConverters.ConverterUtils.ConvertSelectedResourcesToAssignments=function(a,b){for(var c=new RadiantQ.Gantt.Model.ResourceAssignmentCollection(null),d=0;d<a.length;d++){var e=a[d];!1==c.ContainsResource(e)&&c.add(new RadiantQ.Gantt.Model.ResourceAssignment(e))}if(!1==this.IsContentEqual(c,b)){e=new RadiantQ.Gantt.Utils.DelayUpdates;b.clear();for(d=0;d<c.length;d++)b.add(c[d]);e.Dispose()}};
RadiantQ.Gantt.ValueConverters.ConverterUtils.IsContentEqual=function(a,b){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!=b[c]||a[c].AllocationUnits!=b[c].AllocationUnits)return!1;return!0};RadiantQ.Gantt.ValueConverters.ConverterUtils.ParseAllocUnitsString=function(a){a=a.trim(" ","[","]","%");var b=100;return b=parseFloat(a)};
RadiantQ.Gantt.ValueConverters.ConverterUtils.AddAssignmentToActivity=function(a,b){var c=a.Assignments,d=a.Model.GanttResources.getResourceByID(b);d&&!1==c.ContainsResource(d)&&c.add(new RadiantQ.Gantt.Model.ResourceAssignment(d))};RadiantQ.Gantt.ValueConverters.ParentViewToIndentConverter={Convert:function(a,b,c){return null==a?0:a+1},ConvertBack:function(){throw Error("Not Implemented");}};
RadiantQ.Gantt.ValueConverters.SortIDAsPredIDConverter={GC:null,Convert:function(a,b,c){if(null==a)return a;b=[];c=[];var d=[],e=this.GC.options.LagStringUnitsInHours;RadiantQ.Gantt.Model.DataBoundGanttModel.ProcessPredecessorString(a,e,b,c,d,[]);a="";if(0<b.length)for(var f=0;f<b.length;f++){var g=this.GC.Model.GetActivityById(b[f]),g=this.CreateDepStringFor(g.SortOrder,c[f],d[f],e);a+=g;a+=","}return a.trimEnd(",")},ConvertBack:function(a,b,c){b=[];c=[];var d=[],e=this.GC.options.LagStringUnitsInHours;
RadiantQ.Gantt.Model.DataBoundGanttModel.ProcessPredecessorString(a.toString(),e,b,c,d,"");a="";if(0<b.length)for(var f=0;f<b.length;f++){var g=this.GetActivityFromSortID(b[f]);null!=g&&(g=this.CreateDepStringFor(g.ID,c[f],d[f],e),a+=g,a+=",")}return a.trimEnd(",")},CreateDepStringFor:function(a,b,c,d){a=a.toString();switch(b){case DependencyType.FinishToFinish:a+="FF";break;case DependencyType.StartToFinish:a+="SF";break;case DependencyType.StartToStart:a+="SS"}c.isGreaterThan(RQTimeSpan.Zero)?a+=
"+"+(c.getTotalHours()/d).toString():c.isLessThan(RQTimeSpan.Zero)&&(a+="-"+(-(c.getTotalHours()/d)).toString());return a},GetActivityFromSortID:function(a){return this.RecursivelyFindSortID(this.GC.Model.Activities,a)},RecursivelyFindSortID:function(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(d.SortOrder==b||null!=d.ChildActivities&&0<d.ChildActivities.length&&(d=this.RecursivelyFindSortID(d.ChildActivities,b),null!=d))return d}return null}};var Model=RadiantQ.Gantt.Model={};
RadiantQ.Gantt.Model.IGanttModel=function(){this.OnPropertyChanged=function(a,b){"Start"==a&&UpdateEnd()};this.GetNewID||(this.GetNewID=function(){});this._lagStringUnitsInHours=null;this.canShiftInProgressTasks=this.autoCalculateSummaryTaskTimes=!1;return this};
RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"LagStringUnitsInHours",{get:function(){return this._lagStringUnitsInHours},set:function(a){this._lagStringUnitsInHours!=a&&(this._lagStringUnitsInHours=a)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"AllActivities",{get:function(){return this._dictActivityById},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,
"Activities",{get:function(){return this._activities},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"Dependencies",{get:function(){return this._dependencies},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"GanttResources",{get:function(){return this._resources},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,
"WorkTimeSchedule",{get:function(){return this._schedule},set:function(a){this._schedule!=a&&(this._schedule=a,this.OnPropertyChanged("WorkTimeSchedule"))},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"EnforceDependencyConstraints",{get:function(){return this.enforceDependencyConstraints},set:function(a){a!=this.enforceDependencyConstraints&&(this.enforceDependencyConstraints=a,this.OnPropertyChanged("EnforceDependencyConstraints",a))},enumerable:!0,
configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"ValidateDependencySetting",{get:function(){return this.validateDependencySetting},set:function(a){a!=this.validateDependencySetting&&(this.validateDependencySetting=a,this.OnPropertyChanged("ValidateDependencySetting",a))},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"AutoCalculateSummaryTaskTimes",{get:function(){return this.autoCalculateSummaryTaskTimes},set:function(a){a!=
this.autoCalculateSummaryTaskTimes&&(this.autoCalculateSummaryTaskTimes=a,this.OnPropertyChanged("AutoCalculateSummaryTaskTimes",a))},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"CanShiftInProgressTasks",{get:function(){return this.canShiftInProgressTasks},set:function(a){a!=this.canShiftInProgressTasks&&(this.canShiftInProgressTasks=a,this.OnPropertyChanged("CanShiftInProgressTasks",a))},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,
"AdjustDurationOnAssignment",{get:function(){return this.adjustDurationOnAssignment},set:function(a){a!=this.adjustDurationOnAssignment&&(this.adjustDurationOnAssignment=a,this.OnPropertyChanged("AdjustDurationOnAssignment",a))},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"CustomProgressCalculation",{get:function(){return this._customProgressCalculation},enumerable:!0,configurable:!0}));
RadiantQ.Gantt.Model.IGanttModel.prototype.GetNewSortOrder=function(){};RadiantQ.Gantt.Model.IGanttModel.prototype.CreateNewActivity=function(a,b){};RadiantQ.Gantt.Model.IGanttModel.prototype.CreateNewDependency=function(a,b,c,d){};RadiantQ.Gantt.Model.IGanttModel.prototype.RemoveActivity=function(a,b){};RadiantQ.Gantt.Model.IGanttModel.prototype.CanAddNewDependency=function(a,b,c){};RadiantQ.Gantt.Model.IGanttModel.prototype.PrepareParenting=function(a,b){};
RadiantQ.Gantt.Model.IGanttModel.prototype.ConvertToValidTimes=function(a,b,c,d){};RadiantQ.Gantt.Model.IGanttModel.prototype.ConvertToValidStartTime=function(a,b,c){};RadiantQ.Gantt.Model.IGanttModel.prototype.GetStart=function(a,b){};RadiantQ.Gantt.Model.IGanttModel.prototype.ApplyPreferredStartTimeOnActivity=function(a,b){};RadiantQ.Gantt.Model.IGanttModel.prototype.AdjustStartTimeWithEffort=function(a,b){};RadiantQ.Gantt.Model.IGanttModel.prototype.AdjustStartTime=function(a,b){};
RadiantQ.Gantt.Model.IGanttModel.prototype.AdjustEffort=function(a,b){};RadiantQ.Gantt.Model.IGanttModel.prototype.ComputeEndTime=function(a){};RadiantQ.Gantt.Model.IGanttModel.prototype.ComputeDuration=function(a){};RadiantQ.Gantt.Model.IGanttModel.prototype.ComputeEffort=function(a,b){};RadiantQ.Gantt.Model.IGanttModel.prototype.ConvertDurationToEffort=function(a,b){};RadiantQ.Gantt.Model.IGanttModel.prototype.UpdateSortOrderFrom=function(a,b){};
RadiantQ.Gantt.Model.IGanttModel.prototype.UpdateSortOrders=function(){};RadiantQ.Gantt.Model.IGanttModel.prototype.GetCriticalActivities=function(a){};RadiantQ.Gantt.Model.IGanttModel.prototype.LevelResources=function(a,b){};RadiantQ.Gantt.Model.IGanttModel.prototype.Filter=function(a){};
RadiantQ.Gantt.Model.IActivity=function(){this.PropertyChanged=new ObjectEvent("PropertyChanged");this.VerticalPositionChanged=new ObjectEvent("VerticalPositionChanged");this._assignments=[];this.propertiesDict=[];this.ChildCollectionChanged=new ObjectEvent("ChildCollectionChanged");this.AdjustStartTimeForConstraints=new ObjectEvent("AdjustStartTimeForConstraints");this.isIActivity=!0;this.id=0;this._sortOrder=-1;this._prefStartTime=this._startTime=Date.MinValue;this._cumEffort=this._effort=RQTimeSpan.Zero;
this._progressPercent=0;this._isMilestone=!1;this._isVisible=this._isExpanded=!0;this._isFilteredOut=!1;this._displayIndex=-1;return this};RadiantQ.Gantt.Model.IActivity.prototype.OnPropertyChanged=function(a,b){this.PropertyChanged.raise(this,{PropertyName:a,Value:b})};RadiantQ.Gantt.Model.IActivity.prototype.OnVerticalPositionChanged=function(){this.VerticalPositionChanged.raise(this,{})};
RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"ID",{get:function(){return this.id},set:function(a){this.id!=a&&(this.id=a,this.OnPropertyChanged("ID",a))},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"ActivityName",{get:function(){return this._name},set:function(a){this._name=a;this.OnPropertyChanged("ActivityName",a)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,
"SortOrder",{get:function(){return this._sortOrder},set:function(a){a&&this._sortOrder!=a&&(this._sortOrder=a,this.OnPropertyChanged("SortOrder",a))},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"StartTime",{get:function(){return this._startTime},set:function(a){this._startTime.equals(a)||(this._startTime=a)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"PreferredStartTime",{get:function(){return null==
this._prefStartTime||void 0==this._prefStartTime?this.Model.ProjectStartDate:this._prefStartTime},set:function(a){if(!(this._prefStartTime&&a&&this._prefStartTime.equals(a))){var b=this._prefStartTime;this._prefStartTime=a;this.OnPropertyChanged("PreferredStartTime",b,a)}},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"Effort",{get:function(){return this._effort},set:function(a){this._effort!=a&&(this._effort=a)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,
"Times",{get:function(){return null==this.Parent?!0:this.Parent.IsExpanded},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"PredecessorIndexString",{get:function(){return this._predecssorIndexString},set:function(a){if(this._predecssorIndexString!=a){var b=this._predecssorIndexString;this._predecssorIndexString=a;this.OnPropertyChanged("PredecessorIndexString",b,a)}},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,
"CumulativeEffort",{get:function(){return this.ChildActivities&&0!=this.ChildActivities.length?this._cumEffort:this.Effort},set:function(a){if(this._cumEffort!=a){var b=this._cumEffort;this._cumEffort=a;this.OnPropertyChanged("CumulativeEffort",b,a)}},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"ProgressPercent",{get:function(){this._progressPercent||(this._progressPercent=0);return this._progressPercent},set:function(a){if(this.ProgressPercent!=
a){0>a&&(a=0);100<a&&(a=100);var b=parseInt(a);this._progressPercent=isNaN(b)?0:b;this.OnPropertyChanged("ProgressPercent",a)}},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"ProgressEndTime",{get:function(){if(this.StartTime==Date.MaxValue||this.StartTime==Date.MinValue||0>=this.ProgressPercent)return this.StartTime;var a=this.GetWorkingHoursTimeSpan(),a=new RQTimeSpan(0,0,this.ProgressPercent/100*a.getTotalMinutes(),0);return Model.BaseGanttModel.ComputeEndTime(this.StartTime,
a,this.Model.WorkTimeSchedule)},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"Description",{get:function(){return this._description},set:function(a){a!=this._description&&(this._description=a,this.OnPropertyChanged("Description",a))},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"Parent",{get:function(){return this._parent},set:function(a){this._parent!=a&&(this._parent=a,this.IsVisible=
this.IsParentExpanded&&this.IsParentVisible,this.OnPropertyChanged("Parent",a))},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"IsMilestone",{get:function(){return this._isMilestone},set:function(a){this._isMilestone!=a&&(this._isMilestone=a,this.OnPropertyChanged("IsMilestone",a))},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"IsExpanded",{get:function(){return this._isExpanded},set:function(a){if(this._isExpanded!=
a){var b=this._isExpanded;this._isExpanded=a;for(var c=0;c<this.ChildActivities.length;c++)this.ChildActivities[c].IsVisible=this.IsExpanded&&this.IsVisible;this.OnPropertyChanged("IsExpanded",b,a)}},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"IsVisible",{get:function(){return this._isVisible&!this._isFilteredOut},set:function(a){if(this._isVisible!=a){this._isVisible=a;for(var b=0;b<this.ChildActivities.length;b++)this.ChildActivities[b].IsVisible=
this.IsExpanded&&this.IsVisible;this.OnPropertyChanged("IsVisible",a)}},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"IsFilteredOut",{get:function(){return this._isFilteredOut},set:function(a){this._isFilteredOut!=a&&(this._isFilteredOut=a,this.OnPropertyChanged("IsFilteredOut",a),this.OnPropertyChanged("IsVisible",a))},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"DisplayIndex",{get:function(){return this._displayIndex},
set:function(a){this._displayIndex!=a&&(this._displayIndex=a,this.OnVerticalPositionChanged(),this.OnPropertyChanged("DisplayIndex",a))},enumerable:!0,configurable:!0}));RadiantQ.Gantt.Model.IActivity.prototype.GetWorkingHoursTimeSpan=function(){};RadiantQ.Gantt.Model.IActivity.prototype.ShiftForwardTo=function(a){};RadiantQ.Gantt.Model.IActivity.prototype.CreateNewChildActivity=function(a){};RadiantQ.Gantt.Model.IActivity.prototype.OnAddedPredecessorDependency=function(a){};
RadiantQ.Gantt.Model.IActivity.prototype.OnRemovedPredecessorDependency=function(a){};RadiantQ.Gantt.Model.IActivity.prototype.IsCritical=function(a,b,c){};RadiantQ.Gantt.Model.IActivityDependency=function(){this.OnPropertyChanged=function(a,b){this.PropertyChanged.raise(this,{PropertyName:a,Value:b})};return this};
RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.Gantt.Model.IActivityDependency.prototype,"FromActivity",{get:function(){return this._fromActivity},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivityDependency.prototype,"ToActivity",{get:function(){return this._toActivity},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivityDependency.prototype,"Type",{get:function(){return this._type},
set:function(a){this._type=a;this.OnPropertyChanged("Type",a)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivityDependency.prototype,"Lag",{get:function(){return this._lag},set:function(a){this._lag=a;this.OnPropertyChanged("Lag",a)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivityDependency.prototype,"Tag",{get:function(){return this._tag},set:function(a){this._tag=a;this.OnPropertyChanged("Tag",a)},enumerable:!0,configurable:!0}));
RadiantQ.Gantt.Model.IActivityDependency.prototype.ComputeLatestToActivityStartTime=function(){};RadiantQ.Gantt.Model.IActivityDependency.prototype.EnsureActivityOrder=function(){};RadiantQ.Gantt.Model.IGanttResource=function(){this.PropertyChanged=new ObjectEvent("PropertyChanged");return this};
RadiantQ.CanUseDefineProperty&&Object.defineProperty(RadiantQ.Gantt.Model.IGanttResource.prototype,"ResourceName",{get:function(){return this._resNamebinder?this._resNamebinder.Value:this._resIDbinder?this._resIDbinder.Value:this._boundObj?this._boundObj.toString():""},set:function(a){this.ResourceName!=a&&null!=this._resNamebinder&&(this._resNamebinder.Value=a)},enumerable:!0,configurable:!0});
RadiantQ.Gantt.Model.Dependency=function(a,b,c,d){RadiantQ.Gantt.Model.IActivityDependency.call(this);RadiantQ.Gantt.Utils.IUIUpdateable.call(this);d||(d=RadiantQ.Gantt.DependencyType.FinishToStart);this.PropertyChanged=new ObjectEvent("PropertyChanged");this.OnPropertyChanged=function(a){null!=this.PropertyChanged&&this.PropertyChanged.raise(this,a);this.MonitorThisChanges(a)};this.PartialUpdate=function(a){this.TotalUpdate()};this.TotalUpdate=function(){this.EnsureActivityOrder()};this.ensuringActivityOrder=
!1;this.Model=null;a&&b&&c&&d&&(this.Model=a,this._fromActivity=b,this._toActivity=c,this.Type=d,this.Lag=RQTimeSpan.Zero,this.FromActivity.PropertyChanged.subscribe(this.Activity_PropertyChanged,this),this.ToActivity.PropertyChanged.subscribe(this.Activity_PropertyChanged,this),this.TryUpdate());return this};RadiantQ.Gantt.Model.Dependency.prototype=new RadiantQ.Gantt.Utils.IUIUpdateable;RadiantQ.Gantt.Model.Dependency.prototype=new RadiantQ.Gantt.Model.IActivityDependency;
RadiantQ.Gantt.Model.Dependency.prototype.ComputeErrorTimeSpan=function(a,b,c,d){var e=RQTimeSpan.Zero;switch(this.Type){case RadiantQ.Gantt.DependencyType.FinishToFinish:e=d-b;break;case RadiantQ.Gantt.DependencyType.StartToFinish:e=d-a;break;case RadiantQ.Gantt.DependencyType.StartToStart:e=c-a;break;default:c.equals(b)||(e=c-b)}return e};
RadiantQ.Gantt.Model.Dependency.prototype.TryUpdate=function(){!1==RadiantQ.Gantt.Model.DataBoundGanttModel.IsBuildingModel&&RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this,null)};RadiantQ.Gantt.Model.Dependency.prototype.MonitorThisChanges=function(a){"Type"!=a&&"Lag"!=a||this.TryUpdate()};
RadiantQ.Gantt.Model.Dependency.prototype.Activity_PropertyChanged=function(a,b){"StartTime"==b.PropertyName||"EndTime"==b.PropertyName?this.TryUpdate():a==this.FromActivity&&"SortOrder"==b.PropertyName&&(this.ToActivity instanceof Model.BaseActivity||!0==this.isBaseActivity)&&this.ToActivity.OnPropertyChanged("PredecessorIndexString")};RadiantQ.Gantt.Model.Dependency.prototype.toString=function(){return this.FromActivity.ActivityName+" / "+this.ToActivity.ActivityName+"; "+this.Type};
RadiantQ.Gantt.Model.Dependency.prototype.Dispose=function(){this.FromActivity.PropertyChanged.unsubscribe(this.Activity_PropertyChanged,this);this.ToActivity.PropertyChanged.unsubscribe(this.Activity_PropertyChanged,this);RadiantQ.Gantt.Utils.DelayUpdateUtil.RemoveUpdates(this);this.Model.ApplyPreferredStartTimeOnActivity(this.ToActivity,this.ToActivity.PreferredStartTime)};
RadiantQ.Gantt.Model.Dependency.prototype.CanMoveActivityTo=function(a,b){if(a==this.ToActivity){var c=Date.MinValue,c=this.Model.ConvertToValidTimes(b,a.Effort,b,c);b=c.adjustedStart;c=c.adjustedEnd;c=this.ComputeErrorTimeSpan(this.FromActivity.StartTime,this.FromActivity.EndTime,b,c);if(c<RQTimeSpan.Zero)return!1;c=this.Model.ConvertToValidStartTime(b-c,this.Lag,a.Effort);if(b<c)return!1}return!0};
RadiantQ.Gantt.Model.Dependency.prototype.ComputeLatestToActivityStartTime=function(){var a=Date.MinValue;switch(this.Type){default:case RadiantQ.Gantt.DependencyType.None:case RadiantQ.Gantt.DependencyType.FinishToStart:return this.Model.ConvertToValidStartTime(this.FromActivity.EndTime,this.Lag,this.ToActivity.Effort);case RadiantQ.Gantt.DependencyType.StartToStart:return this.Model.ConvertToValidStartTime(this.FromActivity.StartTime,this.Lag,this.ToActivity.Effort);case RadiantQ.Gantt.DependencyType.FinishToFinish:return a=
this.Model.GetStart(this.FromActivity.EndTime,this.ToActivity.Effort),this.Model.ConvertToValidStartTime(a,this.Lag,this.ToActivity.Effort);case RadiantQ.Gantt.DependencyType.StartToFinish:return a=this.Model.GetStart(this.FromActivity.StartTime,this.ToActivity.Effort),this.Model.ConvertToValidStartTime(a,this.Lag,this.ToActivity.Effort)}};
RadiantQ.Gantt.Model.Dependency.prototype.EnsureActivityOrder=function(){if(!1!=this.Model.EnforceDependencyConstraints&&!this.ensuringActivityOrder)try{if(this.ensuringActivityOrder=!0,!(!1==this.Model.CanShiftInProgressTasks&&0<this.ToActivity.ProgressPercent)){var a=new RQTimeSpan(this.ComputeErrorTimeSpan(this.FromActivity.StartTime,this.FromActivity.EndTime,this.ToActivity.StartTime,this.ToActivity.EndTime)),b=this.ComputeLatestToActivityStartTime();this.ToActivity.StartTime<b?(a=a.getEqualNegative(),
a.isLessThan(RQTimeSpan.Zero),this.ToActivity.ShiftForwardTo(b)):this.ToActivity.StartTime>b&&!1==RadiantQ.Gantt.Model.DataBoundGanttModel.IsBuildingModel&&this.Model.ApplyPreferredStartTimeOnActivity(this.ToActivity,b)}}finally{this.ensuringActivityOrder=!1}};
RadiantQ.Gantt.Model.DependenciesCollection=function(){this._depByActivities=new RadiantQ.Gantt.Dictionary;this._predsByActivity=new RadiantQ.Gantt.Dictionary;this._succsByActivity=new RadiantQ.Gantt.Dictionary;this._fromActs={};this._toActs={};this._directPredActsByAct={};Array.call(this);this.CollectionChanged=new ObjectEvent("CollectionChanged");this._inCollectionChanged=!1};RadiantQ.Gantt.Model.DependenciesCollection.prototype=[];
RadiantQ.Gantt.Model.DependenciesCollection.prototype.add=function(a){this.push(a);this.updatePredsAndSuccessors(a);this.updateBaseActsAndDepActsCollection(a);this.OnCollectionChanged(new RadiantQ.Gantt.NotifyCollectionChangedEventArgs(null,a))};
RadiantQ.Gantt.Model.DependenciesCollection.prototype.updatePredsAndSuccessors=function(a,b){var c=this._predsByActivity[a.ToActivity.ID],d=this._succsByActivity[a.FromActivity.ID];if(b){if(c&&1<c.length){var e=c.indexOf(a);-1!=e&&c.splice(e,1)}else this._predsByActivity.Remove(a.ToActivity);d&&1<d.length?(e=d.indexOf(a),-1!=e&&d.splice(e,1)):this._succsByActivity.Remove(a.FromActivity)}else c||(c=[],this._predsByActivity.Add(a.ToActivity,c)),c.push(a),d||(d=[],this._succsByActivity.Add(a.FromActivity,
d)),d.push(a)};
RadiantQ.Gantt.Model.DependenciesCollection.prototype.updateFromAndToActs=function(a,b){var c=a.ID,d=b.ID,e=this._fromActs[c];e?void 0!=e._repeatingCnt[d]?e._repeatingCnt[d]++:(e.push(b),e._repeatingCnt[d]=0):(this._fromActs[c]=[b],this._fromActs[c]._repeatingCnt={},this._fromActs[c]._repeatingCnt[d]=0);(e=this._toActs[d])?void 0!=e._repeatingCnt[c]?e._repeatingCnt[c]++:(e.push(a),e._repeatingCnt[c]=0):(this._toActs[d]=[a],this._toActs[d]._repeatingCnt={},this._toActs[d]._repeatingCnt[c]=0)};
RadiantQ.Gantt.Model.DependenciesCollection.prototype.updateBaseActsAndDepActsCollection=function(a){var b=a.FromActivity;a=a.ToActivity;var c=b.ID,d=a.ID,e=this._directPredActsByAct[c];e?e.push(a):this._directPredActsByAct[c]=[a];this.updateFromAndToActs(b,a);c=this._toActs[c];d=this._fromActs[d];if(c)for(e=0;e<c.length;e++){if(this.updateFromAndToActs(c[e],a),d)for(var f=0;f<d.length;f++)this.updateFromAndToActs(b,d[f]),this.updateFromAndToActs(c[e],d[f])}else if(d)for(f=0;f<d.length;f++)this.updateFromAndToActs(b,
d[f])};RadiantQ.Gantt.Model.DependenciesCollection.prototype.remove=function(a){if(a instanceof Model.IActivity)return this.removeDependenciesOf(a);this.OnCollectionChanged(new RadiantQ.Gantt.NotifyCollectionChangedEventArgs(a,null))};RadiantQ.Gantt.Model.DependenciesCollection.prototype.removeDependenciesOf=function(a){a&&a instanceof Model.IActivity&&this.OnCollectionChanged(new RadiantQ.Gantt.NotifyCollectionChangedEventArgs(this._depByActivities[a.ID],null))};
RadiantQ.Gantt.Model.DependenciesCollection.prototype.removeBaseActsAndDepActsCollection=function(a){var b=a.FromActivity;a=a.ToActivity;var c=b.ID,d=a.ID,e=this._directPredActsByAct[b.ID];if(1<e.length){var f=e.indexOf(a);e.splice(f,1)}else delete this._directPredActsByAct[b.ID];var e=this._toActs[c],g=this._fromActs[d];if(e)for(var h=0;h<e.length;h++){var k=e[h].ID;0==this._fromActs[k]._repeatingCnt[d]?1<this._fromActs[k].length?(delete this._fromActs[k]._repeatingCnt[d],f=this._fromActs[k].indexOf(a),
this._fromActs[k].splice(f,1)):delete this._fromActs[k]:0<this._fromActs[k]._repeatingCnt[d]&&this._fromActs[k]._repeatingCnt[d]--;0==this._toActs[d]._repeatingCnt[k]?1<this._toActs[d].length?(delete this._toActs[d]._repeatingCnt[k],f=this._toActs[d].indexOf(e[h]),this._toActs[d].splice(f,1)):delete this._toActs[d]:0<this._toActs[d]._repeatingCnt[k]&&this._toActs[d]._repeatingCnt[k]--;if(g)for(var l=0;l<g.length;l++){var n=g[l].ID;0==this._fromActs[c]._repeatingCnt[n]?1<this._fromActs[c].length?(delete this._fromActs[c]._repeatingCnt[n],
f=this._fromActs[c].indexOf(g[l]),this._fromActs[c].splice(f,1)):delete this._fromActs[c]:0<this._fromActs[c]._repeatingCnt[n]&&this._fromActs[c]._repeatingCnt[n]--;0==this._toActs[n]._repeatingCnt[c]?1<this._toActs[n].length?(delete this._toActs[n]._repeatingCnt[c],f=this._toActs[n].indexOf(b),this._toActs[n].splice(f,1)):delete this._toActs[n]:0<this._toActs[n]._repeatingCnt[c]&&this._toActs[n]._repeatingCnt[c]--;0==this._fromActs[k]._repeatingCnt[n]?1<this._fromActs[k].length?(delete this._fromActs[k]._repeatingCnt[n],
f=this._fromActs[k].indexOf(g[l]),this._fromActs[k].splice(f,1)):delete this._fromActs[k]:0<this._fromActs[k]._repeatingCnt[n]&&this._fromActs[k]._repeatingCnt[n]--;0==this._toActs[n]._repeatingCnt[k]?1<this._toActs[n].length?(delete this._toActs[n]._repeatingCnt[k],f=this._toActs[n].indexOf(e[h]),this._toActs[n].splice(f,1)):delete this._toActs[n]:0<this._toActs[n]._repeatingCnt[k]&&this._toActs[n]._repeatingCnt[k]--}}else if(g)for(l=0;l<g.length;l++)n=g[l].ID,0==this._fromActs[c]._repeatingCnt[n]?
1<this._fromActs[c].length?(delete this._fromActs[c]._repeatingCnt[n],f=this._fromActs[c].indexOf(g[l]),this._fromActs[c].splice(f,1)):delete this._fromActs[c]:0<this._fromActs[c]._repeatingCnt[n]&&this._fromActs[c]._repeatingCnt[n]--,0==this._toActs[n]._repeatingCnt[c]?1<this._toActs[n].length?(delete this._toActs[n]._repeatingCnt[c],f=this._toActs[n].indexOf(b),this._toActs[n].splice(f,1)):delete this._toActs[n]:0<this._toActs[n]._repeatingCnt[c]&&this._toActs[n]._repeatingCnt[c]--;e=this._fromActs[c];
g=this._toActs[d];e&&(0==e._repeatingCnt[d]?(delete e._repeatingCnt[d],f=e.indexOf(a),e.splice(f,1)):0<e._repeatingCnt[d]&&e._repeatingCnt[d]--,0==e.length&&delete this._fromActs[c]);g&&(0==g._repeatingCnt[c]?(delete g._repeatingCnt[c],f=g.indexOf(b),g.splice(f,1)):0<g._repeatingCnt[c]&&g._repeatingCnt[c]--,0==g.length&&delete this._toActs[d])};RadiantQ.Gantt.Model.DependenciesCollection.prototype.contains=function(a){return this._depByActivities.Contains(a)};
RadiantQ.Gantt.Model.DependenciesCollection.prototype.ClearItems=function(){for(var a=0;a<this.length;a++)this[a].Dispose();this.splice(0,this.length);this._depByActivities=new RadiantQ.Gantt.Dictionary};RadiantQ.Gantt.Model.DependenciesCollection.prototype.GetDependenciesByActivity=function(a){return this._depByActivities[a.ID]};RadiantQ.Gantt.Model.DependenciesCollection.prototype.GetDepenedenciesByIndex=function(a){return a<this.length?this._depByActivities.GetItemByIndex(a):null};
RadiantQ.Gantt.Model.DependenciesCollection.prototype.OnCollectionChanged=function(a){if(null!=a.OldItems)for(var b=0;b<a.OldItems.length;b++){var c=a.OldItems[b];this.UnsubscribeToChildEvents(c);this.ClearDependencyCacheInfo(c);this.removeBaseActsAndDepActsCollection(c);this.updatePredsAndSuccessors(c,!0);c.Dispose()}if(null!=a.NewItems)for(b=0;b<a.NewItems.length;b++)c=a.NewItems[b],this.CacheDependencyInfo(c),this.SubscribeToChildEvents(c);try{this._inCollectionChanged=!0,this.CollectionChanged&&
this.CollectionChanged.raise(this,a)}finally{this._inCollectionChanged=!1}};RadiantQ.Gantt.Model.DependenciesCollection.prototype.SubscribeToChildEvents=function(a){};RadiantQ.Gantt.Model.DependenciesCollection.prototype.UnsubscribeToChildEvents=function(a){};RadiantQ.Gantt.Model.DependenciesCollection.prototype.SetItem=function(a,b){this.ClearDependencyCacheInfo(this[a]);this[a].Dispose();this.CacheDependencyInfo(this[a])};
RadiantQ.Gantt.Model.DependenciesCollection.prototype.CacheDependencyInfo=function(a){var b=a.FromActivity,c=a.ToActivity,d=this._depByActivities[b.ID];if(d){if(d.containsValue(a))return;d.push(a)}else this._depByActivities.Add(b,Array(a));(d=this._depByActivities[c.ID])?d.containsValue(a)||d.push(a):this._depByActivities.Add(c,Array(a))};
RadiantQ.Gantt.Model.DependenciesCollection.prototype.ClearDependencyCacheInfo=function(a){var b=a.FromActivity,c=a.ToActivity,d=this._depByActivities[b.ID];if(d){var e=d.indexOf(a);d.splice(e,1)}0==d.length&&this._depByActivities.Remove(b);if(d=this._depByActivities[c.ID])e=d.indexOf(a),d.splice(e,1);0==d.length&&this._depByActivities.Remove(c);e=this.indexOf(a);this.splice(e,1)};
RadiantQ.Gantt.Model.DependenciesCollection.prototype.IsActivityFinishDependentOnAnother=function(a){var b=this._depByActivities[a.ID];if(b)for(var c=0;c<b.length;c++){var d=b[c];if(d.ToActivity==a&&(d.Type==RadiantQ.Gantt.DependencyType.FinishToFinish||d.Type==RadiantQ.Gantt.DependencyType.StartToFinish))return!0}return!1};RadiantQ.Gantt.Model.DependenciesCollection.prototype.DoesDependencyExist=function(a,b,c){return this.DoesConstraintExist(a,b,c)||this.DoesConstraintExist(b,a,c)?!0:!1};
RadiantQ.Gantt.Model.DependenciesCollection.prototype.DoesConstraintExist=function(a,b,c){if(0==this.length)return!1;var d=this._predsByActivity[b.ID];if(c){if(d){if((c=this._directPredActsByAct[a.ID])&&-1!=c.indexOf(b))return!0;for(b=0;b<d.length;b++)if(d[b].FromActivity==a)return!0}}else{if((d=this._fromActs[a.ID])&&-1!=d.indexOf(b)||(d=this._toActs[b.ID])&&-1!=d.indexOf(a))return!0;if(a.Parent){if(b.Parent){if((d=this.DoesConstraintExist(a.Parent,b,c))||(d=this.DoesConstraintExist(a,b.Parent,c)))return!0;
d=this.DoesConstraintExist(a.Parent,b.Parent,c)}else d=this.DoesConstraintExist(a.Parent,b,c);if(d)return!0}else if(b.Parent&&(d=this.DoesConstraintExist(a,b.Parent,c)))return!0}return!1};RadiantQ.Gantt.Model.DependenciesCollection.prototype.ClearDependencies=function(a){a=(this._predsByActivity[a.ID]||[]).slice();for(var b=0;b<a.length;b++)this.remove(a[b])};RadiantQ.Gantt.Model.DependenciesCollection.prototype.GetPredecessors=function(a){return(a=this._predsByActivity[a.ID])?a:[]};
RadiantQ.Gantt.Model.DependenciesCollection.prototype.GetSuccessors=function(a){return(a=this._succsByActivity[a.ID])?a:[]};function OrderedDependencyList(a){this._dict=new RadiantQ.Gantt.Dictionary;this._cachedItem={};this.last=this.first=null;if(a){this._deps=a;for(var b=0;b<a.length;b++)this.ProcessDependency(a[b])}this.GetEnumerator=function(){return new MyEnumerator(this)};return this}
OrderedDependencyList.prototype.ProcessDependency=function(a){this._cachedItem={};var b=this._dict[a.FromActivity.ID],c=this._dict[a.ToActivity.ID];if(null==b)if(null==c){var d=new DepTreeItem(a.FromActivity);this._dict.Add(a.FromActivity,d);this.Append(d);d=new DepTreeItem(a.ToActivity);this._dict.Add(a.ToActivity,d);this.Append(d)}else d=new DepTreeItem(a.FromActivity),this._dict.Add(a.FromActivity,d),this.InsertBefore(d,c);else if(null==c)d=new DepTreeItem(a.ToActivity),this._dict.Add(a.ToActivity,
d),this.InsertAfter(d,b);else if(c.Index<b.Index)for(this.InsertBefore(b,c),b=this._deps.GetPredecessors(b.Activity),c=0;c<b.length;c++)d=b[c],d!=a&&this.ProcessDependency(d)};
OrderedDependencyList.prototype.InsertBefore=function(a,b){null!=a.Previous&&(a.Previous.Next=a.Next);null!=a.Next&&(a.Next.Previous=a.Previous);a==this.last&&(this.last=a.Previous);a.Next=b;a.Previous=b.Previous;null!=b.Previous&&(b.Previous.Next=a);b.Previous=a;null!=a.Previous?a.Index=a.Previous.Index+1:(this.first=a,a.Index=0)};
OrderedDependencyList.prototype.InsertAfter=function(a,b){a.Next=b.Next;a.Previous=b;null!=b.Next&&(b.Next.Previous=a);b.Next=a;null==a.Next&&(this.last=a);a.Index=a.Previous.Index+1};OrderedDependencyList.prototype.Append=function(a){null==this.first?(this.first=this.last=a,a.Index=0):(this.last.Next=a,a.Previous=this.last,a.Index=this.last.Index+1,this.last=a)};
OrderedDependencyList.prototype.GetItemByIndex=function(a){for(var b=0;b<this._dict.asArray.length;b++){var c=this._dict.asArray[b];if(this._cachedItem[a])return this._cachedItem[a];this._cachedItem[c._index]=c;if(c._index===a)return c}return null};RadiantQ.CanUseDefineProperty&&Object.defineProperty(OrderedDependencyList.prototype,"length",{get:function(){return this._dict.length},set:function(){},configurable:!0});
function DepTreeItem(a){this.Next=this.Previous=null;this.Activity=a;this._index=-1;return this}RadiantQ.CanUseDefineProperty&&Object.defineProperty(DepTreeItem.prototype,"Index",{get:function(){return this._index},set:function(a){this._index!==a&&(this._index=a,null!=this.Next&&(this.Next.Index=this._index+1))},enumerable:!0,configurable:!0});function MyEnumerator(a){this._list=a;this.current=null;return this}
RadiantQ.CanUseDefineProperty&&Object.defineProperty(MyEnumerator.prototype,"Current",{get:function(){return this.current.Activity},set:function(){},enumerable:!0,configurable:!0});MyEnumerator.prototype.MoveNext=function(){this.current=null==this.current?this._list.first:this.current.Next;return null!=this.current};MyEnumerator.prototype.Reset=function(){this.current=null};var Model=RadiantQ.Gantt.Model,DependencyType=RadiantQ.Gantt.DependencyType;
Model.BaseGanttModel=function(a){this.isBaseGanttModel=!0;Model.IGanttModel.call(this);Model.BaseGanttModel.IdCounter=1;this.topID=-1;this.ResourceCapacityProvider=this.EnforceDependencyConstraints=this.AdjustDurationOnAssignment=null;this.GetActivityById=function(a){return this._dictActivityById.GetItemByKey(a)};this._topSortOrder=0;this.BeforeEffortChanging=new ObjectEvent("BeforeEffortChanging");this.PropertyChanged=new ObjectEvent("PropertyChanged");this.NewActivityAdded=new ObjectEvent("NewActivityAdded");
this.ActivityEventHandler=new ObjectEvent("ActivityEventHandler");this.ActivityRemoved=new ObjectEvent("ActivityRemoved");this.BeforeStartTimeChanging=new ObjectEvent("BeforeStartTimeChanging");this._dictActivityById=new RadiantQ.Gantt.Dictionary;if(this)return this.AdjustDurationOnAssignment=this.CanShiftInProgressTasks=this.AutoCalculateSummaryTaskTimes=this.EnforceDependencyConstraints=this.ValidateDependencySetting=!0,this.LagStringUnitsInHours=1,this._dictActivityById=new RadiantQ.Gantt.Dictionary,
this._activities=this.CreateActivitiesCollection(),this._dependencies=new RadiantQ.Gantt.Model.DependenciesCollection,this._resources=new Model.GanttResourcesCollection,this._activities.ChildCollectionChanged.subscribe(this.actitivites_ChildCollectionChanged,this),this._activities.CollectionChanged.subscribe(this.actitivites_ChildCollectionChanged,this),this._dependencies.CollectionChanged.subscribe(this._dependencies_CollectionChanged,this),this.WorkTimeSchedule=a,this};
Model.BaseGanttModel.prototype=new Model.IGanttModel;RadiantQ.CanUseDefineProperty&&Object.defineProperty(Model.BaseGanttModel.prototype,"ActivitiesCount",{get:function(){return this._dictActivityById.length},set:function(){},enumerable:!0,configurable:!0});RadiantQ.Gantt.addMethod(Model.BaseGanttModel.prototype,"UpdateSortOrderFrom",function(a){0<this.Activities.length&&this.UpdateSortOrderFrom(this.Activities[0],1)});
RadiantQ.Gantt.addMethod(Model.BaseGanttModel.prototype,"UpdateSortOrderFrom",function(a,b){for(var c=null!=a.Parent?a.Parent.ChildActivities:this.Activities,d=c.indexOf(a);d<c.length;d++)0>d&&(d=0),c[d].SortOrder=b,b++,0<c[d].ChildActivities.length&&(b=this.UpdateSortOrderFrom(c[d].ChildActivities[0],b));return b});
RadiantQ.CanUseDefineProperty&&(Object.defineProperty(Model.BaseGanttModel.prototype,"ActivityById",{get:function(){return this._dictActivityById},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(Model.BaseGanttModel.prototype,"ResourceAssignmentTracker",{get:function(){this._resourceAssignmentTracker||(this._resourceAssignmentTracker=this.CreateResourceAssignmentTracker(this));return this._resourceAssignmentTracker},set:function(){},enumerable:!0,configurable:!0}));
Model.BaseGanttModel.prototype._depTestResults=new RadiantQ.Gantt.Dictionary;Model.BaseGanttModel.prototype._depInParents=new RadiantQ.Gantt.Dictionary;RadiantQ.CanUseDefineProperty&&Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"CustomProgressCalculation",{get:function(){return this._customProgressCalculation},enumerable:!0,configurable:!0});
Model.BaseGanttModel.prototype._dependencies_CollectionChanged=function(a,b){if(null!=b.OldItems)for(var c=0;c<b.OldItems.length;c++){var d=b.OldItems[c];d.ToActivity.OnRemovedPredecessorDependency(d)}if(null!=b.NewItems)for(c=0;c<b.NewItems.length;c++)d=b.NewItems[c],d.ToActivity.OnAddedPredecessorDependency(d)};
Model.BaseGanttModel.prototype.GetPredecessorsHierarchy=function(a){var b=[];a=this.Dependencies.GetPredecessors(a);for(var c=0;c<a.length;c++)dep=a[c],this.AddActivityHierarchyToList(b,dep.FromActivity);return b};Model.BaseGanttModel.prototype.AddActivityHierarchyToList=function(a,b){if(0==b.ChildActivities.length)a.containsValue(b)||a.push(b);else for(var c=0;c<b.ChildActivities.length;c++)this.AddActivityHierarchyToList(a,b.ChildActivities[c])};
Model.BaseGanttModel.prototype.GetResourcesDictionary=function(a){for(var b=new RadiantQ.Gantt.Dictionary,c=0;c<a.Assignments.length;c++){var d=a.Assignments[c];b.Add(d.Resource,d.AllocationUnits)}return b};
Model.BaseGanttModel.prototype.GetActivitiesWithConflictingAssignments=function(){var a=[];if(0<this.AllActivities.length){for(var b=new RadiantQ.Gantt.Dictionary,c=0;c<this.AllActivities.length;c++){var d=this.AllActivities[c];if(0==d.ChildActivities.length&&null!=d.Assignments&&0!=d.Assignments.length)for(var e=0;e<d.Assignments.length;e++){var f=d.Assignments[e],g=b.GetItemByKey(f.Resource);g||(g=[],b.Add(f.Resource,g));g.push(d)}}for(d=0;d<b.Keys.length;d++)for(f=b.GetItemByKey(b.Keys[c]),c=0;c<
f.length-1;){for(var g=!1,h=f[c],k=new TimePeriod(h.StartTime,h.EndTime),e=c+1;e<f.length;){var l=f[e],n=new TimePeriod(l.StartTime,l.EndTime),n=k.Intersect(n);null!=n&&n.Value.Duration>RQTimeSpan.Zero?(g=!0,a.push(l),f.RemoveAt(e)):e++}g?(a.push(h),f.RemoveAt(c)):c++}}return a};
var GetEndTimeForAssignmentInActivity=Model.BaseGanttModel.GetEndTimeForAssignmentInActivity=function(a,b,c,d){if(b.equals(RQTimeSpan.Zero))return a.StartTime;b=b.Ticks/a.Assignments.length;b*=100/c.AllocationUnits;c=null==c.Resource.Schedule?d:c.Resource.Schedule;return null!=c?c.GetEnd(a.StartTime,RQTimeSpan.fromTicks(b)):a.StartTime.addTimeSpan(RQTimeSpan.fromTicks(b))};
Model.BaseGanttModel.prototype.OnBeforeEffortChanging=function(a,b){if(this.BeforeEffortChanging&&0<this.BeforeEffortChanging.fn.length){var c=new Model.BeforeEffortChangingEventArgs(a,b);this.BeforeEffortChanging.raise(this,c);return c.NewEffort}return b};var ConvertEffortToDuration=Model.BaseGanttModel.ConvertEffortToDuration=function(a,b,c,d){if(!1==c||0==a.Assignments.length)return b;for(d=c=0;d<a.Assignments.length;d++)c+=a.Assignments[d].AllocationUnits;a=Math.ceil(b.Ticks/(c/100));return RQTimeSpan.fromTicks(a)};
Model.BaseGanttModel.prototype.OnBeforeStartTimeChanging=function(a,b){if(this.BeforeStartTimeChanging&&0<this.BeforeStartTimeChanging.fn.length){var c=new Model.BeforeStartTimeChangingEventArgs(a,b);this.BeforeStartTimeChanging.raise(this,c);return c.NewStartTime}return b};
Model.BaseGanttModel.prototype.actitivites_ChildCollectionChanged=function(a,b){if(null!=b.NewItems)for(var c=0;c<b.NewItems.length;c++){var d=b.NewItems[c];(a instanceof RadiantQ.Gantt.Model.IActivity||a.isIActivity)&&this.RemoveAnyParentChildDependencies(a,d);this.RecursivelyRegisterActivities(d)}else if(null!=b.OldItems)for(c=0;c<b.OldItems.length;c++)d=b.OldItems[c],this.RecursivelyUnRegisterActivities(d)};
Model.BaseGanttModel.prototype.RemoveActivity=function(a,b){this.RecursivelyClearDependencies(b);null!=a?a.ChildActivities.remove(b):this.Activities.remove(b);this.OnActivityRemoved(new Model.ActivityEventArgs(b))};Model.BaseGanttModel.prototype.RecursivelyClearDependencies=function(a){var b=this._dependencies.GetDependenciesByActivity(a);if(null!=b)for(var c=b.length-1;0<=c;c--)this.Dependencies.remove(b[c]);for(c=0;c<a.ChildActivities.length;c++)this.RecursivelyClearDependencies(a.ChildActivities[c])};
Model.BaseGanttModel.prototype.RecursivelyRegisterActivities=function(a){var b=this._dictActivityById.GetItemByKey(a.ID);if(null!=b&&b!=a)throw Error("A new activity () with the ID ("+a.ID+") same as another activity ("+b.ActivityName+") was added. This is not supported.");this._dictActivityById.Add(a.ID,a);this.topID<a.ID&&(this.topID=a.ID);for(b=0;b<a.ChildActivities.length;b++)this.RecursivelyRegisterActivities(a.ChildActivities[b])};
Model.BaseGanttModel.prototype.RecursivelyUnRegisterActivities=function(a){var b=null;this._dictActivityById.Contains(a.ID)&&(b=this.GetActivityById(a.ID));null!=b&&b==a&&this._dictActivityById.Remove(a.ID);for(b=0;b<a.ChildActivities.length;b++)this.RecursivelyUnRegisterActivities(a.ChildActivities[b])};
Model.BaseGanttModel.prototype.RemoveAnyParentChildDependencies=function(a,b){var c=this._dependencies.GetDependenciesByActivity(b);if(null!=c)for(var d=c.length-1;0<=d;d--){var e=c[d];e.FromActivity!=a&&e.ToActivity!=a||this.Dependencies.remove(e)}for(d=0;d<b.ChildActivities.length;d++)this.RemoveAnyParentChildDependencies(a,b.ChildActivities[d])};
Model.BaseGanttModel.prototype.CreateNewDependencyInternal=function(a,b,c,d,e){!1==e&&!1==this.CanAddNewDependency(a,b,Model.NewDependencyAddScenarioType.None)&&(e="Cannot add a dependency between activities "+a.ActivityName+" and "+b.ActivityName+". They are either already directly or indirectly dependent or one of them is, directly or indirectly, a summary task of another. Use the Model.CanAddNewDependency method to determine if dependencies can be added between two tasks, before adding a new dependency.",
window.console&&console.log(e));try{var f=new RadiantQ.Gantt.Utils.DelayUpdates,g=new RadiantQ.Gantt.Model.Dependency(this,a,b,c);g.Lag=d;this.Dependencies.add(g);return g}finally{f.Dispose()}};
Model.BaseGanttModel.prototype.RemoveDependenciesLeadingTo=function(a,b){if(a.ToActivity==b)this.Dependencies.remove(a);else{for(var c=this.Dependencies.GetSuccessors(a.ToActivity),d=0;d<c.length;d++)this.RemoveDependenciesLeadingTo(c[d],b);for(d=0;d<a.ToActivity.ChildActivities.length;d++){c=a.ToActivity.ChildActivities[d];if(this.IsAncestor(c,b)){this.Dependencies.Remove(a);break}for(var c=this.Dependencies.GetSuccessors(c),e=0;e<c.length;e++)this.RemoveDependenciesLeadingTo(c[e],b)}for(d=0;d<b.ChildActivities.length;d++)c=
b.ChildActivities[d],this.RemoveDependenciesLeadingTo(a,c)}};Model.BaseGanttModel.prototype.InitDepResultsCache=function(){this._depTestResults=new RadiantQ.Gantt.Dictionary};Model.BaseGanttModel.prototype.ClearDepResultsCache=function(){this._depTestResults.Clear();this._depTestResults=new RadiantQ.Gantt.Dictionary};Model.BaseGanttModel.prototype.AddToDepResultsCache=function(a,b){this._depTestResults.Add(a.ID+"+"+b.ID,!0)};
Model.BaseGanttModel.prototype.IsInDepResultsCache=function(a,b){return this._depTestResults.Contains(a.ID+"+"+b.ID)?!0:!1};Model.BaseGanttModel.prototype.InitDepInParentsResultsCache=function(){this._depInParents=new RadiantQ.Gantt.Dictionary};Model.BaseGanttModel.prototype.ClearDepInParentsResultsCache=function(){this._depInParents.Clear();this._depInParents=null};Model.BaseGanttModel.prototype.AddToDepInParentsResultsCache=function(a,b){this._depInParents.Add(a.ID+"+"+b.ID,!0)};
Model.BaseGanttModel.prototype.IsInDepInParentsResultsCache=function(a,b){return this._depInParents.Contains(a.ID+"+"+b.ID)?!0:!1};
Model.BaseGanttModel.prototype.CanAddNewDependencyRecursive=function(a,b,c){function d(a,b){if(g[b.ID]&&g.Dependencies==a)return g[b.ID];for(var c=[],e=a._fromActs[b.ID]||[],f=0;f<e.length;f++){var h=e[f];if(h.ChildActivities.length)for(var k=0;k<h.ChildActivities.length;k++)var l=d(a,h.ChildActivities[k]),c=c.concat(l);c.push(h)}return g[b.ID]=c}function e(a){for(var b=[];a.Parent;)a=a.Parent,b.push(a);return b.reverse()}function f(a){if(h[a.ID])return h[a.ID];for(var b=[],c=0;c<a.ChildActivities.length;c++){var d=
a.ChildActivities[c];b.push(d);d=f(d);b=b.concat(d)}return h[a.ID]=b}if(!1==this.ValidateDependencySetting)return!0;if(0==c)this.InitDepResultsCache();else if(this.IsInDepResultsCache(a,b))return!0;if(this.IsAncestor(a,b)||this.IsAncestor(b,a))return!1;var g={Dependencies:this._dependencies},h={};if(function(a,b){var c=this._fromActs[a.ID];return c&&-1!=c.indexOf(b)?!0:(c=this._toActs[b.ID])&&-1!=c.indexOf(a)?!0:!1}.call(this._dependencies,b,a))return!1;var k=a.Parent,l=b.Parent;k&&l&&k==l?(k=a,l=
b):(k=a.Parent?e(a)[0]:a,l=b.Parent&&b.Parent!=a.Parent?e(b)[0]:b);fromChilds=f(k);toChilds=f(l);var n=d(this._dependencies,b);if(-1!=n.indexOf(a)||-1!=n.indexOf(k))return!1;l=d(this._dependencies,l);if(-1!=l.indexOf(a)||-1!=l.indexOf(k))return!1;if(fromChilds.length&&fromChilds!=toChilds)for(var p=0;p<fromChilds.length;p++){var m=fromChilds[p];if(-1!=n.indexOf(m)||-1!=l.indexOf(m))return!1;for(var q=0;q<toChilds.length;q++){var r=toChilds[q];if(m!=r&&(r=d(this._dependencies,r),-1!=r.indexOf(a)||
-1!=r.indexOf(k)||-1!=r.indexOf(m)))return!1}}else for(toChilds=f(b),p=0;p<toChilds.length;p++)if(r=toChilds[p],r=d(this._dependencies,r),-1!=r.indexOf(a)||-1!=r.indexOf(k))return!1;this.AddToDepResultsCache(a,b);0==c&&this.ClearDepResultsCache();return!0};
Model.BaseGanttModel.prototype.HasDependencyInParentsRecursive=function(a,b,c,d){if(0==d)this.InitDepInParentsResultsCache();else if(this.IsInDepInParentsResultsCache(a,b))return!1;if(0==this.Dependencies.length)return!1;if(c&&this.Dependencies.DoesDependencyExist(a,b,!0)||null!=a.Parent&&void 0!=a.Parent&&this.HasDependencyInParentsRecursive(a.Parent,b,!0,d+1)||null!=b.Parent&&void 0!=b.Parent&&this.HasDependencyInParentsRecursive(a,b.Parent,!0,d+1))return!0;this.AddToDepInParentsResultsCache(a,
b);return!1};Model.BaseGanttModel.prototype.OnNewActivityAdded=function(a){null!=this.NewActivityAdded&&this.NewActivityAdded.raise(this,a)};Model.BaseGanttModel.prototype.OnActivityRemoved=function(a){null!=this.ActivityRemoved&&this.ActivityRemoved.raise(this,a)};Model.BaseGanttModel.prototype.OnPropertyChanged=function(a,b){null!=this.PropertyChanged&&this.PropertyChanged.raise(this,{propertyName:a,value:b})};Model.BaseGanttModel.prototype.CreateResourceAssignmentTracker=function(a){return new Model.ResourceAssignmentTracker(a)};
Model.BaseGanttModel.prototype.CreateActivitiesCollection=function(){return new Model.ActivitiesCollection(null,this)};Model.BaseGanttModel.prototype.GetActivityById=function(a){return this._dictActivityById.ContainsKey(a)?this._dictActivityById[a]:null};
Model.BaseGanttModel.prototype.Dispose=function(){for(var a=0;a<this.AllActivities.length;a++)this.AllActivities.asArray[a].Dispose();this._dictActivityById=new RadiantQ.Gantt.Dictionary;this._activities&&(this._activities.ChildCollectionChanged.unsubscribe(this.activities_ChildCollectionChanged,this),this._activities.CollectionChanged.unsubscribe(this.activities_ChildCollectionChanged,this));this._resources=this._dependencies=this._activities=null};
Model.BaseGanttModel.prototype.GetCriticalActivities=function(a){for(var b=Date.MinValue,c=this.AllActivities._collections,d=0;d<c.length;d++){var e=c[d].value;e.EndTime>b&&(b=e.EndTime)}for(var f=[],d=0;d<c.length;d++)e=c[d].value,e.IsCritical(b,a,null)&&f.push(e);return f};
Model.BaseGanttModel.prototype.LevelResources=function(a,b){if(0<this.AllActivities.length){for(var c=new RadiantQ.Gantt.Dictionary,d=new RadiantQ.Gantt.Dictionary,e=0;e<this.AllActivities.length;e++)k=this.AllActivities.GetItemByIndex(e),0==k.ChildActivities.length&&null!=k.Assignments&&0!=k.Assignments.length&&(c.Add(k,this.GetPredecessorsHierarchy(k)),d.Add(k,this.GetResourcesDictionary(k)));for(var f=new RadiantQ.Gantt.Dictionary,e=c.length;0<e;e=c.length){for(var g=[],h=0;h<c.length;h++){for(var k=
c._collections[h].key,l=!0,n=c.GetItemByKey(k),p=0;p<n.length;p++){var m=n[p];if(c.Contains(m)&&!g.containsValue(m)){l=!1;break}}if(l){l=b;n=d.GetItemByKey(k);for(p=0;p<n.length;p++){var m=n._collections[p],q=m.key,r=m.value,s=f.GetItemByKey(q);if(s)for(m=0;m<s.length;m++){var t=s._collections[m],t=t.key,u=this.GetResourceCapacity(q);t+r>u&&(t=s.GetItemByKey(t),t.isGreaterThan(l)&&(l=t))}}!a&&0!=k.ProgressPercent||l==k.StartTime||(k.PreferredStartTime=l,k.StartTime=l);for(p=0;p<n.length;p++){m=n._collections[p];
q=m.key;t=m.value;f.Contains(q)||f.Add(q,new RadiantQ.Gantt.Dictionary);r=f.GetItemByKey(q);s=new RadiantQ.Gantt.Dictionary;u=this.AdjustDurationOnAssignment?Model.BaseGanttModel.GetEndTimeForAssignmentInActivity(k,k.Effort,k.Assignments.GetAssignmentForResource(q),this.WorkTimeSchedule):k.EndTime;s.Add(t,u);for(m=0;m<r.length;m++){var q=r._collections[m].key,y=r.GetItemByKey(q);y.isGreaterThan(l)&&(y.isLessThan(u)?s.Add(q+t,y):s.Add(q+t,u))}for(m=0;m<s.length;m++)t=s._collections[m],q=t.key,t=t.value,
u=r.indexOf(q),-1==u?r.Add(q,t):t>r._collections[u].value&&(r._collections[u].value=t)}g.push(k)}}for(m=0;m<g.length;m++)c.Remove(g[m]);if(c.length==e)break}}};Model.BaseGanttModel.prototype.GetResourceCapacity=function(a){return this.ResourceCapacityProvider?this.ResourceCapacityProvider(a):100};
Model.BaseGanttModel.prototype.ConvertToValidTimes=function(a,b,c,d){b||(b=RQTimeSpan.Zero);c=a;c.addTimeSpan(b);c=this.AdjustStartTimeWithEffort(c,b);d=ComputeEndTime(c,b,this.WorkTimeSchedule);return{adjustedStart:c,adjustedEnd:d}};Model.BaseGanttModel.prototype.ConvertToValidStartTime=function(a,b,c){return b.equals(RQTimeSpan.Zero)&&ApplyMilestoneExceptionToStartTime(a,c,this.WorkTimeSchedule)?a:RadiantQ.Gantt.Utils.TimeComputingUtils.AddLagToStartTime(a,b,this.WorkTimeSchedule)};
var ApplyMilestoneExceptionToStartTime=Model.BaseGanttModel.ApplyMilestoneExceptionToStartTime=function(a,b,c){b||(b=RQTimeSpan.Zero);return b.equals(RQTimeSpan.Zero)&&(null==c?a:c.GetStart(a,RQTimeSpan.Zero)).equals(a)?!0:!1},ComputeEndTime=Model.BaseGanttModel.ComputeEndTime=function(a,b,c,d,e){if(!(a.isBaseActivity||a instanceof Model.IActivity))return _computeEndTime(a,b,c,d);if(0<a.ChildActivities.length&&e)return a.ChildActivities.EndTime;if(!1==d||0==a.Assignments.length)return _computeEndTime(a.StartTime,
b,c);d=Date.MinValue;for(e=0;e<a.Assignments.length;e++){var f=Model.BaseGanttModel.GetEndTimeForAssignmentInActivity(a,b,a.Assignments[e],c);f>d&&(d=f)}return d};_computeEndTime=function(a,b,c){b||(b=RQTimeSpan.Zero);return b.equals(RQTimeSpan.Zero)&&ApplyMilestoneExceptionToStartTime(a,RQTimeSpan.Zero,c)?a:null==c?a.addTimeSpan(b):c.GetEnd(a,b)};Model.BaseGanttModel.prototype.ComputeEndTime=function(a){return ComputeEndTime(a,a.Effort,this.WorkTimeSchedule,this.AdjustDurationOnAssignment,this.AutoCalculateSummaryTaskTimes)};
Model.BaseGanttModel.prototype.ComputeEffort=function(a,b){var c=a.StartTime;if(c==Date.MinValue||c==Date.MaxValue)return RQTimeSpan.Zero;if(!1==this.AdjustDurationOnAssignment||0==a.Assignments.length||0<a.ChildActivities.length)return null==this.WorkTimeSchedule?new RadiantQ.Gantt.Utils.TimeComputingUtils.GetTimeSpan(c,b):this.WorkTimeSchedule.GetEffort(c,b);for(var d=RQTimeSpan.MaxValue,e=0;e<a.Assignments.length;e++){var f=a.Assignments[e],g=null==f.Resource.Schedule?this.WorkTimeSchedule:f.Resource.Schedule,
h=RQTimeSpan.MinValue;g?(h=g.GetEffort(c,b),h=RQTimeSpan.fromTicks(h.Ticks*(f.AllocationUnits/100))):h=new RQTimeSpan(b-c);h.isLessThan(d)&&(d=h)}return RQTimeSpan.fromTicks(d.Ticks*a.Assignments.length)};Model.BaseGanttModel.prototype.AdjustEffort=function(a,b){return this.OnBeforeEffortChanging(a,b)};
Model.BaseGanttModel.prototype.ConvertDurationToEffort=function(a,b){if(!1==this.AdjustDurationOnAssignment||0==b.Assignments.length)return a;for(var c=0,d=0;d<b.Assignments.length;d++)c+=b.Assignments[d].AllocationUnits;c=Math.ceil(a.Ticks*(c/100));return RQTimeSpan.fromTicks(c)};Model.BaseGanttModel.prototype.ComputeDuration=function(a){return ComputeDuration(a,a.Effort,this.AdjustDurationOnAssignment)};
var ComputeDuration=Model.BaseGanttModel.ComputeDuration=function(a,b,c){return!1==c||0==a.Assignments.length?a.Effort:Model.BaseGanttModel.ConvertEffortToDuration(a,b,c,!1)};Model.BaseGanttModel.prototype.GetStart=function(a,b){return null==this.WorkTimeSchedule?a.addTimeSpan(RQTimeSpan.Zero.subtract(b)):this.WorkTimeSchedule.GetStart(a,b)};Model.BaseGanttModel.prototype.AdjustStartTime=function(a,b){b=this.AdjustStartTimeWithEffort(b,a.Effort);return this.OnBeforeStartTimeChanging(a,b)};
Model.BaseGanttModel.prototype.AdjustStartTimeWithEffort=function(a,b){return a==Date.MinValue||a==Date.MaxValue||ApplyMilestoneExceptionToStartTime(a,b,this.WorkTimeSchedule)?a:null==this.WorkTimeSchedule?a:this.WorkTimeSchedule.ConvertToNextWorkingTime(a)};Model.BaseGanttModel.prototype.RemoveActivity=function(a,b){this.RecursivelyClearDependencies(b);null!=a?a.ChildActivities.remove(b):this.Activities.remove(b);this.OnActivityRemoved(b)};
Model.BaseGanttModel.prototype.GetNewID=function(){return this.topID+1};Model.BaseGanttModel.prototype.SetTopSortOrder=function(a){this._topSortOrder<this.ActivitiesCount-1&&(this._topSortOrder=this.ActivitiesCount-1);this._topSortOrder<a&&(this._topSortOrder=a)};Model.BaseGanttModel.prototype.GetNewSortOrder=function(){return this.ActivitiesCount+1};Model.BaseGanttModel.prototype.UpdateSortOrders=function(){this.UpdateSortOrderFrom(null)};
Model.BaseGanttModel.prototype.IsAncestor=function(a,b){for(var c=0;c<a.ChildActivities.length;c++){var d=a.ChildActivities[c];if(d==b||this.IsAncestor(d,b))return!0}return!1};Model.BaseGanttModel.prototype.CreateNewActivity=function(a,b){};Model.BaseGanttModel.prototype.CreateNewDependency=function(a,b,c,d){c||(c=RadiantQ.Gantt.DependencyType.FinishToStart);d||(d=RQTimeSpan.Zero);return this.CreateNewDependencyInternal(a,b,c,d,!1)};
Model.BaseGanttModel.prototype.PrepareParenting=function(a,b){this.RemoveAnyParentChildDependencies(a,b);for(var c=this.Dependencies.GetSuccessors(a),d=0;d<c.length;d++)this.RemoveDependenciesLeadingTo(c[d],b);this.Dependencies.GetSuccessors(b);for(d=0;d<c.length;d++)this.RemoveDependenciesLeadingTo(c[d],a);for(d=0;d<b.ChildActivities.length;d++)this.PrepareParenting(a,b.ChildActivities[d])};
Model.BaseGanttModel.prototype.CanAddNewDependency=function(a,b,c){c||(c=Model.NewDependencyAddScenarioType.None);return!1==this.ValidateDependencySetting?!0:a==b||!0==this.Dependencies.DoesConstraintExist(a,b,!0)||!0==this.Dependencies.DoesConstraintExist(b,a,!1)||!1==this.CanAddNewDependencyRecursive(a,b,0)?!1:null!=this.NewDependencyValidator&&"function"==typeof this.NewDependencyValidator?this.NewDependencyValidator(a,b,c):!0};Model.BaseGanttModel.prototype.NewDependencyValidator=null;
Model.BaseGanttModel.prototype.ApplyPreferredStartTimeOnActivity=function(a,b){if(0<a.ChildActivities.length&&this.AutoCalculateSummaryTaskTimes)for(var c=0;c<a.ChildActivities.length;c++)this.ApplyPreferredStartTimeOnActivity(a.ChildActivities[c],b);else a.PreferredStartTime.isGreaterThan(b)&&(b=a.PreferredStartTime),a.StartTime=b};Model.BaseGanttModel.prototype.GetEnumerator=function(){return null!=this._actitivites?this._actitivites.GetEnumerator():null};
Model.BaseGanttModel.prototype.GetResourceActivityList=function(a){return this.ResourceAssignmentTracker.GetResourceActivityList(a)};Model.BaseGanttModel.prototype.Filter=function(a){for(var b=0;b<this.Activities.length;b++)this.ApplyFilterOnActivity(this.Activities[b],a)};
Model.BaseGanttModel.prototype.ApplyFilterOnActivity=function(a,b){if(0<a.ChildActivities.length){for(var c=!1,d=0;d<a.ChildActivities.length;d++)var e=!this.ApplyFilterOnActivity(a.ChildActivities[d],b),c=c|e;a.IsFilteredOut=!c}else null!=b?(c=!b(a),a.IsFilteredOut=c):a.IsFilteredOut=!1;return a.IsFilteredOut};
Model.ActivitiesCollection=function(a,b){this.isActivitiesCollection=!0;this._actColl=[];this.isRecalculatingTimes=!1;this.AdjustStartTimeForConstraints=new ObjectEvent("AdjustStartTimeForConstraints");this.CollectionChanged=new ObjectEvent("CollectionChanged");this.PropertyChanged=new ObjectEvent("PropertyChanged");this.ChildCollectionChanged=new ObjectEvent("ChildCollectionChanged");this.base=RadiantQ.Gantt.Utils.IUIUpdateable;this.base();Array.call(this);this._parent=a;this._model=b;this._progressPercent=
0;this._startTime=Date.MaxValue;this._endTime=Date.MinValue;this._cumEffort=RQTimeSpan.Zero;this._prefStartTime=Date.MinValue;this.OnAdjustStartTimeForConstraints=function(a){null!=this.AdjustStartTimeForConstraints&&this.AdjustStartTimeForConstraints.raise(this,a)};this.OnChildCollectionChanged=function(a,b){null!=this.ChildCollectionChanged&&this.ChildCollectionChanged.raise(a,b)};this.OnPropertyChanged=function(a){this.PropertyChanged&&0<this.PropertyChanged.fn.length&&this.PropertyChanged.raise(this,
{PropertyName:a})};this.PartialUpdate=function(a){a&&(!0==a.isIActivity||a instanceof RadiantQ.Gantt.Model.IActivity)?this.UpdateTimes(a):this.TotalUpdate()};this.TotalUpdate=function(){this.RecalculateTimes()};return this};Model.ActivitiesCollection.prototype=new RadiantQ.Gantt.Utils.IUIUpdateable;Model.ActivitiesCollection.prototype=[];
RadiantQ.CanUseDefineProperty&&(Object.defineProperty(Model.ActivitiesCollection.prototype,"Model",{get:function(){return this._model},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(Model.ActivitiesCollection.prototype,"StartTime",{get:function(){return this._startTime},set:function(a){!1==this._startTime.equals(a)&&(this._startTime=a,this.OnPropertyChanged("StartTime",a))},enumerable:!0,configurable:!0}),Object.defineProperty(Model.ActivitiesCollection.prototype,"PreferredStartTime",
{get:function(){return this._prefStartTime},set:function(a){!1==this._prefStartTime.equals(a)&&(this._prefStartTime=a,this.OnPropertyChanged("PreferredStartTime",a))},enumerable:!0,configurable:!0}),Object.defineProperty(Model.ActivitiesCollection.prototype,"EndTime",{get:function(){return this._endTime},set:function(a){!1==this._endTime.equals(a)&&(this._endTime=a,this.OnPropertyChanged("EndTime",a))},enumerable:!0,configurable:!0}),Object.defineProperty(Model.ActivitiesCollection.prototype,"CumulativeEffort",
{get:function(){return this._cumEffort},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(Model.ActivitiesCollection.prototype,"ProgressPercent",{get:function(){return this._progressPercent},set:function(a){this._progressPercent!=a&&(this._progressPercent=a,this.OnPropertyChanged("ProgressPercent",a))},enumerable:!0,configurable:!0}));
Model.ActivitiesCollection.prototype.add=function(a){0<=this.indexOf(a)||(this.push(a),this.OnCollectionChanged(this,new RadiantQ.Gantt.NotifyCollectionChangedEventArgs(null,a)))};Model.ActivitiesCollection.prototype.insert=function(a,b){if(a<=this.length||0==a)this.splice(a,0,b),this.OnCollectionChanged(this,new RadiantQ.Gantt.NotifyCollectionChangedEventArgs(null,b))};
Model.ActivitiesCollection.prototype.remove=function(a){var b=this.indexOf(a);0>b||(this.splice(b,1),this.OnCollectionChanged(this,new RadiantQ.Gantt.NotifyCollectionChangedEventArgs(a,null)))};Model.ActivitiesCollection.prototype.indexOf=function(a){return $.inArray(a,this)};Model.ActivitiesCollection.prototype.contains=function(a){return-1===this.indexOf(a)?!0:!1};
Model.ActivitiesCollection.prototype.ClearItems=function(){if(Model.AutoCalculateSummaryTaskTimes)for(var a=0;a<this.collections.length;a++){var b=this.collections.GetItemByIndex(a);this.UnsubscribeToChildEvents(b)}this.splice(0,this._length)};
Model.ActivitiesCollection.prototype.OnCollectionChanged=function(a,b){this.CollectionChanged.raise(this,b);if(null!=b.OldItems)for(var c=0;c<b.OldItems.length;c++){var d=b.OldItems[c];this.UnsubscribeToChildEvents(d)}if(null!=b.NewItems)for(c=0;c<b.NewItems.length;c++)d=b.NewItems[c],this.SubscribeToChildEvents(d);"remove"==b.type&&0==this.length&&this.Model.AutoCalculateSummaryTaskTimes&&(this.StartTime=Date.MaxValue,this.EndTime=Date.MinValue,this.PreferredStartTime=Date.MaxValue)};
RadiantQ.Gantt.Model.ActivitiesCollection.prototype.SubscribeToChildEvents=function(a){this.UpdateProgressPercentForChild(a,!0);if(!0==a.isBaseActivity||a instanceof RadiantQ.Gantt.Model.BaseActivity)a.Parent=this._parent;a.ChildCollectionChanged.subscribe(this.activity_ChildCollectionChanged,this);if(!1!=this.Model.AutoCalculateSummaryTaskTimes){a.PropertyChanged.subscribe(this.activity_PropertyChanged,this);a.AdjustStartTimeForConstraints.subscribe(this.activity_AdjustStartTimeForConstraints,this);
!1==a.isBaseActivity&&!1==a instanceof RadiantQ.Gantt.Model.BaseActivity&&RadiantQ.Gantt.Model.BaseActivity.call(a,this.Model);var b=a.ComputeConstrainedStartTime();a.StartTime<b&&a.ShiftForwardTo(b);RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this,a);a.CumulativeEffort&&this.UpdateEffort(RQTimeSpan.Zero,a.CumulativeEffort)}};
Model.ActivitiesCollection.prototype.UnsubscribeToChildEvents=RadiantQ.Gantt.Model.ActivitiesCollection.prototype.UnsubscribeToChildEvents=function(a){this.UpdateProgressPercentForChild(a,!1);if(a instanceof RadiantQ.Gantt.Model.BaseActivity||a.isBaseActivity)a.Parent=null;a.ChildCollectionChanged.unsubscribe(this.activity_ChildCollectionChanged,this);!1!=this.Model.AutoCalculateSummaryTaskTimes&&(a.PropertyChanged.unsubscribe(this.activity_PropertyChanged,this),a.AdjustStartTimeForConstraints.unsubscribe(this.activity_AdjustStartTimeForConstraints,
this),RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this,null),this.UpdateEffort(a.CumulativeEffort,RQTimeSpan.Zero))};Model.ActivitiesCollection.prototype.activity_PropertyChanged=function(a,b){this.OnChildPropertyChanged(a,b)};
Model.ActivitiesCollection.prototype.OnChildPropertyChanged=function(a,b){"StartTime"!=b.PropertyName&&"EndTime"!=b.PropertyName&&"PreferredStartTime"!=b.PropertyName||RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this,a);"CumulativeEffort"==b.PropertyName&&this.UpdateEffort(b.OldValue,a.CumulativeEffort);"ProgressPercent"!=b.PropertyName&&(null==this.Model.CustomProgressCalculation||"Effort"!=b.PropertyName&&"CumulativeEffort"!=b.PropertyName)||this.UpdateProgressPercent()};
Model.ActivitiesCollection.prototype.DelayUpdate=function(a){RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this,a)};Model.ActivitiesCollection.prototype.UpdateEffort=function(a,b){var c=this.CumulativeEffort;b&&c&&(c=c.add(b));a&&c&&(c=c.subtract(a));c&&b||(c=b);this._cumEffort!=c&&(this._cumEffort=c,this.OnPropertyChanged("CumulativeEffort",a,b))};
Model.ActivitiesCollection.prototype.UpdateTimes=function(a){if(!1!=this.Model.AutoCalculateSummaryTaskTimes){var b=!1;this.StartTime!=Date.MaxValue&&a.StartTime<=this.StartTime?this.StartTime=a.StartTime:b=!0;a.PreferredStartTime<=this.PreferredStartTime?this.PreferredStartTime=a.PreferredStartTime:b=!0;!1==b&&(a.EndTime>=this.EndTime?this.EndTime=a.EndTime:b=!0);b&&this.RecalculateTimes()}};
Model.ActivitiesCollection.prototype.UpdateProgressPercent=function(){if(null!=this._parent)if(0==this.length)this.ProgressPercent=0;else if(null!=this.Model.CustomProgressCalculation)this.ProgressPercent=this.Model.CustomProgressCalculation(this._parent);else{for(var a=0,b=0;b<this.length;b++)a+=this[b].ProgressPercent;this.ProgressPercent=a/this.length}};
Model.ActivitiesCollection.prototype.UpdateProgressPercentForChild=function(a,b){if(null!=this.Model.CustomProgressCalculation&&null!=this._parent)this.ProgressPercent=this.Model.CustomProgressCalculation(this._parent);else if(b){var c=this.ProgressPercent*(this.length-1),c=c+a.ProgressPercent;this.ProgressPercent=c/this.length}else 0==this.length?this.ProgressPercent=0:(c=this.ProgressPercent*(this.length+1),c-=a.ProgressPercent,this.ProgressPercent=c/this.length)};
Model.ActivitiesCollection.prototype.activity_AdjustStartTimeForConstraints=function(a,b){this.OnAdjustStartTimeForConstraints(b)};Model.ActivitiesCollection.prototype.activity_ChildCollectionChanged=function(a,b){this.OnChildCollectionChanged(a,b)};
Model.ActivitiesCollection.prototype.RecalculateTimes=function(){if(!1!=this._model.autoCalculateSummaryTaskTimes){this.isRecalculatingTimes=!0;if(0<this.length){for(var a=Date.MaxValue,b=Date.MinValue,c=Date.MaxValue,d=0;d<this.length;d++){var e=this[d];e._startTime<a&&(a=e._startTime);e.PreferredStartTime<c&&(c=e.PreferredStartTime);e.EndTime>b&&(b=e.EndTime)}d=new RadiantQ.Gantt.Utils.DelayUpdates;this.StartTime=a;this.EndTime=b;this.PreferredStartTime=c;d.Dispose()}this.isRecalculatingTimes=!1}};
Model.BaseActivity=function(a){this.isBaseActivity=!0;RadiantQ.Gantt.Model.IActivity.call(this);this.Model=a;this._assignments=new Model.ResourceAssignmentCollection(this);this.propertiesDict=null;0==arguments.length&&(RadiantQ.Gantt.Model.BaseActivity.IsEndTimeCachingEnabled=!0);this.OnTimesChanged=function(){this.cachedEndTime=null;this.StartTime.equals(this.EndTime)?this.IsMilestone=!0:this.IsMilestone=!1};this.cachedEndTime=null;this._assignments=new RadiantQ.Gantt.Model.ResourceAssignmentCollection(null);
RadiantQ.Gantt.Model.BaseActivity.IsEndTimeCachingEnabled=!0;this.CreateChildActivitiesCollection||(Model.BaseActivity.prototype.CreateChildActivitiesCollection=function(){return new Model.ActivitiesCollection(this,this.Model)});this._childActivities=this.CreateChildActivitiesCollection();this.PartialUpdate=function(a){"AssignmentsCollectionChanged"==a?(this.OnPropertyChanged("Assignments"),this.OnPropertyChanged("EndTime")):this.TotalUpdate()};this.TotalUpdate=function(){if(0<this.ChildActivities.length&&
this.Model.AutoCalculateSummaryTaskTimes){var a=this.StartTime;this.StartTime=this.ChildActivities.StartTime;this.PreferredStartTime=this.ChildActivities.PreferredStartTime;!0==this.ChildActivities.isRecalculatingTimes&&!1==a.equals(this.ChildActivities.StartTime)&&!1==this.EndTime.equals(Date.MinValue)&&this.EndTime.equals(this.ChildActivities.EndTime)?this.UpdateEndTime(this.EndTime):this.EndTime=this.ChildActivities.EndTime}};a&&(this.Model=a,id=Model.BaseGanttModel.IdCounter++,this.propertiesDict=
[],this._childActivities=this.CreateChildActivitiesCollection(),this._childActivities.PropertyChanged.subscribe(this.childActivities_PropertyChanged,this),this._childActivities.CollectionChanged.subscribe(this.childActivities_CollectionChanged,this),this._childActivities.ChildCollectionChanged.subscribe(this.childActivities_ChildCollectionChanged,this),this._childActivities.AdjustStartTimeForConstraints.subscribe(this._childActivities_AdjustStartTimeForConstraints,this),this._assignments.CollectionChanged.subscribe(this._assignments_CollectionChanged,
this),this._assignments.PropertyChanged.subscribe(this.Assignments_PropertyChanged,this),this._startTime=a.AdjustStartTimeWithEffort(new Date,new RQTimeSpan(1,0,0,0,0)),this._prefStartTime=this.GetDefaultStartTime());return this};Model.BaseActivity.prototype=new RadiantQ.Gantt.Model.IActivity;
Model.BaseActivity.prototype.Dispose=function(){this._childActivities.PropertyChanged.unsubscribe(this.childActivities_PropertyChanged,this);this._childActivities.CollectionChanged.unsubscribe(this.childActivities_CollectionChanged,this);this._childActivities.ChildCollectionChanged.unsubscribe(this.childActivities_ChildCollectionChanged,this);this._childActivities.AdjustStartTimeForConstraints.unsubscribe(this._childActivities_AdjustStartTimeForConstraints,this);this._childActivities=null;this._assignments.CollectionChanged.unsubscribe(this._assignments_CollectionChanged,
this);this._assignments.PropertyChanged.unsubscribe(this.Assignments_PropertyChanged,this);this._assignments=null};
RadiantQ.CanUseDefineProperty&&(Object.defineProperty(Model.BaseActivity.prototype,"IsParentExpanded",{get:function(){return null==this.Parent?!0:this.Parent.IsExpanded},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(Model.BaseActivity.prototype,"IsParentVisible",{get:function(){return null==this.Parent?!0:this.Parent.IsVisible},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(Model.BaseActivity.prototype,"StartTime",{get:function(){return this._startTime},
set:function(a){if(!this._startTime.equals(a)){var b=new Model.AdjustStartTimeEventArgs(this,a);this.OnAdjustStartTimeForConstraints(b);a=b.StartTime;b=this.Model.AdjustStartTime(this,a);this._startTime.equals(b)?a!=b&&this.OnPropertyChanged("StartTime",a):(this._startTime=b.clone(),this._startTimeBinder.Value=this._startTime,a=new RadiantQ.Gantt.Utils.DelayUpdates,this.OnPropertyChanged("EndTime"),this.OnPropertyChanged("StartTime",b),a.Dispose())}},enumerable:!0,configurable:!0}),Object.defineProperty(Model.BaseActivity.prototype,
"EndTime",{get:function(){return RadiantQ.Gantt.Model.BaseActivity.IsEndTimeCachingEnabled?(null==this.cachedEndTime&&(this.cachedEndTime=this.Model.ComputeEndTime(this)),this.cachedEndTime):this.Model.ComputeEndTime(this)},set:function(a){this.EndTime&&a&&this.EndTime.equals(a)||(null===a?this.cachedEndTime=a:0<=a.compareTo(this.StartTime)&&this.UpdateEndTime(a))},enumerable:!0,configurable:!0}),Model.BaseActivity.prototype.UpdateEndTime=function(a){this.cachedEndTime=null;var b=this.Model.ComputeEffort(this,
a);!1==this.Effort.equals(b)?this.Effort=b:this.OnPropertyChanged("EndTime",a)},Object.defineProperty(Model.BaseActivity.prototype,"Effort",{get:function(){return this._effort?this._effort:RQTimeSpan.Zero},set:function(a){"string"==typeof a&&(a=RQTimeSpan.parse(a));if(!1==this._effort.equals(a)){var b=this._effort,c=this.CumulativeEffort;this._effort=a=this.Model.AdjustEffort(this,a);this._effortBinder.Value=a;this._isUpdating=!0;this.OnPropertyChanged("Effort",b,a);this.OnPropertyChanged("Duration");
this._isUpdating=!1;this.OnPropertyChanged("EndTime");this.OnPropertyChanged("CumulativeEffort",c,a)}},enumerable:!0,configurable:!0}),Object.defineProperty(Model.BaseActivity.prototype,"Duration",{get:function(){return this.Model.ComputeDuration(this)},set:function(a){this.Duration!=a&&(this.Effort=this.Model.ConvertDurationToEffort(a,this))},enumerable:!0,configurable:!0}),Object.defineProperty(Model.BaseActivity.prototype,"Properties",{get:function(){return this.propertiesDict},set:function(){},
enumerable:!0,configurable:!0}),Object.defineProperty(Model.BaseActivity.prototype,"Assignments",{get:function(){return this._assignments},set:function(a){this._assignments=a},enumerable:!0,configurable:!0}),Object.defineProperty(Model.BaseActivity.prototype,"ChildActivities",{get:function(){return this._childActivities},set:function(){},enumerable:!0,configurable:!0}));
Model.BaseActivity.prototype.OnVerticalPositionChanged=function(){null!=this.VerticalPositionChanged&&this.VerticalPositionChanged.raise(this,null)};
Model.BaseActivity.prototype.AdjustFinishForLag=function(a,b,c){if(null==c)return a.addTimeSpan(b);a=b.isGreaterThanOrEqualTo(RQTimeSpan.Zero)?(new RadiantQ.Gantt.TimePeriodCollection(c.ConvertToNextWorkingTimeIntervals(a,b))).Finish:(new RadiantQ.Gantt.TimePeriodCollection(c.ConvertToPreviousWorkingTimeIntervals(a,new RQTimeSpan(-b.totalMilliseconds)))).Finish;return c.ConvertToNextWorkingTime(a)};Model.BaseActivity.prototype._childActivities_AdjustStartTimeForConstraints=function(a,b){this.OnAdjustStartTimeForConstraints(b)};
Model.BaseActivity.prototype.childActivities_ChildCollectionChanged=function(a,b){this.OnChildCollectionChanged(a,b)};Model.BaseActivity.prototype.childActivities_CollectionChanged=function(a,b){this.OnChildCollectionChanged(this,b);"remove"==b.type&&0==this.ChildActivities.length&&this.Model.ApplyPreferredStartTimeOnActivity(this,this.PreferredStartTime);"insert"==b.type&&1==this.ChildActivities.length&&this.OnPropertyChanged("CumulativeEffort",this.Effort)};
Model.BaseActivity.prototype.childActivities_PropertyChanged=function(a,b){"StartTime"==b.PropertyName||"EndTime"==b.PropertyName||"Effort"==b.PropertyName?this.Model.AutoCalculateSummaryTaskTimes&&RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this,null):"ProgressPercent"==b.PropertyName?this.ProgressPercent=this.ChildActivities.ProgressPercent:"CumulativeEffort"==b.PropertyName&&(this.CumulativeEffort=this.ChildActivities.CumulativeEffort)};
Model.BaseActivity.prototype.OnChildCollectionChanged=function(a,b){null!=this.ChildCollectionChanged&&this.ChildCollectionChanged.raise(a,b)};Model.BaseActivity.prototype.OnPropertyChanged=function(a,b){if("EndTime"==a||"StartTime"==a||"Effort"==a||"Duration"==a||"Assignments"==a||"IsMilestone"==a)this.OnTimesChanged(),this.OnPropertyChanged("Times",b);"Assignments"==a&&this.OnPropertyChanged("EndTime");null!=this.PropertyChanged&&this.PropertyChanged.raise(_baseActivity,a,b)};
Model.BaseActivity.prototype.Assignments_PropertyChanged=function(a,b){"ResourceInfo"==b.PropertyName&&this.OnPropertyChanged("Assignments")};Model.BaseActivity.prototype._assignments_CollectionChanged=function(a,b){null==b.NewItems&&null==b.OldItems&&b.Action!=RadiantQ.Gantt.NotifyCollectionChangedAction.Reset||RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this,"AssignmentsCollectionChanged")};Model.BaseActivity.prototype.dependency_PropertyChanged=function(a,b){this.UpdatePredecessorString()};
Model.BaseActivity.prototype.UpdatePredecessorString=function(){if(this.Model){var a=this.Model.Dependencies.GetPredecessors(this);this.PredecessorIndexString=Model.DataBoundGanttModel.ConstructPredecessorString(a,this.Model.LagStringUnitsInHours)}};
Model.BaseActivity.prototype.OnPropertyChanged=function(a,b,c){if("EndTime"==a||"StartTime"==a||"Effort"==a||"Duration"==a||"Assignments"==a)this.OnTimesChanged(),this.OnPropertyChanged("Times",b,c);"Assignments"==a&&this.OnPropertyChanged("EndTime");this.PropertyChanged&&0<this.PropertyChanged.fn.length&&this.PropertyChanged.raise(this,{PropertyName:a,OldValue:b,value:c});if(!Utils.DelayUpdateUtil.IsUpdating()&&!this._isUpdating||"SortOrder"==a)if(this.Model._isNewActInit)this.Model._isNewActInit=
!1;else switch(a){case "Times":case "PredecessorIndexString":case "ProgressPercent":case "ID":case "ActivityName":case "SortOrder":case "Description":this.Model.ActivityUpdated.raise((this.Parent?this.Parent:this.Model._activities).ChildActivities,this)}};Model.BaseActivity.prototype.ComputeConstrainedStartTime=function(){var a=new Model.AdjustStartTimeEventArgs(this,this.StartTime);this.OnAdjustStartTimeForConstraints(a);return a.StartTime};
Model.BaseActivity.prototype.OnAdjustStartTimeForConstraints=function(a){if(!(!1==this.Model.EnforceDependencyConstraints||!1==this.Model.CanShiftInProgressTasks&&0<this.ProgressPercent)){for(var b=a.StartTime,c=0<this.Model.Dependencies.length?this.Model.Dependencies.GetPredecessors(this):[],d=0;d<c.length;d++){var e=c[d];e.FromActivity!=this&&(e=e.ComputeLatestToActivityStartTime(),e>b&&(b=e))}a.StartTime=b;null!=this.AdjustStartTimeForConstraints&&this.AdjustStartTimeForConstraints.raise(this,
a)}};Model.BaseActivity.prototype.GetDefaultStartTime=function(){return new Date};Model.BaseActivity.prototype.CreateNewChildActivity=function(a){};
Model.BaseActivity.prototype.IsCritical=function(a,b,c){if(null!=this.Model){var d=this.Model.AllActivities.asArray,e=this.Model.WorkTimeSchedule,f=null==e?this.EndTime.addTimeSpan(b):(new RadiantQ.Gantt.TimePeriodCollection(e.ConvertToNextWorkingTimeIntervals(this.EndTime,b))).Finish;if(f>=a||null!=c&&c.ContainsKey(this)&&f>=c[this])return!0;if(0==this.ChildActivities.length)for(var g=this;null!=g;g=g.Parent)for(var h=0;h<d.length;h++){var k=d[h];if(g!=k)for(var l=this.Model.Dependencies.GetPredecessors(k),
n=0;n<l.length;n++){var p=l[n];if(p.FromActivity==g&&(p.Type==DependencyType.FinishToStart||p.Type==DependencyType.StartToStart)&&this.AdjustFinishForLag(f,p.Lag,e)>=k.StartTime&&k.IsCritical(a,b,c))return!0}}else for(h=0;h<this.ChildActivities.length;h++)if(this.ChildActivities[h].IsCritical(a,b,c))return!0}return!1};
Model.BaseActivity.prototype.GetWorkingHoursTimeSpan=function(){var a=this.Effort;0<this.Assignments.length&&null!=this.Model.WorkTimeSchedule&&(a=this.Model.WorkTimeSchedule.GetEffort(this.StartTime,this.EndTime));return a};Model.BaseActivity.prototype.OnAddedPredecessorDependency=function(a){a.ToActivity==this&&(a.PropertyChanged.subscribe(this.dependency_PropertyChanged,this),this.UpdatePredecessorString())};
Model.BaseActivity.prototype.OnRemovedPredecessorDependency=function(a){a.PropertyChanged.unsubscribe(this.dependency_PropertyChanged,this);this.UpdatePredecessorString()};
Model.BaseActivity.prototype.ShiftForwardTo=function(a){if(!this.StartTime.equals(Date.MinValue)&&this.StartTime.isGreaterThan(a))throw new Exception("Shifting activity and children backward is not allowed in BaseActivity.ShiftForwardTo.");if(0<this.ChildActivities.length&&this.Model.AutoCalculateSummaryTaskTimes){for(var b=new RadiantQ.Gantt.Utils.DelayUpdates,c=0;c<this.ChildActivities.length;c++){var d=this.ChildActivities[c];d.StartTime<a&&d.ShiftForwardTo(a)}b.Dispose()}else this.Model&&(this.StartTime=
this.Model.ConvertToValidStartTime(a,RQTimeSpan.Zero,this.Effort))};Model.BaseActivity.prototype.toString=function(){return this.ID+"; "+this.ActivityName+"; "+this.StartTime.Date()+"/"+(this.Effort?this.Effort.Hours:void 0)+"hrs; ChildCount: "+this.ChildActivities.length+" "};Model.BaseGanttResource=function(){this.BaseGanttResource=!0;this.base=Model.IGanttResource;this.base();return this};Model.BaseGanttResource.prototype=new Model.IGanttResource;
Model.BaseGanttResource.prototype.OnPropertyChanged=function(a){null!=this.PropertyChanged&&this.PropertyChanged.raise(this,a)};Model.BaseGanttResource.prototype.toString=function(){return this.ResourceName};Model.BaseGanttResource.prototype.Dispose=function(){};Model.ResourceAssignment=function(a,b){this.ResourceAssignment=!0;this._allocUnits=0;b||(b=100);this._allocUnits=b;a&&(this._resource=a,this._allocUnits=1E5>b?this._allocUnits:1E5);return this};
RadiantQ.CanUseDefineProperty&&(Object.defineProperty(Model.ResourceAssignment.prototype,"Resource",{get:function(){return this._resource},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(Model.ResourceAssignment.prototype,"AllocationUnits",{get:function(){return this._allocUnits},set:function(){},enumerable:!0,configurable:!0}));
Model.ResourceAssignmentCollection=function(a){this.base=Array;this.base();this.parentActivity=a;this.CollectionChanged=new ObjectEvent("CollectionChanged");this.PropertyChanged=new ObjectEvent("PropertyChanged");this.schedules=[];return this};Model.ResourceAssignmentCollection.prototype=[];RadiantQ.CanUseDefineProperty&&Object.defineProperty(Model.ResourceAssignmentCollection.prototype,"ParentActivity",{get:function(){return this.parentActivity},set:function(){},enumerable:!0,configurable:!0});
Model.ResourceAssignmentCollection.prototype.add=function(a){a&&(a.Resource.Schedule&&this.schedules.push(a.Resource.Schedule),this.push(a),this.OnCollectionChanged(this,new RadiantQ.Gantt.NotifyCollectionChangedEventArgs(null,a)))};
Model.ResourceAssignmentCollection.prototype.remove=function(a){var b=this.indexOf(a);if(!(0>b)){if(a.Resource.Schedule){var c=this.schedules.indexOf(a.Resource.Schedule);if(0>c)return;this.schedules.splice(c,1)}this.splice(b,1);this.OnCollectionChanged(this,new RadiantQ.Gantt.NotifyCollectionChangedEventArgs(a,null))}};
Model.ResourceAssignmentCollection.prototype.clear=function(){0!=this.length&&(this.splice(0,this.length),this.OnCollectionChanged(this,new RadiantQ.Gantt.NotifyCollectionChangedEventArgs(null,null)))};Model.ResourceAssignmentCollection.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]===a)return b;return-1};Model.ResourceAssignmentCollection.prototype.ContainsResource=function(a){return null!=this.GetAssignmentForResource(a)?!0:!1};
Model.ResourceAssignmentCollection.prototype.GetAssignmentForResource=function(a){for(var b=0;b<this.length;b++){var c=this[b];if(c.Resource==a||c.Resource._boundObj==a)return c}return null};
Model.ResourceAssignmentCollection.prototype.OnCollectionChanged=function(a,b){if(null!=b.NewItems)for(var c=0;c<b.NewItems.length;c++){var d=b.NewItems[c];d.Resource.PropertyChanged.subscribe(this.Resource_PropertyChanged,this)}if(null!=b.OldItems)for(c=0;c<b.OldItems.length;c++)d=b.OldItems[c],d.Resource.PropertyChanged.unsubscribe(this.Resource_PropertyChanged,this);this.CollectionChanged.raise(a,b)};Model.ResourceAssignmentCollection.prototype.Resource_PropertyChanged=function(a,b){this.OnPropertyChanged("ResourceInfo")};
Model.GanttResourcesCollection=function(){this.CollectionChanged=new ObjectEvent("CollectionChanged");Array.call(this);this._resByID=new RadiantQ.Gantt.Dictionary;this.getResourceByID=function(a){return this._resByID[a]};return this};Model.GanttResourcesCollection.prototype=[];Model.GanttResourcesCollection.prototype.ClearItems=function(){this.splice(0,this.length);this._resByID=new RadiantQ.Gantt.Dictionary};
Model.GanttResourcesCollection.prototype.OnCollectionChanged=function(a){if(null!=a.OldItems)for(var b=0;b<a.OldItems.length;b++){var c=a.OldItems[b];this._resByID.Remove(c.ResourceID);c.Dispose()}if(null!=a.NewItems)for(b=0;b<a.NewItems.length;b++)c=a.NewItems[b],this._resByID.Add(c.ResourceID,c)};
Model.GanttResourcesCollection.prototype.SetItem=function(a,b){a>this.length?alert("Can't add the item to the "+a+"index which is greater than the length"):-1!=a&&(this.splice(a,1,b),this._resByID[b.ResourceID]=b)};Model.GanttResourcesCollection.prototype.Add=function(a){if(this._resByID[a.ResourceID]){var b=this.indexOf(a);this.splice(b,0,a)}else this.push(a);this._resByID[a.ResourceID]=a;this.OnCollectionChanged(new RadiantQ.Gantt.NotifyCollectionChangedEventArgs(null,a))};
Model.GanttResourcesCollection.prototype.Remove=function(a){var b=this.indexOf(a);-1!=b&&(this.splice(b,1),delete this._resByID[a.ResourceID],this.OnCollectionChanged(new RadiantQ.Gantt.NotifyCollectionChangedEventArgs(a,null)))};Model.AdjustStartTimeEventArgs=function(a,b){this.StartTime=this.Activity=null;a&&b&&(this.Activity=a,this.StartTime=b);return this};Model.ActivityEventHandler=function(a,b){};Model.ActivityEventArgs=function(a){a&&(this._activity=a);return this};
RadiantQ.CanUseDefineProperty&&Object.defineProperty(Model.ActivityEventArgs.prototype,"Activity",{get:function(){return this._activity},set:function(){},enumerable:!0,configurable:!0});Model.NewActivityAddedEventArgs=function(a,b,c){a&&(this._activity=a,this._parent=b,this._childIndex=c);return this};
RadiantQ.CanUseDefineProperty&&(Object.defineProperty(Model.NewActivityAddedEventArgs.prototype,"NewActivity",{get:function(){return this._activity},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(Model.NewActivityAddedEventArgs.prototype,"Parent",{get:function(){return this._parent},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(Model.NewActivityAddedEventArgs.prototype,"ChildIndex",{get:function(){return this._childIndex},set:function(){},enumerable:!0,
configurable:!0}));Model.BeforeStartTimeChangingEventArgs=function(a,b){this.NewStartTime=null;a&&b&&(this.Activity=a,this.NewStartTime=b);return this};Model.BeforeEffortChangingEventArgs=function(a,b){this.NewEffort=null;a&&b&&(this.Activity=a,this.NewEffort=b);return this};
Model.ResourceAssignmentTracker=function(a){this.activitiesByResources=new RadiantQ.Gantt.Dictionary;this.OnActivityAdded=function(a){a.PropertyChanged.subscribe(this.activity_PropertyChanged,this);for(var b=0;b<a.Assignments.length;b++){var c=this.GetResourceActivityList(a.Assignments[b].Resource._boundObj);$.observable(c).insert(a)}};if(a){this.Model=a;a.NewActivityAdded.subscribe(this.model_NewActivityAdded,this);a.ActivityRemoved.subscribe(this.model_ActivityRemoved,this);for(var b=0;b<a.AllActivities.length;b++){var c=
a.AllActivities.GetItemByIndex(b);this.OnActivityAdded(c)}}};Model.ResourceAssignmentTracker.prototype.model_ActivityRemoved=function(a,b){this.ProcessActivityRemovedRecursively(b)};Model.ResourceAssignmentTracker.prototype.model_NewActivityAdded=function(a,b){this.OnActivityAdded(b.NewActivity)};Model.ResourceAssignmentTracker.prototype.GetResourceActivityList=function(a){var b=this.activitiesByResources.GetItemByKey(a);b||(b=[],this.activitiesByResources.Add(a,b));return b};
Model.ResourceAssignmentTracker.prototype.activity_PropertyChanged=function(a,b){"Assignments"==b.PropertyName&&(this.OnActivityRemoved(a),this.OnActivityAdded(a))};Model.ResourceAssignmentTracker.prototype.ProcessActivityRemovedRecursively=function(a){if(a){this.OnActivityRemoved(a);for(var b=0;b<a.ChildActivities.length;b++)this.ProcessActivityRemovedRecursively(a.ChildActivities[b])}};
Model.ResourceAssignmentTracker.prototype.OnActivityRemoved=function(a){for(var b=0;b<this.Model.GanttResources.length;b++){var c=this.GetResourceActivityList(this.Model.GanttResources[b]._boundObj),d=c.indexOf(a);-1!=d&&($.observable(c).remove(d,1),a.PropertyChanged.unsubscribe(this.activity_PropertyChanged,this))}};
Model.ResourceToActivitiesListConverter=function(){this.Model=null;this.Convert=function(a,b,c,d){if(null==this.Model)throw Error("ResourceToActivitiesListConverter's Convert is called before setting it's Model property.");if(null==a)throw Error("value passed to ResourceToActivitiesListConverter's Convert method must be of type IGanttResource.");return this.Model.GetResourceActivityList(a)}};
Model.PropertyChangedWithOldValueEventArgs=function(a,b){b&&(this._oldValue=b);Object.defineProperty(this,"OldValue",{get:function(){return this._oldValue},set:function(){},enumerable:!0,configurable:!0});return this};Model.NewDependencyAddScenarioType={None:"None",UserDragOver:"UserDragOver",UserDragDrop:"UserDragDrop",UserGridEdit:"UserGridEdit"};var Model=RadiantQ.Gantt.Model,ValueBinder=RadiantQ.Gantt.Utils.ValueBinder;
Model.DataBoundGanttModel=function(a,b,c,d,e,f,g,h,k,l,n,p,m,q,r,s,t,u,y,w,x,z,v,D,I,J,K,L){if(!a)return null;this.CreateActivitiesCollection=function(){return new Model.DataBoundActivitiesCollection(null,this)};Model.BaseGanttModel.prototype.CreateActivitiesCollection=this.CreateActivitiesCollection;this.base=Model.BaseGanttModel;this.base(J);this._boundColl=a;this.canInsertPropertyChangeTriggeringPropertiesInData=!1;this.ScheduleFrom=this.ProjectEndDate=this.ProjectStartDate=null;this.ProcessPredecessorString=
Model.DataBoundGanttModel.ProcessPredecessorString;this.ActivityUpdated=new ObjectEvent("ActivityUpdated");this.canInsertPropertyChangeTriggeringPropertiesInData=K?!0:!1;this.ScheduleFrom=d;this.ProjectStartDate=b;this.ProjectEndDate=c;this.ValidateDependencySetting=e;this.EnforceDependencyConstraints=f;this.AutoCalculateSummaryTaskTimes=g;this._customProgressCalculation=I;this.AutoExpandNodes=L;RadiantQ.Gantt.WorkTimeSchedule._cachedStdWorkingTimes=new Gantt.WorkTimeSchedule.CachedContWorkingTimes;
RadiantQ.Gantt.WorkTimeSchedule._continuousSchedule=null;RadiantQ.Gantt.WorkTimeSchedule.cachedContWorkingTimes=new Gantt.WorkTimeSchedule.CachedContWorkingTimes;this._resList=w;this.AdjustDurationOnAssignment=h;this.LagStringUnitsInHours=k;this.parentActivities=[];a=null;b=0;this.IDBinding=l;this.NameBinding=p;this.SortOrderBinding=n;this.IndentLevelBinding=m;this.StartTimeBinding=q;this.PrefStartTimeBinding=r;this.EffortBinding=s;this.PredecessorBinding=t;this.ProgressPercentBinding=u;this.DescBinding=
y;this.ResourceNameBinding=x;this.ResourceIDBinding=z;this.ResourceScheduleBinding=v;this.AssignedResourcesBinding=D;this.DataBoundActivities.ConvertResourceListFromResourceString.subscribe(this.DataBoundGanttModel_ConvertResourceListFromResourceString,this);l=[];n=new RadiantQ.Gantt.Utils.DelayUpdates;try{Model.DataBoundGanttModel.IsBuildingModel=!0;if(null!=this._resList)for(var A=0;A<this._resList.length;A++)this.GanttResources.Add(new Model.DataBoundGanttResource(this._resList[A],x,z,v));for(A=
0;A<this._boundColl.length;A++){var G=this._boundColl[A];G[m.Property]||(G[m.Property]=0);var H=(new ValueBinder(G,m,null,RadiantQ.Gantt.BindingMode.TwoWay,this)).Value;if(0>H)throw new NotSupportedException("Specified Indent is < 0 and not supported.");var B=this.CreateNewDataBoundActivity(G,L);B.TransferIDFromBoundToSelf();if(0==H||null==a)this.Activities.add(B),a=B,b=0,this.parentActivities=[];else if(H>b)a.ChildActivities.add(B),this.parentActivities.push(a),a=B,b++;else{x=b-H;for(z=1;z<=x;z++)this.parentActivities.pop();
this.parentActivities[this.parentActivities.length-1].ChildActivities.add(B);a=B;b-=x}B.TransferDataFromBoundToSelf();B.PredecessorIndexString&&l.push(B)}}catch(C){throw window.console&&window.console.error&&window.console.error("DataBoundGanttModel constructor throws "+C),Error(C);}finally{Model.DataBoundGanttModel.IsBuildingModel=!1}n.Dispose();m=new RadiantQ.Gantt.Utils.DelayUpdates;try{Model.DataBoundGanttModel.IsBuildingModel=!0;for(A=0;A<l.length;A++)this.ProcessPredecessorsAndAddDependencies(l[A]);
if(!0==this.EnforceDependencyConstraints)for(var F=new OrderedDependencyList(this.Dependencies),A=0;A<F.length;A++){var M=F.GetItemByIndex(A);this.ApplyDependencyConstraints(M.Activity)}}catch(E){throw window.console&&window.console.error&&window.console.error("DataBoundGanttModel constructor throws "+E),Error(E);}finally{Model.DataBoundGanttModel.IsBuildingModel=!1}m.Dispose();return this};Model.DataBoundGanttModel.IsBuildingModel=!1;
RadiantQ.CanUseDefineProperty&&(Model.DataBoundGanttModel.prototype=new Model.BaseGanttModel);RadiantQ.CanUseDefineProperty&&(Object.defineProperty(Model.DataBoundGanttModel.prototype,"BoundCollAsList",{get:function(){return this._boundColl},set:function(){},enumerable:!0,configurable:!1}),Object.defineProperty(Model.DataBoundGanttModel.prototype,"DataBoundActivities",{get:function(){return this.Activities},set:function(){},enumerable:!0,configurable:!0}));
Model.DataBoundGanttModel.prototype.ApplyDependencyConstraints=function(a){if(a=this.Dependencies._predsByActivity[a.ID])for(var b=0;b<a.length;b++)a[b].EnsureActivityOrder()};
Model.DataBoundGanttModel.prototype.CreateNewDataBoundActivity=function(a,b){return new Model.DataBoundActivity(this,a,this.IDBinding,this.SortOrderBinding,this.NameBinding,this.IndentLevelBinding,this.StartTimeBinding,this.PrefStartTimeBinding,this.EffortBinding,this.PredecessorBinding,this.ProgressPercentBinding,this.DescBinding,this.AssignedResourcesBinding,this.AutoExpandNodes)};
Model.DataBoundGanttModel.prototype.DataBoundGanttModel_ConvertResourceListFromResourceString=function(a,b){!1==b.ConvertBack?(b.Assignments&&b.Assignments.clear(),RadiantQ.Gantt.ValueConverters.ConverterUtils.ConvertResourceTextToAssignments(b.ResourceText,this.GanttResources,b.Assignments)):b.ResourceText=RadiantQ.Gantt.ValueConverters.ConverterUtils.GetResourcesText(b.Assignments,!0)};
Model.DataBoundGanttModel.prototype.ProcessPredecessorsAndAddDependencies=function(a){if(a.PredecessorIndexString)for(var b=[],c=[],d=[],e=this.ProcessPredecessorString(a.PredecessorIndexString,this.LagStringUnitsInHours,b,c,d,e),e=0;e<b.length;e++){var f=this.GetActivityById(b[e]);null!=f&&this.CanAddNewDependency(f,a)&&this.CreateNewDependencyInternal(f,a,c[e],d[e],!0)}};
Model.DataBoundGanttModel.prototype.ValidatePredecessorString=function(a,b,c){if(a){b=[];if(c=this.ProcessPredecessorString(a,b,[],[],c))return!1;for(a=0;a<b.Length;a++)if(null==this[b[a]])return!1}return!0};
Model.DataBoundGanttModel.ProcessPredecessorString=function(a,b,c,d,e,f){f="";if(a){a=a.split(",");for(var g=0;g<a.length;g++){var h=a[g].trim();if(0!=h.length){var k=null,l=!0;-1!=h.indexOf("-")?(k=h.split("-"),l=!1):k=h.split("+");var h=-1,n=RadiantQ.Gantt.DependencyType.FinishToStart,p=RQTimeSpan.Zero,m=k[0].trim(),h=parseInt(m),q=m.toLowerCase().search("s"),r=m.toLowerCase().search("f");if(0<q||0<r)if(2>m.length){f+="Unexpected string encountered: "+m+". (Valid examples: 10, 10SS, 5FS, etc.)";
continue}else q=m.substring(m.length-2,m.length),m=m.substring(0,m.length-2),h=parseInt(m),void 0==h||-1==h?(h=-1,f+=m+" is not a valid ID (number)."):void 0!=h&&-1!=h&&(r=Model.DataBoundGanttModel.TryParse(q,n),n=r.Type,!1==r.status&&(f+=q+" is not a valid Dependency Type"));void 0!=h&&-1!=h?(1<k.length&&(p=0,p=parseFloat(k[1].trim()),!1==p&&(f+=k[1].trim()+" is not a valid lag string. Specify a valid number."),p=new RQTimeSpan(0,p*b,0,0,0),!1==l&&(p=p.getEqualNegative())),-1==c.indexOf(h)&&(c.push(h),
d.push(n),e.push(p))):f+="Unexpected string encountered: "+m+". (Valid examples: 10, 10SS, 5FS, etc.)"}}}return f};
Model.DataBoundGanttModel.ConstructPredecessorString=function(a,b){var c="";if(null!=a)for(var d=0;d<a.length;d++){var e=a[d],f=e.FromActivity.ID.toString();switch(e.Type){case RadiantQ.Gantt.DependencyType.FinishToFinish:f+="FF";break;case RadiantQ.Gantt.DependencyType.StartToFinish:f+="SF";break;case RadiantQ.Gantt.DependencyType.StartToStart:f+="SS"}e.Lag>RQTimeSpan.Zero?f+="+"+(e.Lag.getTotalHours()/b).toString():e.Lag<RQTimeSpan.Zero&&(f+="-"+-(e.Lag.getTotalHours()/b).toString());c+=f;c+=","}return c?
c.slice(0,c.length-1):c};Model.DataBoundGanttModel.TryParse=function(a,b){a=a.toLowerCase();switch(a){case "ss":return{Type:RadiantQ.Gantt.DependencyType.StartToStart,status:!0};case "sf":return{Type:RadiantQ.Gantt.DependencyType.StartToFinish,status:!0};case "fs":return{Type:RadiantQ.Gantt.DependencyType.FinishToStart,status:!0};case "ff":return{Type:RadiantQ.Gantt.DependencyType.FinishToFinish,status:!0}}return{Type:RadiantQ.Gantt.DependencyType.FinishToStart,status:!1}};
Model.DataBoundGanttModel.prototype.GetIndent=function(a,b){return ModelExtensions.GetValue(a,b,new StringToIntConverter)};
Model.DataBoundGanttModel.prototype.CreateNewActivity=function(a,b){null==b&&(b=!0);if(b)if(null!=this._boundColl)a&&$.observable(this._boundColl).insert(this._boundColl.length,a);else throw new NotSupportedException("The bound ItemsSource should be of type IList to be able to add the new item into it.");var c=this.GetNewSortOrder(),d=this.CreateNewDataBoundActivity(a,this.AutoExpandNodes);d.TransferIDFromBoundToSelf();this.Activities.add(d);this._isNewActInit=!0;d.TransferDataFromBoundToSelf();this._isNewActInit=
!1;d.SortOrder=c;this.OnNewActivityAdded(new Model.NewActivityAddedEventArgs(d,null,-1));this.ProcessPredecessorsAndAddDependencies(d);return d};Model.DataBoundGanttModel.prototype.CreateNewDependency=function(a,b,c,d){a=Model.BaseGanttModel.prototype.CreateNewDependency.call(this,a,b,c,d);b.OnAddedPredecessorDependency(a);return a};
Model.DataBoundActivitiesCollection=function(a,b){Model.ActivitiesCollection.call(this,a,b);this._model=b;this._parent=a;!1==this.isActivitiesCollection&&!1==this instanceof Model.ActivitiesCollection&&Model.ActivitiesCollection.call(this,a,b);this.ConvertResourceListFromResourceString=new ObjectEvent("ConvertResourceListFromResourceString");this.OnChildPropertyChanged=function(a,b){Model.ActivitiesCollection.prototype.OnChildPropertyChanged.call(this,a,b);if("ID"==b.PropertyName){var e=this._idByActivity.GetItemByKey(a);
e&&(this._activityByID.Remove(e),this._idByActivity.Remove(a));this._activityByID.Add(a.ID,a);this._idByActivity.Add(a,a.ID)}};this._indentLevel=0;return this};RadiantQ.CanUseDefineProperty&&(Model.DataBoundActivitiesCollection.prototype=new Model.ActivitiesCollection);Model.DataBoundActivitiesCollection.prototype._activityByID=new RadiantQ.Gantt.Dictionary;Model.DataBoundActivitiesCollection.prototype._idByActivity=new RadiantQ.Gantt.Dictionary;
RadiantQ.CanUseDefineProperty&&Object.defineProperty(Model.DataBoundActivitiesCollection.prototype,"IndentLevel",{get:function(){return this._indentLevel},set:function(a){if(this._indentLevel!=a){this._indentLevel=a;this.OnPropertyChanged("IndentLevel");for(var b=0;b<this.length;b++)this[b].IndentLevel=a}},enumerable:!0,configurable:!0});
Model.DataBoundActivitiesCollection.prototype.SubscribeToChildEvents=function(a){a.ConvertResourceListFromResourceString.subscribe(this.dbActivity_ConvertResourceListFromResourceString,this);a.IndentLevel=this.IndentLevel;RadiantQ.Gantt.Model.ActivitiesCollection.prototype.SubscribeToChildEvents.call(this,a)};Model.DataBoundActivitiesCollection.prototype.dbActivity_ConvertResourceListFromResourceString=function(a,b){this.OnConvertResourceListFromResourceString(b)};
Model.DataBoundActivitiesCollection.prototype.UnsubscribeToChildEvents=function(a){a.ConvertResourceListFromResourceString.unsubscribe(this.dbActivity_ConvertResourceListFromResourceString,this);Model.ActivitiesCollection.prototype.UnsubscribeToChildEvents.call(this,a)};Model.DataBoundActivitiesCollection.prototype.OnConvertResourceListFromResourceString=function(a){null!=this.ConvertResourceListFromResourceString&&this.ConvertResourceListFromResourceString.raise(this,a)};
Model.DataBoundActivitiesCollection.prototype.GetActivityById=function(a){return this._activityByID.GetItemByKey(a)};Model.DataBoundActivitiesCollection.prototype.GetIdByActivity=function(a){a=this._idByActivity.GetItemByKey(a);return null==a||void 0==a?-1:a};
Model.DataBoundActivity=function(a,b,c,d,e,f,g,h,k,l,n,p,m,q){this.CreateChildActivitiesCollection=function(){return new Model.DataBoundActivitiesCollection(this,this.Model)};Model.BaseActivity.call(this,a);this.ConvertResourceListFromResourceString=new ObjectEvent("ConvertResourceListFromResourceString");this._indentLevel=-1;this._isExpanded=q;a&&b&&c&&d&&e&&f&&g&&h&&k&&l&&n&&p&&m&&(this._boundObject=b,this._boundProps={},this._ignoreSelfUpdates=this.IgnoreBDUpdates=!1,this._idBinder=new ValueBinder(this._boundObject,
c,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._nameBinder=new ValueBinder(this._boundObject,e,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._sortOrderBinder=new ValueBinder(this._boundObject,d,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._indentBinder=new ValueBinder(this._boundObject,f,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._startTimeBinder=new ValueBinder(this._boundObject,g,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._prefStartTimeBinder=new ValueBinder(this._boundObject,h,null,
RadiantQ.Gantt.BindingMode.TwoWay,a),this._effortBinder=new ValueBinder(this._boundObject,k,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._predIndexBinder=new ValueBinder(this._boundObject,l,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._progressPercentBinder=new ValueBinder(this._boundObject,n,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._descBinder=new ValueBinder(this._boundObject,p,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._assignedResourcesBinder=new ValueBinder(this._boundObject,m,
null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._boundProps[this._idBinder._binding.Property]=this._idBinder,this._boundProps[this._nameBinder._binding.Property]=this._nameBinder,this._boundProps[this._sortOrderBinder._binding.Property]=this._sortOrderBinder,this._boundProps[this._indentBinder._binding.Property]=this._indentBinder,this._boundProps[this._startTimeBinder._binding.Property]=this._startTimeBinder,this._boundProps[this._prefStartTimeBinder._binding.Property]=this._prefStartTimeBinder,this._boundProps[this._effortBinder._binding.Property]=
this._effortBinder,this._boundProps[this._predIndexBinder._binding.Property]=this._predIndexBinder,this._boundProps[this._progressPercentBinder._binding.Property]=this._progressPercentBinder,this._boundProps[this._descBinder._binding.Property]=this._descBinder,this._boundProps[this._assignedResourcesBinder._binding.Property]=this._assignedResourcesBinder,this._idBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this),this._nameBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this),
this._sortOrderBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this),this._indentBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this),this._startTimeBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this),this._prefStartTimeBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this),this._effortBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this),this._predIndexBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this),this._progressPercentBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,
this),this._descBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this),this._assignedResourcesBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this),this._childActivities.ConvertResourceListFromResourceString.subscribe(this.ChildActivity_ConvertResourceListFromResourceString,this));this._ignoreSelfUpdates=!1;this.OnPropertyChanged=function(a,b,c){if(!1==this._ignoreSelfUpdates)try{switch(this.IgnoreBDUpdates=!0,a){case "ActivityName":this._nameBinder.Value=this.ActivityName;break;
case "IndentLevel":this._indentBinder&&(this._indentBinder.Value=this.IndentLevel);break;case "StartTime":this._startTimeBinder.Value=this.StartTime;break;case "PreferredStartTime":this._prefStartTimeBinder.Value=c;break;case "Effort":this._effortBinder.Value=this.Effort;break;case "ProgressPercent":this._progressPercentBinder.Value=this.ProgressPercent;break;case "Description":this._descBinder.Value=this.Description;break;case "ID":this._idBinder.Value=this.ID;break;case "SortOrder":this._sortOrderBinder.Value=
this.SortOrder;break;case "PredecessorIndexString":this._predIndexBinder.Value=this.PredecessorIndexString;break;case "Assignments":this.UpdateResourcesString();break}}finally{this.IgnoreBDUpdates=!1}Model.BaseActivity.prototype.OnPropertyChanged.call(this,a,b,c)};return this};RadiantQ.CanUseDefineProperty&&(Model.DataBoundActivity.prototype=new Model.BaseActivity);
RadiantQ.CanUseDefineProperty&&(Object.defineProperty(Model.DataBoundActivity.prototype,"DataSource",{get:function(){return this._boundObject},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(Model.DataBoundActivity.prototype,"IndentLevel",{get:function(){return this._indentLevel},set:function(a){this._indentLevel!=a&&(this._indentLevel=a,this.OnPropertyChanged("IndentLevel"),this._childActivities.IndentLevel=a+1)},enumerable:!1,configurable:!0}),Object.defineProperty(Model.DataBoundActivity.prototype,
"IgnoreSelfUpdates",{get:function(){return this._ignoreSelfUpdates},set:function(){},enumerable:!0,configurable:!0}));
Model.DataBoundActivity.prototype.BoundData_ValueChanged=function(a,b){if(!this.IgnoreBDUpdates)try{switch(this._ignoreSelfUpdates=!0,a){case this._idBinder:this.ID=parseInt(this._idBinder.Value);break;case this._sortOrderBinder:this.SortOrder=this._sortOrderBinder.Value;break;case this._nameBinder:this.ActivityName=this._nameBinder.Value;break;case this._startTimeBinder:this._startTimeBinder.Value&&this._startTimeBinder.Value!=Date.MinValue?(this.StartTime=this._startTimeBinder.Value,!1==this._prefStartTimeBinder.IsBound&&
(this.PreferredStartTime=this.StartTime)):this.StartTime=this.GetDefaultStartTime();break;case this._prefStartTimeBinder:this.PreferredStartTime=this._prefStartTimeBinder.Value!=Date.MinValue&&this._prefStartTimeBinder.Value?this._prefStartTimeBinder.Value:this.GetDefaultStartTime();break;case this._indentBinder:this.IndentLevel=this._indentBinder.Value;break;case this._progressPercentBinder:var c=parseInt(this._progressPercentBinder.Value);this.ProgressPercent=isNaN(c)?0:c;break;case this._effortBinder:this.Effort=
this._effortBinder.Value;break;case this._descBinder:this._description=this._descBinder.Value;break;case this._predIndexBinder:this.PredecessorIndexString=this._predIndexBinder.Value;break;case this._assignedResourcesBinder:this.UpdateResourcesCollection(this._assignedResourcesBinder.Value);break}}finally{this._ignoreSelfUpdates=!1}};
Model.DataBoundActivity.prototype.Dispose=function(){Model.BaseActivity.prototype.Dispose.call(this);this._idBinder.Dispose();this._nameBinder.Dispose();this._sortOrderBinder.Dispose();this._indentBinder.Dispose();this._startTimeBinder.Dispose();this._prefStartTimeBinder.Dispose();this._effortBinder.Dispose();this._predIndexBinder.Dispose();this._progressPercentBinder.Dispose();this._descBinder.Dispose();this._assignedResourcesBinder.Dispose();delete this._boundObject.PropertyChanged};
Model.DataBoundActivity.prototype.GetDefaultStartTime=function(){Model.BaseActivity.prototype.GetDefaultStartTime=this.GetDefaultStartTime;return this.Model.ScheduleFrom==Model.ScheduleFrom.ProjectStartDate?this.Model.ProjectStartDate:this.Model.WorkTimeSchedule.GetStart(this.Model.ProjectEndDate,this.Effort)};Model.DataBoundActivity.prototype.ChildActivity_ConvertResourceListFromResourceString=function(a,b){this.OnConvertResourceListFromResourceString(b)};
Model.DataBoundActivity.prototype.TransferIDFromBoundToSelf=function(){this._idBinder.IsBound&&this.BoundData_ValueChanged(this._idBinder)};
Model.DataBoundActivity.prototype.TransferDataFromBoundToSelf=function(){this._sortOrderBinder.IsBound&&this.BoundData_ValueChanged(this._sortOrderBinder);this._nameBinder.IsBound&&this.BoundData_ValueChanged(this._nameBinder);this._descBinder.IsBound&&this.BoundData_ValueChanged(this._descBinder);this._effortBinder.IsBound&&this.BoundData_ValueChanged(this._effortBinder);this._startTimeBinder.IsBound&&this.BoundData_ValueChanged(this._startTimeBinder);this._prefStartTimeBinder.IsBound&&this.BoundData_ValueChanged(this._prefStartTimeBinder);
this._indentBinder.IsBound&&this.BoundData_ValueChanged(this._indentBinder);this._progressPercentBinder.IsBound&&this.BoundData_ValueChanged(this._progressPercentBinder);this._predIndexBinder.IsBound&&this.BoundData_ValueChanged(this._predIndexBinder);this._assignedResourcesBinder.IsBound&&this.BoundData_ValueChanged(this._assignedResourcesBinder);this.Model.SetTopSortOrder(this.SortOrder)};
Model.DataBoundActivity.prototype.UpdateResourcesString=function(){if(0==this.Assignments.length)this._assignedResourcesBinder.Value=null;else{for(var a=new ConvertResourceListFromResourceStringEventArgs(null,!0),b=0;b<this.Assignments.length;b++)a.Assignments.add(this.Assignments[b]);this.OnConvertResourceListFromResourceString(a);this._assignedResourcesBinder.Value=a.ResourceText}};
Model.DataBoundActivity.prototype.UpdateResourcesCollection=function(a){if(a){a=new ConvertResourceListFromResourceStringEventArgs(a,!1);this.OnConvertResourceListFromResourceString(a);this._assignments.clear();for(var b=0;b<a.Assignments.length;b++)this._assignments.add(a.Assignments[b])}else this.Assignments.clear()};
Model.DataBoundActivity.prototype.OnConvertResourceListFromResourceString=function(a){null!=this.ConvertResourceListFromResourceString&&this.ConvertResourceListFromResourceString.raise(this,a)};
Model.DataBoundActivity.prototype.CreateNewChildActivity=function(a){a=new RadiantQ.Gantt.Model.DataBoundActivity(this.Model,a,this._idBinder.OriginalBinding,this._sortOrderBinder.OriginalBinding,this._nameBinder.OriginalBinding,this._indentBinder.OriginalBinding,this._startTimeBinder.OriginalBinding,this._prefStartTimeBinder.OriginalBinding,this._effortBinder.OriginalBinding,this._predIndexBinder.OriginalBinding,_progressPercentBinder.OriginalBinding,this._descBinder.OriginalBinding,this._assignedResourcesBinder.OriginalBinding);
a.TransferIDFromBoundToSelf();this.ChildActivities.Add(a);a.TransferDataFromBoundToSelf();return a};var ConvertResourceListFromResourceStringHandler=function(a,b){};function ConvertResourceListFromResourceStringEventArgs(a,b){this.ResourceText=a;this._assignments=new RadiantQ.Gantt.Model.ResourceAssignmentCollection(null);this.ConvertBack=!1;b&&(this.ConvertBack=b);return this}
RadiantQ.CanUseDefineProperty&&Object.defineProperty(ConvertResourceListFromResourceStringEventArgs.prototype,"Assignments",{get:function(){return this._assignments},set:function(){},enumerable:!0,configurable:!0});
Model.DataBoundGanttResource=function(a,b,c,d){this.base=Model.BaseGanttResource;this.base();this._resScheduleBinder=null;this.DataSource=this._boundObj=a;null!=c&&(this._resIDbinder=new ValueBinder(a,c));null!=b&&(this._resNamebinder=new ValueBinder(a,b),this._resNamebinder.ValueChanged.subscribe(this._resNamebinder_ValueChanged,this));null!=d&&(this._resScheduleBinder=new ValueBinder(a,d),this._resScheduleBinder.ValueChanged.subscribe(this._resScheduleBinder_ValueChanged));return this};
RadiantQ.CanUseDefineProperty&&(Model.DataBoundGanttResource.prototype=new Model.BaseGanttResource);
RadiantQ.CanUseDefineProperty&&(Object.defineProperty(Model.DataBoundGanttResource.prototype,"ResourceID",{get:function(){return this._resIDbinder?this._resIDbinder.Value:this.ResourceName},set:function(a){throw Error("Changing the bound resource's ID via DataBoundGanttResource.ResourceID property is not supported.");},enumerable:!0,configurable:!0}),Object.defineProperty(Model.DataBoundGanttResource.prototype,"Schedule",{get:function(){return null!=this._resScheduleBinder?this._resScheduleBinder.Value:
null},set:function(){throw new Exception("Chaging the bound resource's schedule via DataBoundGanttResource.Schedule property is not supported.");},enumerable:!0,configurable:!0}));Model.DataBoundGanttResource.prototype.OnPropertyChanged=function(a){null!=this.PropertyChanged&&this.PropertyChanged.raise(this,a)};Model.DataBoundGanttResource.prototype.toString=function(){return this.ResourceName};Model.DataBoundGanttResource.prototype._resNamebinder_ValueChanged=function(a,b){this.OnPropertyChanged("ResourceName")};
Model.DataBoundGanttResource.prototype._resScheduleBinder_ValueChanged=function(a,b){this.OnPropertyChanged("Schedule")};Model.DataBoundGanttResource.prototype.Dispose=function(){};Model.ScheduleFrom={ProjectStartDate:"ProjectStartDate",ProjectEndDate:"ProjectEndDate"};RadiantQ.Gantt.View={};RadiantQ.Gantt.DependencyType={FinishToStart:"FinishToStart",StartToStart:"StartToStart",FinishToFinish:"FinishToFinish",StartToFinish:"StartToFinish",None:"None"};var RQGantt=RadiantQ.Gantt;
RadiantQ.Gantt.View.IDependencyView=function(){this._endTime=this._startTime=this.Dependency=null;this.EndItemYPosAdjustment=this.StartItemYPosAdjustment=0;this.VerticalPositionChanged=null};RadiantQ.Gantt.View.IGanttControlDependencyView=function(){this.GanttControl=this.Dependency=null};
RadiantQ.Gantt.View.GanttDependencyView=function(a,b,c){RadiantQ.Gantt.View.IDependencyView.call(this,arguments);this._onInit=!0;this.PropertyChanged=new ObjectEvent("PropertyChanged");this.notifyChange=function(a,b){!0!=this._onInit&&this.PropertyChanged.raise(this,{PropertyName:a,value:b})};this.GanttControl=c;this._startTime=new Date;this._endTime=new Date;this.Dependency=this.Dependency=a;this.StartActivity=a.FromActivity;this.EndActivity=a.ToActivity;this.ActivityViewsCollection=b;this.UpdateTimes();
a.PropertyChanged.subscribe(this.dependency_PropertyChanged,this);a.FromActivity.PropertyChanged.subscribe(this.StartActivity_PropertyChanged,this);a.ToActivity.PropertyChanged.subscribe(this.EndActivity_PropertyChanged,this);this.StartActivity.VerticalPositionChanged.subscribe(this.Activity_VerticalPositionChanged,this);this.EndActivity.VerticalPositionChanged.subscribe(this.Activity_VerticalPositionChanged,this);this._visibility=this._fromVisibility=this._toVisibility=this._workTimeSchedule=null;
new Binding(this.StartActivity,"IsVisible",this,"FromVisibility",null,RadiantQ.Gantt.BindingMode.TwoWay);new Binding(this.EndActivity,"IsVisible",this,"ToVisibility",null,RadiantQ.Gantt.BindingMode.TwoWay);new Binding(this.GanttControl.options,"WorkTimeSchedule",this,"WorkTimeSchedule",null,RadiantQ.Gantt.BindingMode.OneWay);this.UpdateVisibility();this._onInit=!1};RadiantQ.Gantt.View.GanttDependencyView.prototype=new RadiantQ.Gantt.View.IDependencyView;
RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"StartTime",{get:function(){return this._startTime},set:function(a){this._startTime=a;this.notifyChange("StartTime",a)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"EndTime",{get:function(){return this._endTime},set:function(a){this._endTime=a;this.notifyChange("EndTime",a)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,
"DataSource",{get:function(){return this.Dependency},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"DependencyType",{get:function(){return this.Dependency.Type},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"IsEndFixedShape",{get:function(){return this.EndActivity.IsMilestone},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,
"IsStartFixedShape",{get:function(){return this.StartActivity.IsMilestone},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"StartRowIndex",{get:function(){return this.StartActivity.DisplayIndex},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"EndRowIndex",{get:function(){return this.EndActivity.DisplayIndex},set:function(){},enumerable:!0,configurable:!0}),
Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"WorkTimeSchedule",{get:function(){return this._workTimeSchedule},set:function(a){this._workTimeSchedule=a;this.notifyChange("WorkTimeSchedule",a);this.UpdateTimes()},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"ToVisibility",{get:function(){return this._toVisibility},set:function(a){this._toVisibility=a;this.notifyChange("ToVisibility",a);this.UpdateTimes();this.UpdateVisibility()},
enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"FromVisibility",{get:function(){return this._fromVisibility},set:function(a){this._fromVisibility=a;this.notifyChange("FromVisibility",a);this.UpdateVisibility()},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"Visibility",{get:function(){return this._visibility},set:function(a){this._visibility=a;this.notifyChange("Visibility",a)},enumerable:!0,
configurable:!0}),RadiantQ.Gantt.View.GanttDependencyView.prototype.dependency_PropertyChanged=function(){this.UpdateTimes()},RadiantQ.Gantt.View.GanttDependencyView.prototype.StartActivity_PropertyChanged=function(a,b){"StartTime"!=b.PropertyName&&"EndTime"!=b.PropertyName||this.UpdateTimes()},RadiantQ.Gantt.View.GanttDependencyView.prototype.EndActivity_PropertyChanged=function(a,b){"StartTime"!=b.PropertyName&&"EndTime"!=b.PropertyName||this.UpdateTimes()},RadiantQ.Gantt.View.GanttDependencyView.prototype.Activity_VerticalPositionChanged=
function(){},RadiantQ.Gantt.View.GanttDependencyView.prototype.OnVerticalPositionChanged=function(){null!=this.VerticalPositionChanged&&this.VerticalPositionChanged.raise(this)},RadiantQ.Gantt.View.GanttDependencyView.prototype.UpdateTimes=function(){switch(this.Dependency.Type){case RQGantt.DependencyType.FinishToFinish:this.StartTime=this.Dependency.FromActivity.EndTime;this.EndTime=this.Dependency.ToActivity.EndTime;break;case RQGantt.DependencyType.StartToFinish:this.StartTime=this.Dependency.FromActivity.StartTime;
this.EndTime=this.Dependency.ToActivity.EndTime;break;case RQGantt.DependencyType.StartToStart:this.StartTime=this.Dependency.FromActivity.StartTime;this.EndTime=this.Dependency.ToActivity.StartTime;break;default:this.StartTime=this.Dependency.FromActivity.EndTime,this.EndTime=this.Dependency.ToActivity.StartTime}},RadiantQ.Gantt.View.GanttDependencyView.prototype.UpdateVisibility=function(){this.Visibility=!0==this.ToVisibility&&!0==this.FromVisibility?!0:!1});
RadiantQ.Gantt.View.IParentData=function(){Object.defineProperty(this,"HasParent",{get:function(){return this},set:function(){},enumerable:!0,configurable:!0});Object.defineProperty(this,"Parent",{get:function(){return this},set:function(){},enumerable:!0,configurable:!0});return this};CollectionOFIDependencyView=function(){};CollectionOFIDependencyView.prototype=new ObservableCollection;RadiantQ.Gantt.GanttFlatDependenciesList=function(a,b,c){this.activityViewsList=b;this.chart=c;this.model=a;this.model.Dependencies.CollectionChanged.subscribe(this.model_NewActivityAdded)};
RadiantQ.Gantt.GanttFlatDependenciesList.prototype.CreateFromModel=function(a){this.Clear();for(var b=0;b<a.Dependencies.length;b++)this.add(this.CreateNew(dependency))};RadiantQ.Gantt.GanttFlatDependenciesList.prototype.CreateNew=function(a){return new GanttDependencyView(a,this.activityViewsList,this.chart)};RadiantQ.Gantt.GanttFlatDependenciesList.prototype.FindView=function(a){for(var b=0;b<this.length;b++)if(this[b].DataSource==a)return b;return-1};
RadiantQ.Gantt.GanttFlatDependenciesList.prototype.model_NewActivityAdded=function(a,b){if("remove"==a.type||"replaceAll"==a.type)for(var c=0;c<b.items.length;c++){var d=this.FindView(b.items[c]);-1!=d&&this.remove(d)}if("insert"==a.type)for(c=0;c<b.items.length;c++)this.add(this.CreateNew(b.items[c]))};View=RadiantQ.Gantt.View;
View.IActivityView=function(){NotifyPropertyChanged.apply(this,arguments);this.OnPropertyChanged=NotifyPropertyChanged.prototype.OnPropertyChanged;this._indentLevel=0;this._isExpanded=!0;this._isParent=this._isReadOnly=this._isMouseIn=this._isSelected=!1;this._isRegularTask=!0;ReparentView=function(a){};this.ExpandedChanged=new ObjectEvent("ExpandedChanged");this.$chartRow=this.$tableRow=null;return this};View.IActivityView.prototype=new NotifyPropertyChanged;
RadiantQ.CanUseDefineProperty&&(Object.defineProperty(View.IActivityView.prototype,"Activity",{get:function(){return this._activity},set:function(a){this._activity!=a&&(this._activity=a,this.OnPropertyChanged("Activity",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.IActivityView.prototype,"ParentView",{get:function(){return this._parentView},set:function(a){this._parentView!=a&&(this._parentView=a,this.OnPropertyChanged("ParentView",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.IActivityView.prototype,
"ParentActivity",{get:function(){return this._activity.Parent},set:function(a){this._activity.Parent!=a&&(this._activity.Parent=a,this.OnPropertyChanged("ParentActivity",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.IActivityView.prototype,"IndentLevel",{get:function(){return this._indentLevel},set:function(a){this._indentLevel!=a&&(this._indentLevel=a,this.OnPropertyChanged("IndentLevel",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.IActivityView.prototype,"IsExpanded",
{get:function(){return this._isExpanded},set:function(a){this._isExpanded!=a&&(this._isExpanded=a,this.OnPropertyChanged("IsExpanded",a))},enumerable:!0,configurable:!0}),View.IActivityView.prototype.IsSelected=function(a){if(void 0==a||null==a)return this._isSelected;this._isSelected!=a&&(this._isSelected=a,this.OnPropertyChanged("IsSelected",a),this.UpdateSelection(a))},Object.defineProperty(View.IActivityView.prototype,"IsReadOnly",{get:function(){return this._isReadOnly},set:function(a){this._isReadOnly!=
a&&(this._isReadOnly=a,this.OnPropertyChanged("IsReadOnly",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.IActivityView.prototype,"IsParent",{get:function(){return this._isParent},set:function(a){this._isParent!=a&&(this._isParent=a,this.OnPropertyChanged("IsParent",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.IActivityView.prototype,"IsRegularTask",{get:function(){return this._isRegularTask},set:function(a){this._isRegularTask!=a&&(this._isRegularTask=a,this.OnPropertyChanged("IsRegularTask",
a))},enumerable:!0,configurable:!0}),ReparentView=function(a){},View.IActivityView.prototype.TableRow=function(a){if(void 0==a||null==a)return this.$tableRow;a=a instanceof jQuery?a:$(a);if(!this.IsSelected)return 0;if(void 0!=this.$tableRow){this.IsSelected()&&a.addClass("rq-row-selected ui-state-active");var b=this.$tableRow.height();a.height(b)}this.$tableRow=a;!0==this.IsParent?this.$tableRow.css("font-weight","bolder"):this.$tableRow.css("font-weight","normal")},View.IActivityView.prototype.ChartRow=
function(a){if(void 0==a||null==a)return this.$chartRow;a=a instanceof jQuery?a:$(a);if(void 0!=this.$chartRow){var b=this.$chartRow.height();a.height(b)}this.$chartRow=a},View.IActivityView.prototype.IsMouseIn=function(a){if(void 0==a||null==a)return this._isMouseIn;this._isMouseIn!=a&&(this._isMouseIn=a,this.UpdateHoverStyle(a))},View.IActivityView.prototype.UpdateHoverStyle=function(a){if(!0==a&&void 0!=a)this.TableRow().addClass("rq-row-hover ui-state-hover"),this.ChartRow()&&this.ChartRow().find("td").addClass("rq-row-hover ui-state-hover");
else if(!1==a||void 0==a)this.TableRow().removeClass("rq-row-hover ui-state-hover"),this.ChartRow()&&this.ChartRow().find("td").removeClass("rq-row-hover ui-state-hover")},View.IActivityView.prototype.UpdateSelection=function(a){if(!0==a&&void 0!=a)this.TableRow().addClass("rq-row-selected ui-state-active"),a=this.ChartRow(),null!=a&&a.find("td").addClass("rq-row-selected ui-state-active");else if(!1==a||void 0==a)this.TableRow().removeClass("rq-row-selected ui-state-active"),a=this.ChartRow(),null!=
a&&a.find("td").removeClass("rq-row-selected ui-state-active")});
View.GanttActivityView=function(a,b,c,d){View.IActivityView.apply(this,arguments);this.IndentLevelBinding=this.ParentActivityBinding=null;this._activity=this.activity=a;this._isExpanded=a.IsExpanded;this.Model=c;this.GC=d;this._isParent=this._ignorePredUpdates=!1;this._indentLevel=0;this._isReadOnly=!1;this.ParentView=b;this.activity.ChildActivities.CollectionChanged.subscribe(this.ChildActivities_CollectionChanged,this);this.activity.PropertyChanged.subscribe(this.activity_PropertyChanged,this);
this.OnChildListChanged();this.OnTimesChanged();if(null!=this.GC.options.IsTaskReadOnlyBinding){var e=this.GC.options.IsTaskReadOnlyBinding,f=e.Property,e=e.Converter,g=f.split("."),h=null;1<g.length?(h=this[g[0]],f=g[1]):h=this;this.IsTaskReadOnlyBinding=new Binding(h,f,this,"IsReadOnly",{Convert:e})}this.RefreshPredString(!0);this.UpdateIndentWidth();return this};
RadiantQ.CanUseDefineProperty&&(View.GanttActivityView.prototype=new View.IActivityView,Object.defineProperty(View.GanttActivityView.prototype,"IndentWidth",{get:function(){return this._indentWidth},set:function(a){this._indentWidth!=a&&(this._indentWidth=a,this.OnPropertyChanged("IndentWidth",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"Background",{get:function(){return this._background},set:function(a){this._background!=a&&(this._background=a,this.OnPropertyChanged("Background",
a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"ParentView",{get:function(){return this._parentView},set:function(a){this._parentView!=a&&(this._parentView=a,null!=a?(this.updateParentViewActivityBinding(),this.updateParentViewIndentLevelBinding()):(this.ParentActivityBinding.Dispose(),this.IndentLevelBinding.Dispose(),this.IndentLevel=0),this.OnPropertyChanged("ParentView",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,
"ParentActivity",{get:function(){return this.activity.Parent},set:function(a){this.activity.Parent!=a&&(this.activity.Parent=a,this.OnPropertyChanged("ParentActivity",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"SelectionFill",{get:function(){return this._selectionFill},set:function(a){this._selectionFill!=a&&(this._selectionFill=a,this.OnPropertyChanged("SelectionFill",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,
"SelectionFillOpacity",{get:function(){return this._selectionFillOpacity},set:function(a){this._selectionFillOpacity!=a&&(this._selectionFillOpacity=a,this.OnPropertyChanged("SelectionFillOpacity",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"PredecessorIndexString",{get:function(){return this._predecessorIndexString},set:function(a){if(this._predecessorIndexString!=a){var b=this._predecessorIndexString;this._predecessorIndexString=a;!1==this.UpdateActivityDependencies()?
(this._predecessorIndexString=b,this.activity.PredecessorIndexString=b):this.OnPropertyChanged("PredecessorIndexString",a)}},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"Activity",{get:function(){return this.activity},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"IndentLevel",{get:function(){return this._indentLevel},set:function(a){this._indentLevel!=a&&(this._indentLevel=a,this.UpdateIndentWidth(),
this.OnPropertyChanged("IndentLevel",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"IsParent",{get:function(){return this._isParent},set:function(a){var b=this.TableRow();null!=b&&(!0==a?b.css("font-weight","bolder"):b.css("font-weight","normal"));this._isParent!=a&&(this._isParent=a,this.UpdateIndentWidth(),this.OnPropertyChanged("IsParent",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"IsExpanded",{get:function(){return this._isExpanded},
set:function(a){this._isExpanded!=a&&(this._isExpanded=a,this.OnExpandedChanged(),this.OnPropertyChanged("IsExpanded",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"DisplayIndex",{get:function(){return this.Activity.DisplayIndex},set:function(a){this.Activity.DisplayIndex=a;this.OnPropertyChanged("DisplayIndex",a)},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"HasParent",{get:function(){return null!=this.ParentView},
set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"Parent",{get:function(){return this.ParentView},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"IsReadOnly",{get:function(){return this._isReadOnly},set:function(a){this._isReadOnly!=a&&(this._isReadOnly=a,this.OnPropertyChanged("IsReadOnly",a))},enumerable:!0,configurable:!0}));
View.GanttActivityView.prototype.updateParentViewActivityBinding=function(){this.ParentActivityBinding=new Binding(this.ParentView,"Activity",this,"ParentActivity",null,null)};View.GanttActivityView.prototype.updateParentViewIndentLevelBinding=function(){this.IndentLevelBinding=new Binding(this.ParentView,"IndentLevel",this,"IndentLevel",RadiantQ.Gantt.ValueConverters.ParentViewToIndentConverter,null)};
View.GanttActivityView.prototype.UpdateIsRegularTask=function(){this.IsRegularTask=this.IsParent||this.Activity.IsMilestone?!1:!0};View.GanttActivityView.prototype.OnChildListChanged=function(){this.IsParent=0<this.Activity.ChildActivities.length;this.UpdateIsRegularTask()};View.GanttActivityView.prototype.ChildActivities_CollectionChanged=function(a,b){this.OnChildListChanged()};
View.GanttActivityView.prototype.UpdateIndentWidth=function(){this.IndentWidth=RadiantQ.Gantt.LevelToIndentWidth(this.IndentLevel,this.IsParent)};View.GanttActivityView.prototype.RefreshPredString=function(a){try{this._ignorePredUpdates=a,this.PredecessorIndexString=this.Activity.PredecessorIndexString}finally{this._ignorePredUpdates=!1}};
View.GanttActivityView.prototype.OnExpandedChanged=function(){var a=new RadiantQ.Gantt.Utils.DelayUpdates;this.ExpandedChanged.isSubscribed()&&this.ExpandedChanged.raise(this,this);a.Dispose()};View.GanttActivityView.prototype.activity_PropertyChanged=function(a,b){"StartTime"==b.PropertyName||"EndTime"==b.PropertyName||"Assignments"==b.PropertyName?this.OnTimesChanged():"PredecessorIndexString"==b.PropertyName&&this.RefreshPredString(this.Model.Dependencies._inCollectionChanged)};
View.GanttActivityView.prototype.OnTimesChanged=function(){this.UpdateIsRegularTask()};View.GanttActivityView.prototype.ConvertToMilestone=function(a){a.EndTime=a.StartTime};View.GanttActivityView.prototype.ConvertToNormalTask=function(a,b){var c=b.BottomTwoHeaders;null!=c&&(c=RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertTimeUnitsToTimeSpan(c[0].BaseTimeScaleType,1),a.EndTime=a.StartTime.clone().addTimeSpan(c))};
View.GanttActivityView.prototype.ReparentView=function(a){a!=this.ParentView&&(this.ParentView=null,this.ParentView=a,null!=a&&!1==a.IsExpanded&&(a.IsExpanded=!0,a.IsExpanded=!1))};
View.GanttActivityView.prototype.UpdateActivityDependencies=function(){if(!this._ignorePredUpdates){var a=this.PredecessorIndexString,b=this.Model,c=this.Activity,d=new ObservableCollection,e=new ObservableCollection,f=new ObservableCollection,g=RadiantQ.Gantt.Model.DataBoundGanttModel.ProcessPredecessorString(a,b.LagStringUnitsInHours,d,e,f,g);if(g)return alert(g),!1;a=new RadiantQ.Gantt.Utils.DelayUpdates;b.Dependencies.ClearDependencies(c);for(var g=new RadiantQ.Gantt.Utils.DelayUpdates,h=0;h<
d.length;h++){var k=b.GetActivityById(d[h]);null!=k&&b.CanAddNewDependency(k,c)&&b.CreateNewDependency(k,c,e[h],f[h])}g.Dispose();a.Dispose();this.RefreshPredString(!0)}};var IHierarchicalList=function(){},IUIUpdateable=function(){};
View.GanttFlatActivitiesList=function(a,b){ObservableCollection.apply(this,arguments);this._dictActivityVsView=new RadiantQ.Gantt.Dictionary;this.model=a;this.gantt=b;this.RowVisiblityChanged=new ObjectEvent("RowVisiblityChanged");this._ignoreRemove=!1;var c=this;this.view_ExpandedChanged=function(a,b){!1==a.IsExpanded?c.ClearHierarchyFromList(a):c.AddHierarchyToList(a);c.gantt.RefreshDisplayIndex();c.OnRowVisiblityChanged()};this.CreateFromModel();this.ListenToModelChanges();this._init=!0};
View.GanttFlatActivitiesList.prototype=new ObservableCollection;View.GanttFlatActivitiesList.prototype.OnCollectionChanged=function(a,b){ObservableCollection.prototype.OnCollectionChanged.apply(this,arguments);if("remove"==a.type||"replaceAll"==a.type)for(var c=0;c<b.items.length;c++)this.UnsubscribeToActivityView(b.items[c]);if("insert"==a.type)for(c=0;c<b.items.length;c++)this.SubscribeToActivityView(b.items[c]);this._init&&this.gantt.RefreshDisplayIndex()};
View.GanttFlatActivitiesList.prototype.GetActivityViewByID=function(a){a=this.model.GetActivityById(a);return this.GetIActivityView(a)};View.GanttFlatActivitiesList.prototype.CreateFromModel=function(){this.clear();for(var a=0;a<this.model.Activities.length;a++)!1==this.model.Activities[a].IsFilteredOut&&this.AddActivities(this.model.Activities[a],null,this.model,0)};
View.GanttFlatActivitiesList.prototype.AddActivities=function(a,b,c,d){b=new View.GanttActivityView(a,b,c,this.gantt);this.add(b);if(b.IsParent&&a.IsExpanded)for(var e=0;e<a.ChildActivities.length;e++)!1==a.ChildActivities[e].IsFilteredOut&&this.AddActivities(a.ChildActivities[e],b,c,d+1)};
View.GanttFlatActivitiesList.prototype.model_NewActivityAdded=function(a,b){var c=b.NewActivity,d=0;if(0<c.ChildActivities.length)throw"Encountered a newly added activity which already has children. This is not supported.";var e=null;if(null!=b.Parent){e=this[b.Parent];if(null==e)throw"Encountered a new activity whose parent activity is not already in the view.";d=e.IndentLevel+1}this.AddActivities(c,e,this.model,d)};View.GanttFlatActivitiesList.prototype.ListenToModelChanges=function(){this.model.NewActivityAdded.subscribe(this.model_NewActivityAdded.bind(this))};
View.GanttFlatActivitiesList.prototype.remove=function(a){this[a].DisplayIndex=-1;ObservableCollection.prototype.remove.apply(this,arguments)};
View.GanttFlatActivitiesList.prototype.Move=function(a,b,c){var d=new RadiantQ.Gantt.Utils.DelayUpdates,e,f;try{this._ignoreRemove=!0;if(c>a){e=a;for(var g=0;g<b;g++){var h=this[a];this.remove(a);this.insert(c-1,h)}f=c-b}else{e=c;for(g=0;g<b;g++)h=this[a+g],this.remove(a+g),this.insert(c+g,h);f=c}this.gantt.Model.UpdateSortOrderFrom(this[e].Activity);return f}finally{this._ignoreRemove=!1}d.Dispose()};
View.GanttFlatActivitiesList.prototype.ClearHierarchyFromList=function(a){var b=this.indexOf(a);this.ClearHierarchyFromListRecursive(a,b);a.Activity.IsExpanded=!1};View.GanttFlatActivitiesList.prototype.ClearHierarchyFromListRecursive=function(a,b){if(a.Activity.IsExpanded){var c=this.length;for(b++;b<c;)if(c=this[b],c.ParentView==a)this.ClearHierarchyFromListRecursive(c,b),this.RemoveAndDispose(b),c=this.length;else break}};
View.GanttFlatActivitiesList.prototype.RemoveAndDispose=function(a){var b=0,b="number"===$.type(a)?a:this.indexOf(a);this.remove(b)};RadiantQ.Gantt.addMethod(View.GanttFlatActivitiesList.prototype,"AddHierarchyToList",function(a){a.Activity.IsExpanded=!0;this.AddHierarchyToList(a,{value:-1})});
RadiantQ.Gantt.addMethod(View.GanttFlatActivitiesList.prototype,"AddHierarchyToList",function(a,b){-1==b.value&&(b.value=this.indexOf(a));if(a.Activity.IsExpanded)for(var c=0;c<a.Activity.ChildActivities.length;c++)if(!1==a.Activity.ChildActivities[c].IsFilteredOut){var d=new RadiantQ.Gantt.View.GanttActivityView(a.Activity.ChildActivities[c],a,this.model,this.gantt);b.value++;this.insert(b.value,d);this.AddHierarchyToList(d,b)}});View.GanttFlatActivitiesList.prototype.GetIActivityView=function(a){return this._dictActivityVsView.GetItemByKey(a)};
View.GanttFlatActivitiesList.prototype.clear=function(a){for(var b=0;b<this.length;b++)this.UnsubscribeToActivityView(this[b]);ObservableCollection.prototype.clear.apply(this,arguments)};View.GanttFlatActivitiesList.prototype.Contains=function(a){return this._dictActivityVsView.Contains(a)};View.GanttFlatActivitiesList.prototype.SubscribeToActivityView=function(a){this._dictActivityVsView.Add(a.Activity,a);a.ExpandedChanged.subscribe(this.view_ExpandedChanged)};
View.GanttFlatActivitiesList.prototype.UnsubscribeToActivityView=function(a){this._dictActivityVsView.Remove(a.Activity);a.ExpandedChanged.unsubscribe(this.view_ExpandedChanged)};var ots=this;View.GanttFlatActivitiesList.prototype.OnRowVisiblityChanged=function(){this.RowVisiblityChanged.isSubscribed()&&this.RowVisiblityChanged.raise(this,EventArgs.Empty)};View.GanttFlatActivitiesList.prototype.RefreshDisplayIndexOfChildren=function(){this.RefreshDisplayIndexOfChildrenPrivate()};
View.GanttFlatActivitiesList.prototype.RefreshDisplayIndexOfChildrenPrivate=function(){for(var a=-1,b=0;b<this.length;b++)a++,this[b].DisplayIndex=a};View.GanttFlatActivitiesList.prototype.VisibleIndexOf=function(a){return a.DisplayIndex};View.GanttFlatDependenciesList=function(a,b,c){this.model=a;this.activityViewsList=b;this.gantt=c;this.model.Dependencies.CollectionChanged.subscribe(this.model_NewDependencyAdded,this);this.CreateFromModel(a)};View.GanttFlatDependenciesList.prototype=new ObservableCollection;
View.GanttFlatDependenciesList.prototype.CreateFromModel=function(a){for(var b=0;b<a.Dependencies.length;b++)this.add(this.CreateNew(a.Dependencies[b]))};View.GanttFlatDependenciesList.prototype.CreateNew=function(a){return new RadiantQ.Gantt.View.GanttDependencyView(a,this.activityViewsList,this.gantt)};View.GanttFlatDependenciesList.prototype.FindView=function(a){for(var b=0;b<this.length;b++)if(this[b].DataSource==a)return b;return-1};
View.GanttFlatDependenciesList.prototype.model_NewDependencyAdded=function(a,b){if("remove"==b.type||"replaceAll"==b.type)for(var c=0;c<b.OldItems.length;c++){var d=this.FindView(b.OldItems[c]);-1!=d&&this.remove(d)}if("insert"==b.type)for(c=0;c<b.NewItems.length;c++)this.add(this.CreateNew(b.NewItems[c]))};
RadiantQ.Gantt.FGDependencyViewList=function(a,b){this.DependencyViewList=[];this.FlexyGantt=a;this.HiddenList=null;this.Data=[];this.UpdateList=function(){if(null!=this.Data)for(var a=0;a<this.Data.length;a++)this.OnAddItem(this.Data[a])};this.OnAddItem=function(a){a=new RadiantQ.Gantt.FGDependencyView(this.FlexyGantt,a);this.DependencyViewList.push(a)};var c=this;$.observable(this.Data).bind("insert remove replaceAll",function(a,b){switch(a.type){case "insert":c.OnItemsAdded(a.NewItems);break;case "remove":c.OnItemsRemoved(a.OldItems);
break;case "replaceAll":c.UpdateList()}});$.observable(this.Data).replaceAll(b);this.depView_VerticalPositionChanged=function(a,b){-1==a.StartRowIndex&&-1==a.EndRowIndex?(null==this.HiddenList[a.DataSource]&&this.HiddenList.push(a),this.DependencyViewList.removeByValue(a)):null!=this.HiddenList[a.DataSource]&&(this.HiddenList.removeByValue(a),this.DependencyViewList.push(a))}};
RadiantQ.Gantt.FGDependencyView=function(a,b){this.StartRowIndex=this.EndTime=this.StartTime=this.EndRowItem=this.StartRowItem=this.IsEndFixedShape=this.IsStartFixedShape=this.EndItem=this.StartItem=this.DependencyType=null;this.PropertyChanged=new ObjectEvent("PropertyChanged");Object.defineProperty(this,"StartRowIndex",{get:function(){return this._startRowIndex},set:function(a){this._startRowIndex=a;this.OnPropertyChanged("StartRowIndex",a)},enumerable:!0,configurable:!0});this.EndRowIndex=null;
this.FlexyGantt=a;this.Data=b;this.DependencyTypeChanged=new ObjectEvent("DependencyTypeChanged");this.StartRowItemChanged=new ObjectEvent("StartRowItemChanged");this.EndRowItemChanged=new ObjectEvent("EndRowItemChanged");this.OnPropertyChanged=function(a,b){this.PropertyChanged.raise(this,{PropertyName:a,value:b})};this.SetupStartTimeBinding=function(){var a=null,a=this.DependencyType==RadiantQ.Gantt.DependencyType.FinishToStart||this.DependencyType==RadiantQ.Gantt.DependencyType.FinishToFinish?
this.FlexyGantt.options.TaskEndTime:this.FlexyGantt.options.TaskStartTime;this.StartItem&&(a=this.StartItem[a],$.isFunction(a)?this.StartTime=a():this.StartTime=a)};this.SetupEndTimeBinding=function(){var a=null,a=this.DependencyType==RadiantQ.Gantt.DependencyType.FinishToStart||this.DependencyType==RadiantQ.Gantt.DependencyType.StartToStart?this.FlexyGantt.options.TaskStartTime:this.FlexyGantt.options.TaskEndTime;null!=this.EndItem&&(a=this.EndItem[a],$.isFunction(a)?this.EndTime=a():this.EndTime=
a)};this.DisplayIndexConverter={Convert:function(a,b,c){return null==a?0:a+1},ConvertBack:function(){throw"Not Implemented";}};this.SetupStartIndexBinding=function(){if(null!=this.StartRowItem){for(var a=0;a<this.FlexyGantt.options.FlatItemsSource.length;a++)if(this.FlexyGantt.options.FlatItemsSource[a]._data==this.StartRowItem){var b=this.FlexyGantt.options.FlatItemsSource[a];break}this.StartRowIndex=null==b?-1:b.DisplayIndex()}};this.SetupEndIndexBinding=function(){if(null!=this.EndRowItem){for(var a=
0;a<this.FlexyGantt.options.FlatItemsSource.length;a++)if(this.FlexyGantt.options.FlatItemsSource[a]._data==this.EndRowItem)var b=this.FlexyGantt.options.FlatItemsSource[a];this.EndRowIndex=null==b?-1:b.DisplayIndex()}};var c=this;this.DependencyNotifyChanged=function(a,b){};this.StartRowNotifyChanged=function(a,b){c.SetupStartIndexBinding()};this.EndRowNotifyChanged=function(a,b){c.SetupEndIndexBinding()};this.FlexyGantt.options.DependencyLineType&&(this.DependencyType=this.Data[this.FlexyGantt.options.DependencyLineType],
this.DependencyTypeChanged.subscribe(this.DependencyNotifyChanged),this.DependencyTypeChanged.raise(this.DependencyType,this));this.FlexyGantt.options.DependencyLineStartItem&&(this.StartItem=this.Data[this.FlexyGantt.options.DependencyLineStartItem]);this.FlexyGantt.options.DependencyLineEndItem&&(this.EndItem=this.Data[this.FlexyGantt.options.DependencyLineEndItem]);this.FlexyGantt.options.DependencyLineStartRowItem&&(this.StartRowItem=this.Data[this.FlexyGantt.options.DependencyLineStartRowItem],
this.StartRowItemChanged.subscribe(this.StartRowNotifyChanged),this.StartRowItemChanged.raise(this.StartRowItem,this));this.FlexyGantt.options.DependencyLineEndRowItem&&(this.EndRowItem=this.Data[this.FlexyGantt.options.DependencyLineEndRowItem],this.EndRowItemChanged.subscribe(this.EndRowNotifyChanged),this.EndRowItemChanged.raise(this.EndRowItem,this));this.FlatTreeItemsSource_CollectionChanged=function(a,b){if(null!=b.NewItems)for(var c;c<b.NewItems.length;c++){var g=b.NewItems[c];g.Data==this.StartRowItem&&
this.OnStartRowItemChanged();g.Data==this.EndRowItem&&this.OnEndRowItemChanged()}if(null!=b.OldItems)for(var h;h<b.OldItems.length;h++)g=b.OldItems[h],g.Data==this.StartRowItem&&this.OnStartRowItemChanged(),g.Data==this.EndRowItem&&this.OnEndRowItemChanged()};this.SetupStartTimeBinding();this.SetupEndTimeBinding();return this};var gantt=RadiantQ.Gantt;RadiantQ.Gantt.OverlappedTasksRenderingOptimization={None:"None",ShrinkHeight:"ShrinkHeight"};
Array.max=function(a,b){return null!=b||b?($.each(a,function(a,d){if(0==a||max<d.options[b])max=d.options[b]}),max):Math.max.apply(Math,a)};Array.min=function(a,b){return null!=b?($.each(a,function(a,d){if(0==a||min>d.options[b])min=d.options[b]}),min):Math.min.apply(Math,a)};Array.prototype.findByPropertyValue=function(a,b){var c=-1;$.each(this,function(d,e){this[a]===b&&(c=d)});return c};Array.prototype.removeByValue=function(a){for(var b=0;b<this.length;b++)if(this[b]===a){this.splice(b,1);break}};
Array.prototype.containsValue=function(a){for(var b=0;b<this.length;b++)if(this[b]==a)return!0;return!1};Array.prototype.FirstOrDefaultEndity=function(a){for(var b=0;b<this.length;b++)if(this[b].options.Data===a)return this[b];return null};
OverlappingBlock=function(a){this.StartTime=a.options.StartTime;this.EndTime=a.options.EndTime;this.entities=[];this.entities.push(a);this.IsOverlappingWithExcludeCurrentItem=function(a){for(var c=0;c<this.entities.length;c++){var d=this.entities[c];if(d!=a&&(d.options&&(d=d.options),a.StartTime>=d.StartTime&&a.StartTime<d.EndTime||a.EndTime>d.StartTime&&a.EndTime<=d.EndTime||d.StartTime>a.StartTime&&d.EndTime<a.EndTime))return!0}return!1};this.IsOverlapping=function(a,c){a.options&&(a=a.options);
if(c){if(a.StartTime>=this.StartTime&&a.StartTime<this.EndTime||a.EndTime>this.StartTime&&a.EndTime<=this.EndTime||this.StartTime>a.StartTime&&this.EndTime<a.EndTime)return!0}else for(index=0;index<this.entities.length;index++){var d=this.entities[index].options;if(a.Parent.element.options.Data==d.Parent.element.options.Data&&(a.StartTime>=d.StartTime&&a.StartTime<d.EndTime||a.EndTime>d.StartTime&&a.EndTime<=d.EndTime||d.StartTime>a.StartTime&&d.EndTime<a.EndTime))return!0}return!1};this.AddEntity=
function(a){this.entities.push(a);this.UpdateTimeLength()};this.RemoveEntity=function(a){(a=this.entities.Remove(a))&&0<this.entities.length&&this.UpdateTimeLength();return a};this.UpdateTimeLength=function(){0<this.entities.length&&(this.StartTime=Array.min(this.entities,"StartTime"),this.EndTime=Array.max(this.entities,"EndTime"))};this.ComputeIndicesAndHeight=function(){var a=this.GetBlocksFromEntities();for(i=0;i<a.length;i++){var c=a[i];for(index=0;index<c.entities.length;index++){var d=c.entities[index],
e=RadiantQ.FlexyGantt.TaskItemControl,e=d.Height-2*e.MarginForBars-(e.TaskBar_BorderTopWidth+e.TaskBar_BorderBottomWidth),f=a.length>e&&e?e:a.length;void 0!=d.element.attr("heightSetBySrc")||isNaN(parseInt(d.element[0].style.height))?d._updateTaskItem(i,e/f,1<a.length,f):d._updateTaskItem(i,parseInt(d.element[0].style.height),1<a.length)}}};this.GetBlocksFromEntities=function(){for(var a=[],c=0;c<this.entities.length;c++){for(var d=this.entities[c],e=!1,f=0;f<a.length;f++){var g=a[f];if(!1==g.IsOverlapping(d,
!1)){g.AddEntity(d);e=!0;break}}!1==e&&a.push(new OverlappingBlock(d))}return a};this.GetRowCount=function(){return this.GetBlocksFromEntities().length};return this};var ns_gantt=RadiantQ.Gantt,stElementInfocollection=[],rtElementInfocollection=[],rqTCUtils=RadiantQ.Gantt.Utils.TimeComputingUtils;
(function(a){a.widget("radiantq.taskbar",{_taskbar:null,currentBlock:null,options:{StartTime:null,EndTime:null,Parent:null,Height:null,GanttChart:null,ApplyBarWidthOptimization:null,IsParentTypeRow:null,OverlappedTasksRenderingOptimization:null,ComputedStartTime:null,Data:null,PropertyName:null,ParentTaskTemplate:null,TaskStartTime:null,ParentTaskStartTime:null,TaskEndTime:null,ParentTaskEndTime:null,TaskTooltipTemplate:null,MovingInfoPopup:null,ResizeInfoPopup:null,ParentTasksListProperty:null,DataSource:null,
KnockoutObjectName:null,FlexyGantt:null,DragThumb:null,TimeIndicatorLineOption:null,ResizeThumb:null,StartResizeThumb:a()},isKOBinding:!1,HasChanged:!1,stSourceBinding:null,etSourceBinding:null,_create:function(){this._validateOptions();var b=this.element;b.data("TaskBar",this);this.element[0].DataContext=this.options.Data;var c=this;_taskbar=this;var d=this.options;if(null==d.TaskStartTime)throw"TaskStartTime is not set.";if(null==d.TaskEndTime)throw"TaskEndTime is not set.";d.IsParentTypeRow?(this.stSourceBinding=
d.ParentTaskStartTime,this.etSourceBinding=d.ParentTaskEndTime):(this.stSourceBinding=d.TaskStartTime,this.etSourceBinding=d.TaskEndTime);if(a.isFunction(d.Data)){var e=d.Data();d.Data=e[0]}var f=function(b){var d=c.options.StartTime;c._setOption("StartTime",b);c._OnRecomputeLocation(c.element);var e={Name:c.options.Data.Name,originalStart:c.options.StartTime,originalEnd:c.options.EndTime,originalWidth:parseInt(a(c.element).css("width")),originalLeft:parseInt(a(c.element).css("margin-left")),ProposedEnd:null,
ProposedStart:null},e={element:c.element,taskStartAndEndTime:e,TaskItemControl:c};stElementInfocollection.push(e);rtElementInfocollection.push(e);c.options.Parent.element.UpdateItemForCue(c.options.Data,b,d)},e=function(b){c._setOption("EndTime",b);c._OnRecomputeLocation(c.element);b={Name:d.Data.Name,originalStart:d.StartTime,originalEnd:d.EndTime,originalWidth:parseInt(a(c.element).css("width")),originalLeft:parseInt(a(c.element).css("margin-left")),ProposedEnd:null,ProposedStart:null};b={element:c.element,
taskStartAndEndTime:b,TaskItemControl:c};stElementInfocollection.push(b);rtElementInfocollection.push(b)};if(null!=this.stSourceBinding){var p=d.Data[this.stSourceBinding];a.isFunction(p)?(p.subscribe(f.bind(p)),d.StartTime=p()):d.StartTime=d.Data[this.stSourceBinding].clone()}null!=this.etSourceBinding&&(f=d.Data[this.etSourceBinding],a.isFunction(f)?(f.subscribe(e.bind(f)),d.EndTime=f()):d.EndTime=d.Data[this.etSourceBinding].clone());var p=RadiantQ.FlexyGantt.TaskItemControl,e=p.MarginForBars,
f=2*e,m=b[0].style.borderTopWidth,q=b[0].style.borderBottomWidth;b.hasClass("rq-gc-parentBar")&&b.hasClass("parentBar-style")?(m="0px"==m||""==m?p.ParentBar_BorderTopWidth:parseInt(m),q="0px"==q||""==q?p.ParentBar_BorderBottomWidth:parseInt(taskbarDiv[0].style.borderBottomWidth)):(m="0px"==m||""==m?p.TaskBar_BorderTopWidth:parseInt(m),q="0px"==q||""==q?p.TaskBar_BorderBottomWidth:parseInt(q));p=0;void 0!=b.attr("heightSetBySrc")||isNaN(parseInt(b[0].style.height))?(p=parseInt(b.parent().parent()[0].style.height)-
f-(m+q),b.attr("heightSetBySrc","true")):p=parseInt(b[0].style.height);b.css({height:p+"px","margin-top":e+"px"});a(this.options.Parent.element.element).bind("heightChange",function(){c._OnRecomputeLocation(b);c.options.Parent.element.element[0]._isTriggered=!1});this.element.mouseover(function(){var b=a(this);c.options.GanttChart.options.TimeIndicatorLineOption==ns_gantt.TimeIndicatorLines.OnHover&&(b.find(".rq-gc-start-verticalLine").show(),b.find(".rq-gc-end-verticalLine").show());b.hasClass("rq-gc-parentBar")&&
b.hasClass("parentBar-style")||b.addClass("rq-taskbar-shadow")});this.element.mouseout(function(){var b=a(this);c.options.GanttChart.options.TimeIndicatorLineOption==ns_gantt.TimeIndicatorLines.OnHover&&(b.find(".rq-gc-start-verticalLine").hide(),b.find(".rq-gc-end-verticalLine").hide());b.hasClass("rq-gc-parentBar")&&b.hasClass("parentBar-style")||b.removeClass("rq-taskbar-shadow")});a(d.Parent.element.element).parents("div").filter(".rq-ganttChart");"ShowContextMenu"==this.options.GanttChart.options.TouchTapAction&&
(this.element[0].addEventListener("touchstart",this._onTouchstart.bind(this),!1),this.element[0].addEventListener("touchend",this._onTouchend.bind(this),!1),this.element[0].addEventListener("MSPointerDown",this._onTouchstart.bind(this),!1),this.element[0].addEventListener("MSPointerUp",this._onTouchend.bind(this),!1));var r={Name:d.Data.Name,originalStart:this.options.StartTime,originalEnd:d.EndTime,originalWidth:parseInt(b.css("width")),originalLeft:parseInt(b.css("margin-left")),ProposedEnd:null,
ProposedStart:null};r.HasChanged=this.HasChanged;this._OnRecomputeLocation(b);this.ApplyTooltipSettings(b,d);e=a(this.options.Parent.element.options.Parent.element).parents("div").filter(".rq-ganttChart");e.bind("ganttchartrefreshui.FlexyGanttTaskBarRefreshUI",function(c,e){this._OnRecomputeLocation(this.element);r={Name:d.Data.Name,originalStart:this.options.StartTime,originalEnd:d.EndTime,originalWidth:parseInt(b.css("width")),originalLeft:parseInt(b.css("margin-left"))};for(var f=a(".resizer-style",
b),h=0;h<f.length;h++)a(f[h]).hasClass("start-resizer-style")&&a(f[h]).hasClass("rq-gc-startTaskBarResizer")||a(f[h]).css("margin-left",r.originalWidth-4)}.bind(this));e.bind("ganttcharttimeindicatorlineoptionchanged",function(a,b){this._OnRecomputeLocation(this.element)}.bind(this));void 0!=this.options.Data.PropertyChanged&&this.options.Data.PropertyChanged.subscribe(this.DataPropertyChangeFunction,this);a(".verticalLine:eq(0)",this.element).click(function(a){a.stopPropagation()});this.options.FlexyGantt.options&&
(0<this.options.DragThumb.length&&b.shiftTracker(r,this,this.DragEnd,this.options.DragThumb),(0<this.options.ResizeThumb.length||0<this.options.StartResizeThumb.length)&&b.resizeTracker(r,this,this.ResizeEnd,this.ResizeStart,this.options.ResizeThumb,this.options.StartResizeThumb))},tapDownX:null,tapDownY:null,_onTouchstart:function(a){a=a.touches?a.touches[0]:a;this.tapDownX=a.clientX;this.tapDownY=a.clientY},_onTouchend:function(b){var c=b.changedTouches?b.changedTouches[0]:b;this.tapDownX==c.clientX&&
this.tapDownY==c.clientY&&"mouse"!=b.pointerType&&4!=b.pointerType&&a(this.element).contextMenu({x:c.clientX,y:c.clientY})},_validateOptions:function(){var a=this.options;window.console&&(a.IsParentTypeRow?(a.ParentTaskStartTime&&void 0==a.Data[a.ParentTaskStartTime]&&console.error("Data at Row no:"+(a.Parent.element.options.Data.TableRow.rowIndex+1)+' does not have a property called "'+a.ParentTaskStartTime+'". Specify a correct ParentTaskStartTime value.'),a.ParentTaskEndTime&&void 0==a.Data[a.ParentTaskEndTime]&&
console.error("Data at Row no:"+(a.Parent.element.options.Data.TableRow.rowIndex+1)+' does not have a property called "'+a.ParentTaskEndTime+'". Specify a correct ParentTaskEndTime value.')):a.Data&&(a.TaskStartTime&&void 0==a.Data[a.TaskStartTime]&&console.error("Data at Row No:"+(a.Parent.element.options.Data.TableRow.rowIndex+1)+' does not have a property called "'+a.TaskStartTime+'". Specify a correct TaskStartTime value.'),a.TaskEndTime||void 0!=a.Data[a.TaskEndTime]||console.error("Data at Row No:"+
(a.Parent.element.options.Data.TableRow.rowIndex+1)+' does not have a property called "'+a.TaskEndTime+'". Specify a correct TaskEndTime value.')))},DataPropertyChangeFunction:function(a,b){this.options.DataSource.IsParentType()?b.PropertyName!=this.options.ParentTaskStartTime&&b.PropertyName!=this.options.ParentTaskEndTime||RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this):"StartTime"!=b.PropertyName&&"EndTime"!=b.PropertyName&&b.PropertyName!=this.options.TaskStartTime&&b.PropertyName!=
this.options.TaskEndTime||RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this)},PartialUpdate:function(){this.options.Parent.element.RedrawTaskRow()},TotalUpdate:function(){this.options.Parent.element.RedrawTaskRow()},_destroy:function(){this.options.Data.PropertyChanged&&this.options.Data.PropertyChanged.unsubscribe(this.DataPropertyChangeFunction,this);if(this.options.Parent&&this.options.Parent.element){var a=this.options.Parent.element._getIntersectingBlock(this,this.options.Parent.element);
this.options.Parent.element.RemoveEntity(a,this)}},propertyChangeFuction:function(a,b){},DragEnd:function(a,b){if(!a.options.StartTime.equals(b.originalStart)||!a.options.EndTime.equals(b.originalEnd)){if(0<a.options.FlexyGantt.TaskTimeChanged.fn.length){var c=new TimesChangingEventArgs(a.options.Data,b.originalStart,b.originalEnd,"DragEnd",a.options.DataSource);a.options.FlexyGantt.TaskTimeChanged.raise(this,c);b.originalStart=c.StartTime;b.originalEnd=c.EndTime}a._setOption("StartTime",b.originalStart);
a._setOption("EndTime",b.originalEnd);a.options.Parent.element.RedrawTaskRow()}},ResizeEnd:function(a,b){if(!a.options.EndTime.equals(b.originalEnd)){if(0<a.options.FlexyGantt.TaskTimeChanged.fn.length){var c=new TimesChangingEventArgs(a.options.Data,b.originalStart,b.originalEnd,"ResizeEnd",a.options.DataSource);a.options.FlexyGantt.TaskTimeChanged.raise(this,c);b.originalEnd=c.EndTime}a._setOption("EndTime",b.originalEnd);a.options.Parent.element.RedrawTaskRow()}},ResizeStart:function(a,b){if(!a.options.StartTime.equals(b.originalStart)){if(0<
a.options.FlexyGantt.TaskTimeChanged.fn.length){var c=new TimesChangingEventArgs(a.options.Data,b.originalstart,b.originalEnd,"ResizeStart",a.options.DataSource);a.options.FlexyGantt.TaskTimeChanged.raise(this,c);b.originalStart=c.StartTime}a._setOption("StartTime",b.originalStart);a.options.Parent.element.RedrawTaskRow()}},TooltipContent:null,DragTooltipContent:null,ResizeTooltipContent:null,ApplyTooltipSettings:function(a){a.attr("title","");this.LoadDefaultTooltipStyle();this.CreateTooltip(this,
a);this.UpdateTooltipContent(this.options.Data)},CreateTooltip:function(b,c){a(c).tooltip({open:function(a,c){a.currentTarget.isDragging?isDragging=a.currentTarget.isDragging:a.currentTarget.isResizing&&(isResizing=a.currentTarget.isResizing);a.currentTarget.uiTooltip=c.tooltip;b.uiTooltip=c.tooltip},isDragging:!1,isResizing:!1,content:function(c){if(this.isDragging||this.isResizing)return null;this.isDragging=this.isResizing=!1;if(!b.TooltipContent)return null;b.uiTooltip&&a(".ui-tooltip").remove().removeAttr("aria-describedby");
return b.TooltipContent},position:{my:"left bottom",at:"top",offset:"10"},track:!0});var d=!1;a(c).hover(function(){d=!0},function(){d=!1});a(c).mouseout(function(){d||a(".ui-tooltip").remove().removeAttr("aria-describedby")})},UpdateTooltipContent:function(b){if(b.ProposedStart&&b.ProposedEnd){0==b.OriginalStart.compareTo(b.ProposedStart)&&0==b.OriginalEnd.compareTo(b.ProposedEnd)&&(b.HasChanged=!1);var c={Name:b.Name,StartTime:b.ProposedStart,DataSource:this.options.Data,EndTime:b.ProposedEnd,OriginalStart:b.OriginalStart,
OriginalEnd:b.OriginalEnd,HasChanged:b.HasChanged};if(b.Duration){if(0>b.Duration.days)return;c.Duration=b.Duration}this.options.MovingInfoPopup=a.template(null,this.options.MovingInfoPopup);this.options.ResizeInfoPopup=a.template(null,this.options.ResizeInfoPopup);this.DragTooltipContent=a('<div align="center" />').append(a.tmpl(this.options.MovingInfoPopup,c));this.ResizeTooltipContent=a('<div align="center" />').append(a.tmpl(this.options.ResizeInfoPopup,c))}else b[_taskbar.stSourceBinding]&&b[_taskbar.etSourceBinding]&&
this.options.TaskTooltipTemplate&&(this.TooltipContent=a('<div class="TaskTooltip" />').append(a.tmpl(this.options.TaskTooltipTemplate,b,{isParentType:this.options.IsParentTypeRow,DataContext:this})))},LoadDefaultTooltipStyle:function(){a.isFunction(_taskbar.options.Data[_taskbar.stSourceBinding]);a.isFunction(_taskbar.options.Data[_taskbar.stSourceBinding]);_taskbar.options.MovingInfoPopup||(_taskbar.options.MovingInfoPopup="<div><table class='rq-gc-taskbar-popup' style='white-space:nowrap;'><tr><td colspan='2' align='center'><b>${RadiantQ_TaskString}</b></td></tr><tr><td style='float:right;'><b>${RadiantQ_StartString} :</b></td><td> "+
_taskbar._MakeItBoldWhenActualDate("${$item.data.StartTime.toString('yyyy-MM-dd HH:mm')}")+"</td></tr><tr><td style='float:right;'><b>${RadiantQ_FinishString}:</b> </td><td> "+_taskbar._MakeItBoldWhenActualDate("${$item.data.EndTime.toString('yyyy-MM-dd HH:mm')}")+"</td></tr></table></div>");_taskbar.options.ResizeInfoPopup||(_taskbar.options.ResizeInfoPopup="<div><table class='rq-gc-taskbar-popup' style='white-space:nowrap;'><tr><td colspan='2' align='center'><b>${RadiantQ_TaskString}</b></td></tr><tr><td style='float:right;'><b>${RadiantQ_DurationString} :</b></td><td> "+
_taskbar._MakeItBoldWhenActualDate("{{if Duration}}${$item.data.Duration.days}d ${$item.data.Duration.hours} h{{/if}}")+"</td></tr><tr><td style='float:right;'><b>${RadiantQ_StartTimeString} :</b> </td><td> "+_taskbar._MakeItBoldWhenActualDate("${$item.data.StartTime.toString('yyyy-MM-dd HH:mm')}")+"</td></tr><tr><td style='float:right;'><b>${RadiantQ_EndTimeString} :</b></td><td> "+_taskbar._MakeItBoldWhenActualDate("${$item.data.EndTime.toString('yyyy-MM-dd HH:mm')}")+"</td></tr></table></div>")},
_MakeItBoldWhenActualDate:function(a){return"{{if HasChanged }}"+a+"{{else}}<b>"+a+"</b>{{/if}}"},LocationRecomputed:new ObjectEvent("LocationRecomputed"),_OnRecomputeLocation:function(a){var b=parseFloat(a.css("width")),c=parseFloat(a.css("margin-left")),d=this.options,e=this.options.GanttChart,f=e.options,m=f.BaseTimeScaleType,q=f.ComputedStartTime,r=f.BaseTimeUnitWidth;if(null!=this.options.GanttChart){var s=rqTCUtils.ConvertToUnitsOfBaseScaleType(m,q,d.StartTime,null)*r,t=0,t=d.EndTime<d.StartTime?
0:rqTCUtils.ConvertToUnitsOfBaseScaleType(m,d.StartTime,d.EndTime,null)*r,t=t-1;0>t&&(t=1);var u=s;0>u+t||u>f.ViewWidth||(f=this._GetBarRenderStartTime(d.StartTime),u=this._GetBarRenderStartTime(d.EndTime),(f!=d.StartTime||u!=d.EndTime)&&f<u&&(t=rqTCUtils.ConvertToUnitsOfBaseScaleType(m,f,u,null)*r,s=rqTCUtils.ConvertToUnitsOfBaseScaleType(m,q,f,null)*r));m=null;d={Data:this.options.Data,UseWidthForVerticalLines:!1,IsShifting:!1,UseWidthForTaskBar:!0};null!=this.options.GanttChart.options.ProvideWidthForMilestoneShape&&
(m=this.options.GanttChart.options.ProvideWidthForMilestoneShape(this,d));null!=m&&!0==d.UseWidthForTaskBar&&(s-=m/2,t=m);a.css("width",t+"px").css("margin-left",s+"px");this.options.OverlappedTasksRenderingOptimization!=RadiantQ.FlexyGantt.OverlappedTasksRenderingOptimization.ShrinkHeight||b==t&&c==s||(this.currentBlock=this.options.Parent.element._getIntersectingBlocks(this,this.options.Parent.element),this.options.Parent.element._blockIntact(this.currentBlock));0<this.LocationRecomputed.fn.length&&
this.LocationRecomputed.raise(this);b=a.find("div.rq-gc-start-verticalLine");c=a.find("div.rq-gc-end-verticalLine");if(0!=b.length||0!=c.length)q=a.closest("tr"),q.length&&(t=parseInt(a.css("margin-top")),a.height(),s=a.width(),q=q[0].offsetTop,r=0,!0==d.UseWidthForVerticalLines&&(r=m/2),t={height:q+t+"px","margin-left":r+"px","margin-top":-(q+t)+"px"},0!=b.length&&b.css(t),0!=c.length&&(!1==d.UseWidthForVerticalLines&&(t["margin-left"]=s+"px"),c.css(t)));s=this.options.GanttChart.options.TimeIndicatorLineOption;
(s&ns_gantt.TimeIndicatorLines.Always)!=ns_gantt.TimeIndicatorLines.Always||(s&ns_gantt.TimeIndicatorLines.OnResize)==ns_gantt.TimeIndicatorLines.OnResize?(b.hide(),c.hide()):(b.show(),c.show());b=this.element.attr("SizeChanged");window[b]&&window[b].call(this.element,this.options.Data,e);this.options.FlexyGantt.options&&(e=this.options.FlexyGantt.options.OnTaskBarLoad,null!=e&&"function"==typeof e&&e.call(a,this))}},_GetBarRenderStartTime:function(a){if(this.options.ApplyBarWidthOptimization){var b=
this._ConvertXToTime(-10);if(a<b)return b}return a},_beginUpdateOverlapTasks:function(a){if(this.options.OverlappedTasksRenderingOptimization==RadiantQ.FlexyGantt.OverlappedTasksRenderingOptimization.ShrinkHeight){var b=this.options.Parent.element;this.currentBlock=b._getIntersectingBlock(a,b)}},_endUpdateOverlapTasks:function(a){if(this.options.OverlappedTasksRenderingOptimization==RadiantQ.FlexyGantt.OverlappedTasksRenderingOptimization.ShrinkHeight){var b=this.options.Parent.element;null!=this.currentBlock&&
(b._blockIntact([this.currentBlock]),this.currentBlock=null);a=b._getIntersectingBlocks(a);null!=a&&0<a.length&&b._blockIntact(a)}},_updateTaskItem:function(b,c,d,e){var f=this.element,p=RadiantQ.FlexyGantt.TaskItemControl,m=p.MarginForBars,q=a(f.parent().parent())[0];if(void 0!=q){var q=parseInt(q.style.height),m=2*m,r=f[0].style.borderTopWidth,s=0,s=f[0].style.borderBottomWidth;f.hasClass("rq-gc-parentBar")&&f.hasClass("parentBar-style")?(r="0px"==r||""==r?p.ParentBar_BorderTopWidth:parseInt(r),
p="0px"==s||""==s?p.ParentBar_BorderBottomWidth:parseInt(f[0].style.borderBottomWidth),s=(q-m-(r+p))/e):(f="0px"==r||""==r?p.TaskBar_BorderTopWidth:parseInt(r),p="0px"==s||""==s?p.TaskBar_BorderBottomWidth:parseInt(s),s=(q-m-(f+p))/e);void 0!=e&&(c=s);d?(b=0==b||void 0!=this.element.attr("heightSetBySrc")?b*c+RadiantQ.FlexyGantt.TaskItemControl.MarginForBars:b*(c+2*RadiantQ.FlexyGantt.TaskItemControl.MarginForBars+2)+RadiantQ.FlexyGantt.TaskItemControl.MarginForBars,this.element.css("height",c+"px").css("margin-top",
b+"px"),a.isFunction(this.options.Data.IsOverlapping)?this.options.Data.IsOverlapping(!0):this.options.Data.IsOverlapping=!0):(this.element.css("height",c+"px").css("margin-top",RadiantQ.FlexyGantt.TaskItemControl.MarginForBars+"px"),a.isFunction(this.options.Data.IsOverlapping)?this.options.Data.IsOverlapping(!1):this.options.Data.IsOverlapping=!1)}},_ConvertXToTime:function(a){var b=this.options,c=b.GanttChart.options;return b.ComputedStartTime+rqTCUtils.ConvertTimeUnitsToTimeSpan(c.BaseTimeScaleType,
a/c.baseTimeUnitWidth)},_setOption:function(b,c){if("StartTime"==b||"EndTime"==b){var d;d="StartTime"==b?this.options.StartTime:this.options.EndTime;if(!d.equals(c)){a.Widget.prototype._setOption.apply(this,arguments);switch(b){case "StartTime":this._updateStartAndEnd("StartTime");this.options.Parent.element.UpdateItemForCue(this.options.Data,c,d);break;case "EndTime":this._updateStartAndEnd("EndTime");break;case "TimeIndicatorLineOption":this._OnRecomputeLocation(this.element)}this.UpdateTooltipContent(this.options.Data);
this._trigger("startAndEndTimeChange",this,this.options.Data)}}},_updateStartAndEnd:function(b){switch(b){case "StartTime":this.options.StartTime&&(b=this.options.Data[this.stSourceBinding],a.isFunction(b)?b()!=this.options.StartTime&&b(this.options.StartTime.clone()):this.options.Data[this.stSourceBinding]=this.options.StartTime.clone());break;case "EndTime":this.options.EndTime&&(b=this.options.Data[this.etSourceBinding],a.isFunction(b)?b()!=this.options.EndTime&&b(this.options.EndTime.clone()):
this.options.Data[this.etSourceBinding]=this.options.EndTime.clone())}}});RadiantQ.FlexyGantt.ShiftTrackerGlobal={IncludeVerticalMovingSupport:!1,TrackingTaskItemControl:null,CurrentDropRow:null,CurrentStartRow:null,deltaX:null,deltaY:null,GetDropCueLocationIn:function(a){},BeginVerticalDrag:new ObjectEvent("BeginVerticalDrag"),VerticalDragOver:new ObjectEvent("VerticalDragOver"),VerticalDragDrop:new ObjectEvent("VerticalDragDrop")};var b=null,c=null,d=null,e=!1,f=!1;a.fn.shiftTracker=function(g,
h,k,l){var n,p,m,q=this;this.widgetName="TaskItemControl";var r,s,t,u,y,w;stElementInfocollection.push({element:q,taskStartAndEndTime:g,TaskItemControl:h});var x=new ObjectEvent("DragComplet"),z=0,v=RadiantQ.FlexyGantt.ShiftTrackerGlobal,D=v.IncludeVerticalMovingSupport,I=v.BeginVerticalDrag,J=v.VerticalDragOver,K=v.VerticalDragDrop,L;h.IsVerticallyMoving=function(){return IsVerticallyMoving};var A=!1;q.dblclick(function(){H=0;clearTimeout(G)});var G=null,H=0,B=!1,C=this;q.bind("mousedown."+this.widgetName,
function(b){if(!a(b.target).hasClass("label")&&"collapse"!=l.css("visibility")){b.preventDefault();B=!1;var c=b.screenX,d=b.screenY,e=_commonMouseDown(b,q,B);u=function(a){return _mouseMove(a,e,q,B)};y=function(b){b.screenX==c&&b.screenY==d?(null!=G&&clearTimeout(G),H++,q.click(),G=setTimeout(function(){2<=H&&(q.dblclick(),H=0)},80),b=a(document),b.unbind("mousemove."+C.widgetName).unbind("mouseup."+C.widgetName).unbind("keydown"),b.unbind("touchmove."+C.widgetName).unbind("touchend."+C.widgetName).unbind("keydown"),
a("#clone").remove()):_mouseUp(b,e,q,B)};a(document).bind("mousemove."+C.widgetName,u).bind("mouseup."+C.widgetName,y)}});q.bind("touchstart."+this.widgetName,function(b){if(!a(b.target).hasClass("label")){B=!0;b.preventDefault();b.stopPropagation();var c=_commonMouseDown(b,q,B);u=function(a){return _mouseMove(a,c,q,B)};y=function(a){return _mouseUp(a,c,q,B)};a(document).bind("touchmove."+C.widgetName,u).bind("touchend."+C.widgetName,y)}});var F=0;_commonMouseDown=function(b,c,d){D=v.IncludeVerticalMovingSupport;
I=v.BeginVerticalDrag;J=v.VerticalDragOver;K=v.VerticalDragDrop;var e=b.srcElement;if(!a(e).hasClass("resizer-style")||!a(e).hasClass("rq-fg-gc-taskBarResizer")){var e=c[0].offsetWidth,f=c.height();w=l.clone();w[0].id="clone";w.addClass("taskclone rq-taskbar-clone");var g=!0,h=c.data("TaskBar");v.TrackingTaskItemControl=h;var k=h.options.GanttChart.options.TimeIndicatorLineOption;if((k&ns_gantt.TimeIndicatorLines.OnResize)==ns_gantt.TimeIndicatorLines.OnResize||(k&ns_gantt.TimeIndicatorLines.Always)==
ns_gantt.TimeIndicatorLines.Always)$startVerticalLineClone=c.find("div.rq-gc-start-verticalLine").clone().show(),$endVerticalLineClone=c.find("div.rq-gc-end-verticalLine").clone().show(),k={Data:h.options.Data,UseWidthForVerticalLines:!1,IsShifting:!0,UseWidthForTaskBar:!0},h=h.options.GanttChart.options.ProvideWidthForMilestoneShape,null!=h&&(w.css("width",e+"px"),h=h(this,k),null!=h&&(g=!1,F=0,!0==k.UseWidthForTaskBar&&(F=h/2,w.css("margin-left",-F+"px"),w.css("width",e+"px")),k.UseWidthForVerticalLines=
!0,F=h/2,$startVerticalLineClone.css("margin-left",F+"px"),$endVerticalLineClone.css("margin-left",F+"px"))),w.append($startVerticalLineClone),w.append($endVerticalLineClone);!0==g&&w.css("width",e-2+"px");w.css("height",f-1+"px");w.appendTo(c);_mouseClick(b,w,c,d);b.stopPropagation()}return w};_mouseClick=function(b,c,e,k){var l;f=!1;void 0!=b.originalEvent.touches||null!=b.originalEvent.touches?(v.deltaX=0,v.deltaY=0):(v.deltaX=void 0==b.offsetX?b.originalEvent.layerX:b.offsetX,v.deltaY=void 0==
b.offsetY?b.originalEvent.layerY:b.offsetY);b||(b=window.event);b.which?l=3==b.which:b.button&&(l=2==b.button);if(!l){e[0].uiTooltip&&(e[0].isDragging=!0);l=_getDargMousePosition(b,c,e,k);d=a(b.target).closest("tr");r=l.x;s=l.y;t=c[0].offsetLeft;for(c=0;c<stElementInfocollection.length;c++)stElementInfocollection[c].element==e&&(g=stElementInfocollection[c].taskStartAndEndTime,h=stElementInfocollection[c].TaskItemControl,h._beginUpdateOverlapTasks(h));g.ProposedStart=g.originalStart;g.ProposedEnd=
g.originalEnd;g.OriginalStart=g.originalStart;g.OriginalEnd=g.originalEnd;g.originalLeft=parseFloat(a(e).css("margin-left"));h.UpdateTooltipContent(g);v.CurrentStartRow=h.options.DataSource;a(this).GetDragOrResizeContent(h.DragTooltipContent,b,e,k);a(document).bind("keydown",function(b){27==b.keyCode&&(a(document).unbind("mousemove."+C.widgetName).unbind("mouseup."+C.widgetName).unbind("keydown"),a(this).RemoveDragOrResizeContent(e),a("#clone").remove(),f=!0,b.cancel=!0,v.CurrentDropRow=null,_onVerticalDragDrop(b,
!1))})}};_mouseMove=function(b,c,d,f){e&&a("#clone").css("display","none");for(var k=0;k<stElementInfocollection.length;k++)stElementInfocollection[k].element==d&&null!=stElementInfocollection[k].taskStartAndEndTime.originalStart&&(n=h.options.GanttChart.options.Parent.RoundUp(stElementInfocollection[k].taskStartAndEndTime.originalStart.clone()),p=h.options.GanttChart.options.Parent.RoundUp(stElementInfocollection[k].taskStartAndEndTime.originalEnd.clone()),m=stElementInfocollection[k].taskStartAndEndTime.originalLeft);
n<=p&&(_updatePosition(b,c,d,f),h.UpdateTooltipContent(g),b=a(".dragPopup"),a(b).empty(),a(b).append(h.DragTooltipContent),a(b).css("visibility","visible"),d[0].uiTooltip&&d[0].uiTooltip.hide())};_mouseUp=function(b,c,d){clearAutoScrollTimers();null!=g.ProposedStart&&null!=g.ProposedEnd&&(d[0].uiTooltip&&(d[0].isDragging=!1),a(this).RemoveDragOrResizeContent(d),a(c).css("margin-left")&&(d=a(d).css("margin-left"),""==d&&(d=0),c=a(c).css("margin-left"),parseInt(c),parseInt(d)),g.originalStart=g.ProposedStart,
g.originalEnd=g.ProposedEnd,g.OriginalStart=g.originalStart,g.OriginalEnd=g.originalEnd,h._endUpdateOverlapTasks(h),x.subscribe(k),x.raise(h,g));_updateCurrentDropRow(b,_onVerticalDragDrop,!1);a(document).unbind("mousemove."+C.widgetName).unbind("mouseup."+C.widgetName).unbind("keydown");a(document).unbind("touchmove."+C.widgetName).unbind("touchend."+C.widgetName).unbind("keydown");a("#clone").remove()};_getDargMousePosition=function(a,b,c,d){c=b=0;if(!0==d)if(a.originalEvent.touches[0].pageX||a.originalEvent.touches[0].pageY)b=
a.originalEvent.touches[0].pageX,c=a.originalEvent.touches[0].pageY;else{if(a.originalEvent.touches[0].clientX||a.originalEvent.touches[0].clientY)b=a.originalEvent.touches[0].clientX,c=a.originalEvent.touches[0].clientY}else if(a.pageX||a.pageY)b=a.pageX,c=a.pageY;else if(a.clientX||a.clientY)b=a.clientX,c=a.clientY;return{x:b,y:c}};_mouseMovedTo=function(b,c,d){z++;if(!(6>z&&D))if(L=b,!1==e&&!1==A&&(4<=Math.abs(c)&&D&&_canBeginVerticalDrag(d)?e=!0:4<=Math.abs(b)&&(A=!0)),clearAutoScrollTimers(),
b=e,v.GetDropCueLocationIn(d).Y<N+O/2&&b?_tableAutoScrollUp():v.GetDropCueLocationIn(d).Y>N+E[0].clientHeight-O/2&&b&&_tableAutoScrollDown(),b)f||(a("#clone").remove(),a(".dragPopup").remove(),_updateCurrentDropRow(d,_onVerticalDragOver,!0));else if(A){parseInt(w.css("height"));b=m+F;b=rqTCUtils.ConvertToEndTimeInBaseScaleType(h.options.GanttChart.options.BaseTimeScaleType,n.clone(),b/h.options.GanttChart.options.BaseTimeUnitWidth,(b+L)/h.options.GanttChart.options.BaseTimeUnitWidth,null);var k=Date.today();
c={Value:b};k={Value:k};h.options.FlexyGantt.ConvertToValidTimes(h.options.Data,b,rqTCUtils.GetTimeSpan(n,p),c,k,"Move",d,h.element);b=c.Value;k=k.Value;g.ProposedStart=h.options.GanttChart.options.Parent.RoundUp(b);g.ProposedEnd=h.options.GanttChart.options.Parent.RoundUp(k);0==g.ProposedStart.compareTo(g.OriginalStart)&&0==g.ProposedEnd.compareTo(g.OriginalEnd)?g.HasChanged=!1:g.HasChanged=!0}};_updatePosition=function(b,c,f,g){g=_getDargMousePosition(b,c,f,g);b.shouldSyncDragCue=!1;var h=d;h&&
0!=h.length&&(b.row_index=h[0].rowIndex,-1==b.row_index&&(b.row_index=a("tr",a(f).closest("table")).index(h)),f=g.x-r+t,_mouseMovedTo(g.x-r,g.y-s,b),!0==b.shouldSyncDragCue||e||c.css("margin-left",f+"px"))};v.GetDropCueLocationIn=function(a){if(void 0!=a.originalEvent.touches&&null!=a.originalEvent.touches&&0<a.originalEvent.touches.length)if(a.originalEvent.touches[0].pageX||a.originalEvent.touches[0].pageY)posx=a.originalEvent.touches[0].pageX,posy=a.originalEvent.touches[0].pageY;else{if(a.originalEvent.touches[0].clientX||
a.originalEvent.touches[0].clientY)posx=a.originalEvent.touches[0].clientX,posy=a.originalEvent.touches[0].clientY}else if(void 0!=a.originalEvent.changedTouches&&null!=a.originalEvent.changedTouches)if(a.originalEvent.changedTouches[0].pageX||a.originalEvent.changedTouches[0].pageY)posx=a.originalEvent.changedTouches[0].pageX,posy=a.originalEvent.changedTouches[0].pageY;else{if(a.originalEvent.changedTouches[0].clientX||a.originalEvent.changedTouches[0].clientY)posx=a.originalEvent.changedTouches[0].clientX,
posy=a.originalEvent.changedTouches[0].clientY}else if(a.pageX||a.pageY)posx=a.pageX,posy=a.pageY;else if(a.clientX||a.clientY)posx=a.clientX,posy=a.clientY;return{X:posx,Y:posy}};_updateCurrentDropRow=function(b,c,d){var f;f=void 0!=b.originalEvent.changedTouches||null!=b.originalEvent.changedTouches?a(document.elementFromPoint(b.originalEvent.changedTouches[0].clientX,b.originalEvent.changedTouches[0].clientY)).closest("td.FlexyChartRow"):void 0!=b.originalEvent.touches||null!=b.originalEvent.touches?
a(document.elementFromPoint(b.originalEvent.changedTouches[0].clientX,b.originalEvent.changedTouches[0].clientY)).closest("td.FlexyChartRow"):a(b.target).closest("td.FlexyChartRow");v.CurrentDropRow=0<f.length&&e?f.parent()[0]["data-grid-item"]:null;c(b,d)};_canBeginVerticalDrag=function(a){if(I){var b={};b.event=a;b.cancel=!1;I.raise(this,b);return!1==b.cancel}return!0};_onVerticalDragOver=function(a,b){f||(J&&J.raise(this,a),e=b)};_onVerticalDragDrop=function(a,b){K&&v.IncludeVerticalMovingSupport&&
e&&K.raise(this,a);e=b};var M=C.data("TaskBar").options.FlexyGantt,E=a(".ui-grid-body",M.element),N=E.offset().top,O=M.options.RowHeight;_tableAutoScrollUp=function(){null==c&&(c=setInterval(function(){0<100*E[0].scrollTop/(E[0].scrollHeight-E[0].clientHeight)?_autoScroll(-10):clearAutoScrollTimers()},0))};_tableAutoScrollDown=function(){null==b&&(b=setInterval(function(){E[0].scrollHeight==E[0].scrollTop+E[0].clientHeight?clearAutoScrollTimers():_autoScroll(10)},0))};_autoScroll=function(a){E.animate({scrollTop:E[0].scrollTop+
a},0)};clearAutoScrollTimers=function(){null!=c&&clearInterval(c);null!=b&&clearInterval(b);c=b=null};this[0].mouseMovedTo=_updatePosition;this[0].mouseClick=_mouseClick};a.fn.resizeTracker=function(b,c,d,e,f,p){var m=this,q,r,s,t,u,y;rtElementInfocollection.push({element:m,taskStartAndEndTime:b,TaskItemControl:c});var w=new ObjectEvent("ResizeComplet");y=a("<div class='resizer-style rq-fg-gc-taskBarResizer'></div>");var x=a("<div class='start-resizer-style rq-gc-startTaskBarResizer resizer-style rq-fg-gc-taskBarResizer'></div>");
y.css("height",a(m).css("height"));y.css("margin-left",parseInt(a(m).css("width"))-4+"px");x.css("height",a(m).css("height"));var z=null,v=null,D=a(m).find("div.parentMiddleBar-style");a(m).find("div.parentMiddleBar-style");0!=D.length?(0<p.length&&x.appendTo(D),0<f.length&&y.appendTo(D)):(0<p.length&&x.appendTo(m),0<f.length&&y.appendTo(m));0<f.length&&(y.bind("mousedown."+this.widgetName,function(b){b.preventDefault();var c=_commonResizerMouseDone(b,m,!1);s=function(a){return _resizerMouseMove(a,
c,m)};t=function(a){return _resizerMouseUp(a,c,m)};a(document).bind("mousemove."+this.widgetName,s).bind("mouseup."+this.widgetName,t)}),y.bind("touchstart."+this.widgetName,function(b){b.preventDefault();var c=_commonResizerMouseDone(b,m,!0);s=function(a){return _resizerMouseMove(a,c,m,!0)};t=function(a){return _resizerMouseUp(a,c,m,!0)};a(document).bind("touchmove."+this.widgetName,s).bind("touchend."+this.widgetName,t)}));0<p.length&&(x.bind("mousedown."+this.widgetName,function(b){b.preventDefault();
var c=_commonResizerMouseDone(b,m,!1,!0);s=function(a){return _resizerMouseMove(a,c,m,null,!0)};t=function(a){return _resizerMouseUp(a,c,m,null,!0)};a(document).bind("mousemove."+this.widgetName,s).bind("mouseup."+this.widgetName,t)}),x.bind("touchstart."+this.widgetName,function(b){b.preventDefault();var c=_commonResizerMouseDone(b,m,!0,!0);s=function(a){return _resizerMouseMove(a,c,m,!0,!0)};t=function(a){return _resizerMouseUp(a,c,m,!0,!0)};a(document).bind("touchmove."+this.widgetName,s).bind("touchend."+
this.widgetName,t)}));_commonResizerMouseDone=function(b,d,e,g){u=f.clone();var k=d.height(),l=d[0].offsetWidth,m=2;!0==g&&(m=5);a(u).css("width",l-m+"px");a(u).addClass("taskclone rq-taskbar-clone");a(u).css("height",k-1+"px");u.appendTo(d);_resizerMouseClick(b,u,d,e);b.stopPropagation();b=c.options.GanttChart.options.TimeIndicatorLineOption;if((b&ns_gantt.TimeIndicatorLines.OnResize)==ns_gantt.TimeIndicatorLines.OnResize||(b&ns_gantt.TimeIndicatorLines.Always)==ns_gantt.TimeIndicatorLines.Always)z=
d.find("div.rq-gc-start-verticalLine").clone().show(),v=d.find("div.rq-gc-end-verticalLine").clone().show(),u.append(z),u.append(v);return u};var I=0;_resizerMouseClick=function(d,e,f,k){d.preventDefault();f[0].uiTooltip&&(f[0].isResizing=!0);q=_getMousePosition(d,e,f,k).x;r=parseFloat(f.css("width"));I=parseFloat(f.css("margin-left"));for(e=0;e<rtElementInfocollection.length;e++)rtElementInfocollection[e].element==f&&(b=rtElementInfocollection[e].taskStartAndEndTime,c=rtElementInfocollection[e].TaskItemControl,
c._beginUpdateOverlapTasks(c));b.ProposedStart=c.options.GanttChart.options.Parent.RoundUp(b.originalStart);b.ProposedEnd=c.options.GanttChart.options.Parent.RoundUp(b.originalEnd);b.OriginalStart=b.originalStart;b.OriginalEnd=b.originalEnd;b.OriginalDuration=rqTCUtils.GetTimeSpan(b.OriginalStart,b.OriginalEnd);b.OriginalLeft=b.originalLeft=parseFloat(f.css("margin-left"));b.originalWidth=parseFloat(f.css("width"));b.OriginalWidth=b.originalWidth;this.ProposedDuration=b.OriginalDuration;c.UpdateTooltipContent(b);
a(this).GetDragOrResizeContent(c.ResizeTooltipContent,d,f,k)};_resizerMouseMove=function(a,b,c,d,e){_updateWidth(a,b,c,d,e)};_resizerMouseUp=function(f,n,m,p,q){m[0].uiTooltip&&(m[0].isResizing=!1);a(this).RemoveDragOrResizeContent(m);a(n).css("width")&&a(m).css("width",a(n).css("width"));a(".resizeThumb").remove();c._endUpdateOverlapTasks(c);!0==q?w.subscribe(e):w.subscribe(d);w.raise(c,b);b.OriginalEnd=b.originalEnd;b.OriginalDuration=this.ProposedDuration;b.OriginalStart=b.ProposedStart;c._OnRecomputeLocation(m);
a(document).unbind("mousemove."+this.widgetName,s).unbind("mouseup."+this.widgetName,t).unbind("keydown");a(document).unbind("touchmove."+this.widgetName,s).unbind("touchend."+this.widgetName,t).unbind("keydown")};_resizeTo=function(d,e,f,k){b.HasChanged=b.OriginalDuration==this.ProposedDuration?!1:!0;d=rqTCUtils.ConvertUnitsInBaseScaleTypeToDurationInHours(c.options.GanttChart.options.BaseTimeScaleType,b.originalStart,b.originalLeft/c.options.GanttChart.options.BaseTimeUnitWidth,(b.originalLeft+
(d+2))/c.options.GanttChart.options.BaseTimeUnitWidth,null);d=new RQTimeSpan(0,d,0,0);k=b.originalStart.clone();var l=k.clone();l.addHours(d.getTotalHours());var n={Value:k},l={Value:l};c.options.FlexyGantt.ConvertToValidTimes(c.options.Data,b.originalStart.clone(),d,n,l,"ResizeAtEnd",e,f);l=l.Value;b.originalStart<l&&(b.ProposedStart=k,b.ProposedEnd=c.options.GanttChart.options.Parent.RoundUp(l.clone()),b.Duration=rqTCUtils.GetTimeSpan(b.originalStart,l),d=rqTCUtils.GetTimeSpan(b.originalStart,l),
this.ProposedDuration=c.options.GanttChart.options.Parent.RoundUpDuration(d),b.Duration=this.ProposedDuration,b.originalEnd=c.options.GanttChart.options.Parent.RoundUp(b.ProposedEnd),c.UpdateTooltipContent(b));e=a(".dragPopup");a(e).empty();a(e).append(c.ResizeTooltipContent);a(e).css("visibility","visible");f[0].uiTooltip&&f[0].uiTooltip.hide()};resizeStartTo=function(d,e,f){var k=rqTCUtils.ConvertToEndTimeInBaseScaleType(c.options.GanttChart.options.BaseTimeScaleType,b.originalStart,b.OriginalLeft/
c.options.GanttChart.options.BaseTimeUnitWidth,d/c.options.GanttChart.options.BaseTimeUnitWidth,null);d=rqTCUtils.ConvertUnitsInBaseScaleTypeToDurationInHours(c.options.GanttChart.options.BaseTimeScaleType,k,d/c.options.GanttChart.options.BaseTimeUnitWidth,(b.OriginalLeft+b.originalWidth)/c.options.GanttChart.options.BaseTimeUnitWidth,null);d=c.options.GanttChart.options.Parent.RoundUpDuration(new RQTimeSpan(0,d,0,0));k=b.originalEnd.clone().addTimeSpan(new RQTimeSpan(-d));computedEnd=b.originalEnd;
c.options.FlexyGantt.ConvertToValidTimes(c.options.Data,k,d,k,computedEnd,"ResizeAtStart",e,f);k=k.Value;computedEnd=computedEnd.Value;d=new RQTimeSpan(b.originalEnd-k);b.ProposedStart=b.originalEnd.clone().addTimeSpan(new RQTimeSpan(-d));b.originalStart=b.ProposedStart;this.ProposedDuration=b.ProposedDuration=d;b.Duration=d;c.UpdateTooltipContent(b);e=a(".dragPopup");a(e).empty();a(e).append(c.ResizeTooltipContent);a(e).css("visibility","visible");f[0].uiTooltip&&f[0].uiTooltip.hide()};_getMousePosition=
function(a,b,c,d){if(!0==d)if(a.originalEvent.touches[0].pageX||a.originalEvent.touches[0].pageY)var e=a.originalEvent.touches[0].pageX,f=a.originalEvent.touches[0].pageY;else{if(a.originalEvent.touches[0].clientX||a.originalEvent.touches[0].clientY)e=a.originalEvent.touches[0].clientX,f=a.originalEvent.touches[0].clientY}else if(a.pageX||a.pageY)e=a.pageX,f=a.pageY;else if(a.clientX||a.clientY)e=a.clientX,f=a.clientY;return{x:e,y:f}};_updateWidth=function(b,c,d,e,f){e=_getMousePosition(b,c,d,e);
if(!0==f){f=e.x-q;e=r-f;1<e?c.css("width",e+"px"):c.css("width","0px");if(-1<e)c.css("margin-left",f+"px");else return!1;null!=v&&0<v.length&&(v[0].style["margin-left"]=c.css("width"));resizeStartTo(I+f,b,d)}else e=e.x-q+r,0<e?c.css("width",e+"px"):c.css("width","0px"),null!=v&&0<v.length&&(v[0].style["margin-left"]=c.css("width")),_resizeTo(e,b,d);a(document).bind("keydown",function(b){27==b.keyCode&&(a(document).unbind("mousemove."+this.widgetName,s).unbind("mouseup."+this.widgetName,t).unbind("keydown"),
a(this).RemoveDragOrResizeContent(d),a("#clone").remove())})}};a.fn.GetDragOrResizeContent=function(b,c,d,e){a(".dragPopup").remove();var f=a('<div class="dragPopup" style="visibility: collapse; position: fixed;" />');if(b){a(f).append(b);var p=!1;a(f).mousemove(function(){void 0!=this.refreshPostion&&(this.refreshPostion(p),p=!p)})}a(d).parents("div").filter(".rq-gc-viewsContainer-div");var m=a(d).parents("div").filter(".rq-ganttBase");b=a(".rq-gc-taskbar-popup");0==b.length&&(b=a(".draggingContent"));
a(m).append(f);a(d).css("z-index",15);f.css("z-index",25);m=a(d).height()+2;!0==e?(f.css({left:c.originalEvent.touches[0].pageX,top:c.originalEvent.touches[0].pageY+m}),c=c.originalEvent.touches[0].pageX):(f.css({left:c.pageX,top:c.pageY+m}),c=c.pageX);a(d).offset();d=b.width();b.height();a(window).width();d=f.offset().left+d-a(window).width();0<d?f.css({left:c-d}):-150<d&&f.css({left:c-150})};a.fn.RemoveDragOrResizeContent=function(b){a(b).css("z-index",10);a(".dragPopup").remove()}})(jQuery);
(function(a){a.widget("radiantq.TasksListControl",{tasksCollection:null,currentUniqueTaskSuffix:0,blocks:[],ItemTemplate:null,options:{viewStartTime:null,viewEndTime:null,ViewWidth:null,TreeViewItem:null,Data:null,TasksListProperty:null,ParentTasksListProperty:null,GanttChart:null,TimeIndicatorLineOption:null,IsParentTypeRow:null,BaseTimeUnitWidth:null,OverlappedTasksRenderingOptimization:null,TaskTemplate:null,ParentTaskTemplate:null,TaskStartTime:null,ParentTaskStartTime:null,TaskEndTime:null,ParentTaskEndTime:null,
RowCount:null,Parent:null,KnockoutObjectName:null,TaskTooltipTemplate:null,ResizeInfoPopup:null,MovingInfoPopup:null,FlexyGantt:null,DragThumb:null,ResizeThumb:null,TaskBarBrowseToCueLeftTemplate:null,TaskBarBrowseToCueRightTemplate:null,IsPrinting:!1},TasksList:null,BrowseToTaskCueLeft:null,BrowseToTaskCueRight:null,BrowseToCueLeft:0,BrowseToCueRight:0,BrowseToTaskCueLeftVisibility:"none",BrowseToTaskCueRightVisibility:"none",_create:function(){this._validateOptions();this.refresh()},_validateOptions:function(){var a=
this.options;window.console&&(a.Data.IsParentType()?!a.ParentTasksListProperty||"string"==typeof a.ParentTasksListProperty&&void 0!=a.Data._data[a.ParentTasksListProperty]||console.error('Data does not have a property called "'+a.ParentTasksListProperty+'". Specify a correct ParentTasksListProperty value.'):a.TasksListProperty&&("string"==typeof a.TasksListProperty&&void 0!=a.Data._data[a.TasksListProperty]||console.error('Data does not have a property called "'+a.TasksListProperty+'". Specify a correct TaskListProperty value.')))},
refresh:function(){this.TasksList=[];var b=this.element;a(this.element).bind("heightChange",function(){});this.TaskListControl=a("<div style='height:100%;'></div>");b[0].appendChild(this.TaskListControl[0]);this.options.KnockoutObjectName=eval(this.options.KnockoutObjectName);this._updateItemsSourceAndTemplates();this._drawTaskBar();this.OnApplyTemplate();this.options.GanttChart.ViewportTimeRangeChanged.subscribe(this._ganttChart_ViewportTimeRangeChanged,this)},OnApplyTemplate:function(){this.BrowseToTaskCueLeft=
a(this.options.TaskBarBrowseToCueLeftTemplate).css({"margin-left":this.BrowseToCueLeft,display:this.BrowseToTaskCueLeftVisibility});this.BrowseToTaskCueRight=a(this.options.TaskBarBrowseToCueRightTemplate).css({"margin-left":this.BrowseToCueRight,display:this.BrowseToTaskCueRightVisibility});0<this.BrowseToTaskCueLeft.length&&(this.BrowseToTaskCueLeft.bind("touchstart mousedown",this._browseToTaskCue_Click),this.BrowseToTaskCueLeft[0].tasksListControl=this,this.BrowseToTaskCueLeft.addClass("rq-gc-browseCue-left"),
this.BrowseToTaskCueLeft[0].title=window.RadiantQ_ScrollToTask,a("div:eq(0)",this.element).append(this.BrowseToTaskCueLeft));0<this.BrowseToTaskCueRight.length&&(this.BrowseToTaskCueRight.bind("touchstart mousedown",this._browseToTaskCue_Click),this.BrowseToTaskCueRight[0].tasksListControl=this,this.BrowseToTaskCueRight.addClass("rq-gc-browseCue-right"),this.BrowseToTaskCueRight[0].title=window.RadiantQ_ScrollToTask,a("div:eq(0)",this.element).append(this.BrowseToTaskCueRight));this._ganttChart_ViewportTimeRangeChanged(this,
null)},_browseToTaskCue_Click:function(a){var c=this.tasksListControl;a=c.options.GanttChart;this==c.BrowseToTaskCueLeft[0]?(c=c._tracker.GetNextTaskStartTimeLeft(a.VisualStartTime),c==Date.MinValue?a._setOption("AnchorTime",a.VisualStartTime):a._setOption("AnchorTime",c)):(c=c._tracker.GetNextTaskStartTimeRight(a.VisualEndTime),c==Date.MinValue?a._setOption("AnchorTime",a.VisualEndTime):a._setOption("AnchorTime",c));return!1},TaskCollectionChange:function(){},_drawTaskBar:function(){this._updateMaxOverlappingTasksCount();
this._destory();var b=this.options;a.isFunction(this.tasksCollection)&&(this.tasksCollection=this.tasksCollection());if(null!=this.ItemTemplate&&(this.tasksCollection._data||this.tasksCollection instanceof Array))if(this.tasksCollection instanceof Array&&(b.TasksListProperty||b.ParentTasksListProperty))this._bindTaskCollectionChange(!0),this.tasksCollection.length&&this._createNewTaskbar();else{try{this.options.KnockoutObjectName&&(this.options.KnockoutObjectName["Row"+b.RowCount+"Task"+this.currentUniqueTaskSuffix]=
this.tasksCollection._data)}catch(c){}this.ItemTemplate=this.ItemTemplate.replace(/RQDataContext/g,"Row"+b.RowCount+"Task0");this.ItemTemplate=a.template(null,this.ItemTemplate);var d=a.tmpl(this.ItemTemplate,this.tasksCollection._data).appendTo(this.TaskListControl[0]);this.options.DragThumb=a(".rq-taskbar-dragThumb:eq(0)",d);0==this.options.DragThumb.length&&(this.options.DragThumb=a(".dragThumb:eq(0)",d));this.options.ResizeThumb=a(".rq-taskbar-resizeThumb:eq(0)",d);0==this.options.ResizeThumb.length&&
(this.options.ResizeThumb=a(".resizeThumb:eq(0)",d));this.options.StartResizeThumb=a(".rq-gc-startTaskBarResizer:eq(0)",d);0==this.options.StartResizeThumb.length&&(this.options.StartResizeThumb=a(".start-resizeThumb:eq(0)",d));if(0<this.options.DragThumb.length&&0<this.options.ResizeThumb.length)var e=null;e=d;e[0]&&(a(e[0]).addClass("taskItemControl"),this.tasksCollection._data&&(this.tasksCollection._data.nodeType=function(){}),b=a(e[0]).taskbar({baseTimeUnitWidth:40,GanttChart:b.GanttChart,Parent:{element:this},
ApplyBarWidthOptimization:!0,IsParentTypeRow:b.Data.IsParentType(),BaseTimeUnitWidth:b.BaseTimeUnitWidth,OverlappedTasksRenderingOptimization:b.OverlappedTasksRenderingOptimization,ComputedStartTime:b.GanttChart.options.ComputedStartTime,Data:this.tasksCollection._data,TaskStartTime:b.TaskStartTime,TimeIndicatorLineOption:b.TimeIndicatorLineOption,TaskEndTime:b.TaskEndTime,ParentTaskStartTime:b.ParentTaskStartTime,ParentTaskEndTime:b.ParentTaskEndTime,TaskTooltipTemplate:b.TaskTooltipTemplate,MovingInfoPopup:b.MovingInfoPopup,
FlexyGantt:b.FlexyGantt,ResizeInfoPopup:b.ResizeInfoPopup,DataSource:b.Data,KnockoutObjectName:b.KnockoutObjectName,DragThumb:b.DragThumb,ResizeThumb:b.ResizeThumb,StartResizeThumb:b.StartResizeThumb}),this.tasksCollection._data.nodeType=null,this.currentUniqueTaskSuffix++,this.TasksList.push(b))}this.options.GanttChart.options.Parent.RedrawChartRow=this.RedrawTaskRow},_bindTaskCollectionChange:function(b){function c(a,b){"insert"==a.type&&d._createNewTaskbar(b.items);if("remove"==a.type){for(var c=
b.items[0],h=[],k=0;k<d.blocks.length;k++){var l=d.blocks[k],n=l.entities.FirstOrDefaultEndity(c);if(null!=n&&(l.entities.remove(n),!h.containsValue(l))){h.push(l);break}}for(c=0;c<d.TasksList.length;c++)d.TasksList[c][0].DataContext==b.items[0]&&(d.TasksList[c].remove(),d.TasksList.splice(c,1),c--);d.options.OverlappedTasksRenderingOptimization==RadiantQ.FlexyGantt.OverlappedTasksRenderingOptimization.ShrinkHeight&&d._blockIntact(h)}try{d.options.KnockoutObjectName&&ko.applyBindingsToDescendants(d.options.KnockoutObjectName)}catch(p){}d._updateBrowseToTaskCuesStates()}
var d=this;if(null==this.onSourceUpdated||void 0==this.onSourceUpdated)this.onSourceUpdated=c;b?a.observable(this.tasksCollection).bind("insert remove replaceAll",this.onSourceUpdated):a.observable(this.tasksCollection).unbind("insert remove replaceAll",this.onSourceUpdated)},RedrawTaskRow:function(){this._updateItemsSourceAndTemplates();this._bindTaskCollectionChange(!1);this.element.empty();this.TasksList=[];this.TaskListControl.empty();this.refresh();this.options.KnockoutObjectName&&ko.applyBindingsToDescendants(this.options.KnockoutObjectName,
this.element[0])},_createNewTaskbar:function(b){b||(b=this.tasksCollection);var c=this.options;for(task=0;task<b.length;task++){try{this.options.KnockoutObjectName&&(this.options.KnockoutObjectName["Row"+c.RowCount+"Task"+this.currentUniqueTaskSuffix]=b[task])}catch(d){}var e=this.ItemTemplate;this.ItemTemplate=this.ItemTemplate.replace(/RQDataContext/g,"Row"+c.RowCount+"Task"+this.currentUniqueTaskSuffix);this.ItemTemplate=a.template(null,this.ItemTemplate);var f=a.tmpl(this.ItemTemplate,b[task]).appendTo(this.TaskListControl[0]);
this.options.DragThumb=a(".rq-taskbar-dragThumb:eq(0)",f);0==this.options.DragThumb.length&&(this.options.DragThumb=a(".dragThumb:eq(0)",f));this.options.ResizeThumb=a(".rq-taskbar-resizeThumb:eq(0)",f);0==this.options.ResizeThumb.length&&(this.options.ResizeThumb=a(".resizeThumb:eq(0)",f));this.options.StartResizeThumb=a(".rq-gc-startTaskBarResizer:eq(0)",f);0==this.options.StartResizeThumb.length&&(this.options.StartResizeThumb=a(".start-resizeThumb:eq(0)",f));0<this.options.DragThumb.length&&f[0].removeChild(this.options.DragThumb[0]);
0<this.options.ResizeThumb.length&&f[0].removeChild(this.options.ResizeThumb[0]);0<this.options.StartResizeThumb.length&&this.options.StartResizeThumb[0].parentNode.removeChild(this.options.StartResizeThumb[0]);var g=null;if(g=f)f=!1,f="rq-gc-taskbar-label"==g.className,!1==f&&(f="label"==g.className),!1==f&&(a(g).addClass("taskItemControl"),b[task].nodeType=function(){},g=a(g).taskbar({baseTimeUnitWidth:40,GanttChart:c.GanttChart,Parent:{element:this},ApplyBarWidthOptimization:!0,OverlappedTasksRenderingOptimization:c.OverlappedTasksRenderingOptimization,
ComputedStartTime:c.GanttChart.options.ComputedStartTime,Data:b[task],IsParentTypeRow:c.Data.IsParentType(),TaskStartTime:c.TaskStartTime,TaskEndTime:c.TaskEndTime,ParentTaskStartTime:c.ParentTaskStartTime,ParentTaskEndTime:c.ParentTaskEndTime,TaskTooltipTemplate:c.TaskTooltipTemplate,MovingInfoPopup:c.MovingInfoPopup,TimeIndicatorLineOption:c.TimeIndicatorLineOption,FlexyGantt:c.FlexyGantt,ResizeInfoPopup:c.ResizeInfoPopup,DataSource:c.Data,KnockoutObjectName:c.KnockoutObjectName,DragThumb:c.DragThumb,
ResizeThumb:c.ResizeThumb,StartResizeThumb:c.StartResizeThumb}),b[task].nodeType=null,this.TasksList.push(g),this.currentUniqueTaskSuffix++);this.ItemTemplate=e}null!=this._overlapTimer&&clearTimeout(this._overlapTimer);this._overlapTimer=setTimeout(function(){this.options.OverlappedTasksRenderingOptimization==RadiantQ.FlexyGantt.OverlappedTasksRenderingOptimization.ShrinkHeight&&(this._destory(),this._processTasksListForOverlap())}.bind(this),0)},_overlapTimer:null,_processTasksListForOverlap:function(){if(this.TasksList.length){for(var a=
0;a<this.TasksList.length;a++){var c=this.TasksList[a].data("radiantqTaskbar");c&&this._onNewEntityAdded(c)}this._computeIndicesAndHeight()}this._updateMaxOverlappingTasksCount()},_computeIndicesAndHeight:function(){for(var a=0;a<this.blocks.length;a++)this.blocks[a].ComputeIndicesAndHeight()},_destroy:function(){this._bindTaskCollectionChange(!1);this.blocks=[]},_destory:function(){this.blocks=[]},_updateItemsSourceAndTemplates:function(){var a=this.options;a.IsParentTypeRow=a.Data.IsParentType();
this.ItemTemplate=a.IsParentTypeRow?a.ParentTaskTemplate:a.TaskTemplate;a.Data.IsParentType()?null!=a.ParentTasksListProperty?a.FlexyGantt.UseTimeRangeFilteredTasksInRows()?this.tasksCollection=RadiantQ.FlexyGantt.TimeRangeFilteredItems(a.FlexyGantt,a.Data._data[a.ParentTasksListProperty],a.ParentTaskStartTime,a.ParentTaskEndTime):this.tasksCollection=a.Data._data[a.ParentTasksListProperty]:a.FlexyGantt.UseTimeRangeFilteredTasksInRows()?this.tasksCollection=RadiantQ.FlexyGantt.TimeRangeFilteredItems(a.FlexyGantt,
a.Data,a.ParentTaskStartTime,a.ParentTaskEndTime):this.tasksCollection=a.Data:null!=a.TasksListProperty?a.FlexyGantt.UseTimeRangeFilteredTasksInRows()?(this.tasksCollection=new RadiantQ.FlexyGantt.TimeRangeFilteredItems(a.FlexyGantt,a.Data._data[a.TasksListProperty],a.TaskStartTime,a.TaskEndTime),this.tasksCollection.CollectionChanged.subscribe(this._taskCollectionChange,this)):this.tasksCollection=a.Data._data[a.TasksListProperty]:a.FlexyGantt.UseTimeRangeFilteredTasksInRows()?(this.tasksCollection=
new RadiantQ.FlexyGantt.TimeRangeFilteredItems(a.FlexyGantt,a.Data,a.TaskStartTime,a.TaskEndTime),this.tasksCollection.CollectionChanged.subscribe(this._taskCollectionChange,this)):this.tasksCollection=this.tasksCollection=a.Data;this._initBrowseToCueTracker()},_taskCollectionChange:function(a,c){"insert"==a.type&&(this.tasksCollection=c.items,this._createNewTaskbar());if("remove"==a.type)for(var d=0;d<this.TasksList.length;d++)this.TasksList[d][0].DataContext==c.items[0]&&this.TasksList[d].remove();
try{this.options.KnockoutObjectName&&ko.applyBindingsToDescendants(this.options.KnockoutObjectName,this.element[0])}catch(e){}},_updateMaxOverlappingTasksCount:function(){if(this.options.OverlappedTasksRenderingOptimization==RadiantQ.FlexyGantt.OverlappedTasksRenderingOptimization.ShrinkHeight){for(var a=1,c=0;c<this.blocks.length;c++)var d=this.blocks[c].GetRowCount(),a=d>a?d:a;this.options.Data&&(!1==this.options.IsPrinting?this.options.Data.MaxOverlappingBlocksRowCount(a):this._updateChartRowHeight(this.options.Data))}},
_updateChartRowHeight:function(b,c){var d=a(b.TableRow()).height();this.element.height(d-1);this.element.parent().height(d)},_onNewEntityAdded:function(a){var c=[];a.Height=parseInt(this.element[0].style.height);for(var d=0;d<this.blocks.length;d++)this.blocks[d].IsOverlapping(a,!0)&&c.push(this.blocks[d]);if(0==c.length)a=new OverlappingBlock(a),this.blocks.push(a);else if(1==c.length)c[0].AddEntity(a),a=c[0];else{a=new OverlappingBlock(a);for(d=0;d<c.length;d++){for(var e=c[d],f=0;f<e.entities.length;f++)a.AddEntity(e.entities[f]);
this.blocks.removeByValue(e)}this.blocks.push(a)}return a},_blockIntact:function(a){if(0<a.length){var c=[];a=[].concat(a);for(var d=[],e=0;e<a.length;e++){var f=a[e];this.blocks.removeByValue(f);for(var g=0;g<f.entities.length;g++){var h=f.entities[g];c.push(h);h=this._onNewEntityAdded(h);d.containsValue(h)||d.push(h)}}for(e=0;e<d.length;e++)d[e].ComputeIndicesAndHeight()}this._updateMaxOverlappingTasksCount()},_getIntersectingBlock:function(a,c){for(var d=null,e=0;e<this.blocks.length;e++)if(this.blocks[e].IsOverlapping(a,
!1)){d=this.blocks[e];break}return d},_getIntersectingBlocks:function(a){for(var c=[],d=0;d<this.blocks.length;d++)this.blocks[d].IsOverlapping(a,!1)&&c.push(this.blocks[d]);return c},RemoveEntity:function(a,c){var d=a.entities.removeByValue(c);0==a.entities.length&&this.RemoveBlock(a);return d},RemoveBlock:function(a){return this.blocks.removeByValue(a)},_setOption:function(b,c){switch(b){case "viewStartTime":case "viewEndTime":this._updateStartAndEnd()}a.Widget.prototype._setOption.apply(this,arguments)},
_updateStartAndEnd:function(){for(var b=0;b<this.TasksList.length;b++)a(this.TasksList[b]).taskbar({viewStartTime:this.options.viewStartTime,viewEndTime:this.options.viewEndTime})},_tracker:null,_cueTemplatePropertyChanged:function(a,c){a._initBrowseToCueTracker()},_initBrowseToCueTracker:function(){var a=this.options.TasksListProperty;if(null!=this.options.TaskBarBrowseToCueLeftTemplate||null!=this.options.TaskBarBrowseToCueRightTemplate){null!=this._tracker&&this._tracker.Dispose();var c=this.options.Data._data;
this.options.IsParentTypeRow||null==a||(c=this.options.Data._data[a]);c&&(!1==c instanceof RadiantQ.RQ_ObservableCollection&&(!1==c instanceof Array&&window.console&&(c=[c]),new RadiantQ.RQ_ObservableCollection(c)),a=this.options.IsParentTypeRow?this.options.ParentTaskStartTime:this.options.TaskStartTime,RadiantQ.FlexyGantt.TasksPositionTracker&&(this._tracker=new RadiantQ.FlexyGantt.TasksPositionTracker(this.options.FlexyGantt,c,{Property:a})))}else null!=this._tracker&&this._tracker.Dispose()},
_ganttChart_ViewportTimeRangeChanged:function(a,c){this.BrowseToCueLeft=this.options.GanttChart.GanttChart.scrollLeft();this.BrowseToCueRight=this.BrowseToCueLeft+this.options.GanttChart.GanttChart[0].clientWidth-30;this._updateBrowseToTaskCuesStates()},_updateBrowseToTaskCuesStates:function(){this.BrowseToTaskCueLeftVisibility=null!=this.options.TaskBarBrowseToCueRightTemplate&&null!=this._tracker&&this._tracker.AreTasksAvailableBefore(this.options.GanttChart.VisualStartTime)?"block":"none";this.BrowseToTaskCueRightVisibility=
null!=this.options.TaskBarBrowseToCueLeftTemplate&&null!=this._tracker&&this._tracker.AreTasksAvailableAfter(this.options.GanttChart.VisualEndTime)?"block":"none";this.BrowseToTaskCueLeft&&this.BrowseToTaskCueLeft.css({"margin-left":this.BrowseToCueLeft,display:this.BrowseToTaskCueLeftVisibility});this.BrowseToTaskCueRight&&("block"==this.BrowseToTaskCueLeftVisibility&&(this.BrowseToCueRight=this.BrowseToCueRight-this.BrowseToCueLeft-30),this.BrowseToTaskCueRight.css({"margin-left":this.BrowseToCueRight,
display:this.BrowseToTaskCueRightVisibility}))},UpdateItemForCue:function(a,c,d){null!=this._tracker&&(this._tracker.UpdateTimes(c,d),this._updateBrowseToTaskCuesStates())}})})(jQuery);
$.fn.ExpandableTextBlock=function(a){this.options=a;this.parentElem=this.PropertyChanged=null;this.holdUpdateElement=!1;this._create=function(){this.PropertyChanged=new ObjectEvent("PropertyChanged");var a=this.closest("tr")[0]["data-grid-item"];this.options.isFG=a instanceof RadiantQ.FlexyGantt.FlexyNodeData?!0:!1;this.addClass("rq-grid-expander-text");this.options.Data=a;this.parentElem=this.parent();this.options.Data&&this.init();this.append(this.options.Text)};this.init=function(){var a=this.parentElem,
c=this.options;c.Converter&&(c.Text=c.Converter(c.Data));var d=0;null!=c.Data.IndentWidth&&(d=c.Data.IndentWidth);this.border=$('<div class= "rq-grid-expand-indentWidth" style="height:1px;width:'+d+'px" ></div>');d=c.Data;d.HierarchicalItem?(c=d.HierarchicalItem.CanShowCue(),null==c&&(c=d.IsParentType())):c=d.IsParent;this.Cue=$('<div style="width:12px;display:'+(c?"block":"none")+'" class="arrowContainer"/>');c=this.border.add(this.Cue);a.prepend(c);this.options.isFG?this.flexyGanttExpanderCue():
this.projectGanttexpanderCue()};this._cueVisiblity=null;this.CueVisiblity=function(a){if(void 0==a||null==a)return this._cueVisiblity;a!=this._CueVisiblity&&(this._cueVisiblity=a,!1==this.holdUpdateElement&&(this.UpdateCueVisiblity(a),this.OnPropertyChanged("CueVisiblity",a)))};this._IndentWidth=null;this.IndentWidth=function(a){if(void 0==a||null==a)return this._indentWidth;a!=this._indentWidth&&(this._indentWidth=a,!1==this.holdUpdateElement&&(this.OnPropertyChanged("IndentWidth",a),this.UpdateBorderWidth(a)))};
this._IsExpand=null;this.IsExpand=function(a){if(void 0==a||null==a)return this._IsExpand;a!=this._IsExpand&&(this._IsExpand=a,!1==this.holdUpdateElement&&(this.OnPropertyChanged("IsExpand",a),this.UpdateCue(a)))};this.flexyGanttExpanderCue=function(){if(this.options.Data.IsParentType()){var a=this.options.Data.HierarchicalItem;this.createExpanderCue(this.Cue);this.holdUpdateElement=!0;new Binding(a,"IsExpanded",this,"IsExpand",null,"TwoWay");new Binding(a,"CanShowCue",this,"CueVisiblity",null,"OneWay");
this.IsExpand(a.IsExpanded());this.CueVisiblity(a.CanShowCue());this.holdUpdateElement=!1}this.ApplyWidth()};this.ApplyWidth=function(){if(null!=this.options.Data.Level()&&null!=this.options.Data.IsParentType()){var a=RadiantQ.Gantt.LevelToIndentWidth(this.options.Data.Level(),this.options.Data.IsParentType());this.border.width(a)}};this.projectGanttexpanderCue=function(){this.createExpanderCue(this.Cue);var a=this.options.Data;this.holdUpdateElement=!0;new Binding(a,"IsExpanded",this,"IsExpand",
null,"TwoWay");new Binding(a,"IsParent",this,"CueVisiblity",null,"OneWay");new Binding(a,"IndentWidth",this,"IndentWidth",null,"OneWay");this.IsExpand(a.Activity.IsExpanded);this.CueVisiblity(a.IsParent);this.IndentWidth(a.IndentWidth);this.holdUpdateElement=!1};this.createExpanderCue=function(b){var c="rq-grid-expand-arrow ",d=null,d=a.Data;(d=null!=d.HierarchicalItem?d.HierarchicalItem.IsExpanded():d.IsExpanded)&&(c+="rq-grid-collapse-arrow");this.arrow=$('<div id="arrow" class="'+c+'"></div>');
b.append(this.arrow);var e=this;b.click(function(a,b){a.stopPropagation();!0==e.options.isFG?(e.options.Data.HierarchicalItem._forceToCreateNewChildList=!0,e.IsExpand(!e.IsExpand()),e.options.Data.HierarchicalItem._forceToCreateNewChildList=!1):e.IsExpand(!e.IsExpand());return!1})};this.UpdateBorderWidth=function(a){this.border.width(a)};this.UpdateCueVisiblity=function(a){!0==a&&this.Cue.show();!1==a&&this.Cue.hide()};this.UpdateCue=function(a){this.arrow&&(a?this.arrow.addClass("rq-grid-collapse-arrow"):
this.arrow.removeClass("rq-grid-collapse-arrow"))};this.OnPropertyChanged=function(a,c){this.PropertyChanged.raise(this,{PropertyName:a,value:c})};this._create()};
$.fn.ExpandableTextBox=function(a){this.options=a;this.parentElem=this.PropertyChanged=null;this.holdUpdateElement=!1;this._create=function(){var a=this;this.options.isFG=null;this.PropertyChanged=new ObjectEvent("PropertyChanged");var c=this.closest("tr")[0]["data-grid-item"];this.options.isFG=c instanceof RadiantQ.FlexyGantt.FlexyNodeData?!0:!1;this.addClass("rq-grid-expander-editor");this.container=$("<div  ></div>");this.wrap(this.container);this.options.Data=c;this.parentElem=this.parent();this.options.Data&&
this.init();this.val(this.options.Text);this.change(function(){a.options.ConverterBack&&a.options.ConverterBack($(this).val(),a.options.Data)});this.parent().css("width","auto");this.data("ExpandableTextBox",this)};this.init=function(){var a=this.parentElem,c=this.options;c.Converter&&(c.Text=c.Converter(c.Data));var d=0;null!=c.Data.IndentWidth&&(d=c.Data.IndentWidth);this.border=$('<div class= "rq-grid-expand-indentWidth" style="height:1px;width:'+d+'px" ></div>');var e=c.Data;e.HierarchicalItem?
(c=e.HierarchicalItem.CanShowCue(),null==c&&(c=e.IsParentType())):c=e.IsParent;e=this.parents("td").width();c?this.css("width",e-d-17+"px"):this.css("width",e-d-4+"px");this.Cue=$('<div style="width:12px;display:'+(c?"block":"none")+'" class="arrowContainer"/>');d=this.border.add(this.Cue);a.prepend(d);this.options.isFG?this.flexyGanttExpanderCue():this.projectGanttexpanderCue()};this._cueVisiblity=null;this.CueVisiblity=function(a){if(void 0==a||null==a)return this._cueVisiblity;a!=this._CueVisiblity&&
(this._cueVisiblity=a,!1==this.holdUpdateElement&&(this.UpdateCueVisiblity(a),this.OnPropertyChanged("CueVisiblity",a)))};this._IndentWidth=null;this.IndentWidth=function(a){if(void 0==a||null==a)return this._indentWidth;a!=this._indentWidth&&(this._indentWidth=a,!1==this.holdUpdateElement&&(this.OnPropertyChanged("IndentWidth",a),this.UpdateBorderWidth(a)))};this._IsExpand=null;this.IsExpand=function(a){if(void 0==a||null==a)return this._IsExpand;a!=this._IsExpand&&(this._IsExpand=a,!1==this.holdUpdateElement&&
(this.OnPropertyChanged("IsExpand",a),this.UpdateCue(a)))};this.flexyGanttExpanderCue=function(){if(this.options.Data.IsParentType()){var a=this.options.Data.HierarchicalItem;this.createExpanderCue(this.Cue);this.holdUpdateElement=!0;new Binding(a,"IsExpanded",this,"IsExpand",null,"TwoWay");new Binding(a,"CanShowCue",this,"CueVisiblity",null,"OneWay");this.IsExpand(a.IsExpanded());this.CueVisiblity(a.CanShowCue());this.holdUpdateElement=!1}this.UpdateBorderWidth(this.ApplyWidth())};this.ApplyWidth=
function(){if(null!=this.options.Data.Level()&&null!=this.options.Data.IsParentType())return RadiantQ.Gantt.LevelToIndentWidth(this.options.Data.Level(),this.options.Data.IsParentType())};this.projectGanttexpanderCue=function(){this.createExpanderCue(this.Cue);var a=this.options.Data;new Binding(a,"IsExpanded",this,"IsExpand",null,"TwoWay");new Binding(a,"IsParent",this,"CueVisiblity",null,"OneWay");new Binding(a,"IndentWidth",this,"IndentWidth",null,"OneWay")};this.createExpanderCue=function(b){var c=
"rq-grid-expand-arrow ",d=null,d=a.Data;(d=null!=d.HierarchicalItem?d.HierarchicalItem.IsExpanded():d.IsExpanded)&&(c+="rq-grid-collapse-arrow");this.arrow=$('<div id="arrow" class="'+c+'"></div>');b.append(this.arrow);var e=this;b.click(function(a,b){a.stopPropagation();e.IsExpand=!e.IsExpand;return!1})};this.UpdateBorderWidth=function(a){this.border.width(a);var c=this.parents("td").width();this.CueVisiblity?this.css("width",c-a-17+"px"):this.css("width",c-a-4+"px")};this.UpdateCueVisiblity=function(a){!0==
a&&this.Cue.show();!1==a&&this.Cue.hide()};this.UpdateCue=function(a){this.arrow&&(a?this.arrow.addClass("rq-grid-collapse-arrow"):this.arrow.removeClass("rq-grid-collapse-arrow"))};this.OnPropertyChanged=function(a,c){this.PropertyChanged.raise(this,{PropertyName:a,value:c})};this._create();this.widget=function(){return this.parent()}};var my=RadiantQ.Gantt;
(function(a){a.widget("radiantq.SmartDateTimeText",{options:{text:null,timeUnit:my.TimeScaleType.Days},_create:function(){this.element.text(this.options.text);this.refresh()},_init:function(){},_destroy:function(){},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments);switch(b){case "text":this.element.text(this.options.text);break;case "timeUnit":this.refresh()}},refresh:function(){var b=this.options.timeUnit;if(null!=b){var c=b.TextFormat,d=b.Tag,e=b.Width;if(c&&0!==c.length){var f=
this.element,b=c.split("|");a.each(b,function(b,c){if(c&&0!==c.length)try{if(f.text(d.toString(c)),a(f).width()<e-6)return!1}catch(k){}})}}}})})(jQuery);
$.widget("radiantq.ScaleRendererBase",{options:{ViewStartTime:null,ViewEndTime:null,headerInfo:null,BaseTimeUnitWidth:25,BaseTimeScaleType:null,timeUnits:[],GanttChart:null,ViewWidth:null,WorkTimeSchedule:null},_requiresTimeUnitText:!0,_floorToHour:function(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),0,0)},_floorToMinute:function(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),0)},_floorWidth:function(a,b){a+=b;var c=Math.floor(a);
return{FlooredWidth:c,Residue:a-c}},UpdateTimeUnits:function(){this.options.timeUnits.length=0;var a=this.options;if(!(null==a.ViewStartTime||null==a.ViewEndTime||null==a.headerInfo||0<=a.ViewStartTime.compareTo(a.ViewEndTime))){var b=RadiantQ.Gantt,c=RadiantQ.Gantt.Utils,d=a.ViewStartTime.clone(),e=a.ViewEndTime.clone(),f=Date.CultureInfo.formatPatterns.shortDate,g=RQTimeSpan.Zero,h=[],k=0,g=0,l=new Date;switch(a.headerInfo.Type){case b.TimeScaleType.Days:g=0;this.element.show();for(l=d.clone();0>=
l.compareTo(e);){var n=1,p=l.clone().clearTime();0>p.compareTo(l)&&(n=1-(new RQTimeSpan(l-p)).getTotalMinutes()/1440);try{var m={Value:k},q={Value:g};if(!1==this.AddTimeUnit(l,n,b.TimeScaleType.Days,h,b.TimeScaleType.Days,l.getDate(),l.toString(f),m,q))break;l=p.clone().addDays(1)}finally{k=m.Value,g=q.Value}}break;case b.TimeScaleType.Weeks:g=new RQTimeSpan(e.clone()-d.clone());e=g.getTotalDays();n=d.clone();this.element.show();for(g=0;0<e;){p=c.TimeComputingUtils.GetRemainingDaysInWeek(n);n=n.clone().addDays(p-
7);p=p>e?e:p;try{if(m={Value:k},q={Value:g},!1==this.AddTimeUnit(n,p,b.TimeScaleType.Days,h,b.TimeScaleType.Weeks,n.toString("MMMM, dd, yyyy"),n.toString(f)+" - "+n.clone().addDays(7).toString(f),m,q))break}finally{k=m.Value,g=q.Value}e-=p;n=n.clone().addDays(7)}break;case b.TimeScaleType.Months:g=new RQTimeSpan(e-d);e=g.getTotalDays();n=d.clone();this.element.show();for(g=0;0<e;){p=c.TimeComputingUtils.GetRemainingDaysInMonth(n);p=p>e?e:p;try{if(m={Value:k},q={Value:g},!1==this.AddTimeUnit(n,p,b.TimeScaleType.Days,
h,b.TimeScaleType.Months,n.toString("MMMM yyyy"),(new Date(n.getFullYear(),n.getMonth(),1)).toString(f)+" - "+(new Date(n.getFullYear(),n.getMonth()+1,0,23,59,59)).toString(f),m,q))break}finally{k=m.Value,g=q.Value}e-=p;n=c.TimeComputingUtils.GetStartOfNextMonth(n.clone())}break;case b.TimeScaleType.Years:g=new RQTimeSpan(e-d);e=g.getTotalDays();n=d.clone();this.element.show();for(g=0;0<e;){p=c.TimeComputingUtils.GetRemainingDaysInYear(n.clone());p=p>e?e:p;try{if(m={Value:k},q={Value:g},!1==this.AddTimeUnit(n.clone(),
p,b.TimeScaleType.Days,h,b.TimeScaleType.Years,n.toString("yyyy"),n.toString(f)+" - "+n.clone().addYears(1).addDays(-1).toString(f),m,q))break}finally{k=m.Value,g=q.Value}e-=p;n=c.TimeComputingUtils.GetStartOfNextYear(n.clone())}break;case b.TimeScaleType.Minutes:g=new RQTimeSpan(e-d);e=g.getTotalMinutes();this.element.show();for(c=g=0;c<e;c++)try{if(m={Value:k},q={Value:g},p=d.clone().addMinutes(c),!1==this.AddTimeUnit(p,1,b.TimeScaleType.Minutes,h,b.TimeScaleType.Minutes,p.toString("mm"),p.toString(f)+
" "+p.toString("htt"),m,q))break}finally{k=m.Value,g=q.Value}break;case b.TimeScaleType.Hours:this.element.show();g=0;for(l=d.clone();0>=l.compareTo(e);){n=1;l.getMinutes();0<l.getMinutes()&&(n=1-l.getMinutes()/60);try{m={Value:k};q={Value:g};if(!1==this.AddTimeUnit(l,n,b.TimeScaleType.Hours,h,b.TimeScaleType.Hours,l.toString("HH"),l.toString(f)+" "+l.toString("htt"),m,q))break;l=new Date(l.getFullYear(),l.getMonth(),l.getDate(),l.getHours(),0,0);l=l.clone().addHours(1)}finally{k=m.Value,g=q.Value}}break;
case b.TimeScaleType.Custom:if(null==this.options.headerInfo.CustomTimeScaleTypeHint)throw"CustomTimeScaleTypeHint is not set in a TimeScaleHeaderDefinition of type TimeScaleType.Custom.";l=this.options.headerInfo.CustomTimeScaleTypeHint.EquivalentType;$(this.element).show();k=g=0;p=d.clone();d=new RadiantQ.Gantt.ProvideCustomTimeIntervalsEventArgs(p.clone(),e.clone());this.options.headerInfo.ProvideCustomTimeIntervals.raise(this,d);0==d.TimeIntervals.length&&d.TimeIntervals.push(e.clone());d.TimeIntervals.splice(0,
0,p.clone());for(c=0;c<d.TimeIntervals.length;c++){p=d.TimeIntervals[c];p=l<b.TimeScaleType.Hours?this._floorToMinute(p):p;a=c<d.TimeIntervals.length-1?d.TimeIntervals[c+1]:e.clone();a=l<b.TimeScaleType.Hours?rqTCUtils.GetTimeSpan(p,this._floorToMinute(a)):rqTCUtils.GetTimeSpan(p,a);if(a.isLessThan(RQTimeSpan.Zero))throw"Custom time interval entries are out of order.";l>b.TimeScaleType.Hours&&(l=b.TimeScaleType.Hours);a=l>=b.TimeScaleType.Hours?a.getTotalHours():a.getTotalMinutes();try{m={Value:k},
q={Value:g},n=this.AddTimeUnit(p,a,l,h,l,p.getDate().toString(),p.toString(f)+" "+p.toString("htt"),m,q)}finally{k=m.Value,g=q.Value}p=h[h.length-1];this.options.headerInfo.CustomTimeScaleTypeHint.EquivalentType>b.TimeScaleType.Days&&(p.IsWorkingTime=!0);if(!1==n)break}}this.options.timeUnits=h}},GetWorkTimeSchedule:function(){return this.options.WorkTimeSchedule},AddTimeUnit:function(a,b,c,d,e,f,g,h,k){var l=this.options,n=RadiantQ.Gantt,p=RadiantQ.Gantt.Utils,m=l.headerInfo,q=null,r=null,s=null;
this._requiresTimeUnitText&&m.ProvideCustomHeaderText.isSubscribed()&&(r=new RadiantQ.Gantt.ProvideCustomerHeaderTextEventArgs(a),m.ProvideCustomHeaderText.raise(m,r),q=r.Text,r=r.TooltipText);if(null==q)if(null==m.TextFormat||""==m.TextFormat)q=f;else if(-1!=m.TextFormat.indexOf("|"))s=m.TextFormat,q=" ";else try{q=a.toString(m.TextFormat)}catch(t){}null==r&&(r=g);f=new n.TimeUnit;f.Text=q;f.TextFormat=s;f.ToolTipText=r;f.Type=e;b=this._floorWidth(p.TimeComputingUtils.ConvertToUnitsOfBaseType(m.BaseTimeScaleType,
c,b)*l.BaseTimeUnitWidth,k.Value);f.Width=b.FlooredWidth;k.Value=b.Residue;f.IsWorkingTime=p.TimeComputingUtils.IsWorkingTime(a,e,this.GetWorkTimeSchedule());f.Tag=a.clone();d.push(f);a=l.ViewWidth;if(2==d.length&&d[0].Width<l.GanttChart.MinTimeUnitWidthForHeaderVisibility&&d[1].Width<l.GanttChart.MinTimeUnitWidthForHeaderVisibility)return $(this.element).hide(),!1;d=d[d.length-1];d.Width>a&&(d.Width=a);h.Value+=d.Width;return h.Value>=a?(h=d.Width-(h.Value-a),0<h&&(d.Width=h),!1):!0},_create:function(){this._refresh()},
_refresh:function(){var a=this.options;this.UpdateTimeUnits();this.element.empty().width(a.ViewWidth);for(var b=a.timeUnits.length,a=a.timeUnits,c=document.createDocumentFragment(),d=0;d<b;d++)this._renderTimeUnit(a[d],c);0!=c.childNodes.length&&this.element[0].appendChild(c)},_destroy:function(){},_refreshWidth:function(a){$(this.element).width(a)},_setOption:function(a,b){$.Widget.prototype._setOption.apply(this,arguments);"ViewWidth"==a&&this._refreshWidth(b);this._refresh()}});
$.widget("radiantq.TimeSpanHeader",$.radiantq.ScaleRendererBase,{options:{},_renderTimeUnit:function(a,b){var c=$('<div class="rq-timeUnit-div ui-widget-header" style="width: '+a.Width+'px;height:100%;" ></div>'),d=c[0];b.appendChild(d);var e=RQStyle.ZeroStyle,f=$("<table ></table>")[0];f.style.cssText=e;var g=f.insertRow(-1),h=g.insertCell(-1);g.style.cssText=e;h.style.cssText=e;h.align="center";h.vAlign="middle";h.width="100%";h.height="100%";e=$(h);e.attr({align:"center",vAlign:"middle",title:a.ToolTipText});
c.mouseenter(function(){a.IsHighlighted(!0);c.addClass("rq-tsh-timeUnit-hover ui-state-hover")});c.mouseleave(function(){a.IsHighlighted(!1);c.removeClass("rq-tsh-timeUnit-hover ui-state-hover")});d.appendChild(f);e.SmartDateTimeText({text:a.Text,timeUnit:a})},_create:function(){RQStyle.init();var a=$.radiantq.ScaleRendererBase.prototype._create;this.element.height(this.options.headerInfo.HeaderHeight);a.apply(this,arguments);a=this.options;a.headerInfo.PropertyChanged.clear();a.headerInfo.PropertyChanged.subscribe(this.PropertyChange,
this)},PropertyChange:function(a,b){"TextFormat"==b.PropertyName&&this._refresh()},UpdateTimeUnits:function(){var a=this.options,b=a.headerInfo;viewStartTime=a.ViewStartTime;viewEndTime=a.ViewEndTime;null!=b&&b.TimeUnitsCache.ClearTimeUnitsCacheForRange(viewStartTime,viewEndTime);$.radiantq.ScaleRendererBase.prototype.UpdateTimeUnits.apply(this,arguments);null!=b&&null!=a.timeUnits&&0<a.timeUnits.length&&b.TimeUnitsCache.SetTimeUnitsCacheForRange(viewStartTime,viewEndTime,a.timeUnits)},_setOption:function(a,
b){$.radiantq.ScaleRendererBase.prototype._setOption.apply(this,arguments)}});
$.widget("radiantq.GanttChartScaleBackground",$.radiantq.ScaleRendererBase,{options:{TimeRangeHighlightBehavior:null,ChartElement:null},height:0,_create:function(){this.height=$(this._getGanttChartDivsUniqueSelectorIdByID("rq-gc-chartArea-div")).height();$.radiantq.ScaleRendererBase.prototype._create.apply(this,arguments)},_getGanttChartDivsUniqueSelectorIdByID:function(a){return"#"+this.element[0].id.toString().replace(this.element.data("customID"),"").replace(/GanttChartBackgroundDiv/,"")+a},UpdateTimeUnits:function(){var a=
this.options;if(null!=a.headerInfo){var b=a.headerInfo.TimeUnitsCache.GetTimeUnitsCacheForRange(a.ViewStartTime,a.ViewEndTime);null!=b&&(a.timeUnits=b)}},_renderTimeUnit:function(a,b){var c=RadiantQ.Gantt.BottomTwoHeaderDefinitions.GetIndex(this.options.headerInfo),d=$('<div class=ui-GanttTimeUnitBackground-unit style="height: '+this.height+"px;z-index: "+c+';" ></div>');1==c&&d.css("margin-left","-1px");d.GanttTimeUnitBackground({Width:a.Width,TimeRangeHighlightBehavior:this.options.TimeRangeHighlightBehavior,
IsWorkingTime:a.IsWorkingTime,NonWorkingTimeBackground:this.options.NonWorkingTimeBackground,WorkingTimeBackground:this.options.WorkingTimeBackground,Type:a.Type,Level:c,TimeUnit:a,ChartElement:this.options.ChartElement});b.appendChild(d[0])},_setOption:function(a,b){$.radiantq.ScaleRendererBase.prototype._setOption.apply(this,arguments)}});
$.widget("radiantq.GanttChartBackground",{options:{WorkTimeSchedule:null,WorkingTimeBackground:null,NonWorkingTimeBackground:null,BottomTwoHeaders:null,ViewStartTime:null,ViewEndTime:null,BaseTimeUnitWidth:25,BaseTimeScaleType:null,timeUnits:[],GanttChart:null,ViewWidth:null,TimeRangeHighlightBehavior:null},_create:function(){var a=this;this._refresh();var b=$(this.element).parents(".rq-ganttChart");$(b).bind("ganttchartrefreshui",function(b,d){a._ConvertGanttChartOptionsToChatBGOptions(d.options);
a._refresh()});$(b).bind("ganttchartoptionchanged",function(b,d){a._ConvertGanttChartOptionsToChatBGOptions(d.options)})},_createUniqueID:function(a){return this.element[0].id+"_"+a},_refresh:function(){this.element.empty().width(this.options.ViewWidth);this.UpdateTimeUnits()},UpdateTimeUnits:function(){if(null!=this.options.BottomTwoHeaders&&2==this.options.BottomTwoHeaders.length){for(var a=document.createDocumentFragment(),b=this.element.parents("div.rq-ganttChart"),c=0;c<this.options.BottomTwoHeaders.length;c++){var d=
$("<div class=ui-GanttChartScaleBackground id ="+this._createUniqueID("ui-GanttChartScaleBackground"+c)+" ></div>").data("customID","_ui-GanttChartScaleBackground"+c);0==c&&d.addClass("ui-GanttChart-Background");d.GanttChartScaleBackground({ViewStartTime:this.options.ViewStartTime.clone(),ViewEndTime:this.options.ViewEndTime.clone(),headerInfo:this.options.BottomTwoHeaders[c],BaseTimeUnitWidth:this.options.BaseTimeUnitWidth,BaseTimeScaleType:this.options.BaseTimeScaleType,TimeRangeHighlightBehavior:this.options.TimeRangeHighlightBehavior,
GanttChart:{MinTimeUnitWidthForHeaderVisibility:this.options.MinTimeUnitWidthForHeaderVisibility},ViewWidth:this.options.ViewWidth,WorkTimeSchedule:this.options.WorkTimeSchedule,WorkingTimeBackground:this.options.WorkingTimeBackground,NonWorkingTimeBackground:this.options.NonWorkingTimeBackground,ChartElement:b});a.appendChild(d[0])}0!=a.childNodes.length&&this.element[0].appendChild(a)}},_createUniqueID:function(a){return this.element[0].id+"_"+a},_ConvertGanttChartOptionsToChatBGOptions:function(a){this.options.ViewStartTime=
a.ComputedStartTime.clone();this.options.ViewEndTime=a.ComputedEndTime.clone();this.options.BaseTimeUnitWidth=a.BaseTimeUnitWidth;this.options.BaseTimeScaleType=a.BaseTimeScaleType;this.options.GanttChart={MinTimeUnitWidthForHeaderVisibility:a.MinTimeUnitWidthForHeaderVisibility};this.options.ViewWidth=a.ViewWidth;this.options.BottomTwoHeaders=a.BottomTwoHeaders;this.options.WorkTimeSchedule=a.WorkTimeSchedule;this.options.WorkingTimeBackground=a.WorkingTimeBackground;this.options.NonWorkingTimeBackground=
a.NonWorkingTimeBackground;this.options.TimeRangeHighlightBehavior=a.TimeRangeHighlightBehavior},_setOption:function(a,b){$.Widget.prototype._setOption.apply(this,arguments)}});
$.widget("radiantq.GanttTimeUnitBackground",{options:{Width:null,IsWorkingTime:null,NonWorkingTimeBackground:null,WorkingTimeBackground:null,Type:null,Level:null,TimeUnit:null,TimeRangeHighlightBehavior:null,ChartElement:null},_create:function(){var a=this.options;$(this.element).width(a.Width);var b=this;this.options.ChartElement.bind("ganttcharttimerangehighlightbehaviorchanged",function(c,d){d.options.TimeRangeHighlightBehavior==RadiantQ.Gantt.TimeRangeHighlightBehavior.HighlightInChartOnHeaderMouseHover&&
a.TimeUnit.BindingObject(new Binding(a.TimeUnit,"IsHighlighted",b,"IsHighlighted",b.IsHighlightedConverter,null))});a.TimeRangeHighlightBehavior==RadiantQ.Gantt.TimeRangeHighlightBehavior.HighlightInChartOnHeaderMouseHover&&a.TimeUnit.BindingObject(new Binding(a.TimeUnit,"IsHighlighted",this,"IsHighlighted",this.IsHighlightedConverter,null));0==a.Level?a.IsWorkingTime?a.WorkingTimeBackground?this.element.css("background-color",a.WorkingTimeBackground):this.element.addClass("ui-WorkingTimeBackground"):
a.NonWorkingTimeBackground?this.element.css("background-color",a.NonWorkingTimeBackground):this.element.addClass("rq-gc-nonWorking-background ui-state-highlight"):1==a.Level&&(this.element.addClass("rq-gc-timeunit-border ui-widget-content"),this.element.css("border-left-width","1px"),this.element.css("background","none"))},binding:null,_IsHighlighted:null,IsHighlighted:function(a){if(void 0==a)return this._IsHighlighted;this._IsHighlighted=a},IsHighlightedConverter:{Convert:function(a,b,c){!0==a?
(c.element.hasClass("rq-gc-nonWorking-background")&&c.element.removeClass("ui-state-highlight"),1==c.options.Level&&c.element.css("background",""),c.element.addClass("rq-Background-timeUnit-hover ui-state-hover")):(c.element.hasClass("rq-gc-nonWorking-background")&&c.element.addClass("ui-state-highlight"),1==c.options.Level&&c.element.css("background","transparent"),c.element.removeClass("rq-Background-timeUnit-hover ui-state-hover"))}},_setOption:function(a,b){$.Widget.prototype._setOption.apply(this,
arguments)}});
$.widget("radiantq.GanttChartCustomRangeBackground",$.radiantq.GanttChartScaleBackground,{options:{CustomChartBackgroundRanges:null},_create:function(){$.radiantq.GanttChartScaleBackground.prototype._create.apply(this,arguments);var a=this,b=$(this.element).parents(".rq-ganttChart");$(b).bind("ganttchartrefreshui",function(b,d){a._ConvertGanttChartOptionsToChatBGOptions(d.options);a._refresh()});$(b).bind("ganttchartoptionchanged",function(b,d){a._ConvertGanttChartOptionsToChatBGOptions(d.options)});null!=
this.options.CustomChartBackgroundRanges&&this.options.CustomChartBackgroundRanges.DiscreetCustomRanges.CollectionChanged.subscribe(function(){a._refresh()})},_refresh:function(){$(this.element).empty();$(this.element).width(this.options.ViewWidth);this.UpdateTimeUnits()},UpdateTimeUnits:function(){var a=this.options,b=a.ViewStartTime.clone(),c=a.ViewEndTime.clone(),d=a.BaseTimeUnitWidth,e=a.BaseTimeScaleType;if(!(null==b||null==c||null==a.CustomChartBackgroundRanges||0<=b.compareTo(c))){for(var f=
[],g=[],h=0;h<a.CustomChartBackgroundRanges.DiscreetCustomRanges.length;h++)g.push(a.CustomChartBackgroundRanges.DiscreetCustomRanges[h]);var k=new RadiantQ.Gantt.CustomRangeInformationEventArgs(b,c);a.CustomChartBackgroundRanges.RaiseProvideRepeatingCustomRanges(k);a=RadiantQ.Gantt.Utils.TimeComputingUtils;for(h=0;h<k.CustomRanges.length;h++)g.push(k.CustomRanges[h]);for(h=0;h<g.length;h++)if(k=g[h],0<=k.StartTime.compareTo(b)&&0<c.compareTo(k.StartTime)||0<k.EndTime.compareTo(c)&&0<=c.compareTo(k.EndTime)){var l=
a.GetTimeSpan(k.StartTime.clone(),k.EndTime.clone()),n=RadiantQ.Gantt.TimeScaleType.Hours,l=l.getTotalHours(),p=RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToUnitsOfBaseType(e,n,l)*d,l=a.GetTimeSpan(b.clone(),k.StartTime.clone()),l=l.getTotalHours(),n=RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToUnitsOfBaseType(e,n,l)*d;f.push(new RadiantQ.Gantt.CustomRangeTimeUnit(p,n,k))}b=document.createDocumentFragment();c=$(this._getGanttChartDivsUniqueSelectorIdByID("rq-gc-chartArea-div")).height();for(h=
0;h<f.length;h++)this._renderCustomChartBackGround(f[h],-1,c,b);$(this.element).append(b)}},_renderCustomChartBackGround:function(a,b,c,d){b=$('<div class=ui-customBackgroundRange-unit style="width: '+a.Width+"px;height: "+c+"px;margin-left: "+(a.CanvasLeft+b)+'px;" ></div>')[0];d.appendChild(b);a.Height=c;$.tmpl(a.CustomRangeInfo.DataTemplate,a).appendTo(b)},_createUniqueID:function(a){return this.element[0].id+"_"+a},_getCustomIdSelector:function(a){return"#"+this.element[0].id+"_"+a},_getGanttChartDivsUniqueSelectorIdByID:function(a){return"#"+
this.element[0].id.toString().replace(/rq-gc-customRange-background/g,"")+a},_setOption:function(a,b){$.radiantq.GanttChartScaleBackground.prototype._setOption.apply(this,arguments)},_ConvertGanttChartOptionsToChatBGOptions:function(a){this.options.ViewStartTime=a.ComputedStartTime.clone();this.options.ViewEndTime=a.ComputedEndTime.clone();this.options.BaseTimeUnitWidth=a.BaseTimeUnitWidth;this.options.BaseTimeScaleType=a.BaseTimeScaleType;this.options.GanttChart={MinTimeUnitWidthForHeaderVisibility:a.MinTimeUnitWidthForHeaderVisibility};
this.options.ViewWidth=a.ViewWidth;this.options.WorkTimeSchedule=a.WorkTimeSchedule;this.options.WorkingTimeBackground=a.WorkingTimeBackground;this.options.WorkingTimeBackground=a.WorkingTimeBackground}});
$.widget("radiantq.SpecialLines",$.radiantq.ScaleRendererBase,{options:{SpecialLineInfos:null},height:0,_create:function(){$.radiantq.ScaleRendererBase.prototype._create.apply(this,arguments);var a=this,b=$(this.element).parents(".rq-ganttChart");$(b).bind("ganttchartrefreshui",function(b,d){b.preventDefault();b.stopPropagation();a._ConvertGanttChartOptsToSpecialLineOpts(d.options);a._refresh()});$(b).bind("ganttchartoptionchanged",function(b,d){b.preventDefault();b.stopPropagation();a._ConvertGanttChartOptsToSpecialLineOpts(d.options)});
null!=this.options.SpecialLineInfos&&this.options.SpecialLineInfos.CollectionChanged.subscribe(function(){a._refresh()})},_getGanttChartDivsUniqueSelectorIdByID:function(a){return"#"+this.element[0].id.toString().replace(/SpecialLinesDiv/g,"")+a},_refresh:function(){this.element.empty().width(this.options.ViewWidth);this.UpdateTimeUnits()},UpdateTimeUnits:function(){var a=RadiantQ.Gantt.Utils.TimeComputingUtils,b=this.options,c=b.ViewStartTime.clone(),d=b.ViewEndTime.clone(),e=b.BaseTimeUnitWidth,
f=b.BaseTimeScaleType;if(!(null==c||null==d||null==b.SpecialLineInfos||0<=c.compareTo(d))){for(var d=[],g=0;g<b.SpecialLineInfos.length;g++){var h=b.SpecialLineInfos[g],k=new RadiantQ.Gantt.TimeUnit;if(0>=c.compareTo(h.LineDateTime)){var l=a.GetTimeSpan(c,h.LineDateTime);void 0==h.ToolTipText&&(h.ToolTipText="");k.Tag=h;switch(f){case ns_gantt.TimeScaleType.Minutes:k.Type=ns_gantt.TimeScaleType.Minutes;k.Tag=h;k.Width=a.ConvertToUnitsOfBaseType(f,ns_gantt.TimeScaleType.Minutes,l.getTotalMinutes())*
e;d.push(k);break;case ns_gantt.TimeScaleType.Hours:k.Type=ns_gantt.TimeScaleType.Hours;k.Tag=h;k.Width=a.ConvertToUnitsOfBaseType(f,ns_gantt.TimeScaleType.Hours,l.getTotalHours())*e;d.push(k);break;case ns_gantt.TimeScaleType.Days:k.Type=ns_gantt.TimeScaleType.Days;k.Tag=h;k.Width=a.ConvertToUnitsOfBaseType(f,ns_gantt.TimeScaleType.Days,l.getTotalDays())*e;d.push(k);break;case ns_gantt.TimeScaleType.Weeks:k.Type=ns_gantt.TimeScaleType.Weeks;k.Tag=h;k.Width=a.ConvertToUnitsOfBaseType(f,ns_gantt.TimeScaleType.Weeks,
l.getTotalDays()/7)*e;d.push(k);break;case ns_gantt.TimeScaleType.Months:k.Type=ns_gantt.TimeScaleType.Months;k.Tag=h;var n=c,l=12*(h.LineDateTime.getFullYear()-n.getFullYear()),h=h.LineDateTime.getMonth()-n.getMonth(),l=0<h?l+h:l-(12-Math.Abs(h));k.Width=a.ConvertToUnitsOfBaseType(f,ns_gantt.TimeScaleType.Days,l)*e;d.push(k);break;case ns_gantt.TimeScaleType.Years:k.Type=ns_gantt.TimeScaleType.Years,k.Tag=h,k.Width=a.ConvertToUnitsOfBaseType(f,ns_gantt.TimeScaleType.Weeks,h.LineDateTime.getFullYear()-
c.getFullYear())*e,d.push(k)}}}a=document.createDocumentFragment();b=$(this._getGanttChartDivsUniqueSelectorIdByID("rq-gc-chartArea-div")).height();for(g=0;g<d.length;g++)this._renderCustomChartBackGround(d[g],-1,b,a);$(this.element).append(a)}},_renderCustomChartBackGround:function(a,b,c,d){void 0==a.Tag.LineColor&&(a.Tag.LineColor="#C5C5C5");b=$('<div class=rq-gc-specialLine style="Background-color:'+a.Tag.LineColor+";width: 1px;height: "+c+"px;margin-left: "+(a.Width+b)+'px;" ></div>')[0];b.title=
a.Tag.ToolTipText;d.appendChild(b)},_ConvertGanttChartOptsToSpecialLineOpts:function(a){this.options.ViewStartTime=a.ComputedStartTime.clone();this.options.ViewEndTime=a.ComputedEndTime.clone();this.options.BaseTimeUnitWidth=a.BaseTimeUnitWidth;this.options.BaseTimeScaleType=a.BaseTimeScaleType;this.options.GanttChart={MinTimeUnitWidthForHeaderVisibility:a.MinTimeUnitWidthForHeaderVisibility};this.options.ViewWidth=a.ViewWidth;this.options.WorkTimeSchedule=a.WorkTimeSchedule;this.options.WorkingTimeBackground=
a.WorkingTimeBackground;this.options.WorkingTimeBackground=a.WorkingTimeBackground},_setOption:function(a,b){$.radiantq.ScaleRendererBase.prototype._setOption.apply(this,arguments)}});$.widget("radiantq.ScalePanelRendererBase",{options:{ViewStartTime:null,ViewEndTime:null},_create:function(){},_setOption:function(a,b){$.Widget.prototype._setOption.apply(this,arguments)}});
$.widget("radiantq.TimeSpanHeaders",$.radiantq.ScalePanelRendererBase,{panningUtil:null,options:{TimeScaleHeaders:null,ComputedStartTime:null,ComputedEndTime:null,BaseTimeUnitWidth:null,BaseTimeScaleType:null,AnchorTime:null,ViewWidth:null,ResizeToFit:null,ZoomOptions:null,ScrollOptions:null,CustomChartBackgroundRanges:null,BaseTimeUnitWidthMinimum:null,BaseTimeUnitWidthMaximum:null,MinTimeUnitWidthForHeaderVisibility:null,WorkTimeSchedule:null,TimeRangeHighlightBehavior:null},_previousHeight:null,
heightChangeListener:function(a){a!=this._previousHeight&&(this._previousHeight=a,this.element.resize())},redraw:function(){this._renderTimeLineHeaders(this.options)},_create:function(){$.radiantq.ScalePanelRendererBase.prototype._create.apply(this,arguments);var a=this;this.element.addClass("rq-tsh-div").data("TimeSpanHeaders",this);this._previousHeight=this.element.height();var b=$(this.element).parents(".rq-ganttChart");b.bind("ganttchartrefreshui",function(b,d){b.preventDefault();b.stopPropagation();
$.extend(a.options,d.options);a._renderTimeLineHeaders(d.options)});b.bind("ganttchartoptionchanged",function(b,d){b.preventDefault();b.stopPropagation();$.extend(a.options,d.options)});$(this.element).parents("div").filter(".rq-ganttBase").bind("ganttbaseheadercollectionschanged",function(b,d){b.preventDefault();b.stopPropagation();$.extend(a.options,d.options);var e=d.value.items;if("insert"==d.event.type)for(var f=0;f<e.length;f++)a._insertTimeLineHeader(e[f],d.value.index,d.options);else"remove"==
d.event.type&&a._removeTimeLineHeader(d.value.index);a.heightChangeListener(a.element.height())})},widget:function(){return this.element},ShouldZoomWithLeftMouse:function(a){a=RadiantQ.Gantt.isModifierKeyIsPresed(a);return(this.options.ZoomOptions&RadiantQ.Gantt.ChartZoomOptions.LeftMouseButtonDownDrag)==RadiantQ.Gantt.ChartZoomOptions.LeftMouseButtonDownDrag&&!a},ShouldScrollWithLeftMouse:function(a){var b=RadiantQ.Gantt.isModifierKeyIsPresed(a);return(this.options.ScrollOptions&RadiantQ.Gantt.ChartScrollOptions.LeftMouseButtonDownDrag)==
RadiantQ.Gantt.ChartScrollOptions.LeftMouseButtonDownDrag&&!b||(this.options.ScrollOptions&RadiantQ.Gantt.ChartScrollOptions.CtrlAndLeftMouseButtonDownDrag)==RadiantQ.Gantt.ChartScrollOptions.CtrlAndLeftMouseButtonDownDrag&&a.ctrlKey},_renderTimeLineHeaders:function(a){var b=this;this.element[0].style.display="none";this._refreshWidth(this.options.ViewWidth);null!=this.options.TimeScaleHeaders&&$.map(this.options.TimeScaleHeaders,function(c,d){var e=b._addTimeLineHeader(c,a);b.element.append(e);return e});
this.heightChangeListener(this.element.height());this.element[0].style.display="block"},_refreshWidth:function(a){$(this.element).empty();$(this.element).width(a)},_addTimeLineHeader:function(a,b){return this._newTimeLine(a,b)},_insertTimeLineHeader:function(a,b,c){a=this._newTimeLine(a,c);$(".rq-tlh-div",this.element).eq(b).before(a)},_removeTimeLineHeader:function(a){$(".rq-tlh-div",this.element).eq(a).remove()},_newTimeLine:function(a,b){return $('<div class="rq-tlh-div" />').TimeSpanHeader({ViewStartTime:this.options.ComputedStartTime,
ViewEndTime:this.options.ComputedEndTime,headerInfo:a,BaseTimeUnitWidth:this.options.BaseTimeUnitWidth,BaseTimeScaleType:a.BaseTimeScaleType,GanttChart:{MinTimeUnitWidthForHeaderVisibility:this.options.MinTimeUnitWidthForHeaderVisibility},ViewWidth:this.options.ViewWidth,WorkTimeSchedule:this.options.WorkTimeSchedule})},StartPanning:function(){function a(a,d){b._trigger("AnchorTimeChanged",this,b.panningUtil.CurAnchorTime)}null!=this.panningUtil&&this.panningUtil.AnchorTimeChanged.isSubscribed&&this.panningUtil.AnchorTimeChanged.unsubscribe(a);
this.panningUtil=new RadiantQ.Gantt.GanttChartPanningUtil(this.options.AnchorTime,this.options.BaseTimeScaleType,this.options.BaseTimeUnitWidth);this.panningUtil.AnchorTimeChanged.subscribe(a);var b=this},_getGanttChartDivsUniqueSelectorIdByID:function(a){return"#"+this.element[0].id.toString().replace(/timeSpanHeader/g,"")+a},ScrollBy:function(a){if(!1==this.options.ResizeToFit){var b=$(this._getGanttChartDivsUniqueSelectorIdByID("GanttChart")),c=$(this._getGanttChartDivsUniqueSelectorIdByID("rq-gc-horizondalScrollBar")),
c=c[0].scrollWidth-c[0].clientWidth,d=$(b).scrollLeft(),d=d+a;c>d&&b.scrollLeft(d)}else null!=this.panningUtil?this.panningUtil.ApplyXChange(a):(a=RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertTimeUnitsToTimeSpan(this.options.BaseTimeScaleType,a/this.options.BaseTimeUnitWidth),a=this.options.AnchorTime.addTimeSpan(a),self._trigger("AnchorTimeChanged",this,a))},_setOption:function(a,b){$.radiantq.ScalePanelRendererBase.prototype._setOption.apply(this,arguments)}});rqTCUtils=RadiantQ.Gantt.Utils.TimeComputingUtils;
(function(a){a.widget("radiantq.GanttChart",{DependencyViews:null,options:{TimeRangeHighlightBehavior:null,BottomTwoHeaders:null,TimeScaleHeaders:null,ComputedStartTime:null,ComputedEndTime:null,TimeIndicatorLineOption:RadiantQ.Gantt.TimeIndicatorLines.None,ProvideWidthForMilestoneShape:null,BaseTimeUnitWidth:null,BaseTimeScaleType:null,AnchorTime:null,ViewWidth:2E3,ResizeToFit:!1,ZoomOptions:null,ScrollOptions:null,CustomChartBackgroundRanges:null,BaseTimeUnitWidthMinimum:null,BaseTimeUnitWidthMaximum:null,
MinTimeUnitWidthForHeaderVisibility:null,OverlappedTasksRenderingOptimization:null,TaskItemTemplate:null,ParentTaskItemTemplate:null,ProgressBarTemplate:null,TaskBarBackgroundTemplate:null,TaskBarAdornerTemplate:null,TaskStartTime:null,ParentTaskStartTime:null,TaskEndTime:null,ParentTaskEndTime:null,TasksListProperty:null,ParentTasksListProperty:null,FlatItemsSource:null,RowHeight:null,TaskBarHeight:null,TaskTooltipTemplate:null,ConnectingInfoPopup:null,ResizeInfoPopup:null,MovingInfoPopup:null,EnablePagerButtonLeft:!0,
EnablePagerButtonRight:!0,BeforePagingGanttChart:null,SpecialLineInfos:null,Parent:null,KnockoutObjectName:null,DependencyLineColor:null,DependencyListSource:null,GanttDependencyViews:null,WorkTimeSchedule:null,GanttType:null,EnableAlternativeRowBackground:null,TaskBarBrowseToCueLeftTemplate:null,TaskBarBrowseToCueRightTemplate:null,IsPrinting:!1,UseChartVirtualization:!1,OnTaskBarLoad:null,ShowContextMenuOnTouchTap:null},_canUpdate:!0,lave:null,TaskOnMouseHover:null,CanUpdate:function(a,c){if(void 0==
a)return this._canUpdate;a!=this._canUpdate&&(this._canUpdate=a)&&(this.UpdateGanttComponents(c),_canUpdate=!0)},OnAnchorTimeChanged:function(){this._trigger("AnchorTimeChanged")},LoadingRow:function(a){this.element.trigger("LoadingRow",[a])},UpdateGanttComponents:function(a){this._trigger("RefreshUi",this,{options:this.options,isInit:!0,ForceToReDrawRows:a});this.options.Parent.GetGanttTable().showTableBody()},BeginUpdate:function(){this.CanUpdate(!1)},EndUpdate:function(a){this.CanUpdate(!0,a)},
_validateViewWidth:function(){if(!this.options.ResizeToFit&&(300>this.options.ViewWidth||1E4<this.options.ViewWidth))throw"GanttChart.ViewWidth has to be in the range 300 to 10000";},headerZoomTracker:null,headerScrollTracker:null,VisualStartTime:null,VisualEndTime:null,ViewportTimeRangeChanged:null,_create:function(){this.ViewportTimeRangeChanged=new ObjectEvent("ViewportTimeRangeChanged");this.element.addClass("rq-ganttChart");var b=this.$GanttChart=a('<div id="'+this._createUniqueID("GanttChart")+
'" class="rq-gc-topDiv" style="height:100%; width:100%;"/>');this.element.append(b);this.GanttChart=b;this.element.addClass("ui-widget-content");this.initialization();var c=this.$ChartArea=a('<div id="'+this._createUniqueID("rq-gc-chartArea")+'" class="rq-gc-chartArea" style="width:100%; height:100%;position:relative;"/>');this.element.data("GanttChart",this);b.append(c);var d=this.$TimeSpanHeader=a('<div id="'+this._createUniqueID("timeSpanHeader")+'" class="timeSpanHeader"/>');c.append(d);d=a('<div id="'+
this._createUniqueID("rq-gc-chartArea-div")+'" class="rq-gc-chartArea-div" style="width:'+this.options.ViewWidth+'px; height:100%;position:relative;"/>');c.append(d);c=this.$TaskBarContainer=a('<div id="'+this._createUniqueID("rq-gc-viewsContainer-div")+'" class="rq-gc-viewsContainer-div" style="width:100%;position:absolute;"/>');d.append(c);this.$GanttChartCustomRangeBackgroundDIV=a('<div id="'+this._createUniqueID("rq-gc-customRange-background")+'" class="rq-gc-customRange-background" style="position:absolute;"/>').appendTo(d);
this.$GanttChartBackgroundDiv=a('<div id="'+this._createUniqueID("GanttChartBackgroundDiv")+'" class="GanttChartBackgroundDiv" style="position:absolute;"/>').appendTo(d);this.$SpecialLinesDiv=a('<div id="'+this._createUniqueID("SpecialLinesDiv")+'" class="SpecialLinesDiv" style="z-index:100;position:absolute;"/>').appendTo(d);b.css("overflow","hidden");!1==this.options.IsPrinting&&this.ApplyDockPanelSettings(this.element);this.CanUpdate(!1);!1==this.options.IsPrinting&&this.options.Parent.OnChartTemplateApplied();
this.initializeGanttComponents();this._createLave();!1==this.options.IsPrinting&&this.HScrollBar.scroll()},_createUniqueID:function(a){return this.element[0].id+"_"+a},_getUniqueSelectorIdByID:function(a){return"#"+this._createUniqueID(a)},ganttChart:null,refreshDockPanel:function(){var b=this,c=setInterval(function(){var d=a(".rq-gc-pager-container",b.element).parent().width();b.HScrollBar.width(d-34);(b.VisualStartTime||b.options.ResizeToFit)&&b.ScrollViewerElement_LayoutUpdated();clearInterval(c)},
200)},_ganttChartEvents:function(){var b=this;a(window).resize(function(){b.refreshDockPanel()});var c=this.HScrollBar,d=this.$GanttChart,e=a(this._getUniqueSelectorIdByID("pagerLeftBtn"),this.HDockPanel),f=a(this._getUniqueSelectorIdByID("pagerRightBtn"),this.HDockPanel),g=c.height();e.height(g);f.height(g);var h=!0;c.scroll(function(){d.scrollLeft()==c.scrollLeft()||1==c[0].offsetHeight&&!h||d.scrollLeft(c.scrollLeft())});d.scroll(function(){d.scrollLeft()==c.scrollLeft()||1==c[0].offsetHeight&&
!h||(h=!1,c.scrollLeft(d.scrollLeft()));b.ScrollViewerElement_LayoutUpdated()});e.click(function(){if(b.options.EnablePagerButtonLeft){var a=!1;null!=b.options.BeforePagingGanttChart&&(a=b.options.BeforePagingGanttChart("LeftPagerButton",this));a||b.PageLeft()}});f.click(function(){if(b.options.EnablePagerButtonRight){var a=!1;null!=b.options.BeforePagingGanttChart&&(a=b.options.BeforePagingGanttChart("RightPagerButton",this));a||b.PageRight()}});f.hover(function(){b.options.EnablePagerButtonRight&&
a(this).addClass("rq-gc-pager")},function(){a(this).removeClass("rq-gc-pager")});e.hover(function(){b.options.EnablePagerButtonLeft&&a(this).addClass("rq-gc-pager")},function(){a(this).removeClass("rq-gc-pager")})},GetBarRenderStartTime:function(a){this.ApplyBarWidthOptimization=!0;var c=this.ConvertXToTime(-10);return a.isLessThan(c)?c:a},GetBarRenderEndTime:function(a){this.ApplyBarWidthOptimization=!0;var c=this.ConvertXToTime(this.options.ViewWidth+10);return a.isGreaterThan(c)?c:a},ScrollViewerElement_LayoutUpdated:function(){var b=
this.VisualStartTime,c=this.VisualEndTime;if(!0==this.options.ResizeToFit)this.VisualStartTime=this.options.ComputedStartTime,this.VisualEndTime=this.options.ComputedEndTime;else{var d=a(this.HScrollBar).scrollLeft();this.VisualStartTime=this.ConvertXToTime(d);this.VisualEndTime=this.ConvertXToTime(d+this.GanttChart[0].clientWidth)}b==this.VisualStartTime&&c==this.VisualEndTime||this.OnViewportTimeRangeChanged()},OnViewportTimeRangeChanged:function(){this.ViewportTimeRangeChanged&&0<this.ViewportTimeRangeChanged.fn.length&&
this.ViewportTimeRangeChanged.raise(this)},SetStartTime:function(a){var c=this.options.ComputedStartTime;if(this._isTrySetEndTime||a!=c)c=rqTCUtils.GetTimeSpan(c,this.options.AnchorTime),a=a.addTimeSpan(c),this._setOption("AnchorTime",a),baseUnitWidth=this.options.BaseTimeUnitWidth},ScrollToAnchorTime:function(){if(!1==this.options.IsPrinting){var a=this.HScrollBar,c=a[0];a.scrollLeft((c.scrollWidth-c.clientWidth)/2+c.clientWidth/2-4)}},BringTimeIntoView:function(a){var c=this.GetCurrentLeftMostVisibleTime(),
d=this.GetCurrentRightMostVisibleTime();if(0<a.compareTo(c)||0<d.compareTo(a))!1==this.options.ResizeToFit?this._setOption("AnchorTime",a):(c=0,null!=this.options.BottomTwoHeaders&&(c=rqTCUtils.ConvertTimeUnitsToTimeSpan(this.options.BottomTwoHeaders[0].Type,1)),a=a.addTimeSpan(c),this.SetStartTime(a))},TrySetEndTime:function(b){var c=this.options.ComputedStartTime,d=this.options.ComputedEndTime;if(b!=this.options.ComputedEndTime){if(b<c)throw"Specified endTime cannot be less that the current stat time of the chart view.";
if(b>c){var e=a(this.element).parents().filter(".rq-ganttBase");if(null==("ProjectGantt"==this.options.GanttType?e.GanttControl("option"):e.FlexyGantt("option")))throw"SetEndTime can be called only when GanttChart is inside a GanttBase instance.";var f=this.options.BaseTimeScaleType,d=rqTCUtils.ConvertTimeSpanToTimeUnits(f,rqTCUtils.GetTimeSpan(c,d)),f=rqTCUtils.ConvertTimeSpanToTimeUnits(f,rqTCUtils.GetTimeSpan(c,b));b=this.options.BaseTimeUnitWidth;d=d*b/f;d<this.options.BaseTimeUnitWidthMinimum&&
(d=this.options.BaseTimeUnitWidthMinimum);d>this.options.BaseTimeUnitWidthMaximum&&(d=this.options.BaseTimeUnitWidthMaximum);!1==this.options.IsPrinting?"ProjectGantt"==this.options.GanttType?e.GanttControl("option","BaseTimeUnitWidth",d):e.FlexyGantt("option","BaseTimeUnitWidth",d):this.options.BaseTimeUnitWidth=d;b!=d&&(this._isTrySetEndTime=!0,this.SetStartTime(c),this._isTrySetEndTime=!1)}}},ApplyDockPanelSettings:function(b){var c=a('<div id="'+this._createUniqueID("rq-gc-pager-container")+'" class="rq-gc-pager-container" style="height:16px; whitespace:nowrap;"/>');
a(b).append(c);c.append('<table style="float:left; width:16px;height:16px;border-spacing:0px;border-style:none;"><tr><td class="pagerBtnStyle" id="'+this._createUniqueID("pagerLeftBtn")+'" style="width:13px;" title="'+window.RadiantQ_TimeScaleLeftButtonTooltipString+'"><div class="rq-gc-pager-left-arrow" ></div></td></tr></table>');var d=a('<div id="'+this._createUniqueID("rq-gc-horizondalScrollBar")+'" class="rq-gc-horizondalScrollBar" style="float:left;" />');d.append('<div class="stretchDiv" id="'+
this._createUniqueID("stretchDiv")+'" style="width:'+(this.options.ViewWidth-32)+'px; height: 1px;margin-left:-2px; "></div>');var e=a('<table style="float:left;width:16px;height:16px;border-spacing:0px;border-style:none;"><tr><td class="pagerBtnStyle" id="'+this._createUniqueID("pagerRightBtn")+'" style="width:13px;" ><div class="rq-gc-pager-right-arrow" title="'+window.RadiantQ_TimeScaleRightButtonTooltipString+'"></div></td></tr></table>');c.append(e);d.insertBefore(e);a(".rq-gc-horizondalScrollBar").css("overflow-x",
"scroll");a(".rq-gc-horizondalScrollBar").css("overflow-y","hidden");a(b).css("overflow","hidden");b=a(b).width();d.width(b-34);this.HDockPanel=c;this.HScrollBar=d},initialization:function(){!0==this.options.ResizeToFit&&(this.options.ViewWidth=a(this.element).width());null==this.options.AnchorTime&&(this.options.AnchorTime=Date.today());this.options.ComputedStartTime=RadiantQ.Gantt.AnchorTimeToStartTimeConverter.Convert(this);this.options.ComputedEndTime=RadiantQ.Gantt.AnchorTimeToEndTimeConverter.Convert(this);
this.headerZoomTracker=new RadiantQ.Gantt.TimeSpanHeaderZoomTracker;this.headerScrollTracker=new RadiantQ.Gantt.TimeSpanHeaderScrollTracker},initializeGanttComponents:function(b){b=this.$ChartArea;a(b).height(a(b).height()-20);!1==this.options.IsPrinting&&this._ganttChartEvents();null!=this.options.TimeScaleHeaders&&(!1==this.options.IsPrinting&&this.options.Parent.triggerChildWidgetsCreated(this.element),this.initializeTimeSpanHeader(),this.initializeCusromRangBackGround(),this.initializeGanttChartBackground(),
this.initializeSpecialLine(),"ProjectGantt"==this.options.GanttType&&(this.initializeGanttChartRows(),this.initializeGanttDependencyLine()),"FlexyGantt"==this.options.GanttType&&this.initializeChartRow());this.ScrollToAnchorTime();window.ganttChart=this},getLaveLeft:function(){var b=a(".ui-layout-resizer",this.element.closest(".ui-layout-container")).offset();return b=b?b.left:a(this.element).offset().left},_createLave:function(){var b=a(".rq-gc-chartArea",this.element);this.lave&&a(this.lave).remove();
a(".ui-layout-resizer",this.element.closest(".ui-layout-container")).offset()||a(this.element).offset();var c=a(".rq-gc-horizondalScrollBar",this.element).offset(),c=c?c.top:a(this.element).offset().top;window._lave_pos?(c-=_lave_pos,window._lave_pos+=c):window._lave_pos=c;this.lave=a('<div style="'+";retnec:ngila-txet;tp57:ezis-tnof;0d0d0d#:roloc".split("").reverse().join("")+"position: relative;top: "+(window._lave_pos-250)+"px; left:"+(this.options.ResizeToFit?0:this.getLaveLeft())+'px;height: 0%;">'+
"noisreV noitaulavE".split("").reverse().join("")+"</div>").insertBefore(b)},notifychange:function(a,c){},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments);switch(b){case "AnchorTime":this.ViewSpanChanged();this.ScrollToAnchorTime();this.OnAnchorTimeChanged();break;case "ViewWidth":this._validateViewWidth();this.ViewSpanChanged(!0);a(this._getUniqueSelectorIdByID("stretchDiv"),this.element).width(this.options.ViewWidth-34);a(this._getUniqueSelectorIdByID("rq-gc-chartArea-div"),
this.element).width(this.options.ViewWidth);var d=a(this._getUniqueSelectorIdByID("rq-gc-viewsContainer-div"),this.element);depParent=a(".rq-gc-dependencysParent",d);0<depParent.length&&(a(depParent.dependencysParentDiv).width(this.options.ViewWidth),a(this._getUniqueSelectorIdByID("dependencysParentDiv"),this.element).width(this.options.ViewWidth));break;case "BaseTimeUnitWidth":this.ViewSpanChanged();this.options.Parent.OnBaseTimeUnitWidthChanged();break;case "ResizeToFit":a(this.lave).remove();
this.ResizeToFitChanged();this.ViewSpanChanged();d=a(".rq-gc-chartArea",this.element);!0==c?a(this.lave).css("left","0px"):a(this.lave).css("left",this.getLaveLeft()+"px");a(this.lave).insertBefore(d);break;case "BaseTimeScaleType":this.ViewSpanChanged();break;case "TimeScaleHeaders":this.initializeGanttComponents();break;case "CustomChartBackgroundRanges":this.initializeCusromRangBackGround();break;case "SpecialLineInfos":this.initializeSpecialLine();break;case "FlatItemsSource":this._trigger("SourceUpdated",
this,{options:this.options});this.options.Parent.GetGanttTable().showTableBody();break;case "WorkTimeSchedule":this._trigger("RefreshUi",this,{options:this.options});break;case "TimeRangeHighlightBehavior":this._trigger("TimeRangeHighlightBehaviorChanged",this,{options:this.options,BottomtwoHeaders:this.options.BottomTwoHeaders});break;case "TimeIndicatorLineOption":this._trigger("TimeIndicatorLineOptionChanged",this,{options:this.options});break;case "TaskBarBrowseToCueLeftTemplate":case "TaskBarBrowseToCueRightTemplate":"ProjectGantt"==
this.options.GanttType&&a(".rq-gc-rowsParent",this.$TaskBarContainer).GanttTaskItemsControl("option",b,c)}(d=this.options.Parent.options)&&d[b]&&d[b]!=c&&(d[b]=c)},GetScrollableElement:function(){return a(this._getUniqueSelectorIdByID("GanttChart"),this.element)},widget:function(){return this.element},initializeCusromRangBackGround:function(){null!=this.options.CustomChartBackgroundRanges&&this.$GanttChartCustomRangeBackgroundDIV.empty().GanttChartCustomRangeBackground({ViewStartTime:this.options.ComputedStartTime.clone(),
ViewEndTime:this.options.ComputedEndTime.clone(),headerInfo:this.options.TimeScaleHeaders,BaseTimeUnitWidth:this.options.BaseTimeUnitWidth,BaseTimeScaleType:this.options.BaseTimeScaleType,GanttChart:{MinTimeUnitWidthForHeaderVisibility:this.options.MinTimeUnitWidthForHeaderVisibility},ViewWidth:this.options.ViewWidth,CustomChartBackgroundRanges:this.options.CustomChartBackgroundRanges,WorkTimeSchedule:this.options.WorkTimeSchedule})},initializeGanttChartBackground:function(){var a=this.options;this.$GanttChartBackgroundDiv.empty().GanttChartBackground({ViewStartTime:a.ComputedStartTime.clone(),
ViewEndTime:a.ComputedEndTime.clone(),headerInfo:a.TimeScaleHeaders,BaseTimeUnitWidth:a.BaseTimeUnitWidth,BaseTimeScaleType:a.BaseTimeScaleType,GanttChart:{MinTimeUnitWidthForHeaderVisibility:a.MinTimeUnitWidthForHeaderVisibility},ViewWidth:a.ViewWidth,BottomTwoHeaders:a.BottomTwoHeaders,WorkTimeSchedule:a.WorkTimeSchedule,WorkingTimeBackground:a.WorkingTimeBackground,NonWorkingTimeBackground:a.NonWorkingTimeBackground,TimeRangeHighlightBehavior:a.TimeRangeHighlightBehavior})},updateChatBGHeight:function(){var b=
this.element.height()-this.$TimeSpanHeader.height(),c=this.$GanttChartCustomRangeBackgroundDIV,d=this.$SpecialLinesDiv;a("div.ui-GanttTimeUnitBackground-unit",this.$GanttChartBackgroundDiv).height(b);a("div.rq-gc-specialLine",d).height(b);a("div.ui-customBackgroundRange-unit",c).height(b);a("div.rq-gc-chartArea-div",this.element).height(b);this._createLave()},initializeChartRow:function(){var b=this.$TaskBarContainer,c=a('<div class="rq-gc-rowsParent rowsParent" style="position: absolute; margin-top:1px;"></div>');
a(b).empty().append(c);c.GanttRows({Data:this.options.FlatItemsSource,TasksListProperty:this.options.TasksListProperty,ParentTasksListProperty:this.options.ParentTasksListProperty,TaskTemplate:this.options.TaskItemTemplate,ParentTaskTemplate:this.options.ParentTaskItemTemplate,OverlappedTasksRenderingOptimization:this.options.OverlappedTasksRenderingOptimization,TaskStartTime:this.options.TaskStartTime,ParentTaskStartTime:this.options.ParentTaskStartTime,KnockoutObjectName:this.options.KnockoutObjectName,
TaskEndTime:this.options.TaskEndTime,ParentTaskEndTime:this.options.ParentTaskEndTime,GanttChart:this,RowHeight:this.options.RowHeight,TaskBarHeight:this.options.TaskBarHeight,ViewWidth:this.options.ViewWidth,TaskTooltipTemplate:this.options.TaskTooltipTemplate,ResizeInfoPopup:this.options.ResizeInfoPopup,MovingInfoPopup:this.options.MovingInfoPopup,FlexyGantt:this.options.Parent,TimeIndicatorLineOption:this.options.TimeIndicatorLineOption,EnableAlternativeRowBackground:this.options.EnableAlternativeRowBackground,
TaskBarBrowseToCueLeftTemplate:this.options.TaskBarBrowseToCueLeftTemplate,TaskBarBrowseToCueRightTemplate:this.options.TaskBarBrowseToCueRightTemplate,IsPrinting:this.options.IsPrinting,UseChartVirtualization:this.options.UseChartVirtualization})},initializeGanttChartRows:function(){var b=this.$TaskBarContainer,c=a('<div class="rq-gc-rowsParent rowsParent" style="position: absolute; margin-top:1px;"></div>');a(b).empty().append(c);c.GanttTaskItemsControl({Data:this.options.FlatItemsSource,TaskTemplate:this.options.TaskItemTemplate,
ParentTaskTemplate:this.options.ParentTaskItemTemplate,ProgressBarTemplate:this.options.ProgressBarTemplate,TaskBarBackgroundTemplate:this.options.TaskBarBackgroundTemplate,TaskBarAdornerTemplate:this.options.TaskBarAdornerTemplate,GanttChart:this,RowHeight:this.options.RowHeight,TaskBarHeight:this.options.TaskBarHeight,KnockoutObjectName:this.options.KnockoutObjectName,ViewWidth:this.options.ViewWidth,TaskTooltipTemplate:this.options.TaskTooltipTemplate,MovingInfoPopup:this.options.MovingInfoPopup,
ResizeInfoPopup:this.options.ResizeInfoPopup,ConnectingInfoPopup:this.options.ConnectingInfoPopup,WorkTimeSchedule:this.options.WorkTimeSchedule,EnableAlternativeRowBackground:this.options.EnableAlternativeRowBackground,TaskBarBrowseToCueLeftTemplate:this.options.TaskBarBrowseToCueLeftTemplate,TaskBarBrowseToCueRightTemplate:this.options.TaskBarBrowseToCueRightTemplate,IsPrinting:this.options.IsPrinting})},initializeSpecialLine:function(){this.$SpecialLinesDiv.empty().SpecialLines({ViewStartTime:this.options.ComputedStartTime.clone(),
ViewEndTime:this.options.ComputedEndTime.clone(),headerInfo:this.options.TimeScaleHeaders,BaseTimeUnitWidth:this.options.BaseTimeUnitWidth,BaseTimeScaleType:this.options.BaseTimeScaleType,WorkTimeSchedule:this.options.WorkTimeSchedule,GanttChart:{MinTimeUnitWidthForHeaderVisibility:this.options.MinTimeUnitWidthForHeaderVisibility},ViewWidth:this.options.ViewWidth,SpecialLineInfos:this.options.SpecialLineInfos})},initializeDependencyLine:function(){var b=this._getUniqueSelectorIdByID("rq-gc-viewsContainer-div"),
c=a('<div class="rq-gc-dependencysParent" style="position: absolute; width:'+this.options.ViewWidth+'px;"></div>');a(b).append(c);this.DependencyViews=new RadiantQ.Gantt.FGDependencyViewList(this.options.Parent,this.options.DependencyListSource);b=a("<div>  </div>");a(c).append(b);b.GanttDependencyControl({DependencyViews:this.DependencyViews,GanttChart:this})},initializeGanttDependencyLine:function(){var b=this.$TaskBarContainer,c=a('<div class="rq-gc-dependencysParent" id="dependencysParentDiv" style="position: absolute; overflow:hidden; width:'+
this.options.ViewWidth+'px;"></div>');c.css("display","none");b.append(c);b=a("<div>  </div>");c.append(b);b.GanttDependencyControl({Data:this.options.FlatItemsSource,DependencyViews:this.options.GanttDependencyViews,GanttChart:this,GanttModel:this.options.Parent.Model});c.css("display","block")},initializeTimeSpanHeader:function(){var a=this,c=this.options,d=this.$TimeSpanHeader;d.empty().TimeSpanHeaders({TimeScaleHeaders:c.TimeScaleHeaders,ComputedStartTime:c.ComputedStartTime,ComputedEndTime:c.ComputedEndTime,
BaseTimeUnitWidth:c.BaseTimeUnitWidth,BaseTimeScaleType:c.BaseTimeScaleType,AnchorTime:c.AnchorTime,ViewWidth:c.ViewWidth,ResizeToFit:c.ResizeToFit,ZoomOptions:c.ZoomOptions,ScrollOptions:c.ScrollOptions,CustomChartBackgroundRanges:c.CustomChartBackgroundRanges,BaseTimeUnitWidthMinimum:c.BaseTimeUnitWidthMinimum,BaseTimeUnitWidthMaximum:c.BaseTimeUnitWidthMaximum,MinTimeUnitWidthForHeaderVisibility:c.MinTimeUnitWidthForHeaderVisibility,WorkTimeSchedule:c.WorkTimeSchedule,TimeRangeHighlightBehavior:c.TimeRangeHighlightBehavior,
AnchorTimeChanged:function(c,d){d.equals(a.options.AnchorTime)||a._setOption("AnchorTime",d)}});this._subscribeTimeLneEvents(d)},touchStart:!1,_startpx:0,startPoint:{},currentPoint:{},_subscribeTimeLneEvents:function(b){var c=this,d=0,e=0,f=b.data("TimeSpanHeaders"),g=this.$GanttChart;b.bind("touchstart",function(a){1<a.originalEvent.touches.length||(c._timelineScrollStart(null,a,f),a.preventDefault())});b.bind("touchmove",function(a){e=a.originalEvent.touches.length;1<a.originalEvent.touches.length||
c.options.ResizeToFit||c._timelineScrolling(null,a,f)});b.bind("touchend",function(a){1<e||(c.options.ResizeToFit&&c._timelineScrolling(null,a,f),c._timelineScrollEnd(a),e=0)});g.bind("touchstart",function(a){1<a.originalEvent.touches.length||(c._timelineScrollStart(null,a,f),a.preventDefault())});g.bind("touchmove",function(a){d=a.originalEvent.touches.length;1<a.originalEvent.touches.length||c.options.ResizeToFit||c._timelineScrolling(null,a,f)});g.bind("touchend",function(a){1<d||(c.options.ResizeToFit&&
c._timelineScrolling(null,a,f),c._timelineScrollEnd(a),d=0)});b.mousedown(function(a){c._timelineScrollStart(a,null,f)});b.mousemove(function(a){c.options.ResizeToFit||c._timelineScrolling(a,null,f)});b.mouseup(function(a){c.options.ResizeToFit&&c._timelineScrolling(a,null,f);c._timelineScrollEnd(a)});var h=a(document);h.mouseup(function(a){c._timelineScrollEnd(a)});h.bind("touchend",function(a){c._timelineScrollEnd(a)});b.bind("gesturestart",function(a){c._timelineZoomSart(a)});b.bind("gesturechange",
function(a){});b.bind("gestureend",function(a){c._timelineZooming(a);c._timelineZoomEnd(a)});g.bind("gesturestart",function(a){c._timelineZoomSart(a)});g.bind("gesturechange",function(a){});g.bind("gestureend",function(a){c._timelineZooming(a);c._timelineZoomEnd(a)})},_getDirectionFromAngle:function(a){a={down:45<=a&&135>a,left:135<=a||-135>=a,up:-45>a&&-135<a,right:-45<=a&&45>=a};var c,d;for(d in a)if(a[d]){c=d;break}return c},_timelineScrollStart:function(a,c,d){null==c?(d.ShouldScrollWithLeftMouse(a)&&
this.headerScrollTracker.StartDragging(a.pageX,d.options.BaseTimeUnitWidth,d),d.ShouldZoomWithLeftMouse(a)&&this.headerZoomTracker.StartDragging(a.pageX,d.options.BaseTimeUnitWidth)):(this._touchStart=!0,this._startpx=c.originalEvent.touches[0].pageX,this.headerScrollTracker.StartDragging(c.originalEvent.touches[0].pageX,d.options.BaseTimeUnitWidth,d))},_timelineScrolling:function(a,c,d){null==c?(this.headerZoomTracker.IsDragging()&&!this._touchStart&&this.headerZoomTracker.MouseMovedTo(a.pageX,d),
this.headerScrollTracker.IsDragging()&&!this._touchStart&&this.headerScrollTracker.MouseMovedTo(a.pageX,d)):this.headerScrollTracker.IsDragging()&&(a=c.originalEvent.touches.length?c.originalEvent.touches:c.originalEvent.changedTouches,this._startpx!=a[0].pageX&&this.headerScrollTracker.MouseMovedTo(a[0].pageX,d))},_timelineScrollEnd:function(a,c){this._touchStart=!1;this._startpx=0;this.headerZoomTracker.IsDragging(!1);this.headerScrollTracker.IsDragging(!1)},_timelineZoomSart:function(a){a=a.originalEvent;
this.startPoint={x:a.pageX,y:a.pageY}},_timelineZooming:function(a){a=a.originalEvent;this.currentPoint={x:a.pageX,y:a.pageY};var c=180*Math.atan2(this.currentPoint.y-this.startPoint.y,this.currentPoint.x-this.startPoint.x)/Math.PI,c=this._getDirectionFromAngle(c);"left"!=c&&"right"!=c||this.options.Parent._ValidateAndSetBaseTimeUnitWidth(this.options.BaseTimeUnitWidth*a.scale)},_timelineZoomEnd:function(a){this.startPoint={};this.currentPoint={}},TransformToVisual:function(a){return a+this.$GanttChart.scrollLeft()-
this.element.offset().left},ConvertXToTime:function(a){a=rqTCUtils.ConvertTimeUnitsToTimeSpan(this.options.BaseTimeScaleType,a/this.options.BaseTimeUnitWidth);return this.options.ComputedStartTime.addTimeSpan(a)},ConvertTimeToX:function(a){return rqTCUtils.ConvertToUnitsOfBaseScaleType(this.options.BaseTimeScaleType,this.options.ComputedStartTime,a,null)*this.options.BaseTimeUnitWidth},GetCurrentRightMostVisibleTime:function(){var b=a(this._getUniqueSelectorIdByID("rq-gc-horizondalScrollBar"))[0];
return this.ConvertXToTime(b.scrollLeft+b.clientWidth)},GetCurrentLeftMostVisibleTime:function(){var b=a(this._getUniqueSelectorIdByID("rq-gc-horizondalScrollBar"))[0].scrollLeft;return this.ConvertXToTime(b)},PageRight:function(){var b=a(this._getUniqueSelectorIdByID("rq-gc-horizondalScrollBar"))[0],c=b.scrollLeft,d=b.scrollWidth-b.clientWidth;0<this.options.TimeScaleHeaders.length&&this.options.TimeScaleHeaders.getById(0);c==d?(c=rqTCUtils.GetTimeSpan(this.options.ComputedStartTime.clone(),this.options.ComputedEndTime.clone()),
c=this.options.AnchorTime.addTimeSpan(c),this._setOption("AnchorTime",c),b.scrollLeft=0):(c=new Date(this.GetCurrentRightMostVisibleTime()),c=this.ConvertTimeToX(c),b.scrollLeft=c)},PageLeft:function(){var a=this.HScrollBar[0],c=a.scrollLeft,d=a.scrollWidth-a.clientWidth;0<this.options.TimeScaleHeaders.length&&this.options.TimeScaleHeaders.getById(0);0==c?(c=rqTCUtils.GetTimeSpan(this.options.ComputedStartTime.clone(),this.options.ComputedEndTime.clone()),c=this.options.AnchorTime.addTimeSpan(c.getEqualNegative()),
this._setOption("AnchorTime",c)):(d=this.GetCurrentLeftMostVisibleTime(),c=this.GetCurrentRightMostVisibleTime(),c=rqTCUtils.GetTimeSpan(d,c),d=d.addTimeSpan(c.getEqualNegative()),d=this.ConvertTimeToX(d));a.scrollLeft=d},ViewSpanChanged:function(a){var c=RadiantQ.Gantt.AnchorTimeToStartTimeConverter.Convert(this),d=RadiantQ.Gantt.AnchorTimeToEndTimeConverter.Convert(this);this._setOption("ComputedStartTime",c);this._setOption("ComputedEndTime",d);this.CanUpdate()&&(!0==a&&(this.element.unbind(".GanttControlTaskBarRefreshUI"),
this.element.unbind(".FlexyGanttTaskBarRefreshUI")),this._trigger("RefreshUi",this,{options:this.options,ForceToReDrawRows:a}),this.ScrollViewerElement_LayoutUpdated())},ResizeToFitChanged:function(){var a=this.element[0].clientWidth;this.options.ResizeToFit?this.options.ViewWidth!=a&&this._setOption("ViewWidth",a):(2E3!=this.options.ViewWidth&&this._setOption("ViewWidth",2E3),this.ScrollToAnchorTime())},destroy:function(){a(this.element).remove();a.Widget.prototype.destroy.call(this)}})})(jQuery);
var RQStyle=RadiantQ.Gantt.DefaultStyles;
$.widget("radiantq.GanttTableBase",$.ui.grid,{options:{RowHeight:20,HeaderHeight:20,Parent:null,IsProjectGantt:null,UseGridVirtualization:!1,EnableAlternativeRowBackground:null,GanttTableRowLoadedCallBack:null,dataFields:"type editor editorOptions template culture format iseditable editorElement isparentcelleditable".split(" "),CanUserReorderRows:!1},$uiGridBodyActualContent:null,_loaded:!1,_create:function(){var a=this;this._draw();this._columns();this.$uiGridBodyActualContent=$(".grid-body-actualContent",
this.uiGridBody);var b=RQStyle.CreateCssTxt("padding","0px")+RQStyle.CreateCssTxt("margin","0px")+RQStyle.CreateCssTxt("border",["1px","0px"],"width"),c=this.uiGridHead.find("tr");c[0].style.cssText+=b;c.css("border-bottom-width","2px");for(var b=RQStyle.CreateCssTxt("padding",["0.2em","0.4em"])+RQStyle.CreateCssTxt("margin","0px")+RQStyle.CreateCssTxt("border",["0px","0px","1px","0px"],"width"),c=c.find("th"),d=0;d<c.length;d++)c[d].style.cssText=0==d?c[d].style.cssText+(RQStyle.CreateCssTxt("padding",
["0.2em","0.4em"])+RQStyle.CreateCssTxt("margin","-1px")+RQStyle.CreateCssTxt("border",["0px","0px","1px","0px"],"width")):c[d].style.cssText+b,c[d].className=c[d].className?c[d].className+" gridcols rq-grid-column-"+d:"gridcols rq-grid-column-"+d;this.options.Parent.OnTableTemplateApplied();this._rowTemplate();this._source();this.uiGridHead.wrap("<div class='rq-grid-head-parent' ><div>");this.Headwraper=this.uiGridHead.parent();this.HeaderScrollBorder=$("<div class='ui-widget-header header' ></div>");
this.uiGridBody.css("border","0px solid #AAA");this.Headwraper.append(this.HeaderScrollBorder);this.HeaderScrollBorder.addClass("position").width(0).height(0);this.HeaderScrollBorder.hide();$(window).resize(function(){var a=this._toArray();null==a&&(a=[]);!0==this.options.UseGridVirtualization&&this.renderRows(a,this.uiGridBody)}.bind(this));this.UpdateSource(!1);var e=this;this.widget();var f=0;this.uiGridBody.scroll(function(){var b=e.uiGridBody.scrollLeft();if(e.options.UseGridVirtualization&&
f==b){e.uiGridBody.scrollLeft(f);var c=e._toArray();null==c&&(c=[]);e.renderRows(c,e.uiGridBody)}e.uiGridHeadAndFoot.scrollLeft()!=b&&(e.uiGridHeadAndFoot.scrollLeft(b),a.refreshScrollBsrVisibility());f=b});this.element.data("GanttTableBase",this);this._loaded=!0},_dndTracker:null,_updateRowDragDropTracker:function(){!1!=this._loaded&&(this.options.CanUserReorderRows?null==this._dndTracker&&(this._dndTracker=new RadiantQ.Gantt.RowDragDropTracker(this)):null!=this._dndTracker&&(this._dndTracker.Dispose(),
this._dndTracker=null))},_source:function(){},_toArray:function(){var a=this.options.source;return a?$.isArray(a.result)?a.result:a:null},collecionChangeFNC:void 0,UpdateSource:function(a){var b=this,c=null;void 0==this.collecionChangeFNC&&(this.collecionChangeFNC=function(a,e){null!=c&&clearTimeout(c);"insert"===a.type?(b._bindChange(e.items),b.insertRow(e)):"replaceAll"===a.type?(b._unbindChange(e.oldItems),b._bindChange(e.newItems)):(b.removeRow(e),b._unbindChange(e.items));c=setTimeout(function(){b._trigger("refresh");
b.refreshScrollBsrVisibility()},100)});b._bindChange(b._toArray());this.options.source&&this.options.source.CollectionChanged&&(this.options.source.CollectionChanged.isSubscribed(this.collecionChangeFNC)&&this.options.source.CollectionChanged.unsubscribe(this.collecionChangeFNC),this.options.source.CollectionChanged.subscribe(this.collecionChangeFNC));a&&this.refresh();this.refreshScrollBsrVisibility()},hideList:[],HideColumn:function(a){a=this.GetColumnbyIndex(a);a.Header.hide();a.Cells.hide();this.element.find("col:eq("+
a.Index+")").hide();this.uiGridHead.find("col:eq("+a.Index+")").hide();this.hideList.push(a.Index)},ShowColumn:function(a){a=this.GetColumnbyIndex(a);a.Header.show();a.Cells.show();this.element.find("col:eq("+a.Index+")").show();this.uiGridHead.find("col:eq("+a.Index+")").show();this.hideList.splice(this.hideList.indexOf(a.Index),1)},GetColumnbyIndex:function(a){"string"===typeof a&&(a=$("th#"+a,this.uiGridHead).index());var b=$("td.rq-grid-column-"+a,this.element);return{Header:$("th.rq-grid-column-"+
a,this.uiGridHead),Cells:b,Index:a}},_bindChange:function(a){if(a){var b=this;$.each(a,function(a,d){$.observable(d).bind("change.grid",function(){b.refreshItem(d)})})}},_draw:function(){var a=0;this.element.find("tr:first").children().map(function(){var b=$(this).outerWidth();a+=b;return b});this.element.css("min-width",a+"px");var b=RQStyle.CreateCssTxt("margin","0px")+RQStyle.CreateCssTxt("padding","0px")+RQStyle.CreateCssTxt("border","0px","width");this.element[0].style.cssText=b+"border-spacing:0";
var c=(this.uiGrid=$("<div class='ui-widget ui-grid' ></div>")).insertBefore(this.element),d=(this.uiGridHead=$("<div class='ui-widget-header ui-grid-head'></div>")).appendTo(c),e=(this.uiGridBody=$("<div class='ui-widget-content ui-grid-body'><div class='grid-body-actualContent' style='float:left;'></div></div>")).appendTo(c),c=(this.uiGridFoot=$("<div class='ui-widget-header ui-grid-foot'></div>")).appendTo(c),b=(this.uiGridHeadTable=$("<table style="+b+" class='ui-widget-content ui-grid-head-table'></table>")).appendTo(d),
d=(this.uiGridBodyTable=this.element).addClass("ui-grid-body-table").appendTo(e),c=(this.uiGridFootTable=$("<table class='ui-widget-content ui-grid-foot-table'></table>")).appendTo(c);this.uiGridHeadAndFoot=this.uiGridHead.add(this.uiGridFoot);this.uiGridHeadTableAndFootTable=this.uiGridHeadTable.add(this.uiGridFootTable);this.uiGridHeadAndFootAndTables=this.uiGridHeadAndFoot.add(this.uiGridHeadTableAndFootTable);d.find("caption").addClass("ui-widget-header").prependTo(b);if(!d.find("colgroup").length){d.find("col").remove();
var f=$("<colgroup></colgroup>").insertBefore(d.find("thead"));d.find("tr:eq(0)").children().each(function(a){f.append("<col>")})}var g=this,h=this.element.find("tr:first").children();e.find("colgroup").children().each(function(a){var b=$(h[a]).outerWidth();$(this).css("width",b+"px").addClass("gridcols rq-grid-col"+a);g.columnWidhInfo[a]=b});d.find("colgroup").clone().appendTo(b).clone().appendTo(c);d.find("thead").appendTo(b);d.find("tfoot").appendTo(c);b.find("tr").addClass("ui-widget-header");
b.find("th").addClass("ui-table-head-bg");this._hoverable(b.find("th").addClass("ui-widget-header"));this._hoverable(d.find("tr").addClass("ui-widget-header"));d.find("td").addClass("ui-widget-header");c.find("td").addClass("ui-widget-header")},columnWidhInfo:[],_rowTemplate:function(){if(!this.options.rowTemplate){var a=$.map(this.options.columns,function(a,c){if(a.template){var d=$(a.template)[0].innerHTML.trim(),d=$(d);d.addClass("gridcols rq-grid-column-"+c);return d[0].outerHTML}return'<td class="ui-widget-content gridcols rq-grid-column-'+
c+'">${'+a.property+"}</td>"}).join("");this.options.rowTemplate=$.template("<tr>"+a+"</tr>")}},updateRowHeight:function(){$("tbody > tr",this.element).height(this.options.RowHeight);this.refreshScrollBsrVisibility()},refreshItem:function(){},updateHeaderHeight:function(){this.widget();var a=$("tr",this.uiGridHeadTable);this.uiGridHead.outerHeight(!0);this.uiGridHead.height();this.uiGridHeadTable.outerHeight(!0);this.uiGridHeadTable.height();a.outerHeight(!0);a.height();var b=$(".rq-tsh-div",this.element.closest(".ui-layout-container")).outerHeight(!0)-
1;a.height(b);a=this.uiGrid.height()-(a.outerHeight(!0)+this.uiGridFoot.outerHeight(!0));this.uiGridBody.height(a);this.refreshScrollBsrVisibility()},refresh:function(){var a=this.uiGridBody.scrollTop();this._container().empty();this.hideTableBody();var b=this._toArray();if(null!=b){this.renderRows(b,this.uiGridBody);"fill"===this.options.heightStyle&&this.uiGridBody.height(NaN);this.uiGridBody.scrollTop(a);if(!0==this.options.IsProjectGantt){a=[{keyName:"Indent",name:window.RadiantQ_IndentString,
icon:"Indent"},{keyName:"Outdent",name:window.RadiantQ_OutdentString,icon:"Outdent"}];b=new RadiantQ.Gantt.ContextMenuImpl.ContextMenu("#"+this.uiGridBodyTable[0].id+" td.ui-widget-content");b.AddNewItems(a);b.ItemClicked.subscribe(function(a,b){var c=this.element.parents(".rq-ganttBase").data("GanttControl"),g=c.SelectedItems;if("Indent"==a)for(var h=0;h<g.length;h++)c.Indent(g[h]);if("Outdent"==a)for(h=g.length-1;0<=h;h--)c.Outdent(g[h])}.bind(this));var c=this;b.BeforeContextMenu.subscribe(function(a,
b){c.options.Parent.options.IsReadOnly&&(b.data.items.Indent.disabled=function(){return!0},b.data.items.Outdent.disabled=function(){return!0})});this.options.Parent.TableContextMenu=b}else void 0==this.options.Parent.TableContextMenu&&(a=[],b=new RadiantQ.Gantt.ContextMenuImpl.ContextMenu("#"+this.uiGridBodyTable[0].id+" td.ui-widget-content"),b.AddNewItems(a),this.options.Parent.TableContextMenu=b);this._trigger("refresh");this._updateRowDragDropTracker()}},renderRows:function(a,b){var c=this.options.UseGridVirtualization,
d=3==arguments.length?arguments[2]:!1,e=$("table.ui-grid-body-table",b),f=$("div.grid-body-actualContent",b),g=$("tbody",e).empty(),h=0,k=0,l=this.options.RowHeight;if(c){var n=b.scrollTop(),k=Math.floor(n/l);e[0].style.setProperty("margin-top",n-n%l+"px","important")}var e=document.createDocumentFragment(),n=this.isLoadingRowEventIsRegisterd(),p=this.options.GanttTableRowLoadedCallBack;if(null!=p){var m=b.height();0<a.length&&f.height(l*a.length+1);for(f=k;f<a.length&&!(c&&h>=m);f++){var k=a[f],
q=this._newRow(k,n,p,l,!0,d);e.appendChild(q[0]);!1===d&&(q[0]._displayIndex=f,"function"===typeof k.DisplayIndex?k.DisplayIndex(f):k.DisplayIndex=f,h+=l)}}g[0].appendChild(e);this._setAlternativeRowBackground(b)},hideTableBody:function(){this._container().css("display","none");this.visiblity=!1},visiblity:!1,showTableBody:function(){!1==this.visiblity&&(this._container().css("display","table-row-group"),this._scrollBarTimer=setTimeout(function(){this.refreshScrollBsrVisibility()}.bind(this),0),this.visiblity=
!0)},isLoadingRowEventIsRegisterd:function(){return null!=jQuery._data(this.element[0],"events")[this.widgetName.toLowerCase()+"loadingrow"]||this.options.LoadingRow},_scrollBarTimer:null,refreshScrollBsrVisibility:function(){null!=this._scrollBarTimer&&clearTimeout(this._scrollBarTimer);this._scrollBarTimer=setTimeout(function(){var a;if(this.uiGridBody[0].scrollHeight>=this.uiGridBody[0].clientHeight){if(0==this.uiGridBody[0].offsetWidth)return;a=this.uiGridBody[0].offsetWidth-this.uiGridBody[0].clientWidth;
this.HeaderScrollBorder.show();this.uiGridHeadAndFoot.width(this.uiGridBody.width()-a);this.HeaderScrollBorder.width(a);a=this.uiGridHeadAndFoot.height()+2;this.HeaderScrollBorder.css("margin-left",this.uiGridHeadAndFoot.width()+"px");this.HeaderScrollBorder.css("margin-top",-a+"px");this.HeaderScrollBorder.height(a)}else this.uiGridHeadAndFoot.width(this.uiGridBody.width()),this.HeaderScrollBorder.width(0),this.HeaderScrollBorder.hide();this._setAlternativeRowBackground(this.uiGridBody)}.bind(this),
0)},_setAlternativeRowBackground:function(a){!0==this.options.EnableAlternativeRowBackground&&($("tr.rq-grid-alternative-background",a).removeClass("rq-grid-alternative-background"),$("tr.rq-grid-row:even",a).addClass("rq-grid-alternative-background"));this.options.CanUserReorderRows&&$(".rq-grid-column-0",this.uiGridBody).addClass("rq-grid-row-header")},OnDropped:function(a){this.options.Parent.SelectedRowsDropped.raise({DroppedItems:a})},CanDrop:function(a,b){var c={DragOverRowIndex:a,DropAsChildren:b,
Cancel:!1};this.options.Parent.SelectedRowsDrag.raise(c);return!0==c.Cancel},OnDrop:function(a,b,c,d){a={FirstSelectedItem:a,SelectedItemsCount:b,DestinationIndex:c,DropAsChildren:d,Cancel:!1};this.options.Parent.SelectedRowsDrop.raise(a);return!1==a.Cancel},_setOption:function(a,b){$.ui.grid.prototype._setOption.apply(this,arguments);switch(a){case "HeaderHeight":this.updateHeaderHeight();break;case "RowHeight":this.updateRowHeight();break;case "source":this.updateHeaderHeight(),this.UpdateSource(!0)}},
destroy:function(){$.ui.grid.prototype.destroy.apply(this,arguments);this.element.parent().parent().parent().parent().remove()}});
$.widget("radiantq.FlexyTable",$.radiantq.GanttTableBase,{options:{},_create:function(){RQStyle.init();$.radiantq.GanttTableBase.prototype._create.apply(this,arguments);this.element.data("FlexyTable",this);this.element[0].ItemsSource=this.options.source},_newRow:function(a,b,c,d,e){var f=null,g,h=6==arguments.length?arguments[5]:!1,f=$.ui.grid.prototype._newRow.apply(this,arguments);g=f[0];g["data-grid-item"]=a;this.previousRow=$(g.cloneNode(!0));f.addClass("rq-grid-row");g.style.cssText+=RQStyle.GanttTableTRStyleTxt;
f.css("height",d+"px");!1==h&&a.TableRow(f);g=f.find("td");for(var k=0;k<g.length;k++)g[k].style.cssText+=RQStyle.GanttTableTDStyleTxt,!0==e&&-1!=this.hideList.indexOf(k)&&(g[k].style.display="none");a.IsSelected()&&f.addClass("rq-row-selected ui-state-active");a.IsParentType()&&f.css("font-weight","bold");c&&c(f,a);!1==h&&b&&this._trigger("LoadingRow",this,{Row:f,Data:a});return f},UpdateParentRow:function(a){a=a.items[0].HierarchicalItem._parentItem;a.TableRow().replaceWith(this._newRow(a.corrFlexyNodeData,
this.isLoadingRowEventIsRegisterd()))},_insertTriggerTimer:null,insertRow:function(a){var b=a.index;a=a.items[0];a._displayIndex=b;0==b?this._container().find("tr").eq(0).before(this._newRow(a,this.isLoadingRowEventIsRegisterd(),this.options.GanttTableRowLoadedCallBack,this.options.RowHeight,!0)):this._container().find("tr").eq(b-1).after(this._newRow(a,this.isLoadingRowEventIsRegisterd(),this.options.GanttTableRowLoadedCallBack,this.options.RowHeight,!0));null!=this._insertTriggerTimer&&clearTimeout(this._insertTriggerTimer);
this._insertTriggerTimer=setTimeout(function(){this.uiGridBody.trigger("scroll")}.bind(this),0);this.$uiGridBodyActualContent.height(this.options.RowHeight*this._toArray().length+1)},_removeTriggerTimer:null,removeRow:function(a){a=a.index;this._container().find("tr").eq(a).remove();null!=this._removeTriggerTimer&&clearTimeout(this._removeTriggerTimer);this._removeTriggerTimer=setTimeout(function(){this.$uiGridBodyActualContent.height(this.options.RowHeight*this._toArray().length+1);this.uiGridBody.trigger("scroll")}.bind(this),
0)},InsertRowsAsChild:function(a,b,c){},OnBeforeDragStart:function(a,b){for(var c=this.options.Parent.element.data("GanttRowselectable"),d=[],e=0;e<c.selectedItems.length;e++)d.push(c.selectedItems[e]);return d},MoveRows:function(a,b,c){},destroy:function(){$.radiantq.GanttTableBase.prototype.destroy.apply(this,arguments)},_setOption:function(a,b){$.radiantq.GanttTableBase.prototype._setOption.apply(this,arguments)}});
$.widget("radiantq.GanttTable",$.radiantq.GanttTableBase,{options:{},_create:function(){RQStyle.init();$.radiantq.GanttTableBase.prototype._create.apply(this,arguments);this.element.data("GanttTable",this)},GC:null,previousRow:null,timeOutFunctions:null,_newRow:function(a,b,c,d,e){var f=null,g,h=6==arguments.length?arguments[5]:!1;this.previousRow?f=$(this.previousRow[0].cloneNode(!0)):(f=$.ui.grid.prototype._newRow.apply(this,arguments),f.addClass("rq-grid-row"),this.previousRow=$(f[0].cloneNode(!0)));
g=f[0];g.style.cssText+=RQStyle.GanttTableTRStyleTxt+"height:"+d+"px";g["data-grid-item"]=a;g=g.cells;for(var k=0;k<g.length;k++)g[k].style.cssText+=RQStyle.GanttTableTDStyleTxt,!0==e&&-1!=this.hideList.indexOf(k)&&(g[k].style.display="none"),!1==h&&"ShowContextMenu"==this.options.Parent.options.TouchTapAction&&(g[k].addEventListener("touchstart",this._onTouchstart.bind(this),!1),g[k].addEventListener("touchend",this._onTouchend.bind(this),!1),g[k].addEventListener("MSPointerDown",this._onTouchstart.bind(this),
!1),g[k].addEventListener("MSPointerUp",this._onTouchend.bind(this),!1));a.TableRow(f);c(f,a);!1==h&&b&&this._trigger("LoadingRow",this,{Row:f,Data:a});return f},tapDownX:null,tapDownY:null,touchStartTime:null,_onTouchstart:function(a){a=a.touches?a.touches[0]:a;this.tapDownX=a.clientX;this.tapDownY=a.clientY;this.touchStartTime=new Date},OnBeforeDragStart:function(a,b){var c=this.options.Parent,d=c.element.data("GanttRowselectable");this._flattenSelection();return c.OnBeforeDragStart(a,d.selectedItems.length)},
_flattenSelection:function(){var a=this.options.Parent,b=this.options,c=a.element.data("GanttRowselectable"),d=a.SelectedItems,e=d[0].$tableRow||d[0].TableRow(),f=d[d.length-1].$tableRow||d[d.length-1].TableRow();a.options.UseVirtualization?(f=f[0]._displayIndex,e=e[0]._displayIndex):(f=f[0].rowIndex,e=e[0].rowIndex);a.options.SelectionMode==RadiantQ.Gantt.SelectionMode.Single&&window.console&&console.error("Dragging feature requires selecting multiple rows, but the SelectionMode is set to Single. This is not supported. Set SelectionMode to Multiple or turn off dragging feature.");
if(d.length<f-e+1)for(a=e;a<=f;a++)!1==c.selectedItems.containsValue(b.source[a])&&c.selectedItems.add(b.source[a])},_onTouchend:function(a){var b=a.changedTouches?a.changedTouches[0]:a;this.tapDownX==b.clientX&&this.tapDownY==b.clientY&&"mouse"!=a.pointerType&&4!=a.pointerType&&600>=new Date-this.touchStartTime&&(clearTimeout(self.timeOutFunctions),self.timeOutFunctions=setTimeout(function(){$(this).contextMenu({x:b.clientX,y:b.clientY})}.bind(a.currentTarget),500))},_BoldConverterProp:null,BoldConverterProp:function(a){if(void 0==
a)return this._BoldConverterProp;this._BoldConverterProp=a},BoolToBoldConverter:{Convert:function(a,b,c){!0==a?b.TableRow().css("font-weight","bolder"):b.TableRow().css("font-weight","normal")}},_insertTriggerTimer:null,insertRow:function(a){var b=a.index;a=a.items[0];$tr=this._container().find("tr");0==b?$tr.length?$tr.eq(0).before(this._newRow(a,this.isLoadingRowEventIsRegisterd(),this.options.GanttTableRowLoadedCallBack,this.options.RowHeight,!0)):this._container().append(this._newRow(a,this.isLoadingRowEventIsRegisterd(),
this.options.GanttTableRowLoadedCallBack,this.options.RowHeight,!0)):(this.options.UseGridVirtualization?(null!=this._insertTriggerTimer&&clearTimeout(this._insertTriggerTimer),this._insertTriggerTimer=setTimeout(function(){this.uiGridBody.trigger("scroll")}.bind(this),0)):$tr.eq(b-1).after(this._newRow(a,this.isLoadingRowEventIsRegisterd(),this.options.GanttTableRowLoadedCallBack,this.options.RowHeight,!0)),this.$uiGridBodyActualContent.height(this.options.RowHeight*this.options.Parent.ActivityViews.length+
1))},_removeTriggerTimer:null,removeRow:function(a){a=a.index;this._container().find("tr").eq(a).remove();null!=this._removeTriggerTimer&&clearTimeout(this._removeTriggerTimer);this._removeTriggerTimer=setTimeout(function(){this.$uiGridBodyActualContent.height(this.options.RowHeight*this.options.Parent.ActivityViews.length+1);this.uiGridBody.trigger("scroll")}.bind(this),0)},GetGC:function(){return this.element.parents("div.rq-ganttBase").data("GanttControl")},MoveRows:function(a,b,c){var d=new RadiantQ.Gantt.Utils.DelayUpdates,
e={value:0},f={value:0};this.GetGC().MoveRows(a,b,c,null,e,f);0<e.value&&this.PostMove(a,e,f);d.Dispose()},PostMove:function(a,b,c){var d=this.options.source;c.value++;return d.Move(a,b.value,c.value)},InsertRowsAsChild:function(a,b,c){var d=new RadiantQ.Gantt.Utils.DelayUpdates,e=this.GetGC(),f={value:0},g={value:0},h=e.ActivityViews[c];if(h){if(0<h.Activity.ChildActivities.length&&!0==h.IsExpanded){c=e.GetIndexOfLastDescendant(h);if(c>=a&&c<=a+b-1)return;e.MoveRows(a,b,c,h,f,g);0<f.value&&this.PostMove(a,
f,g)}else if(e.MoveRows(a,b,c,null,f,g),0<f.value){a=this.PostMove(a,f,g);b={};for(g=0;g<f.value;g++)b[g]=e.ActivityViews[g+a].IndentLevel;for(g=h=a;g<a+f.value;g++)c=e.ActivityViews.length,e.ActivityViews[h].IndentLevel==b[g-a]?(e.Indent(e.ActivityViews[h]),c==e.ActivityViews.length?h++:g+=c-e.ActivityViews.length-1):h++}d.Dispose()}},destroy:function(){$.radiantq.GanttTableBase.prototype.destroy.apply(this,arguments)},_setOption:function(a,b){$.radiantq.GanttTableBase.prototype._setOption.apply(this,
arguments)}});
$.widget("radiantq.GanttBase",{BottomTwoHeaders:null,options:{SyncRowBackgrounds:null,TimeScaleHeaders:null,RowHeight:25,BaseTimeScaleType:null,ComputedGridHeaderHeight:null,SpecialLineInfos:null,BottomTwoHeaders:null,CustomChartBackgroundRanges:null,WorkingTimeBackground:null,NonWorkingTimeBackground:null,BaseTimeUnitWidth:null,BaseTimeUnitWidthMaximum:null,BaseTimeUnitWidthMinimum:10,IsDependencyLinesReadOnly:!1,ZoomOptions:null,ScrollOptions:null,MinTimeUnitWidthForHeaderVisibility:10,RoundTimeEditsTo:null,
GanttTable:null,FlatItemsSource:null,TaskItemTemplate:null,ProgressBarTemplate:null,ParentTaskItemTemplate:null,TaskStartTimeProperty:null,ParentTaskStartTimeProperty:null,TaskEndTimeProperty:null,ParentTaskEndTimeProperty:null,TasksListProperty:null,ParentTasksListProperty:null,TaskTooltipTemplate:null,KnockoutObjectName:null,DependencyLineColor:null,DependencyListSource:null,DependencyLineStartRowItem:null,DependencyLineEndRowItem:null,DependencyLineStartItem:null,DependencyLineEndItem:null,DependencyLineType:null,
UseChartVirtualization:!1,UseVirtualization:!1,WorkTimeSchedule:"",EnableAlternativeRowBackground:!0,TimeRangeHighlightBehavior:RadiantQ.Gantt.TimeRangeHighlightBehavior.None,SelectionMode:RadiantQ.Gantt.SelectionMode.Multiple,GanttTableRowLoadedCallBack:null,MovingInfoPopup:null,ResizeInfoPopup:null,CustomProgressCalculation:null,TaskBarBrowseToCueLeftTemplate:null,TaskBarBrowseToCueRightTemplate:null,IsReadOnly:!1,IsEffortReadOnly:!1,IsStartTimesReadOnly:!1,IsProgressPercentReadOnly:!1,TouchTapAction:null,
EnableDropAsChild:!1,OnTaskBarLoad:null,CanInsertPropertyChangeTriggeringPropertiesInData:!1},HeaderHeight:null,SelectedRowsDrag:new ObjectEvent("SelectedRowsDrag"),SelectedRowsDrop:new ObjectEvent("SelectedRowsDrop"),SelectedRowsDropped:new ObjectEvent("SelectedRowsDropped"),GanttType:null,IsGanttTable:null,_roundTimeEditsTo:null,RoundTimeEditsTo:function(a){if(void 0==a){if(this._roundTimeEditsTo)return this._roundTimeEditsTo;this._roundTimeEditsTo=RadiantQ.Gantt.RoundToOptions.None}else this._roundTimeEditsTo=
a},_ganttChartIsLoaded:!1,GanttChartIsLoaded:function(a){if(void 0==a){if(this._ganttChartIsLoaded)return this._ganttChartIsLoaded;this._ganttChartIsLoaded=!1}else this._ganttChartIsLoaded=a},_create:function(){this._validateOptions();this._roundTimeEditsTo=this.options.RoundTimeEditsTo?this.options.RoundTimeEditsTo:RadiantQ.Gantt.RoundToOptions.None;var a=this;this.GanttChartLoaded=new ObjectEvent("GanttChartLoaded");this._ganttChartIsLoaded=!1;this.IsGanttTable=null!=this.options.GanttTable;""===
this.options.WorkTimeSchedule&&(this.options.WorkTimeSchedule=RadiantQ.Gantt.WorkTimeSchedule.Schedule8X5);this.element.addClass("rq-ganttBase radiantq-ui-GanttBase");a=this;$(window).resize(function(){a.RefreshGanttHeight()});null==this.options.TimeScaleHeaders&&(this.options.TimeScaleHeaders=this.defaultTimeScaleHeaders());this.options.UseVirtualization&&(this.options.UseChartVirtualization=!0);this.initializeGanttBase();this.IsTableCreated=!1;this._layoutGanttControls();this.initTable();this.IsTableCreated=
!0;this.UpdateDatasource(!0);this.initGanttChart()},RefreshGanttHeight:function(){if(!this.IsTableCreated||!this.GetGanttTable())return!1;this.GetGanttTable().updateHeaderHeight(this.HeaderHeight);this.UpdateChartHeight();var a=this.GetGanttChart().data("GanttChart");a.updateChatBGHeight();a.refreshDockPanel();this.UpdateHeight()},OnChartTemplateApplied:function(){this._trigger("GanttChartTemplateApplied")},IsTaskReadOnly:function(a){return this._trigger("IsTaskReadOnlyCallback",this,a)},OnTableTemplateApplied:function(){this._trigger("GanttTableTemplateApplied")},
OnBaseTimeUnitWidthChanged:function(){this._trigger("Zoomed")},HideGanttGrid:function(a){if(a){$($(".ui-layout-resizer",this.element)).css("display","none");a=$("#gantt_container_GanttChart",this.element);$(a).css("left","0px");$(a).css("width",parseInt($(a).width())+10+"px");var b=$("div.rq-gc-rowsParent",this.element),c=$("div.rq-gc-dependencysParent",this.element);b.css("width",this.GetGanttChart().data("GanttChart").options.ViewWidth+"px");b.css("overflow-y","auto");$(b).scroll(function(){0<c.length&&
(c[0].scrollTop=b[0].scrollTop)})}},defaultTimeScaleHeaders:function(){var a=new RadiantQ.Gantt.TimeScaleHeaderDefinition;a.Type=ns_gantt.TimeScaleType.Days;var b=new RadiantQ.Gantt.TimeScaleHeaderDefinition;b.Type=ns_gantt.TimeScaleType.Weeks;var c=new RadiantQ.Gantt.TimeScaleHeaderDefinitions;c.add(b);c.add(a);return c},_workTimeSchedule:null,WorkTimeSchedule:function(a){if(void 0==a)return this._workTimeSchedule;a!=this._workTimeSchedule&&(this._workTimeSchedule=a,this.options.WorkTimeSchedule=
a,this.OnWorkTimeScheduleChanged())},UpdateChartHeight:function(){var a=$("div.ui-grid-body",this.element);$("table.ui-grid-body-table",this.element);if(!$(this._getUniqueSelectorIdByID("TopDivContainer"),this.element).data("layout").state.west.isClosed){var b=$("div.rq-gc-rowsParent",this.element);$("table",b);this.options.UseChartVirtualization||b.css("height",a[0].clientHeight);b=$("div.rq-gc-dependencysParent",this.element);if(0<b.length){var c=Math.min(a.height(),a[0].clientHeight);b.css("height",
c);a=$(".grid-body-actualContent",a).height();this.options.UseChartVirtualization?b.children().height(a):b.children().css("height",a)}}},RefreshGanttWidth:function(){var a=$(this._getUniqueSelectorIdByID("TopDivContainer"),this.element),b=this.GetGanttChart(),c=$(".ui-layout-resizer",this.element),d=$(".ui-layout-west",this.element);a.data("layout").state.west.isClosed?b.width(a[0].clientWidth-c[0].clientWidth):b.width(a[0].clientWidth-(c[0].clientWidth+d[0].clientWidth))},OnWorkTimeScheduleChanged:function(){this.UpdateCalendarSettingInScaleHeaders()},
UpdateCalendarSettingInScaleHeaders:function(){for(var a=0;a<this.options.TimeScaleHeaders.length;a++)this.options.TimeScaleHeaders[a].WorkTimeSchedule=this.options.WorkTimeSchedule},ChartVerticalScrollSyncWithTable:function(){var a=this,b=$("div.ui-grid-body",this.element);$("table.ui-grid-body-table",this.element);var c=$("div.rq-gc-rowsParent",this.element);$("table.rq-gc-rowsParent-table",this.element);var d=$("div.rq-gc-dependencysParent",this.element);b.scroll(function(){this.options.UseChartVirtualization&&
"FlexyGantt"!=this.GanttType||(0<d.length&&d.css("height",c.height()),0<d.length&&(a.options.UseChartVirtualization?$(d[0].children).height(b[0].scrollHeight):$(d[0].children).css("height",$(c[0].children).css("height"))),c.scrollTop()!=b.scrollTop()&&(this.options.UseChartVirtualization||c.scrollTop(b.scrollTop()),0<d.length&&$(d).scrollTop(c.scrollTop())))}.bind(this))},_createUniqueID:function(a){return this.element[0].id+"_"+a},_validateOptions:function(){var a=this.options;window.console&&RadiantQ.CanUseDefineProperty&&
(a.GanttTable&&(a.GanttTable.length?"TABLE"==a.GanttTable[0].nodeName:"TABLE"==a.GanttTable.nodeName)||console.error("The GanttTable option is not set. Set it to a jQuery wrapper element refering a HTML table."),a.TaskTooltipTemplate&&"string"!=typeof a.TaskTooltipTemplate&&!1==(a.TaskTooltipTemplate.length?a.TaskTooltipTemplate[0]instanceof HTMLElement:a.TaskTooltipTemplate instanceof HTMLElement)&&console.error("TaskTooltipTemplate is not valid. Please make sure this references a valid HTML string that will be displayed in the tooltip. Or a jQuery wrapper element."),
a.MovingInfoPopup&&"string"!=typeof a.MovingInfoPopup&&!1==(a.MovingInfoPopup.length?a.MovingInfoPopup[0]instanceof HTMLElement:a.MovingInfoPopup instanceof HTMLElement)&&console.error("MovingInfoPopup is not valid. Please make sure this references a valid HTML string that will be displayed in the tooltip. Or a jQuery wrapper element."),a.ResizeInfoPopup&&"string"!=typeof a.ResizeInfoPopup&&!1==(a.ResizeInfoPopup.length?a.ResizeInfoPopup[0]instanceof HTMLElement:a.ResizeInfoPopup instanceof HTMLElement)&&
console.error("ResizeInfoPopup is not valid. Please make sure this references a valid HTML string that will be displayed in the tooltip. Or a jQuery wrapper element."),null==a.GanttTableRowLoadedCallBack&&console.log("GanttTableRowLoadedCallBack is not set, the table will possibly render empty."))},getWindow:function(){var a=" >rb/< moc.qtnaidar@selas tcatnoc ro woleb knil kcilc esahcrup oT  >rb/< ttnaG yreuQj QtnaidaR gnitaulavE rof sknahT".split("").reverse().join(""),b="nottub".split("").reverse().join(""),
c="esneciL esahcruP".split("").reverse().join(""),d="lairT eunitnoC".split("").reverse().join(""),e=')"knalb_" ,"xpsa.sliateDredrO/moc.qtnaidar.redro//:ptth"(nepo.wodniw'.split("").reverse().join(""),f=$("<div> <div> <p>"+a+"<"+b+">"+d+" </"+b+"><"+b+">"+c+"</"+b+"> </p></div></div>"),a="0F4E3B#".split("").reverse().join(""),g=this;f.css({height:"80%",width:"80%","background-size":"100% 100%","background-color":a,"z-index":"100000",position:"absolute",color:"white",top:"50px",left:"50px",border:"1px solid #DEDEDE"});
var h=">/ gmi<".split("").reverse().join(""),k=$(h,{width:"100%",height:"100%"}).attr("src","gnp.gninraWesnecil/segamI/selytS/crS".split("").reverse().join("")).load(function(){this.complete&&($(f).append(k),$(g._getUniqueSelectorIdByID("TopDivContainer"),g.element).append(f))}).error(function(){var a=$(h,{width:"100%",height:"100%"}).attr("src","gnp.gninraWesnecil/segamI/selytS/crS/../..".split("").reverse().join("")).load(function(){this.complete&&($(f).append(a),$(g._getUniqueSelectorIdByID("TopDivContainer"),
g.element).append(f))}).error(function(){$(g._getUniqueSelectorIdByID("TopDivContainer"),g.element).append(f)})}),a=f.children();a.css({position:"absolute",height:"15%",width:"100%","font-size":"40px",position:"absolute",top:"40%"});a=a.children();a.css({position:"absolute",width:"100%","font-size":"20px","margin-left":"5%",position:"relative",top:"-40%"});b=a.children(b);$(b[0]).css({"font-size":"20px",left:"50%","margin-left":"18%","margin-top":"2%"});$(b[1]).css({"font-size":"18px","margin-left":"1%"});
$(b[0]).click(function(){f.remove()});$(b[1]).click(function(){eval(e);f.remove()});return f},initializeGanttBase:function(){null==this.options.ZoomOptions&&(this.options.ZoomOptions=RadiantQ.Gantt.ChartZoomOptions.MouseWheelZoomOnTimeScaleHeaders|RadiantQ.Gantt.ChartZoomOptions.MouseWheelZoomOnGanttChart|RadiantQ.Gantt.ChartZoomOptions.LeftMouseButtonDownDrag);null==this.options.ScrollOptions&&(this.options.ScrollOptions=RadiantQ.Gantt.ChartScrollOptions.CtrlAndLeftMouseButtonDownDrag);this._validateBasebaseTimeUnitWidthMaximum();
this._validateBasebaseTimeUnitWidth();this._validateMinTimeUnitWidthForHeaderVisibility();this.options.BaseTimeScaleType=RadiantQ.Gantt.TimeScaleType.Hours;if(null==this.options.BaseTimeUnitWidth||0==this.options.BaseTimeUnitWidth)this.options.BaseTimeUnitWidth=25},initTimeSpaneHeader:function(){var a=this;this.OnHeadersChanged(null,null);null!=this.options.TimeScaleHeaders&&this.options.TimeScaleHeaders.CollectionChanged.subscribe(function(b,c){a.OnHeadersChanged(b,c)});a=this;$(this.getTimeSpanHeader()).mousewheel(function(b,
c){b.preventDefault();b.stopPropagation();var d=!1;RadiantQ.Gantt.isModifierKeyIsPresed(b)||(a.options.ZoomOptions&RadiantQ.Gantt.ChartZoomOptions.MouseWheelZoomOnTimeScaleHeaders)==RadiantQ.Gantt.ChartZoomOptions.MouseWheelZoomOnTimeScaleHeaders&&(d=!0);d&&a.ZoomBySteps(c)});$(this.GetGanttChart()).mousewheel(function(b,c){b.preventDefault();var d=!1;RadiantQ.Gantt.isModifierKeyIsPresed(b)||(a.options.ZoomOptions&RadiantQ.Gantt.ChartZoomOptions.MouseWheelZoomOnGanttChart)==RadiantQ.Gantt.ChartZoomOptions.MouseWheelZoomOnGanttChart&&
(d=!0);d&&a.ZoomBySteps(c)});$(this.getTimeSpanHeader()).bind("timespanheaderszoomed",function(b,c){a._ValidateAndSetBaseTimeUnitWidth(c)})},TrySetEndTime:function(a){this.GetGanttChart().data("GanttChart").TrySetEndTime(a)},ScrollToAnchorTime:function(){this.GetGanttChart().data("GanttChart").ScrollToAnchorTime()},SetStartTime:function(a){this.GetGanttChart().data("GanttChart").SetStartTime(a)},ConvertXToTime:function(a){return this.GetGanttChart().data("GanttChart").ConvertXToTime(a)},ConvertTimeToX:function(a){return this.GetGanttChart().data("GanttChart").ConvertTimeToX(a)},
RoundUp:function(a){return this.RoundTime(a,this.GetActualRoundToOption())},RoundUpDuration:function(a){var b=Date.today();a=b.addTimeSpan(a);a=this.RoundTime(a,this.GetActualRoundToOption());return rqTCUtils.GetTimeSpan(b,a)},GetActualRoundToOption:function(){if(this.RoundTimeEditsTo()!=RadiantQ.Gantt.RoundToOptions.Auto)return this.RoundTimeEditsTo();var a=this.RoundTimeEditsTo();switch(BaseTimeScaleType){case TimeScaleType.Days:a=RadiantQ.Gantt.RoundToOptions.FifteenMinutes;break;case TimeScaleType.Minutes:a=
RadiantQ.Gantt.RoundToOptions.None;break;case TimeScaleType.Hours:a=RadiantQ.Gantt.RoundToOptions.Minute;break;case TimeScaleType.Months:a=RadiantQ.Gantt.RoundToOptions.Day;break;case TimeScaleType.Weeks:a=RadiantQ.Gantt.RoundToOptions.Day;break;case TimeScaleType.Years:a=RadiantQ.Gantt.RoundToOptions.Day}return a},RoundTime:function(a,b){var c=a.getHours(),d=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0);switch(b){case RadiantQ.Gantt.RoundToOptions.HalfDay:if(d<a){var e=d.clone();if(d==
a||e.addHours((new RQTimeSpan(0,12,0,0)).getTotalHours())==a)break;return 12>c?d.addHours((new RQTimeSpan(0,12,0,0)).getTotalHours()):d.addHours((new RQTimeSpan(1,0,0,0)).getTotalHours())}return d;case RadiantQ.Gantt.RoundToOptions.Day:return d.isLessThan(a)&&12<a.getHours()?d.clone().addHours((new RQTimeSpan(1,0,0,0)).getTotalHours()):d;case RadiantQ.Gantt.RoundToOptions.Hour:return c=new Date(a.getFullYear(),a.getMonth(),a.getDate(),c,0,0),c.isLessThan(a)?c.clone().addHours((new RQTimeSpan(0,1,
0,0)).getTotalHours()):c;case RadiantQ.Gantt.RoundToOptions.ThirtyMinutes:return d=a.getMinutes(),0==d?d=0:30>=d?d=30:59>=d&&(d=0,c++),23<c&&(c=0,a=a.clone().addHours((new RQTimeSpan(1,0,0,0)).getTotalHours())),new Date(a.getFullYear(),a.getMonth(),a.getDate(),c,d,0);case RadiantQ.Gantt.RoundToOptions.FifteenMinutes:return d=a.getMinutes(),0==d?d=0:15>=d?d=15:30>=d?d=30:45>=d?d=45:59>=d&&(d=0,c++),23<c&&(c=0,a.addHours((new RQTimeSpan(1,0,0,0)).getTotalHours())),new Date(a.getFullYear(),a.getMonth(),
a.getDate(),c,d,0);case RadiantQ.Gantt.RoundToOptions.Minute:return c=new Date(a.getFullYear(),a.getMonth(),a.getDate(),c,a.getMinutes(),0),c<a?c.addMinutes((new RQTimeSpan(0,0,1,0)).getTotalMinutes()):c}return a},triggerChildWidgetsCreated:function(){this._trigger("ChildWidgetsCreated")},BringTimeIntoView:function(a){this.GetGanttChart().data("GanttChart").BringTimeIntoView(a)},OnHeadersChanged:function(a,b){if(0!=this.options.TimeScaleHeaders.length){var c=!1,d=this.options.TimeScaleHeaders,e=new RadiantQ.Gantt.BottomTwoHeaderDefinitions,
f=d.length-1,g=this.GetBaseScaleTypeLCD(d[f]);if(0<d.length){if(null!=d)for(;0<=f&&(!this.IsHeaderViewable(d[f],g)||(e.add(d[f]),2!=e.length));f--);e.IsContentEqual(this.BottomTwoHeaders)||(this.BottomTwoHeaders=e,c=!0);for(f=0;f<d.length;f++)this.options.TimeScaleHeaders.getById(f).BaseTimeScaleType=g}c?this._updateGanttChartsBottomTwoHeader(g):"BaseUnitWidthChanges"==b?this._setOption("BottomTwoHeaders",this.BottomTwoHeaders):null!=b&&this._triggerHeaderCollectionschangedEvent(a,b)}},_triggerHeaderCollectionschangedEvent:function(a,
b){$.radiantq.GanttBase.prototype.element=this.element;$.radiantq.GanttBase.prototype._trigger("HeaderCollectionschanged",a,{event:a,value:b,options:this.options})},IsHeaderViewable:function(a,b){var c=a.Type,d=1;if(c==ns_gantt.TimeScaleType.Custom){if(null==a.CustomTimeScaleTypeHint)throw"CustomTimeScaleTypeHint is not set in TimeScaleHeaderDefinition of TimeScaleType.Custom.";c=a.CustomTimeScaleTypeHint.EquivalentType;d=a.CustomTimeScaleTypeHint.EquivalentUnits}return RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToApproxUnitsOfBaseType(b,
c,d)*this.options.BaseTimeUnitWidth<this.options.MinTimeUnitWidthForHeaderVisibility?!1:!0},_updateGanttChartsBottomTwoHeader:function(a){this.updateGanttChart("BottomTwoHeaders",this.BottomTwoHeaders);this._setOption("BaseTimeScaleType",a)},GetBaseScaleTypeLCD:function(a){var b=a.Type;b==RadiantQ.Gantt.TimeScaleType.Custom&&(b=RadiantQ.Gantt.TimeScaleType.Days,null!=a.CustomTimeScaleTypeHint&&(b=a.CustomTimeScaleTypeHint.EquivalentType));return b=RadiantQ.Gantt.AdjustBaseScaleType(b)},_ValidateAndSetBaseTimeUnitWidth:function(a){var b=
this.options,c=b.TimeScaleHeaders.getById(0),d=c.Type,e=b.MinTimeUnitWidthForHeaderVisibility,f=c.BaseTimeScaleType,g=1,h=b.BaseTimeUnitWidthMinimum,k=b.BaseTimeUnitWidthMaximum;if(d==ns_gantt.TimeScaleType.Custom){if(null==c.CustomTimeScaleTypeHint)throw"CustomTimeScaleTypeHint is not set in TimeScaleHeaderDefinition of TimeScaleType.Custom.";d=c.CustomTimeScaleTypeHint.EquivalentType;g=c.CustomTimeScaleTypeHint.EquivalentUnits}c=RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToApproxUnitsOfBaseType(f,
d,g);c*a<e&&(a=e/c);a<h&&(a=h);a>k&&(a=k);b.BaseTimeUnitWidth!=a&&this._setOption("BaseTimeUnitWidth",a)},ZoomBySteps:function(a){var b=0>a;a=Math.abs(a);for(var c=this.options.BaseTimeUnitWidth,d=0;d<a;d++)c=b?c-0.1*c:c+0.1*c;this._ValidateAndSetBaseTimeUnitWidth(c)},_validateBasebaseTimeUnitWidthMaximum:function(){if(null!=this.options.BaseTimeUnitWidthMaximum){if(this.options.BaseTimeUnitWidthMaximum<this.options.BaseTimeUnitWidthMinimum)throw"GanttBase.BaseTimeUnitWidthMaximum cannot be less than the BaseTimeUnitWidthMinimum value.";
}else this.options.BaseTimeUnitWidthMaximum=100;return 0},_validateBasebaseTimeUnitWidth:function(){if(null!=this.options.BaseTimeUnitWidth){if(this.options.BaseTimeUnitWidth<this.options.BaseTimeUnitWidthMinimum)throw"GanttBase.BaseTimeUnitWidth cannot be less than "+this.options.BaseTimeUnitWidthMinimum+".";if(this.options.BaseTimeUnitWidth>this.options.BaseTimeUnitWidthMaximum)throw"GanttBase.BaseTimeUnitWidth cannot be greater than "+this.options.BaseTimeUnitWidthMaximum+".";}else this.options.BaseTimeUnitWidth=
25},_validateMinTimeUnitWidthForHeaderVisibility:function(){if(10>this.options.MinTimeUnitWidthForHeaderVisibility)throw"MinTimeUnitWidthForHeaderVisibility cannot be less than 10.";},GetGanttChart:function(){return $("div.rq-ganttChart",this.element)},GetGanttChartInstance:function(){return this.GetGanttChart().data("GanttChart")},GetLayoutElement:function(){return $(this._getUniqueSelectorIdByID("TopDivContainer"),this.element)},getTimeSpanHeader:function(){return $("div.rq-tsh-div",this.GetGanttChart())},
_layoutGanttControls:function(){var a=this;this.element.empty();var b=$('<div id="'+this._createUniqueID("TopDivContainer")+'" class="ui-layout-pane" style="height:100%; position:relative;" />').appendTo(this.element);a.container=b;$('<div id="'+this._createUniqueID("TablePanal")+'" class="ui-layout-west" style="height:100%; position:relative;"/>').appendTo($(this._getUniqueSelectorIdByID("TopDivContainer"),this.element));$('<div id="'+this._createUniqueID("GanttChart")+'" class="ui-layout-center" style="height:100%; width:100%; position:relative;"/>').appendTo($(this._getUniqueSelectorIdByID("TopDivContainer")));
var c=$(this._getUniqueSelectorIdByID("TopDivContainer"),this.element);c.layout({togglerTip_open:window.RadiantQ_SplitterOpen,togglerTip_closed:window.RadiantQ_SplitterClose,resizerTip:window.RadiantQ_SplitterResize,west__size:this.options.TablePanelWidth,center__onresize:function(){a.GetGanttTable().refreshScrollBsrVisibility();c.trigger("resize");var b=setInterval(function(){$(a.container).find("div.rq-gc-pager-container");var c=$(a.container).find("div.rq-gc-pager-container").parent().width();
$(a.container).find("div.rq-gc-horizondalScrollBar").width(c-34);!0==a.GetGanttChartInstance().options.ResizeToFit&&a.GetGanttChart().GanttChart("ResizeToFitChanged");clearInterval(b)},200)}})},layoutUpdated:function(){$(this._getUniqueSelectorIdByID("TopDivContainer"),this.element).data("layout").sizePane("west",this.options.TablePanelWidth);this.RefreshGanttHeight();this.RefreshGanttWidth();this.options.UseVirtualization&&this.GetGanttTable().uiGridBody.trigger("scroll");if(this.options.UseChartVirtualization)if("ProjectGantt"==
this.GanttType){var a=$(".rq-gc-rowsParent",this.element).data("GanttTaskItemsControl");a.Refresh(a.element,a.options.Data,a.$chartTable,a.options.ViewWidth,0)}else a=$(".rq-gc-rowsParent",this.element).data("GanttRows"),a.Refresh(a.element,a.options.Data,a.table,a.options.ViewWidth)},_canUpdateTable:0,CanUpdateTable:function(a){if(void 0==a)return this._canUpdateTable;a!=this._canUpdateTable&&(this._canUpdateTable=a,2==this._canUpdateTable&&(this.updateTable(),this._canUpdateTable=0))},initGanttChart:function(){var a=
this.options;null==a.SpecialLineInfos&&(a.SpecialLineInfos=new ObservableCollection);var b=new RadiantQ.Gantt.SpecialLineInfo;b.LineDateTime=Date.today();b.ToolTipText="today";a.SpecialLineInfos.add(b);b=$(this._getUniqueSelectorIdByID("GanttChart"));b.GanttChart({BottomTwoHeaders:a.BottomTwoHeaders,TimeScaleHeaders:a.TimeScaleHeaders,BaseTimeUnitWidth:a.BaseTimeUnitWidth,BaseTimeScaleType:a.BaseTimeScaleType,ZoomOptions:a.ZoomOptions,ScrollOptions:a.ScrollOptions,CustomChartBackgroundRanges:a.CustomChartBackgroundRanges,
OverlappedTasksRenderingOptimization:a.OverlappedTasksRenderingOptimization,BaseTimeUnitWidthMinimum:a.BaseTimeUnitWidthMinimum,BaseTimeUnitWidthMaximum:a.BaseTimeUnitWidthMaximum,MinTimeUnitWidthForHeaderVisibility:a.MinTimeUnitWidthForHeaderVisibility,TaskItemTemplate:a.TaskItemTemplate,TaskBarBackgroundTemplate:a.TaskBarBackgroundTemplate,TaskBarAdornerTemplate:a.TaskBarAdornerTemplate,ParentTaskItemTemplate:a.ParentTaskItemTemplate,ProgressBarTemplate:a.ProgressBarTemplate,TaskStartTime:a.TaskStartTimeProperty,
ParentTaskStartTime:a.ParentTaskStartTimeProperty,TaskEndTime:a.TaskEndTimeProperty,ParentTaskEndTime:a.ParentTaskEndTimeProperty,TasksListProperty:a.TasksListProperty,ParentTasksListProperty:a.ParentTasksListProperty,FlatItemsSource:a.FlatItemsSource,RowHeight:a.RowHeight,TaskTooltipTemplate:a.TaskTooltipTemplate,SpecialLineInfos:a.SpecialLineInfos,DependencyLineColor:a.DependencyLineColor,DependencyListSource:a.DependencyListSource,WorkTimeSchedule:a.WorkTimeSchedule,GanttDependencyViews:this.DependencyViews,
WorkingTimeBackground:a.WorkingTimeBackground,KnockoutObjectName:a.KnockoutObjectName,NonWorkingTimeBackground:a.NonWorkingTimeBackground,TimeRangeHighlightBehavior:a.TimeRangeHighlightBehavior,EnableAlternativeRowBackground:a.EnableAlternativeRowBackground,Parent:this,GanttType:this.GanttType,ResizeInfoPopup:a.ResizeInfoPopup,MovingInfoPopup:a.MovingInfoPopup,TaskBarBrowseToCueLeftTemplate:a.TaskBarBrowseToCueLeftTemplate,TaskBarBrowseToCueRightTemplate:a.TaskBarBrowseToCueRightTemplate,RowHeightBinding:a.RowHeightBinding,
UseChartVirtualization:a.UseChartVirtualization,OnTaskBarLoad:a.OnTaskBarLoad,TouchTapAction:a.TouchTapAction});var c=this;this.getTimeSpanHeader().resize(function(a){c.HeaderHeight=$(this).height();c.UpdateHeight()});this.initTimeSpaneHeader();b.GanttChart("EndUpdate");this._triggerZoomedEvent(!0);this.CanUpdateTable(this.CanUpdateTable()+1);this.GanttChartLoaded.raise(this);this.GanttChartIsLoaded=!0;this.getWindow()},initTable:function(){$('<div id="'+this._createUniqueID("Table")+'" style="height:100%; width:100%; position:relative;"/>').appendTo($(this._getUniqueSelectorIdByID("TablePanal")))},
_getUniqueSelectorIdByID:function(a){return"#"+this._createUniqueID(a)},BeginUpdate:function(){this.GetGanttChart().GanttChart("BeginUpdate")},EndUpdate:function(){this.GetGanttChart().GanttChart("EndUpdate")},_triggerZoomedEvent:function(a){this._trigger("BeforeZooming",this,{ZoomedIn:a,Options:this.options})},_setOption:function(a,b){$.Widget.prototype._setOption.apply(this,arguments);switch(a){case "DataSource":this.UpdateDatasource(!1);break;case "BaseTimeUnitWidth":this.OnHeadersChanged(null,
"BaseUnitWidthChanges");var c=$(this.getTimeSpanHeader()).TimeSpanHeaders("option","BaseTimeUnitWidth")>=this.options.BaseTimeUnitWidth;this._triggerZoomedEvent(c);break;case "BaseTimeUnitWidthMinimum":if(0>=b)throw"GanttBase.BaseTimeUnitWidthMinimum cannot be less than or equal to 0.";this._validateBasebaseTimeUnitWidthMaximum();break;case "BaseTimeUnitWidthMaximum":this._validateBasebaseTimeUnitWidthMaximum();break;case "MinTimeUnitWidthForHeaderVisibility":this._validateMinTimeUnitWidthForHeaderVisibility();
break;case "UseTimeRangeFilteredTasksInRows":this.UseTimeRangeFilteredTasksInRows(arguments[1]);break;case "TimeRangeFilteredTasksTimeBuffer":this.TimeRangeFilteredTasksTimeBuffer(arguments[1]);break;case "GanttTable":this._hookGanttTable();break;case "RowHeight":this.UpdateRowHeight();break;case "RowHeightBinding":this.UpdateRowHeightBinding(this.options.FlatItemsSource,!1);break;case "RoundTimeEditsTo":this.RoundTimeEditsTo(b)}this.updateGanttChart(a,b)},PrepareGanttTable:function(){var a=$("<div style='height: 100%;' class='ui-gridpanel' > </div>");
if(this.options.GanttTable.parent().length){var b=this.options.GanttTable,c=$(b[0].outerHTML);b.remove();a.append(c);this.options.GanttTable=c}else a.append(this.options.GanttTable);return a},destroy:function(){$(this.element).GanttRowselectable("destroy");$(this.element).hoverable("destroy");this.GetGanttChart().GanttChart("destroy");$(".ui-grid-body-table ",this.options.GanttTable).FlexyTable("destroy");var a=$(this._getUniqueSelectorIdByID("TopDivContainer"));a.layout().destroy();a.remove();this.element.removeClass("rq-ganttBase radiantq-ui-GanttBase");
$.Widget.prototype.destroy.call(this)},Print:function(a){RadiantQ.Gantt.Print(a,this)},ExportToImage:function(a){RadiantQ.Gantt.ExportToImage(a,this)}});
$.widget("radiantq.FlexyGantt",$.radiantq.GanttBase,{DependencyViews:null,options:{resolverFunction:function(){return null},dynamicResolverFunction:null,AutoExpandNodes:!0,RowHeightBinding:null,ForceParentTemplateEvenIfChildless:!1,OverlappedTasksRenderingOptimization:null,UseTimeRangeFilteredTasksInRows:!1,TimeRangeFilteredTasksTimeBuffer:null,TablePanelWidth:"20%",CanUserReorderRows:!1},SelectedItems:null,_selectedItem:null,FlatItemsSource:null,FlatHierarchicalItemsList:null,RedrawChartRow:null,
FilterTasksByTimeRange:new ObjectEvent("FilterTasksByTimeRange"),TaskTimeChanging:new ObjectEvent("TaskTimeChanging"),TaskTimeChanged:new ObjectEvent("TaskTimeChanged"),updateTable:function(){if(2==this.CanUpdateTable()){this.UpdateHeight();var a=this;$(".grid-body-actualContent",this.element);this.element.GanttRowselectable({SelectionMode:this.options.SelectionMode,IsFlexyGantt:!0,selectedChange:function(b,c){a.SelectedItems=$.makeArray(a.element.data("GanttRowselectable").SelectedItems());1<a.SelectedItems.length&&
(a.SelectedItems=a.SelectedItems.sort(function(b,c){return b.TableRow()&&b.TableRow().length&&c.TableRow()&&c.TableRow().length?a.options.UseVirtualization?b.TableRow()[0]._displayIndex-c.TableRow()[0]._displayIndex:b.TableRow()[0].rowIndex-c.TableRow()[0].rowIndex:0}));0!=c.AddedItems.length?(a._selectedItem=c.AddedItems.Data,!1==RadiantQ.CanUseDefineProperty&&(a.SelectedItem=c.AddedItems.Data,a.SelectedIndex=a._selectedItem?a._selectedItem.TableRow().rowIndex:-1)):(!1==RadiantQ.CanUseDefineProperty&&
(a.SelectedItem=null,a.SelectedIndex=-1),a._selectedItem=null);a._trigger("SelectionChanged",a,c)}});this.element.hoverable();this.ChartVerticalScrollSyncWithTable()}},_hookGanttTable:function(){$(this.options.GanttTable).css("height","100%");$(this._getUniqueSelectorIdByID("Table")).empty().append(this.options.GanttTable);this.CanUpdateTable(this.CanUpdateTable()+1)},UpdateHeight:function(){var a=this.options.GanttTable;a.data("FlexyTable")&&(a.FlexyTable("option","HeaderHeight",this.HeaderHeight),
this.UpdateChartHeight())},ConvertToValidTimes:function(a,b,c,d,e,f,g,h){d.Value=b.clone();e.Value=b.addMilliseconds(c.totalMilliseconds);this.OnTaskTimeChanging(a,d,e,f,g,h)},OnTaskTimeChanging:function(a,b,c,d,e,f){0<this.TaskTimeChanging.fn.length&&(a=new TimesChangingEventArgs(a,b.Value,c.Value,d),a.shouldSyncDragCue=!1,a.row_index=e.row_index,a.element=f,this.TaskTimeChanging.raise(this,a),e.shouldSyncDragCue=a.shouldSyncDragCue,b.Value=a.StartTime,c.Value=a.EndTime)},GetGanttTable:function(){return this.options.GanttTable.data("FlexyTable")},
UseTimeRangeFilteredTasksInRows:function(a){if(void 0==a||null==a)return this._useTimeRangeFilteredTasksInRows||(this._useTimeRangeFilteredTasksInRows=!1),this._useTimeRangeFilteredTasksInRows;this._useTimeRangeFilteredTasksInRows=a},TimeRangeFilteredTasksTimeBuffer:function(a){if(void 0==a||null==a){if(this._timeRangeFilteredTasksTimeBuffer)return this._timeRangeFilteredTasksTimeBuffer;this._timeRangeFilteredTasksTimeBuffer=null}else this._timeRangeFilteredTasksTimeBuffer=a},_create:function(){this._validateOptions();
this.GanttType="FlexyGantt";this.element.data("FlexyGantt",this);this._useTimeRangeFilteredTasksInRows=this.options.UseTimeRangeFilteredTasksInRows;this._timeRangeFilteredTasksTimeBuffer=this.options.TimeRangeFilteredTasksTimeBuffer;$.radiantq.GanttBase.prototype._create.apply(this,arguments);this.SelectedItems=new ObservableCollection;RadiantQ.CanUseDefineProperty?(Object.defineProperty(this,"SelectedIndex",{get:function(){return this.options.UseVirtualization?this._selectedItem?this._selectedItem.TableRow()[0]._displayIndex:
-1:this._selectedItem?this._selectedItem.TableRow()[0].rowIndex:-1},set:function(a){this.UpdateSectionByIndex(a)},enumerable:!0,configurable:!0}),Object.defineProperty(this,"SelectedItem",{get:function(){return this._selectedItem},set:function(a){this.UpdateSectionByIndex(a)},enumerable:!0,configurable:!0})):(this.SelectedIndex=-1,this.SelectedItem=null)},_validateOptions:function(){$.radiantq.GanttBase.prototype._validateOptions.call(this);var a=this.options;window.console&&(a.TaskStartTimeProperty&&
"string"==typeof a.TaskStartTimeProperty||console.error("TaskStartTimeProperty has to be a string referring a property name in the bound object."),a.TaskEndTimeProperty&&"string"==typeof a.TaskEndTimeProperty||console.error("TaskEndTimeProperty has to be a string referring a property name in the bound object."),a.ParentTaskStartTimeProperty&&"string"!=typeof a.ParentTaskStartTimeProperty&&console.error("ParentTaskStartTimeProperty has to be a string referring a property name in the bound object."),
a.ParentTaskEndTimeProperty&&"string"!=typeof a.ParentTaskEndTimeProperty&&console.error("ParentTaskEndTimeProperty has to be a string referring a property name in the bound object."))},UpdateSectionByIndex:function(a){a=this.FlatItemsSource.FlatItemsSource.length-1>=a?a:this.FlatItemsSource.FlatItemsSource.length-1;this.UpdateSection(this.FlatItemsSource.FlatItemsSource[a])},UpdateSection:function(a){this.element.data("GanttRowselectable").selectItemByitem(a)},RaiseFilterTasksByTimeRange:function(a){if(null!=
jQuery._data(this.element[0],"events")[this.widgetName.toLowerCase()+"filtertasksbytimerange"]||this.options.FilterTasksByTimeRange){var b=this.GetGanttChartInstance();a=new RadiantQ.FlexyGantt.FilterTasksByTimeRangeEventArgs(a,b.options.ComputedStartTime,b.options.ComputedEndTime);this._trigger("FilterTasksByTimeRange",this,a);return a.FilteredList}return null},FlatItemsSource:null,UpdateDatasource:function(a){var b=this,c=this.options,d=new RadiantQ.FlexyGantt.HierarchyToList(this.options.DataSource,
function(a,d){var e=b.options.resolverFunction.call(this,a);c.CanInsertPropertyChangeTriggeringPropertiesInData&&b._injectGetAndSetOnData(d,a,c,e);return e},this.options);this.FlatItemsSource=d;this.FlatHierarchicalItemsList=this.FlatItemsSource.FlatHierarchicalItemsList;this.UpdateRowHeightBinding(d,!0);var e={};e.Source=d;e.canUpdateTable=a;this._trigger("FlatItemsSourceCreated",this,e);this.IsGanttTable&&(a?(a=this.PrepareGanttTable(),e=this.options.GanttTable,e.addClass("rq-FlexyTable"),this.options.CanUserReorderRows&&
$("thead>tr",e).prepend($('<th style="width: 20px;" data-property="tracker"></th>')),e.FlexyTable({source:d.FlatItemsSource,RowHeight:this.options.RowHeight,Parent:this,UseGridVirtualization:this.options.UseVirtualization,GanttTableRowLoadedCallBack:this.options.GanttTableRowLoadedCallBack,IsProjectGantt:!1,EnableAlternativeRowBackground:this.options.EnableAlternativeRowBackground,CanUserReorderRows:this.options.CanUserReorderRows}).FlexyTable("refresh"),e.parent().css("overflow-x","scroll"),$(this._getUniqueSelectorIdByID("Table"),
this.element).empty().append(a),this.GanttTableElement=e,this.GanttTableElement.bind("flexytablerefresh",function(){b.UpdateChartHeight()}),this.CanUpdateTable(this.CanUpdateTable()+1)):this.options.GanttTable.FlexyTable({GanttTableRowLoadedCallBack:this.options.GanttTableRowLoadedCallBack,RowHeight:this.options.RowHeight,EnableAlternativeRowBackground:this.options.EnableAlternativeRowBackground,source:d.FlatItemsSource}));void 0==d.FlatItemsSource&&(d.FlatItemsSource=null);this._setOption("FlatItemsSource",
d.FlatItemsSource);d.dynamicResolver=this.options.dynamicResolverFunction;this.element.GanttRowselectable({Source:d.FlatItemsSource})},_injectGetAndSetOnData:function(a,b,c,d){function e(a,b){if(a&&b){var c=a[b];Object.defineProperty(a,b,{get:function(){return c},set:function(a){c!=a&&(c=a,this.PropertyChanged.raise(this,{PropertyName:b,Value:a}))}})}}b.PropertyChanged||(b.PropertyChanged=new ObjectEvent("PropertyChanged"));var f=a=null;null!=d?(a=c.ParentTaskStartTimeProperty,f=c.ParentTaskEndTimeProperty):
(a=c.TaskStartTimeProperty,f=c.TaskEndTimeProperty);null!=a&&new e(b,a);null!=f&&new e(b,f)},UpdateRowHeightBinding:function(a,b){if(a&&a.FlatItemsSource){var c=this,d=a.FlatItemsSource,e=!1;null!=this.options.RowHeightBinding&&void 0!=this.options.RowHeightBinding.Property&&this.options.RowHeightBinding.Converter&&(e=!0);if(e&&b){for(e=0;e<d.length;e++)c.SubscribeChangeNotifications(d[e]);d.CollectionChanged.subscribe(function(a,b){"insert"==a.type&&c.SubscribeChangeNotifications(b.items[0]);"remove"==
c.type&&c.UnsubscribeChangeNotifications(b.items[0])})}}},SubscribeChangeNotifications:function(a){a.PropertyChanged.subscribe(this.notifyChange,this);a.HierarchicalItem.PropertyChanged.subscribe(this.notifyChange,this)},UnsubscribeChangeNotifications:function(a){a.PropertyChanged.unsubscribe(this.notifyChange,this);a.HierarchicalItem.PropertyChanged.unsubscribe(this.notifyChange,this)},UpdateTableAndChartRowHeight:function(a,b){$(a.TableRow()).height(b);var c=$(a.ChartRow()),d=$("td",c);d.height(b-
1);d.css("height",b-1+"px");d[0]._isTriggered||(d[0]._isTriggered=!0,d.trigger("heightChange"));c.height(b)},UpdateRowHeight:function(){var a=this.options.FlatItemsSource;if(a)for(var b=0;b<a.length;b++)this.UpdateTableAndChartRowHeight(a[b],this.options.RowHeight);this.UpdateChartHeight()},tableHasScrollBar:!1,notifyChange:function(a,b){if(this.options.RowHeightBinding.Property==b.PropertyName){var c=this.options.RowHeightBinding.Converter.call(a,b.value);if(null!=c){this.UpdateTableAndChartRowHeight(a,
c);this.UpdateChartHeight();var c=this.GetGanttTable(),d=c.uiGridBody[0];d.scrollHeight>d.clientHeight!=this.tableHasScrollBar&&c.refreshScrollBsrVisibility()}}},updateGanttChart:function(a,b){var c=this.GetGanttChart();if(0!=c.length){switch(a){case "FlatItemsSource":return c.GanttChart("option","FlatItemsSource",b);case "TaskStartTimeProperty":return c.GanttChart("option","TaskStartTime",b);case "ParentTaskStartTimeProperty":return c.GanttChart("option","ParentTaskStartTime",b);case "TaskEndTimeProperty":return c.GanttChart("option",
"TaskEndTime",b);case "ParentTaskEndTimeProperty":return c.GanttChart("option","ParentTaskEndTime",b)}a in c.GanttChart("option")&&(c.GanttChart("option",a)==b&&"BaseTimeScaleType"!=a||c.GanttChart("option",a,b))}},destroy:function(){$.radiantq.GanttBase.prototype.destroy.apply(this,arguments)},_setOption:function(a,b){$.radiantq.GanttBase.prototype._setOption.apply(this,arguments)}});
function TimesChangingEventArgs(a,b,c,d,e){this.DataSource=a;this.StartTime=b;this.EndTime=c;this.Type=d;e&&(this.FlexyNodeData=e)}
$.widget("radiantq.GanttControl",$.radiantq.GanttBase,{DependencyViews:null,options:{TablePanelWidth:"45%",ProjectStartDate:null,ProjectEndDate:null,ScheduleFrom:"ProjectStartDate",ValidateDependencySetting:!0,EnforceDependencyConstraints:!0,AutoCalculateSummaryTaskTimes:!0,AdjustDurationOnAssignment:!0,IDBinding:{Property:"ID"},SortOrderBinding:{Property:"SortOrder"},NameBinding:{Property:"Name"},IndentLevelBinding:{Property:"IndentLevel"},StartTimeBinding:{Property:"StartTime"},PreferredStartTimeBinding:{Property:"PreferredStartTime"},
EffortBinding:{Property:"Effort"},PredecessorIndicesBinding:{Property:"PredecessorIndices"},ProgressPercentBinding:{Property:"ProgressPercent"},DescriptionBinding:{Property:"Description"},ResourceItemsSource:null,ResourceNameBinding:null,ResourceIDBinding:null,ResourceScheduleBinding:null,AssignedResourcesBinding:{Property:"Resources"},CanShiftInProgressTasks:!0,GanttResources:null,PropertyChanged:new ObjectEvent("PropertyChanged"),LagStringUnitsInHours:1,TaskBarBackgroundTemplate:null,TaskBarAdornerTemplate:null,
FilterActivites:null,AutoExpandNodes:!0,CustomProgressCalculation:null,IsTaskReadOnlyBinding:null,CanUserReorderRows:!1},SelectedItems:null,_selectedItem:null,SelectedActivities:null,SelectedActivity:null,ActivityViews:null,Model:null,PropertyChanged:null,TaskContextMenu:null,TableContextMenu:null,DependencyContextMenu:null,RedrawChartRows:null,RedrawChartRow:function(a){a&&(a=this.ActivityViews.GetIActivityView(a))&&(a=$("td",a.$chartRow).data("GanttTaskItemBar"))&&a.RedrawTaskBar(!1)},GanttTaskItemBarCollection:[],
ActivityTimeChanged:new ObjectEvent("ActivityTimeChanged"),GetGanttTable:function(){return this.options.GanttTable.data("GanttTable")},FilterActivites:null,Filter:function(){null!=this.Model&&(this.Model.Filter(this.options.FilterActivites),this.UpdateViews(!1))},ResetFilters:function(){null!=this.Model&&(this.Model.Filter(null),this.UpdateViews(!1))},updateTable:function(){if(2==this.CanUpdateTable()){this.UpdateHeight();var a=this;$(".grid-body-actualContent",this.element);this.element.GanttRowselectable({SelectionMode:this.options.SelectionMode,
IsFlexyGantt:!1,selectedChange:function(b,c){a.SelectedActivities=[];a.SelectedItems=$.makeArray(a.element.data("GanttRowselectable").SelectedItems());1<a.SelectedItems.length&&(a.SelectedItems=a.SelectedItems.sort(function(b,c){return b.$tableRow&&b.$tableRow.length&&c.$tableRow&&c.$tableRow.length?a.options.UseVirtualization?b.$tableRow[0]._displayIndex-c.$tableRow[0]._displayIndex:b.$tableRow[0].rowIndex-c.$tableRow[0].rowIndex:0}));for(var d=0;d<a.SelectedItems.length;d++)a.SelectedActivities.push(a.SelectedItems[d].Activity);
0!=c.AddedItems.length?(a._selectedItem=c.AddedItems.Data,a.SelectedActivity=c.AddedItems.Data.Activity):(a._selectedItem=null,a.SelectedActivity=null);a._trigger("SelectionChanged",a,c)}});$(this.element).hoverable();this.ChartVerticalScrollSyncWithTable()}},_hookGanttTable:function(){this._pgWidget=this;$(this.options.GanttTable).css("height","100%");$(this._getUniqueSelectorIdByID("Table")).empty().append(this.options.GanttTable);this.CanUpdateTable(this.CanUpdateTable()+1)},UpdateHeight:function(){var a=
this.options.GanttTable;a.data("GanttTable")&&(a.GanttTable("option","HeaderHeight",this.HeaderHeight),this.UpdateChartHeight())},_pgWidget:null,_create:function(){if(RadiantQ.CanUseDefineProperty){this.GanttType="ProjectGantt";var a=this;this.options.ProjectStartDate instanceof Date||(this.options.ProjectStartDate=Date.today());this.element.data("GanttControl",this);this.options.ProjectEndDate=this.options.ProjectStartDate.clone().addDays(30);this.ReadOnlyPropertyChange=new ObjectEvent("ReadOnlyPropertyChange");
$.radiantq.GanttBase.prototype._create.apply(this,arguments);this._isReadOnly=this.options.IsReadOnly;var b=this.options.WorkTimeSchedule;Object.defineProperty(this.options,"IsReadOnly",{get:function(){if(a._isReadOnly)return a._isReadOnly;a._isReadOnly=!1},set:function(b){a._isReadOnly=b;a.ReadOnlyPropertyChange.raise(a,{PropertyName:"IsReadOnly",Value:b})},enumerable:!0,configurable:!0});this._isEffortReadOnly=this.options.IsEffortReadOnly;Object.defineProperty(this.options,"IsEffortReadOnly",{get:function(){if(a._isEffortReadOnly)return a._isEffortReadOnly;
a._isEffortReadOnly=!1},set:function(b){a._isEffortReadOnly=b;a.ReadOnlyPropertyChange.raise(a,{PropertyName:"IsEffortReadOnly",Value:b})},enumerable:!0,configurable:!0});this._isStartTimesReadOnly=this.options.IsStartTimesReadOnly;Object.defineProperty(this.options,"IsStartTimesReadOnly",{get:function(){if(a._isStartTimesReadOnly)return a._isStartTimesReadOnly;a._isStartTimesReadOnly=!1},set:function(b){a._isStartTimesReadOnly=b;a.ReadOnlyPropertyChange.raise(a,{PropertyName:"IsStartTimesReadOnly",
Value:b})},enumerable:!0,configurable:!0});this._isProgressPercentReadOnly=this.options.IsProgressPercentReadOnly;Object.defineProperty(this.options,"IsProgressPercentReadOnly",{get:function(){if(a._isProgressPercentReadOnly)return a._isProgressPercentReadOnly;a._isProgressPercentReadOnly=!1},set:function(b){a._isProgressPercentReadOnly=b;a.ReadOnlyPropertyChange.raise(a,{PropertyName:"IsProgressPercentReadOnly",Value:b})},enumerable:!0,configurable:!0});this._isDependencyLinesReadOnly=this.options.IsDependencyLinesReadOnly;
Object.defineProperty(this.options,"IsDependencyLinesReadOnly",{get:function(){if(a._isDependencyLinesReadOnly)return a._isDependencyLinesReadOnly;a._isDependencyLinesReadOnly=!1},set:function(b){a._isDependencyLinesReadOnly=b;a.ReadOnlyPropertyChange.raise(a,{PropertyName:"IsDependencyLinesReadOnly",Value:b})},enumerable:!0,configurable:!0});Object.defineProperty(this.options,"WorkTimeSchedule",{get:function(){return b},set:function(a){b=a},enumerable:!0,configurable:!0});Object.defineProperty(this,
"SelectedIndex",{get:function(){return this.options.UseVirtualization?this._selectedItem?this._selectedItem.TableRow()[0]._displayIndex:-1:this._selectedItem?this._selectedItem.TableRow()[0].rowIndex:-1},set:function(a){this.UpdateSectionByIndex(a)},enumerable:!0,configurable:!0});Object.defineProperty(this,"SelectedItem",{get:function(){return this._selectedItem},set:function(a){this.UpdateSection(a)},enumerable:!0,configurable:!0})}},OnPropertyChanged:function(a,b){this.options.PropertyChanged.raise(this,
{PropertyName:a,value:b})},UpdateSectionByIndex:function(a){a=this.ActivityViews.length-1>=a?a:this.ActivityViews.length-1;this.UpdateSection(this.ActivityViews[a])},UpdateSection:function(a){this.element.data("GanttRowselectable").selectItemByitem(a)},GanttTableElement:null,AddNewItem:function(a,b){void 0==b&&(b=!0);return this.Model.CreateNewActivity(a,b)},InsertNewItemAsSiblingBelow:function(a,b,c){void 0==c&&(c=!0);a=this.AddNewItem(a,c);c=null;var d=!0;-1!=b&&(c=this.ActivityViews[b],d=c.IsExpanded,
!0==c.IsParent&&(c.IsExpanded=!1));this.GanttTableElement.data("GanttTable").MoveRows(this.ActivityViews.length-1,1,b);null!=c&&(c.IsExpanded=d);return a},UpdateDatasource:function(a){this._pgWidget=this;$gc=this.options;null==$gc.DataSource&&this.Model instanceof RadiantQ.Gantt.Model.IGanttModel&&this.Model.Dispose();this.Model=new RadiantQ.Gantt.Model.DataBoundGanttModel($gc.DataSource,$gc.ProjectStartDate,$gc.ProjectEndDate,$gc.ScheduleFrom,$gc.ValidateDependencySetting,$gc.EnforceDependencyConstraints,
$gc.AutoCalculateSummaryTaskTimes,$gc.AdjustDurationOnAssignment,$gc.LagStringUnitsInHours,$gc.IDBinding,$gc.SortOrderBinding,$gc.NameBinding,$gc.IndentLevelBinding,$gc.StartTimeBinding,$gc.PreferredStartTimeBinding,$gc.EffortBinding,$gc.PredecessorIndicesBinding,$gc.ProgressPercentBinding,$gc.DescriptionBinding,$gc.ResourceItemsSource,$gc.ResourceNameBinding,$gc.ResourceIDBinding,$gc.ResourceScheduleBinding,$gc.AssignedResourcesBinding,$gc.CustomProgressCalculation,$gc.WorkTimeSchedule,$gc.CanInsertPropertyChangeTriggeringPropertiesInData,
$gc.AutoExpandNodes);null!=this.options.FilterActivites&&this.Model.Filter(this.options.FilterActivites);this.Model.CanShiftInProgressTasks=this.options.CanShiftInProgressTasks;this._trigger("ModelCreated",this,void 0);this.UpdateViews(a)},UpdateViews:function(a){this.ActivityViews=new RadiantQ.Gantt.View.GanttFlatActivitiesList(this.Model,this);this.ActivityViews.RefreshDisplayIndexOfChildren();this.DependencyViews=this.GetGanttFlatDependenciesList();new Binding(this.Model,"WorkTimeSchedule",this,
"WorkTimeSchedule",null,null);this.options.GanttResources=this.Model.GanttResources;this._pgWidget=this;var b=this;if(this.IsGanttTable)if(a){var c=this.PrepareGanttTable(),d=this.options.GanttTable;d.addClass("rq-GanttTable");this.options.CanUserReorderRows&&$("thead>tr",d).prepend($('<th style="width: 20px;" data-property="tracker"></th>'));d.GanttTable({source:this.ActivityViews,RowHeight:this.options.RowHeight,Parent:this,UseGridVirtualization:this.options.UseVirtualization,GanttTableRowLoadedCallBack:this.options.GanttTableRowLoadedCallBack,
IsProjectGantt:!0,EnableAlternativeRowBackground:this.options.EnableAlternativeRowBackground,CanUserReorderRows:this.options.CanUserReorderRows}).GanttTable("refresh");d.parents(".ui-grid-body").css("overflow-x","scroll");$(this._getUniqueSelectorIdByID("Table"),this.element).empty().append(c);this.GanttTableElement=d;this.GanttTableElement.bind("gantttablerefresh",function(){b._pgWidget.UpdateChartHeight()});this.CanUpdateTable(this.CanUpdateTable()+1)}else this.options.GanttTable.GanttTable({GanttTableRowLoadedCallBack:this.options.GanttTableRowLoadedCallBack,
EnableAlternativeRowBackground:this.options.EnableAlternativeRowBackground,source:this.ActivityViews}),this.element.GanttRowselectable({Source:this.ActivityViews});this._setOption("FlatItemsSource",this.ActivityViews);c={};c.Source=this.ActivityViews;c.canUpdateTable=a;this._trigger("FlatActivitiesListCreated",this,c)},GetGanttFlatDependenciesList:function(){return new RadiantQ.Gantt.View.GanttFlatDependenciesList(this.Model,this.ActivityViews,this)},RefreshDisplayIndex:function(){this.ActivityViews.RefreshDisplayIndexOfChildren()},
OnWorkTimeScheduleChanged:function(){this.UpdateCalendarSettingInScaleHeaders();null!=this.Model&&(this.Model.WorkTimeSchedule=this.options.WorkTimeSchedule)},RaiseActivityTimeChanged:function(a,b,c){this.OnActivityTimeChanged(a,b,c)},OnActivityTimeChanged:function(a,b,c){this._trigger("ActivityTimeChanged",this,new RadiantQ.Gantt.ActivityTimeChangedEventArgs(a,b,c))},updateGanttChart:function(a,b){var c=this.GetGanttChart();0!=c.length&&a in c.GanttChart("option")&&(c.GanttChart("option",a)==b&&
"BaseTimeScaleType"!=a||c.GanttChart("option",a,b))},OnBeforeDragStart:function(a,b){for(var c=this.element.data("GanttRowselectable"),d=[],e=100,f=0;f<b;f++)this.ActivityViews[a+f].IndentLevel<e&&(e=this.ActivityViews[a+f].IndentLevel);for(f=a+b;f<this.ActivityViews.length;f++){var g=this.ActivityViews[f];if(g.IndentLevel>e)c.selectedItems.add(g),d.push(g);else break}1==b&&d.push(c.selectedItems[0]);return d},MoveRows:function(a,b,c,d,e,f){if(!(-1>a||-1>c)){e.value=0;f.value=c;if(a==c||f.value>=
this.ActivityViews.length)return 0;f=new RadiantQ.Gantt.Utils.DelayUpdates;var g=null;-1<c&&(g=this.ActivityViews[c]);c=null;var h=-1;null!=d?(c=d,h=c.Activity.ChildActivities.length):null!=g&&(g.IsParent&&g.IsExpanded?(c=g,h=0):(c=g.ParentView,h=null!=c?c.Activity.ChildActivities.indexOf(g.Activity)+1:this.Model.Activities.indexOf(g.Activity)+1));d=new ObservableCollection;for(var k=this.ActivityViews[a].IndentLevel,g=0;g<b;g++){var l=this.ActivityViews[a+g];l.IndentLevel<=k&&(d.add(l),e.value++,
l.IsParent&&l.IsExpanded&&(e.value+=this.GetChildCount(l.Activity),l.IndentLevel<k&&(g+=this.GetChildCount(l.Activity))))}if(null!=c)for(g=0;g<d.length;g++)a=d[g],a.ParentView!=c&&this.Model.PrepareParenting(c.Activity,a.Activity),h=this.ReparentActivity(a,c,h),a.ReparentView(c);else for(g=0;g<d.length;g++)a=d[g],h=this.ReparentActivity(a,null,h),a.ReparentView(null);f.Dispose();return e}},GetChildCount:function(a){for(var b=0,c=0;c<a.ChildActivities.length;c++)b++,b+=this.GetChildCount(a.ChildActivities[c]);
return b},ReparentActivity:function(a,b,c){var d=-1;null!=a.ParentActivity?(d=a.ParentActivity.ChildActivities.indexOf(a.Activity),a.ParentActivity.ChildActivities.remove(a.Activity)):(d=this.Model.Activities.indexOf(a.Activity),this.Model.Activities.remove(a.Activity));this.Model.ApplyPreferredStartTimeOnActivity(a.Activity,a.Activity.PreferredStartTime);b==a.ParentView&&c>d&&c--;if(null!=b){if(0>c)return b.Activity.ChildActivities.add(a.Activity),b.Activity.ChildActivities.length;b.Activity.ChildActivities.insert(c,
a.Activity);return c+1}0>c&&(c=0);this.Model.Activities.insert(c,a.Activity);return c+1},GetIndexOfLastDescendant:function(a){if(0<a.Activity.ChildActivities.length&&a.IsExpanded){a=a.Activity.ChildActivities.Last();a=this.ActivityViews.GetIActivityView(a);var b=this.GetIndexOfLastDescendant(a);return-1!=b?b:this.ActivityViews.indexOf(a)}return this.ActivityViews.indexOf(a)},InsertNewItemAsChildOf:function(a,b,c){a=this.AddNewItem(a,c);this.GanttTableElement.data("GanttTable").InsertRowsAsChild(this.ActivityViews.length-
1,1,b);return a},Indent:function(a){var b=this.ActivityViews.indexOf(a);if(0<b){var c=this.GetParentableActivityView(b-1,a.IndentLevel);if(null!=c){var d=new RadiantQ.Gantt.Utils.DelayUpdates;this.Model.PrepareParenting(c.Activity,a.Activity);var e=this.Model.Dependencies;null!=e&&e.IsActivityFinishDependentOnAnother(c.Activity)?alert("New parent cannot have a FinishToFinish or StartToFinish dependency."):(e=0,!1==c.IsExpanded?e=c.Activity.ChildActivities.length:(b=this.LookForViewWithIndentLevel(a.IndentLevel+
1,b-1,!1),-1!=b&&(e=c.Activity.ChildActivities.indexOf(this.ActivityViews[b].Activity)+1)),this.ReparentActivity(a,c,e),a.ReparentView(c),d.Dispose())}}},GetParentableActivityView:function(a,b){for(var c=a;0<=c;c--){if(this.ActivityViews[c].IndentLevel==b)return this.ActivityViews[c];if(this.ActivityViews[c].IndentLevel<b)break}return null},LookForViewWithIndentLevel:function(a,b,c){if(c)for(;b<this.ActivityViews.lenght;b++){if(this.ActivityViews[b].IndentLevel==a)return b}else for(;0<=b;b--)if(this.ActivityViews[b].IndentLevel==
a)return b;return-1},Outdent:function(a){var b=new RadiantQ.Gantt.Utils.DelayUpdates,c=!1,d=a.ParentActivity,e=this.ActivityViews.indexOf(a),f=a.IndentLevel;if(0<e&&0<f){if(1<f){var g=this.GetParentableActivityView(e-1,f-2);if(null!=g){var h=g.Activity.ChildActivities.indexOf(a.ParentActivity);-1!=h&&h++;this.ReparentActivity(a,g,h);a.ReparentView(g)}}else 1==f&&(c=this.LookForViewWithIndentLevel(0,e-1,!1),c=this.Model.Activities.indexOf(this.ActivityViews[c].Activity)+1,this.ReparentActivity(a,null,
c),a.ReparentView(null),c=!0);e=this.GetActivitiesToBeMadeChildren(e+1,f);for(f=0;f<e.length;f++)g=e[f],this.ReparentActivity(this.ActivityViews[g],a,-1),this.ActivityViews[g].ReparentView(a)}this.Model.ApplyPreferredStartTimeOnActivity(a.Activity,a.Activity.PreferredStartTime);b.Dispose();c&&d&&0<this.Model.ActivityUpdated.fn.length&&this.Model.ActivityUpdated.raise(this.Model.Activities,a.Activity)},CollapseAllRecursive:function(a){if(this.ActivityViews.Contains(a)){a=this.ActivityViews.GetIActivityView(a);
for(var b=0;b<a.Activity.ChildActivities.length;b++)this.CollapseAllRecursive(a.Activity.ChildActivities[b]);a.IsParent&&(a.IsExpanded=!1)}},CollapseAll:function(){for(var a=0;a<this.Model.Activities.length;a++)this.CollapseAllRecursive(this.Model.Activities[a])},ExpandAllRecursive:function(a){if(this.ActivityViews.Contains(a)){a=this.ActivityViews.GetIActivityView(a);a.IsParent&&(a.IsExpanded=!0);for(var b=0;b<a.Activity.ChildActivities.length;b++)this.ExpandAllRecursive(a.Activity.ChildActivities[b])}},
ExpandAll:function(){for(var a=0;a<this.Model.Activities.length;a++)this.ExpandAllRecursive(this.Model.Activities[a])},GetCriticalPathActivities:function(a){return null!=this.Model?this.Model.GetCriticalActivities(a):[]},LevelResources:function(a,b){null!=this.Model&&this.Model.LevelResources(a,b)},GetActivitiesToBeMadeChildren:function(a,b){for(var c=[],d=a;d<this.ActivityViews.length&&!(this.ActivityViews[d].IndentLevel<b);d++)this.ActivityViews[d].IndentLevel==b&&c.push(d);return c},RemoveActivity:function(a){var b=
new RadiantQ.Gantt.Utils.DelayUpdates,c=this.Model.GetActivityById(a);if(null==c)throw"An activity corresponding to the specified id: "+a+", could not be found";a=[];this.BuildActivityHierarchyList(c,a);var d=c.Parent;this.Model.RemoveActivity(d,c);this.ActivityViews.Contains(c)&&(c=this.ActivityViews.GetIActivityView(c),this.ActivityViews.indexOf(c),this.RecursivelyRemoveViews(c));this.Model.UpdateSortOrderFrom(d);b.Dispose();return a},BuildActivityHierarchyList:function(a,b){b.push(a);for(var c=
0;c<a.ChildActivities.length;c++)this.BuildActivityHierarchyList(a.ChildActivities[c],b)},RecursivelyRemoveViews:function(a){if(a.IsExpanded)for(var b=0;b<a.Activity.ChildActivities.length;b++){var c=a.Activity.ChildActivities[b];this.ActivityViews.Contains(c)&&(c=this.ActivityViews.GetIActivityView(c),this.RecursivelyRemoveViews(c))}a.ReparentView(null);this.ActivityViews.RemoveAndDispose(a)},destroy:function(){$.radiantq.GanttBase.prototype.destroy.apply(this,arguments)},_setOption:function(a,b){switch(a){case "ValidateDependencySetting":this.Model.ValidateDependencySetting=
b;break;case "EnforceDependencyConstraints":this.Model.EnforceDependencyConstraints=b}$.radiantq.GanttBase.prototype._setOption.apply(this,arguments)}});
(function(a){var b=RadiantQ.Gantt.DefaultStyles;a.widget("radiantq.GanttTaskItemsControl",{currentUniqueRowSuffix:0,options:{Data:null,TaskTemplate:null,ProgressBarTemplate:null,ParentTaskTemplate:null,GanttChart:null,RowHeight:null,TaskBarHeight:null,ViewWidth:null,TaskTooltipTemplate:null,MovingInfoPopup:null,ResizeInfoPopup:null,ConnectingInfoPopup:null,WorkTimeSchedule:null,KnockoutObjectName:null,TaskBarBackgroundTemplate:null,TaskBarAdornerTemplate:null,TaskBarBrowseToCueLeftTemplate:null,TaskBarBrowseToCueRightTemplate:null,
IsPrinting:!1},ganttControlWidget:null,ganttChartWidget:null,ActivityViews:null,$chartTable:null,$chartTableBody:null,$Area:null,$tableBody:null,$gridTableBody:null,chartTableHeight:null,yPosition:0,knockoutObject:null,_create:function(){this.ganttChartWidget=this.options.GanttChart;this.ganttControlWidget=this.ganttChartWidget.options.Parent;this.$chartTableBody=a("<tbody style='overflow:hidden;'></tbody>");(this.$chartTable=a("<table class='chartRowsContainer rq-gc-rowsParent-table'></table>").append(this.$chartTableBody))[0].style.cssText=
b.ZeroStyle;this.RowHeight=this.options.RowHeight;this.SCROLLBAR_MIN_SIZE=10;this.totalItems=[];this.listItems=[];this.ganttControlWidget.GanttTaskItemBarCollection=[];var c=this.ganttChartWidget.element;this.$Area=a(".rq-gc-chartArea-div",c);this.$tableBody=a(".ui-grid-body",c.parent());this.$gridTableBody=a("tbody",this.$tableBody);var d=this.chartTableHeight=this.$Area.height();!1==this.options.IsPrinting&&this.options.Data.CollectionChanged.subscribe(this._bindCollectionChanged,this);c.bind("ganttchartrefreshui",
function(a,b){"ProjectGantt"==b.options.GanttType&&(this.options.WorkTimeSchedule=b.options.WorkTimeSchedule,this.options.TaskTemplate=b.options.TaskItemTemplate,this.options.ParentTaskTemplate=b.options.ParentTaskItemTemplate,this.options.ProgressBarTemplate=b.options.ProgressBarTemplate,this.ganttControlWidget.GanttTaskItemBarCollection=[],!0==b.ForceToReDrawRows&&(this._cachedRows={},this._renderBars(b)))}.bind(this));var e={};e.options={FlatItemsSource:this.options.Data,ViewWidth:this.options.ViewWidth};
this._renderBars(e);c.bind("ganttchartsourceupdated",function(b,c){this.$chartTableBody.empty();this._cachedRowCont=a("<div id='cache'></div>");this._cachedRows={};this.options.TaskTemplate=c.options.TaskItemTemplate;this.options.ParentTaskTemplate=c.options.ParentTaskItemTemplate;this.options.ProgressBarTemplate=c.options.ProgressBarTemplate;this.options.Data=c.options.FlatItemsSource;this.options.Data.CollectionChanged.subscribe(this._bindCollectionChanged,this);this.$dependencyDiv=null;this._renderBars(c)}.bind(this));
!1==this.options.IsPrinting&&(timer=null,a(window).resize(function(){null!=timer&&clearTimeout(timer);d=this.$Area.height();!0==this._areBarsRendered&&(timer=setTimeout(function(){this.ganttChartWidget.options.UseChartVirtualization&&null!=this.options.Data&&this.Refresh(this.element,this.options.Data,this.$chartTable,this.options.ViewWidth,d)}.bind(this),0))}.bind(this)));c=this.$tableBody;if(!1==this.options.IsPrinting){var f=null;c.scroll(function(){this.ganttControlWidget.options.UseChartVirtualization&&
(null!=f&&clearTimeout(f),f=setTimeout(function(){null!=this.options.Data&&this.Refresh(this.element,this.options.Data,this.$chartTable,this.options.ViewWidth,this.$Area.height())}.bind(this),10))}.bind(this))}this._createTaskContextMenu();this.ganttControlWidget.RedrawChartRows=function(){null!=this.options.Data&&this.Refresh(this.element,this.options.Data,this.$chartTable,this.options.ViewWidth,this.$Area.height())}.bind(this);this.element.data("GanttTaskItemsControl",this)},_createTaskItemBar:function(a,
b,e,f){a.GanttTaskItemBar({ActivityView:b,GanttChart:this.options.GanttChart,WorkTimeSchedule:this.options.WorkTimeSchedule,TaskBarHeight:this.options.TaskBarHeight,TaskTemplate:this.options.TaskTemplate,ProgressBarTemplate:this.options.ProgressBarTemplate,ParentTaskTemplate:this.options.ParentTaskTemplate,TaskBarBackgroundTemplate:this.options.TaskBarBackgroundTemplate,TaskBarAdornerTemplate:this.options.TaskBarAdornerTemplate,TaskTooltipTemplate:this.options.TaskTooltipTemplate,MovingInfoPopup:this.options.MovingInfoPopup,
ResizeInfoPopup:this.options.ResizeInfoPopup,ConnectingInfoPopup:this.options.ConnectingInfoPopup,RowCount:this.currentUniqueRowSuffix,KnockoutObjectName:this.options.KnockoutObjectName,Parent:this,TaskBarBrowseToCueLeftTemplate:this.options.TaskBarBrowseToCueLeftTemplate,TaskBarBrowseToCueRightTemplate:this.options.TaskBarBrowseToCueRightTemplate,IsPrinting:this.options.IsPrinting});this.ganttChartWidget.LoadingRow({Row:e,Data:b})},_timer:null,_bindCollectionChanged:function(a,b){null!=this._timer&&
clearTimeout(this._timer);if("insert"==a.type)if(this.ganttChartWidget.options.UseChartVirtualization)this._timer=setTimeout(function(){this.Refresh(this.element,a.target,this.$chartTable,this.options.ViewWidth,this.$Area.height())}.bind(this),0);else{this.InsertRow(this.element,b,this.$chartTable,this.options.ViewWidth);this.knockoutObject=eval(this.options.KnockoutObjectName);try{this.options.KnockoutObjectName&&ko.applyBindingsToDescendants(this.knockoutObject,this.$chartTable[0].rows[b.index])}catch(e){window.console&&
console.error(e+" :Error while inserting "+b.index)}}"remove"==a.type&&(this.ganttChartWidget.options.UseChartVirtualization?this._timer=setTimeout(function(){this.Refresh(this.element,a.target,this.$chartTable,this.options.ViewWidth,this.$Area.height())}.bind(this),0):this.RemoveRow(b,this.$chartTable))},_areBarsRendered:!1,_renderBars:function(a){this._areBarsRendered=!0;null!=a.options.FlatItemsSource&&(this.ActivityViews=a.options.FlatItemsSource,this.Refresh(this.element,a.options.FlatItemsSource,
this.$chartTable,a.options.ViewWidth,this.$Area.height()))},_cachedRows:{},_cachedRowCont:a("<div id='cache'></div>"),_getVirtualizedTask:function(b,d){var e=this.ActivityViews._dictActivityVsView[b];if(this._cachedRows[b])return e.ChartRow(this._cachedRows[b]),this._cachedRows[b];var f=a("<tr VirtualizationID="+b+"></tr>"),g=a("<td id='ChartRow'/>");f.css("height",25);var h=f.height();g.css("height",h);f.append(g);!1==this.options.IsPrinting&&e.ChartRow(f);this._createTaskItemBar(g,this.ActivityViews._dictActivityVsView[b],
f,null);g.width(d);e.IsSelected()&&g.addClass("rq-row-selected");return this._cachedRows[b]=f},$dependencyDiv:null,Refresh:function(b,d,e,f,g){var h=this.$Area.height();0==this.$tableBody.length&&(this.$tableBody=a(".ui-grid-body",this.ganttChartWidget.element.parent()));0==this.$gridTableBody.length&&(this.$gridTableBody=a("tbody",this.$tableBody));!1==this.options.IsPrinting&&(h=this.ganttControlWidget.options.UseVirtualization?Math.min(h,this.$gridTableBody.height()):Math.min(h,this.$gridTableBody.height(),
this.$tableBody[0].clientHeight));e.css("height","auto");b.append(e);if(null==this.$dependencyDiv||0==this.$dependencyDiv.length)this.$dependencyDiv=a("div.rq-gc-dependencysParent",this.$Area);g=this.$tableBody.scrollTop();if(!0==this.ganttChartWidget.options.UseChartVirtualization){this._cachedRowCont.append(this.$chartTableBody.children());b=Math.floor(g/this.RowHeight);var k=0;for(e[0].style.setProperty("margin-top",-(g%this.RowHeight)+"px","important");k*this.RowHeight<h;){var l=b+k;if(l>=d.length)break;
var l=d[l],n=this._getVirtualizedTask(l.Activity.ID,f);n[0]["data-grid-item"]=l;e.append(n);a("#ChartRow",n).data().GanttTaskItemBar._OnRecomputeLocation();k++}}else{this.$chartTableBody.empty();for(k=0;k<d.length;k++)h=a("<tr></tr>"),l=a("<td id='ChartRow'/>"),h.css("height",this.options.RowHeight),n=h.height(),l.height(n),h.append(l),!1==this.options.IsPrinting&&d[k].ChartRow(h),e.append(h),this._createTaskItemBar(l,d[k],h,null),h[0]["data-grid-item"]=d[k],this.currentUniqueRowSuffix++,l.width(f),
d[k].IsSelected()&&l.addClass("rq-row-selected");b.scrollTop(g)}e.width(f);this.$dependencyDiv.scrollTop(g);this._enableAlternativeRowBackground()},_enableAlternativeRowBackground:function(){!0==this.options.EnableAlternativeRowBackground&&(a("td",this.$chartTable).removeClass("rq-grid-alternative-background"),a("td",this.$chartTable).addClass(function(){var b=a(this);if(!0==(0==a(b.parent()[0]["data-grid-item"].TableRow()).index()%2))return"rq-grid-alternative-background"}))},_createTaskContextMenu:function(){var b=
"#"+this.ganttChartWidget.$GanttChart[0].id,d=[{keyName:"ConvertToMilestone",name:window.RadiantQ_ConvertToMilestoneString,icon:"Convert to Milestone"}],b=new RadiantQ.Gantt.ContextMenuImpl.ContextMenu(b+" .rq-gc-taskbar, "+b+" .taskbar-style");b.AddNewItems(d);b.ItemClicked.subscribe(function(b,c){var d=a(c.$trigger[0].parentElement).data();"ConvertToMilestone"==b&&null!=d&&d.GanttTaskItemBar.options.ActivityView.ConvertToMilestone(d.GanttTaskItemBar.options.ActivityView.Activity)});b.BeforeContextMenu.subscribe(function(a,
b){if(this.ganttControlWidget.options.IsReadOnly||this.ganttControlWidget.options.IsEffortReadOnly)b.data.items.ConvertToMilestone.disabled=!0},this);var d=[{keyName:"ConverToNormalTask",name:window.RadiantQ_ConvertToNormalTaskString,icon:"Convert to normal Task"}],e=new RadiantQ.Gantt.ContextMenuImpl.ContextMenu(".rq-gc-milestoneBar");e.AddNewItems(d);e.ItemClicked.subscribe(function(b,c){var d=a(c.$trigger[0].parentElement).data();"ConverToNormalTask"==b&&d.GanttTaskItemBar.options.ActivityView.ConvertToNormalTask(d.GanttTaskItemBar.options.ActivityView.Activity,
d.GanttTaskItemBar.options.GanttChart.options)});e.BeforeContextMenu.subscribe(function(a,b){if(this.ganttControlWidget.options.IsReadOnly||this.ganttControlWidget.options.IsEffortReadOnly)b.data.items.ConverToNormalTask.disabled=function(){return!0}},this);this.ganttControlWidget.TaskContextMenu=b},getItemAtIndex:function(b,d,e){if(0<=b&&b<this.options.Data.length){var f=b.toString();if(null===this.listItems[f]||void 0===this.listItems[f]||null===this.listItems[d[b].Activity.ID-1]||void 0===this.listItems[d[b].Activity.ID-
1]&&this.listItems[f].attr("VirtualizationID")!=d[b].Activity.ID){var g=a("<tr VirtualizationID="+d[b].Activity.ID+">  </tr>"),h=a("<td id='ChartRow'/>");g.css("height",25);var k=g.height();h.css("height",k);g.append(h);!1==this.options.IsPrinting&&d[b].ChartRow(g);this._createTaskItemBar(h,d[b],g,null);this.currentUniqueRowSuffix++;h.width(e);d[b].IsSelected()&&h.addClass("rq-row-selected");null===this.listItems[f]||void 0===this.listItems[f]?this.listItems[f]=g:this.listItems[d[b].Activity.ID-1]=
g}else g=this.listItems[f].attr("VirtualizationID")!=d[b].Activity.ID?this.listItems[d[b].Activity.ID-1]:this.listItems[b],!1==this.options.IsPrinting&&d[b].ChartRow(g);g.attr("list-index",b);return g}},cleanupListItems:function(a){for(var b,e,f=0;f<this.totalItems.length;f++)b=this.totalItems[f],e=b.attr("list-index"),void 0!==this.processedItems[e]&&this.processedItems[e].attr("VirtualizationID")==b.attr("VirtualizationID")||b.detach();b=[];if(this.processedItems)for(e in this.processedItems)b.push(this.processedItems[e]);
this.totalItems=b;!0!==a&&this.ScrollBar.fadeTo(300,0)},InsertRow:function(b,d,e,f){for(b=0;b<d.items.length;b++){var g=a("<tr></tr>"),h=a("<td id='ChartRow' />");g.css("height",this.options.RowHeight);var k=g.height();h.css("height",k);this._createTaskItemBar(h,d.items[b],g,d.index);g.append(h);this.currentUniqueRowSuffix++;d.items[0].ChartRow(g);k=e.find("tr");0==d.index?k.length?k.eq(0).before(g[0]):e.append(g):k.eq(d.index-1).after(g[0]);g[0]["data-grid-item"]=d.items[0];h.width(f);d.items[0].IsSelected()&&
h.addClass("rq-row-selected")}this._enableAlternativeRowBackground()},RemoveRow:function(a,b){b.find("tr").eq(a.index);b.find("tr").eq(a.index).remove();this._enableAlternativeRowBackground();this.ActivityViews[a.index]&&delete this._cachedRows[this.ActivityViews[a.index].Activity.ID]},_setOption:function(b,d){a.Widget.prototype._setOption.apply(this,arguments);a("td.rq-gc-row ",this.$chartTableBody).GanttTaskItemBar("option",b,d)},_destroy:function(){this._cachedRows={};this._cachedRowCont=a("<div id='cache'></div>")}})})(jQuery);
ns_gantt=RadiantQ.Gantt;rqTCUtils=RadiantQ.Gantt.Utils.TimeComputingUtils;
(function(a){TimeComputingUtils=RadiantQ.Gantt.Utils.TimeComputingUtils;var b=!1;a.widget("radiantq.GanttTaskItemBar",{options:{ActivityView:null,GanttChart:null,WorkTimeSchedule:null,TaskBarHeight:null,TaskTemplate:null,ProgressBarTemplate:null,ParentTaskTemplate:null,TaskBarBackgroundTemplate:null,TaskBarAdornerTemplate:null,Data:null,ProgressTemplate:null,TaskTooltipTemplate:null,ResizeInfoPopup:null,MovingInfoPopup:null,ConnectingInfoPopup:null,IsParentTypeRow:null,RowCount:null,KnockoutObjectName:null,
Parent:null,TaskBarBrowseToCueLeftTemplate:null,TaskBarBrowseToCueRightTemplate:null,IsPrinting:!1},StartTime:function(){return this.Activity.StartTime},EndTime:function(){return this.Activity.EndTime},Effort:function(){return this.Activity.Effort},IsParent:function(){return this.ActivityView.IsParent},IsExpanded:function(){return this.ActivityView.IsExpanded},IsMilestone:function(){return this.Activity.IsMilestone},IsRegularTask:function(){return this.ActivityView.IsRegularTask},ProgressPercent:function(){return this.Activity.ProgressPercent},
ProgressEndTime:function(){return this.Activity.ProgressEndTime},WorkTimeSchedule:function(){return this.GanttControl.options.WorkTimeSchedule},OriginalLeft:0,OriginalWidth:0,ActivityView:null,Activity:null,IsTemplateApplied:!1,taskStartAndEndTime:{},GanttControl:null,GanttChart:null,GanttChartRows:null,GanttTaskItemsControl:null,TaskBarRectangle:null,ProgressBarRectangle:null,MileStoneBar:null,ParentBar:null,PropertyChanged:new ObjectEvent("PropertyChanged"),HasChanged:!1,TaskItemsControl:null,_create:function(a){var b=
this.options;this.TaskItemsControl=b.Parent;this.GanttChart=b.GanttChart;this.GanttControl=this.GanttChart.options.Parent;this.ActivityView=b.ActivityView;this.Activity=this.ActivityView.Activity;this.KnockoutObject=eval(b.KnockoutObjectName);this.element.data("GanttTaskItemBar",this);this.element.addClass("rq-gc-row");this.ActivityView.PropertyChanged.subscribe(this._actView_PropertyChanged,this);this.Activity.PropertyChanged.subscribe(this._activity_PropertyChanged,this);this.Activity._assignments.CollectionChanged.subscribe(this._activity_Assignments_CollectionChanged,
this);b.IsPrinting||this.GanttControl.ReadOnlyPropertyChange.subscribe(this.ReadOnlyStateChangedCallback,this);try{this.KnockoutObject&&(this.KnockoutObject["Task"+b.RowCount]=this.Activity.DataSource)}catch(e){}this._renderElementsFromTemplate();this.element.append(this.TaskBarRectangle);this._listenForMouseEnterAndLeave();this._listenForShiftAndResizeTracker();"ShowContextMenu"==this.GanttChart.options.TouchTapAction&&this._listenForTouchTap();this.UpdateResourceText();this._loadBrowseToCue();this.ApplyTooltipSettings(this.TaskBarRectangle,
b.Data);this.ApplyTooltipSettings(this.ParentBar,b.Data);this.ApplyTooltipSettings(this.MileStoneBar,b.Data);this._loadAdornerAndBgTemplate();this.taskStartAndEndTime={Name:this.options.ActivityView.Activity.ActivityName,OriginalStart:this.Activity.StartTime,OriginalEnd:this.Activity.EndTime,originalWidth:this.TaskBarRectangle.width(),originalLeft:this.TaskBarRectangle.css("margin-left"),ProgressEndTime:null,ProposedEnd:null,ProposedStart:null};this.IsTemplateApplied=!0;a||this._OnRecomputeLocation();
b.GanttChart.element.bind("ganttchartrefreshui.GanttControlTaskBarRefreshUI",function(a,b){"ProjectGantt"==b.options.GanttType&&(this.options.WorkTimeSchedule=b.options.WorkTimeSchedule,this._OnRecomputeLocation(),this._removeTooltip(this.TaskBarRectangle),this._removeTooltip(this.ParentBar),this._removeTooltip(this.MileStoneBar))}.bind(this));this._GanttChart_ViewportTimeRangeChanged(this,null);this.GanttChart._dirtyTaskItemControls&&(this.GanttChart._dirtyTaskItemControls.push(this),this.GanttChart._diryTaskItemByActs[this.Activity.id]=
this);this.options.IsPrinting||(this.initValuesFromOptions(),this.UpdateThumbsReadOnlyStates())},RedrawTaskBar:function(a){this._destroy();this._create(a);this.KnockoutObject&&ko.applyBindingsToDescendants(this.KnockoutObject,this.element[0])},KnockoutObject:null,ViewStartTime:function(){return this.GanttChart.options.ComputedStartTime},ViewEndTime:function(){return this.GanttChart.options.ComputedEndTime},ViewWidth:function(){return this.GanttChart.options.ViewWidth},_OnRecomputeLocation:function(){if(null!=
this.ActivityView&&!0!=this.StartTime().isGreaterThan(this.EndTime())&&!1!=this.IsTemplateApplied){var b=TimeComputingUtils.ConvertToUnitsOfBaseScaleType(this.GanttChart.options.BaseTimeScaleType,this.ViewStartTime(),this.StartTime(),this.GanttChart.options.WorkTimeSchedule)*this.GanttChart.options.BaseTimeUnitWidth,d=TimeComputingUtils.ConvertToUnitsOfBaseScaleType(this.GanttChart.options.BaseTimeScaleType,this.StartTime(),this.EndTime(),this.GanttChart.options.WorkTimeSchedule)*this.GanttChart.options.BaseTimeUnitWidth;
this.OriginalLeft=b;this.OriginalWidth=d;null!=this.ParentBar&&this.ParentBar.css("display","none");null!=this.MileStoneBar&&this.MileStoneBar.css("display","none");null!=this.TaskBarRectangle&&this.TaskBarRectangle.css("display","none");if(this.IsParent()||this.IsMilestone()){this.CanvasLeft=b-7;if(this.IsParent()){25>d?this.ParentBar.css("width","45px"):this.ParentBar.css("width",d+20+"px");this.ParentBar.css({"margin-left":b-10+"px","margin-top":"2px"});this.BarPolygon=this.ParentBar;this.BarWidth=
d;this.OriginalCompletedWidth=this.CompletedWidth=0;this.ParentBar&&this.element.append(this.ParentBar);var e=a("div.label",this.ParentBar);0==e.length&&(e=a("div.rq-gc-taskbar-label",this.ParentBar));this.ParentBar&&0<e.length&&e.css("margin-left","30px")}else{this.MileStoneBar.css("width","17px");var f=this.MileStoneBar.outerWidth();this.MileStoneBar.css("margin-left",b-f/2-1+"px");this.MileStoneBar.css("margin-top","4px");this.BarPolygon=this.MileStoneBar;this.BarWidth=14;this.OriginalCompletedWidth=
this.CompletedWidth=0;this.MileStoneBar&&this.element.append(this.MileStoneBar)}null!=this.BarPolygon&&this.BarPolygon.css("display","block");null!=this.TaskBarRectangle&&this.TaskBarRectangle.css("display","none");null!=this.ProgressPercentResizeThumb&&this.ProgressPercentResizeThumb.hide()}else this.CanvasLeft=b,this.BarWidth=d,null!=this.ParentBar&&this.ParentBar.css("display","none"),null!=this.MileStoneBar&&this.MileStoneBar.css("display","none"),null!=this.TaskBarRectangle&&this.TaskBarRectangle.css("display",
"block"),this._UpdateProgressBarPosition(b);this.CanvasRight=this.CanvasLeft+this.BarWidth;this.TaskBarRectangle.css("width",d+"px");this.TaskBarRectangle.css("margin-left",b+"px");this.TaskBarRectangle.css("margin-top","3px");this.ProgressBarRectangle.width(this.CompletedWidth-1);this.ProgressBarRectangle.css("border-width","1px");this.ProgressBarRectangle.css("border-style","solid");0==this.CompletedWidth&&this.ProgressBarRectangle.css("border-width","0px");b=this.TaskBarRectangle.height();this.ProgressBarRectangle.css("margin-top",
b/2-2.5+"px");this._loadAdornerAndBgTemplate();this._drawVerticalLines(f);this._updateTaskBarLabel();this._UpdateBrowseToTaskCuesStates();f=this.GanttChart.options.OnTaskBarLoad;null!=f&&"function"==typeof f&&f.call(this.TaskBarRectangle[0],this)}},_drawVerticalLines:function(a){var b=this.IsMilestone(),e=this.IsParent(),f=this.element,f=this.TaskBarRectangle;!0==e&&(f=this.ParentBar);!0==b&&!1==e&&(b=!0,f=this.MileStoneBar);if(null!=f){var g=f.find("div.rq-gc-start-verticalLine"),h=f.find("div.rq-gc-end-verticalLine");
if(0!=g.length||0!=h.length){var k=f.closest("tr");if(k.length){var l=parseInt(f.css("margin-top"));f.height();f=f.width();k=k[0].offsetTop;l={height:k+l+"px","margin-left":"0px","margin-top":-(k+l)+"px"};taskbarwidth=f;!0==b&&!1==e&&(taskbarwidth=a/2,l["margin-left"]=taskbarwidth+"px");0!=g.length&&g.css(l);0!=h.length&&(l["margin-left"]=taskbarwidth+"px",h.css(l));a=this.options.GanttChart.options.TimeIndicatorLineOption;(a&ns_gantt.TimeIndicatorLines.Always)!=ns_gantt.TimeIndicatorLines.Always||
(a&ns_gantt.TimeIndicatorLines.OnResize)==ns_gantt.TimeIndicatorLines.OnResize?(g.hide(),h.hide()):(g.show(),h.show())}}}},_actView_PropertyChanged:function(a,b){"IsReadOnly"==b.PropertyName&&this.ReadOnlyStateChangedCallback(a,b)},UpdateUI:function(){var a=this.GanttChart._dirtyTaskItemControls;this.GanttChart._dirtyTaskItemControls=[];this.GanttChart._diryTaskItemByActs={};for(var b=0;b<a.length;b++)a[b]._OnRecomputeLocation();this.GanttChart._dirtyTasksTimer=null;this.GanttChart._dirtyTaskItemControls=
[]},_isActivityPropertyChanged:!1,_$parentMiddleBar:null,_activity_PropertyChanged:function(b,d){this._isActivityPropertyChanged=!0;void 0===this.GanttChart._dirtyTaskItemControls&&(this.GanttChart._dirtyTasksTimer=null,this.GanttChart._dirtyTaskItemControls=[],this.GanttChart._diryTaskItemByActs={});null==this._$parentMiddleBar&&(this._$parentMiddleBar=a(".rq-gc-parentBar-middle",this.ParentBar));0==this._$parentMiddleBar.length&&(this._$parentMiddleBar=a(".parentMiddleBar-style",this.ParentBar));
"IsExpanded"==d.PropertyName&&(!1==d.value?this._$parentMiddleBar.addClass("rq-gc-Parentbar-collapsed"):this._$parentMiddleBar.removeClass("rq-gc-Parentbar-collapsed"));var e=this.Activity.ID;void 0===this.GanttChart._diryTaskItemByActs[e]&&this.GanttChart._dirtyTaskItemControls.push(this);this.GanttChart._diryTaskItemByActs[e]=this;e=this.GanttChart._dirtyTasksTimer;null!=e&&clearTimeout(e);this.GanttChart._dirtyTasksTimer=setTimeout(function(){this.UpdateUI()}.bind(this),0)},_AdjustOrigionalLeftAndWidth:function(){if(0>
this.OriginalLeft+this.OriginalWidth||this.OriginalLeft>this.ViewWidth())left=-10,width=0;else{var a=this.GanttChart.GetBarRenderStartTime(this.StartTime()),b=this.GanttChart.GetBarRenderEndTime(this.EndTime());!1!=a.equals(this.StartTime())&&!1!=b.equals(this.EndTime())||!a.isLessThan(b)||(width=TimeComputingUtils.ConvertToUnitsOfBaseScaleType(this.GanttChart.options.BaseTimeScaleType,a,b,this.GanttChart.options.WorkTimeSchedule)*this.GanttChart.options.BaseTimeUnitWidth,left=TimeComputingUtils.ConvertToUnitsOfBaseScaleType(this.GanttChart.options.BaseTimeScaleType,
this.ViewStartTime(),a,this.GanttChart.options.WorkTimeSchedule)*this.GanttChart.options.BaseTimeUnitWidth)}},_UpdateProgressBarPosition:function(b){var d=this.OriginalWidth*this.ProgressPercent()/100;0==this.BarWidth?this.OriginalCompletedWidth=this.CompletedWidth=0:0>d?this.OriginalCompletedWidth=this.CompletedWidth=0:(this.OriginalCompletedWidth=d,d-=b-this.OriginalLeft,0>d&&(d=0),d>this.BarWidth&&(d=this.BarWidth),this.CompletedWidth=d);this.ProgressPercentResizeThumb=a("div.rq-gc-progressbar-resizer",
this.element);0==this.ProgressPercentResizeThumb.length&&(this.ProgressPercentResizeThumb=a("div.ui-progress-resizer",this.element));this.ProgressPercentResizeThumb.mouseover(this.TaskBarMouseHover.bind(this));this.ProgressPercentResizeThumb.mouseleave(this.TaskBarMouseLeave.bind(this));null!=this.ProgressPercentResizeThumb&&(10<this.BarWidth?(this.ProgressPercentResizeThumb.show(),this.ProgressPercentResizeThumb.css("margin-left",this.CanvasLeft+this.CompletedWidth),this.ProgressPercentResizeThumb.css("height",
a(this.TaskBarRectangle).css("height"))):this.ProgressPercentResizeThumb.hide())},_updateTaskBarLabel:function(){var b=this.options,d=a("div.rq-gc-taskbar-label",this.TaskBarRectangle);0==d.length&&(d=a("div.label",this.TaskBarRectangle));this.LabelTmpl&&!this.KnockoutObject&&(b=a.tmpl(this.LabelTmpl,b.ActivityView.Activity),0<b.length&&b.text()&&(b.text(),b.css("margin-left",this.TaskBarRectangle.width()+12+"px")),d.replaceWith(b));this.TaskBarRectangle&&0<d.length&&d.css("margin-left",this.TaskBarRectangle.width()+
12+"px")},UpdateResourceText:function(b){if(0<this.Activity._assignments.length){var d=a("div#GanttTaskBarLabel",this.TaskBarRectangle);!0==this.IsParent()&&(d=a("div#GanttTaskBarLabel",this.ParentBar));if(d.length){var e=RadiantQ.Gantt.ValueConverters.ConverterUtils.GetResourcesText(this.Activity._assignments,!1);d[0].innerHTML=e;d[0].style.fontSize="12px";!1==this.ActivityView.IsParent?d.css("margin-right",-(12*d[0].innerHTML.length/2+5)+"px"):d.css("margin-left","30px")}}!0==b&&0==this.Activity._assignments.length&&
(a("div#GanttTaskBarLabel",this.TaskBarRectangle).html(""),a("div#GanttTaskBarLabel",this.ParentBar).html(""))},_listenForShiftAndResizeTracker:function(){!1!=this.options.IsPrinting||this.IsReadOnly||this.TaskReadOnly||(this.TaskBarRectangle.ganttShiftTracker(this,this.DragEnd),this.TaskBarRectangle.ganttResizeTracker(this,this.ResizeEnd),this.ParentBar.ganttShiftTracker(this,this.DragEnd),this.MileStoneBar.ganttShiftTracker(this,this.DragEnd),this.TaskBarRectangle.css("cursor","move"))},DragEnd:function(a,
b){if(!this.StartTime().equals(this.taskStartAndEndTime.ProposedStart)||!this.EndTime().equals(this.taskStartAndEndTime.ProposedEnd))if(this.Activity.PreferredStartTime=this.taskStartAndEndTime.ProposedStart,this.Activity.StartTime=this.taskStartAndEndTime.ProposedStart,this.ProgressEndTime(this.Activity.ProgressEndTime),0<this.GanttControl.ActivityTimeChanged.fn.length){var e=new TimesChangingEventArgs(this.Activity,this.taskStartAndEndTime.OriginalStart,this.taskStartAndEndTime.OriginalEnd,"DragEnd");
this.GanttControl.ActivityTimeChanged.raise(this,e)}this._isActivityPropertyChanged=!1;this.TaskBarRectangle.removeClass("rq-taskbar-shadow")},ResizeEnd:function(a,b,e){b.forProgressBar.isTrue||(this.Activity.PreferredStartTime=this.Activity.StartTime,this.Activity.EndTime=this.taskStartAndEndTime.OriginalEnd,0<this.GanttControl.ActivityTimeChanged.fn.length&&(a=new TimesChangingEventArgs(this.Activity,this.taskStartAndEndTime.OriginalStart,this.taskStartAndEndTime.OriginalEnd,"ResizeEnd"),this.GanttControl.ActivityTimeChanged.raise(this,
a)));this._isActivityPropertyChanged=!1;this.TaskBarRectangle.removeClass("rq-taskbar-shadow")},_listenForTouchTap:function(){this.TaskBarRectangle[0].addEventListener("touchstart",this._onTouchstart.bind(this),!1);this.TaskBarRectangle[0].addEventListener("touchend",this._onTouchend.bind(this),!1);this.TaskBarRectangle[0].addEventListener("MSPointerDown",this._onTouchstart.bind(this),!1);this.TaskBarRectangle[0].addEventListener("MSPointerUp",this._onTouchend.bind(this),!1)},tapDownX:null,tapDownY:null,
_onTouchstart:function(a){a=a.touches?a.touches[0]:a;this.tapDownX=a.clientX;this.tapDownY=a.clientY},_onTouchend:function(b){var d=b.changedTouches?b.changedTouches[0]:b;this.tapDownX==d.clientX&&this.tapDownY==d.clientY&&"mouse"!=b.pointerType&&4!=b.pointerType&&a(this.TaskBarRectangle).contextMenu({x:d.clientX,y:d.clientY})},_listenForMouseEnterAndLeave:function(){this.TaskBarRectangle.mouseover(this.TaskBarMouseHover.bind(this));this.ParentBar.mouseover(this.TaskBarMouseHover.bind(this));this.MileStoneBar.mouseover(this.TaskBarMouseHover.bind(this));
this.TaskBarRectangle.mouseleave(this.TaskBarMouseLeave.bind(this));this.ParentBar.mouseleave(this.TaskBarMouseLeave.bind(this));this.MileStoneBar.mouseleave(this.TaskBarMouseLeave.bind(this))},TaskBarMouseHover:function(a,b){this.GanttChart.TaskOnMouseHover=this.ActivityView;var e=this.IsMilestone(),f=this.IsParent(),g=this.TaskBarRectangle;!0==f&&(g=this.ParentBar);!0==e&&!1==f&&(g=this.MileStoneBar);!1==e&&!1==f&&g.addClass("rq-taskbar-shadow");this.GanttChart.options.TimeIndicatorLineOption==
ns_gantt.TimeIndicatorLines.OnHover&&(g.find("div.rq-gc-start-verticalLine").show(),g.find("div.rq-gc-end-verticalLine").show())},TaskBarMouseLeave:function(a,b){var e=this.IsMilestone(),f=this.IsParent(),g=this.TaskBarRectangle;!0==f&&(g=this.ParentBar);!0==e&&!1==f&&(g=this.MileStoneBar);!1==e&&!1==f&&g.removeClass("rq-taskbar-shadow");this.GanttChart.options.TimeIndicatorLineOption==ns_gantt.TimeIndicatorLines.OnHover&&(g.find("div.rq-gc-start-verticalLine").hide(),g.find("div.rq-gc-end-verticalLine").hide());
this.GanttChart.TaskOnMouseHover=null},_updateElementsFromTemplate:function(){var a=this.TaskBarRectangle,b=this.MileStoneBar,e=this.ParentBar;this._renderElementsFromTemplate();a.replaceWith(this.TaskBarRectangle);b.replaceWith(this.MileStoneBar);e.replaceWith(this.ParentBar)},_renderElementsFromTemplate:function(){var b=this.options;b.TaskTemplate?(b.TaskTemplate=b.TaskTemplate.replace(/RQDataContext/g,["Task"+b.RowCount]),this.TaskBarRectangle=a.tmpl(this.options.TaskTemplate,this.Activity)):this.TaskBarRectangle=
a("<div class='rq-gc-taskbar ui-state-default'><div id='GanttTaskBarLabel' class='rq-gc-taskbar-label'></div></div>");b.ProgressBarTemplate?(b.ProgressBarTemplate=b.ProgressBarTemplate.replace(/RQDataContext/g,["Task"+b.RowCount]),this.ProgressBarRectangle=a.tmpl(b.ProgressBarTemplate,this.Activity)):this.ProgressBarRectangle=a("<div class='rq-gc-progressbar progressbarStyle'></div>");b.MileStoneTemplate?(b.MileStoneTemplate=b.MileStoneTemplate.replace(/RQDataContext/g,["Task"+b.RowCount]),this.MileStoneBar=
a.tmpl(b.MileStoneTemplate,this.Activity)):this.MileStoneBar=a("<div class='rq-gc-milestoneBar'><div class='rq-gc-start-verticalLine' style='width:0px;'></div><div class='rq-gc-end-verticalLine' style='width:0px;'></div>");b.ParentTaskTemplate?(b.ParentTaskTemplate=b.ParentTaskTemplate.replace(/RQDataContext/g,["Task"+b.RowCount]),this.ParentBar=a.tmpl(b.ParentTaskTemplate,this.Activity)):this.ParentBar=this.Activity.IsExpanded?a("<div  class='rq-gc-parentBar'><div class='rq-gc-parentBar-leftCue'></div><div class='rq-gc-parentBar-middle'></div><div class='rq-gc-parentBar-rightCue'><div id='GanttTaskBarLabel' class='rq-gc-taskbar-label'></div></div><div class='rq-gc-start-verticalLine' style='width:0px;'></div><div class='rq-gc-end-verticalLine' style='width:0px;'></div>"):
a("<div  class='rq-gc-parentBar'><div class='rq-gc-parentBar-leftCue'></div><div class='rq-gc-parentBar-middle rq-gc-Parentbar-collapsed'></div><div class='rq-gc-parentBar-rightCue'><div id='GanttTaskBarLabel' class='rq-gc-taskbar-label'></div></div><div class='rq-gc-start-verticalLine' style='width:0px;'></div><div class='rq-gc-end-verticalLine' style='width:0px;'></div>");b.TaskBarHeight?(this.TaskBarRectangle.css("height",b.TaskBarHeight+"px"),this.ParentBar.css("height",b.TaskBarHeight+"px"),
this.MileStoneBar.css("height",b.TaskBarHeight+"px")):(this.taskHeight=this.element.height(),this.TaskBarRectangle.css("height",this.taskHeight-8+"px"),this.ParentBar.css("height",this.taskHeight-8+"px"),this.MileStoneBar.css("height",this.taskHeight-8+"px"));this.TaskBarRectangle.addClass("rq-gc-commonTaskbar");this.TaskBarRectangle.append(this.ProgressBarRectangle);this.element.css("position","absolute")},taskBarBackgroundElement:null,taskBarAdornerElement:null,_loadAdornerAndBgTemplate:function(){var b=
this.options,d=this.IsParent();!1==d&&b.TaskBarBackgroundTemplate&&(null!=this.taskBarackgroundElement&&this.taskBarackgroundElement.remove(),this.taskBarackgroundElement=a.tmpl(this.options.TaskBarBackgroundTemplate,b),this.element.append(this.taskBarackgroundElement));!1==d&&b.TaskBarAdornerTemplate&&(null!=this.taskBarAdornerElement&&this.taskBarAdornerElement.remove(),this.taskBarAdornerElement=a.tmpl(b.TaskBarAdornerTemplate,b),this.element.append(this.taskBarAdornerElement.css({"z-index":"10"})));
if(!this.KnockoutObject&&b.TaskTemplate){var d=b.TaskTemplate.indexOf("<div class='rq-gc-taskbar-label'>"),e=b.TaskTemplate.indexOf("</div>",d);this.LabelTmpl=b.TaskTemplate.slice(d,e)+"</div>"}b=a("div.rq-gc-taskbar-label",this.TaskBarRectangle);0==b.length&&(b=a("div.label",this.TaskBarRectangle));0<b.length&&b.css("margin-left",this.TaskBarRectangle.width()+12+"px")},_activity_Assignments_CollectionChanged:function(){this.UpdateResourceText(!0)},BrowseToCueLeft:0,BrowseToCueRight:0,BrowseToTaskCueLeftVisibility:"none",
BrowseToTaskCueRightVisibility:"none",_GanttChart_ViewportTimeRangeChanged:function(a,b){this.BrowseToCueLeft=this.options.GanttChart.GanttChart.scrollLeft();this.BrowseToCueRight=this.BrowseToCueLeft+this.options.GanttChart.GanttChart[0].clientWidth-30;this._UpdateBrowseToTaskCuesStates()},_UpdateBrowseToTaskCuesStates:function(){this.BrowseToTaskCueLeftVisibility=null!=this.options.TaskBarBrowseToCueLeftTemplate&&this.EndTime()<=this.options.GanttChart.VisualStartTime?"block":"none";this.BrowseToTaskCueRightVisibility=
null!=this.options.TaskBarBrowseToCueRightTemplate&&this.StartTime()>=this.options.GanttChart.VisualEndTime?"block":"none";this.TaskBarBrowseToCueLeft&&this.TaskBarBrowseToCueLeft.css({"margin-left":this.BrowseToCueLeft,display:this.BrowseToTaskCueLeftVisibility});this.TaskBarBrowseToCueRight&&this.TaskBarBrowseToCueRight.css({"margin-left":this.BrowseToCueRight,display:this.BrowseToTaskCueRightVisibility})},_loadBrowseToCue:function(){var a=this.options;(a.TaskBarBrowseToCueLeftTemplate||a.TaskBarBrowseToCueRightTemplate)&&
this.GanttChart.ViewportTimeRangeChanged.subscribe(this._GanttChart_ViewportTimeRangeChanged,this);a.TaskBarBrowseToCueLeftTemplate&&this._createBrowseToCueLeft(a);a.TaskBarBrowseToCueRightTemplate&&this._createBrowseToCueRight(a)},_createBrowseToCueLeft:function(b){this.TaskBarBrowseToCueLeft=a(b.TaskBarBrowseToCueLeftTemplate);this.element.append(this.TaskBarBrowseToCueLeft);this.TaskBarBrowseToCueLeft[0].ganttTaskItemBar=this;this.TaskBarBrowseToCueLeft[0].title=window.RadiantQ_ScrollToTask;this.TaskBarBrowseToCueLeft.addClass("rq-gc-browseCue-left").bind("touchstart mousedown",
this.BrowseToTaskCue_Click.bind(this))},_createBrowseToCueRight:function(b){this.TaskBarBrowseToCueRight=a(b.TaskBarBrowseToCueRightTemplate);this.element.append(this.TaskBarBrowseToCueRight);this.TaskBarBrowseToCueRight[0].ganttTaskItemBar=this;this.TaskBarBrowseToCueRight[0].title=window.RadiantQ_ScrollToTask;this.TaskBarBrowseToCueRight.addClass("rq-gc-browseCue-right").bind("touchstart mousedown",this.BrowseToTaskCue_Click.bind(this))},BrowseToTaskCue_Click:function(a){a=this.StartTime();this.GanttChart._setOption("AnchorTime",
a);return!1},_BrowseToCueTemplateChanged:function(){this._GanttChart_ViewportTimeRangeChanged()},TooltipContent:null,DragTooltipContent:null,ResizeTooltipContent:null,ApplyTooltipSettings:function(b){a(b).attr("title","");this.LoadDefaultTooltipStyle();this.CreateTooltip(this,b);this.UpdateTooltipContent(this.options.ActivityView)},CreateTooltip:function(c,d){a(d).tooltip({open:function(a,b){disableTooltip=d[0].disableTooltip;d[0].uiTooltip=b.tooltip;var c=b.tooltip.find("table.TaskTooltip");0!=c.length&&
(c=c.width(),b.tooltip.css("max-width",c+"px"),b.tooltip.css("width",c+"px"))},disableTooltip:!1,content:function(d){if(this.disableTooltip||b)return null;this.disableTooltip=!1;c.TooltipContent=a('<div class="TaskTooltip" />').append(a.tmpl(c.options.TaskTooltipTemplate,c.options.ActivityView.activity,{isParentType:e.IsParent,DataContext:_self}));return c.TooltipContent},position:{my:"left bottom",at:"top",offset:"10"},track:!0});this.updateTooltip=function(b,c){"StartTime"!=c.PropertyName&&"EndTime"!=
c.PropertyName&&"ProgressPercent"!=c.PropertyName&&"ActivityName"!=c.PropertyName||!this.options.TaskTooltipTemplate||(this.TooltipContent=a('<div class="TaskTooltip" />').append(a.tmpl(this.options.TaskTooltipTemplate,b,{isParentType:e.IsParent,DataContext:_self})))};var e=this.options.ActivityView;_self=this;var f=!1;a(d).hover(function(){f=!0},function(){f=!1});a(d).mouseout(function(){f||_self._removeTooltip(d)});a(d).mousedown(function(){_self._removeTooltip(d)})},_removeTooltip:function(b){var d=
"#"+a(b).attr("aria-describedby");a(d).remove();a(b).removeAttr("aria-describedby")},UpdateTooltipContent:function(b){if(b.ProposedStart&&b.ProposedEnd){0==b.OriginalStart.compareTo(b.ProposedStart)&&0==b.OriginalEnd.compareTo(b.ProposedEnd)&&(b.HasChanged=!1);var d={Name:b.Name,StartTime:b.ProposedStart,EndTime:b.ProposedEnd,OriginalStart:b.OriginalStart,OriginalEnd:b.OriginalEnd,HasChanged:b.HasChanged,ProgressPercent:b.ProgressPercent};if(b.Duration){if(0>b.Duration.days)return;d.Duration=b.Duration}this.options.MovingInfoPopup=
a.template(null,this.options.MovingInfoPopup);this.options.ResizeInfoPopup=a.template(null,this.options.ResizeInfoPopup);this.options.ProgressTemplate=a.template(null,this.options.ProgressTemplate);this.DragTooltipContent=a('<div align="center" />').append(a.tmpl(this.options.MovingInfoPopup,d));this.ResizeTooltipContent=a('<div align="center" />').append(a.tmpl(this.options.ResizeInfoPopup,d));this.ProgressResizeContent=a('<div align="center" />').append(a.tmpl(this.options.ProgressTemplate,d))}},
LoadDefaultTooltipStyle:function(){this.StartTime();this.EndTime();this.options.TaskTooltipTemplate||(this.options.TaskTooltipTemplate=a("<div><table class='TaskTooltip ui-widget-content' style='white-space:nowrap;border:none;'><tr><td colspan='2' align='center'><b>${RadiantQ_TaskString}</b></td></tr><tr><td><b>${RadiantQ_NameString}:</b>&nbsp;${this.data.ActivityName}</td></tr><tr><td><b>${RadiantQ_StartString}: </b>&nbsp;${this.data.StartTime.toString('dd-MMM-yyyy')}</td><td><b>${RadiantQ_DurationString} :</b>${this.data.Duration.toString()} </td></tr><tr><td><b>${RadiantQ_FinishString}: </b>&nbsp;${this.data.EndTime.toString('dd-MMM-yyyy')}</td><td><b>${RadiantQ_ProgressString}:</b>${this.data.ProgressPercent}%</td></tr></table></div>"));
this.options.MovingInfoPopup||(this.options.MovingInfoPopup="<div><table class='rq-gc-taskbar-popup ui-widget-content' style='white-space:nowrap;'><tr><td colspan='2' align='center'><b>${RadiantQ_TaskString}</b></td></tr><tr><td style='float:right;'><b>${RadiantQ_StartString}:&nbsp;&nbsp;&nbsp;</b></td><td> "+this._MakeItBoldWhenActualDate("${$item.data.StartTime.toString('yyyy-MM-dd HH:mm')}")+"</td></tr><tr><td style='float:right;'><b>${RadiantQ_FinishString}:&nbsp;</b> </td><td> "+this._MakeItBoldWhenActualDate("${$item.data.EndTime.toString('yyyy-MM-dd HH:mm')}")+
"</td></tr></table></div>");this.options.ResizeInfoPopup||(this.options.ResizeInfoPopup="<div><table class='rq-gc-taskbar-popup ui-widget-content' style='white-space:nowrap;'><tr><td colspan='2' align='center'><b>${RadiantQ_TaskString}</b></td></tr><tr><td style='float:right;'><b>${RadiantQ_DurationString} :</b></td><td>"+this._MakeItBoldWhenActualDate("{{if Duration}}${$item.data.Duration.days}d ${$item.data.Duration.hours}h ${$item.data.Duration.minutes}m{{/if}}")+"</td></tr><tr><td style='float:right;'><b>${RadiantQ_StartTimeString}:</b> </td><td> "+
this._MakeItBoldWhenActualDate("${$item.data.StartTime.toString('yyyy-MM-dd HH:mm')}")+"</td></tr><tr><td style='float:right;'><b>${RadiantQ_EndTimeString} :</b></td><td> "+this._MakeItBoldWhenActualDate("${$item.data.EndTime.toString('yyyy-MM-dd HH:mm')}")+"</td></tr></table></div>");this.options.ProgressTemplate||(this.options.ProgressTemplate="<div class='rq-gc-taskbar-popup ui-widget-content' style='width:140px;'><span><b>${RadiantQ_TaskString}</b></span><div><b>Progress Percent : ${ProgressPercent}%</b> </div>");
this.options.ConnectingInfoPopup||(this.options.ConnectingInfoPopup="<div class='rq-gc-taskbar-popup ui-widget-content' style='width:190px;'><div align='center'><b>${RadiantQ_FinishToStartLinkString}</b></div><div><span><b>${RadiantQ_FromFinishOfString} : </b> ${ConnectingInfoFromTaskText}</span></div><div><span><b>${RadiantQ_ToStartOfString} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: </b> ${ConnectingInfoToTaskText}</span></div></div>")},_MakeItBoldWhenActualDate:function(a){return"{{if HasChanged }}"+a+"{{else}}<b>"+
a+"</b>{{/if}}"},IsDepLinesReadOnly:!1,IsEffortReadOnly:!1,IsTaskReadOnly:!1,IsProgressPercentReadOnly:!1,IsStartTimesReadOnly:!1,IsReadOnly:!1,initValuesFromOptions:function(){var a=this.GanttControl.options;this.IsDepLinesReadOnly=a.IsDependencyLinesReadOnly;this.IsEffortReadOnly=a.IsEffortReadOnly;this.IsTaskReadOnly=this.ActivityView.IsReadOnly;this.IsProgressPercentReadOnly=a.IsProgressPercentReadOnly;this.IsStartTimesReadOnly=a.IsStartTimesReadOnly;this.IsReadOnly=a.IsReadOnly},ReadOnlyStateChangedCallback:function(a,
b){var e=void 0!=b.value?b.value:b.Value;"IsDependencyLinesReadOnly"==b.PropertyName?this.IsDepLinesReadOnly=e:"IsEffortReadOnly"==b.PropertyName?this.IsEffortReadOnly=e:"IsTaskReadOnly"==b.PropertyName?this.IsTaskReadOnly=e:"IsProgressPercentReadOnly"==b.PropertyName?this.IsProgressPercentReadOnly=e:"IsStartTimesReadOnly"==b.PropertyName?this.IsStartTimesReadOnly=e:"IsReadOnly"==b.PropertyName&&(this.IsReadOnly=e);this.UpdateThumbsReadOnlyStates()},UpdateThumbsReadOnlyStates:function(){var b=this.element,
d=a(".rq-gc-progressbar-resizer",b);0==d.length&&(d=a(".ui-progress-resizer",b));if(0!=d.length){var e=!this.IsReadOnly&&!this.IsTaskReadOnly&&!this.IsProgressPercentReadOnly;e?d.css("visibility","visible"):d.css("visibility","collapse")}d=a(".rq-pg-gc-taskBarResizer",b);0==d.length&&(d=a(".PGresizer-style",b));0!=d.length&&((e=!this.IsReadOnly&&!this.IsTaskReadOnly&&!this.IsEffortReadOnly)?d.css("display","block"):d.css("display","none"))},_setOption:function(b,d){a.Widget.prototype._setOption.apply(this,
arguments);"TaskBarBrowseToCueLeftTemplate"==b?(this.TaskBarBrowseToCueLeft&&this.TaskBarBrowseToCueLeft.remove(),this._createBrowseToCueLeft(this.options),this._BrowseToCueTemplateChanged()):"TaskBarBrowseToCueRightTemplate"==b&&(this.TaskBarBrowseToCueRight&&this.TaskBarBrowseToCueRight.remove(),this._createBrowseToCueLeft(this.options),this._BrowseToCueTemplateChanged())},_destroy:function(){if(this.GanttChart._dirtyTaskItemControls&&this.GanttChart._diryTaskItemByActs[this.Activity.id]){var a=
this.GanttChart._dirtyTaskItemControls.indexOf(this);-1!=a&&(this.GanttChart._dirtyTaskItemControls.splice(a,1),delete this.GanttChart._diryTaskItemByActs[this.Activity.id])}this.element.empty();a=this.Activity;this.GanttChart.ViewportTimeRangeChanged.unsubscribe(this._GanttChart_ViewportTimeRangeChanged,this);a.PropertyChanged.unsubscribe(this._activity_PropertyChanged,this);a._assignments.CollectionChanged.unsubscribe(this._activity_Assignments_CollectionChanged,this);this.GanttControl.ReadOnlyPropertyChange&&
this.GanttControl.ReadOnlyPropertyChange.unsubscribe(this._parent_ReadOnlyPropertyChanged,this);a.PropertyChanged.unsubscribe(this.updateTooltip,this)}});a.fn.ganttShiftTracker=function(c,d){function e(b,c,d,e){!0==e&&(d.pageX=d.originalEvent.touches[0].pageX,d.pageY=d.originalEvent.touches[0].pageY);$DeplinkLine=a("#rq-gc-dependencyCue-parent",this.GanttChart.element);0==a("#rq-gc-dependencyCue-arrow",this.GanttChart.element).length&&$DeplinkLine.append("<div id='rq-gc-dependencyCue-arrow' class='rq-gc-dependencyCue-arrow ui-state-default' style='width:0; height:0; z-index:2;  position:relative; border-top-width:5px; border-top-style:solid; border-right:5px solid transparent; border-left:5px solid transparent; border-bottom-width:0px; margin-left:-4px;'</div>");
$DeplinkInnerLineArrow=a("#rq-gc-dependencyCue",this.GanttChart.element);if(0<$DeplinkLine.length){var f=c.parents("div.rq-ganttChart"),g=a(".ui-grid-body",f.parent()).scrollTop(),f=c.offset().left+$DeplinkLine[0].offsetLeft-c[0].offsetLeft;b=$DeplinkLine[0].offsetTop-(b*c[0].parentElement.offsetHeight+c[0].offsetTop)+g;g=c.offset().top+b;b=c=0;x?(b=f=0,!0==e?(f=d.originalEvent.touches[0].clientX,b=d.originalEvent.touches[0].clientY):(f=d.clientX,b=d.clientY),c=Math.sqrt((f-x.x)*(f-x.x)+(b-x.y)*(b-
x.y)),b=180/3.1415*Math.acos((b-x.y)/c),f>x.x&&(b*=-1)):(c=Math.sqrt((d.pageX-f)*(d.pageX-f)+(d.pageY-g)*(d.pageY-g)),b=180/3.1415*Math.acos((d.pageY-g)/c),d.pageX>f&&(b*=-1));$DeplinkInnerLineArrow.css({height:c-7,"-webkit-transform":"rotate("+b+"deg)","-moz-transform":"rotate("+b+"deg)","-o-transform":"rotate("+b+"deg)","-ms-transform":"rotate("+b+"deg)",transform:"rotate("+b+"deg)"});$DeplinkLine.css({height:c-2,"-webkit-transform":"rotate("+b+"deg)","-moz-transform":"rotate("+b+"deg)","-o-transform":"rotate("+
b+"deg)","-ms-transform":"rotate("+b+"deg)",transform:"rotate("+b+"deg)"});t=this.GanttChart.TaskOnMouseHover;f={ConnectingInfoFromTaskText:this.Activity.ActivityName,ConnectingInfoToTaskText:""};null!=t&&t.Activity!=this.Activity&&(!1==this.Activity.Model.CanAddNewDependency(this.Activity,t.Activity)?t=null:f={ConnectingInfoFromTaskText:this.Activity.ActivityName,ConnectingInfoToTaskText:this.Activity!=t.Activity?t.Activity.ActivityName:""});this.DepConnContent=a("<div />").append(a.tmpl(this.options.ConnectingInfoPopup,
f));var h=a(".dragPopup");h.empty();h.append(this.DepConnContent);!0==z&&(z=!1,d.originalEvent.touches&&(d.pageY=d.originalEvent.touches[0].pageY),h[0].refreshPostion=function(b){var c=a(".rq-gc-taskbar-popup",h).outerHeight(),f=d.pageY,f=b?f-(d.offsetY+c):f+d.offsetY;!0==e?h.css({left:d.originalEvent.touches[0].pageX,top:f}):h.css({left:d.pageX,top:f})});h.css("visibility","visible")}}var f=this,g,h,k,l,n;new ObjectEvent("DragComplete");var p=0,m,q=!1,r=!1,s,t=null,u=c.options.WorkTimeSchedule,y=
null,w=null,x={x:0,y:0};f.bind("mousedown."+c.widgetName,function(b){document.mouseButtonPressed=!0;if(!this.IsReadOnly&&!this.IsTaskReadOnly&&!a(b.target).hasClass("label")){b.preventDefault();z=!0;var c=_ganttCommonMouseDown.call(this,b,f,!1);l=function(a){return _ganttMouseMove.call(this,a,c,f,!1)};n=function(a){document.mouseButtonPressed=!1;return _ganttMouseUp.call(this,a,c,f,!1)};a(document).bind("mousemove."+this.widgetName,l.bind(this)).bind("mouseup."+this.widgetName,n.bind(this))}}.bind(c));
f.bind("touchstart."+c.widgetName,function(b){if(!(this.IsReadOnly||this.IsTaskReadOnly&&this.IsStartTimesReadOnly&&this.IsDepLinesReadOnly||a(b.target).hasClass("label"))){b.stopPropagation();b.preventDefault();z=!0;var c=_ganttCommonMouseDown.call(this,b,f,!0);l=function(a){return _ganttMouseMove.call(this,a,c,f,!0)};n=function(a){return _ganttMouseUp.call(this,a,c,f,!0)};a(document).bind("touchmove."+this.widgetName,l.bind(this)).bind("touchend."+this.widgetName,n.bind(this))}}.bind(c));_ganttCommonMouseDown=
function(b,c,d){this.taskStartAndEndTime={Name:this.options.ActivityView.Activity.ActivityName,OriginalStart:this.Activity.StartTime,OriginalEnd:this.Activity.EndTime,originalWidth:this.TaskBarRectangle.width(),originalLeft:this.TaskBarRectangle.css("margin-left"),ProgressEndTime:null,ProposedEnd:null,ProposedStart:null};z=!0;var e=b.srcElement,f=c.closest("tr");f.attr("list-index")||f.index();if(!e||!a(e).hasClass("rq-pg-gc-taskBarResizer")){$taskClone=a("<div id='clone' class='taskclone rq-taskbar-clone ui-state-default'></div>");
var e=a("<div id='rq-gc-dependencyCue-parent' class='rq-gc-dependencyCue-parent ui-state-default'><div id='rq-gc-dependencyCue' class='rq-gc-dependencyCue'></div></div>"),g=c.parents("div.rq-ganttChart");a(".ui-grid-body",g.parent()).scrollTop();f=c.parents("div.rq-ganttChart");b.offsetX=b.clientX-c.offset().left;b.offsetY=b.clientY-c.offset().top;var g=a("div.rq-tsh-div",g).height(),h=c.height()/2,f=c.offset().top-f.offset().top-(g-h);e.css({top:f,left:b.offsetX+c[0].offsetLeft});g=c.offset();!0==
d?(x={x:b.originalEvent.touches[0].clientX,y:b.originalEvent.touches[0].clientY},e.css({top:f,left:b.originalEvent.touches[0].pageX-g.left+c[0].offsetLeft})):x={x:b.clientX,y:b.clientY};$taskClone.css({width:c[0].offsetWidth-2+"px",height:c[0].offsetHeight-2+"px"});this.IsStartTimesReadOnly||$taskClone.appendTo(c);_ganttMouseClick.call(this,b,$taskClone,c,d,e);b=this.options.GanttChart.options.TimeIndicatorLineOption;if((b&ns_gantt.TimeIndicatorLines.OnResize)==ns_gantt.TimeIndicatorLines.OnResize||
(b&ns_gantt.TimeIndicatorLines.Always)==ns_gantt.TimeIndicatorLines.Always)y=c.find("div.rq-gc-start-verticalLine").clone().show(),w=c.find("div.rq-gc-end-verticalLine").clone().show(),$taskClone.append(y),$taskClone.append(w);return $taskClone}};_ganttMouseClick=function(c,d,e,f,l){b=!0;e[0].uiTooltip&&(e[0].disableTooltip=!0);var n=_getGanttDragMousePosition(c,d,e,f);g=n.x;h=n.y;k=d[0].offsetLeft;e.addClass("rq-taskbar-shadow");d=this.GanttChart._getUniqueSelectorIdByID("rq-gc-viewsContainer-div");
a(d).append(l);this.taskStartAndEndTime.OriginalStart=this.Activity.StartTime;this.taskStartAndEndTime.OriginalEnd=this.Activity.EndTime;u?(this.taskStartAndEndTime.ProposedStart=u.ConvertToNextWorkingTime(this.taskStartAndEndTime.OriginalStart),this.taskStartAndEndTime.ProposedEnd=u.GetEnd(this.taskStartAndEndTime.ProposedStart,this.Activity.Effort)):(this.taskStartAndEndTime.ProposedStart=this.GanttControl.RoundUp(this.taskStartAndEndTime.OriginalStart),this.taskStartAndEndTime.ProposedEnd=this.GanttControl.RoundUp(this.taskStartAndEndTime.OriginalEnd));
this.UpdateTooltipContent(this.taskStartAndEndTime);e.GetDragOrResizeContent(this.DragTooltipContent,c,e,f)};_ganttMouseMove=function(b,c,d,e){d.addClass("rq-taskbar-shadow");if(!0==e){var f=document.elementFromPoint(b.originalEvent.touches[0].pageX,b.originalEvent.touches[0].pageY);mouseHoverActivity=a(f).parents(".rq-gc-row ").data();this.GanttChart.TaskOnMouseHover=null!=mouseHoverActivity?mouseHoverActivity.GanttTaskItemBar.ActivityView:null}s={StartTime:this.taskStartAndEndTime.OriginalStart.clone(),
EndTime:this.taskStartAndEndTime.OriginalEnd.clone(),CanvasLeft:this.OriginalLeft};s.StartTime<=s.EndTime&&(_ganttUpdatePosition.call(this,b,c,d,e),r&&(this.UpdateTooltipContent(this.taskStartAndEndTime),b=a(".dragPopup"),b.empty(),b.append(this.DragTooltipContent),this.IsStartTimesReadOnly||b.css("visibility","visible")),d[0].uiTooltip&&d[0].uiTooltip.hide())};_ganttMouseUp=function(c,e,f,g){b=!1;f.removeClass("rq-taskbar-shadow");null==this.taskStartAndEndTime.ProposedStart||null==this.taskStartAndEndTime.ProposedEnd||
this.IsStartTimesReadOnly||(f[0].uiTooltip&&(f[0].disableTooltip=!1),this.Activity.PreferredStartTime=this.taskStartAndEndTime.ProposedStart,this.taskStartAndEndTime.OriginalStart=this.taskStartAndEndTime.ProposedStart,this.taskStartAndEndTime.OriginalEnd=this.taskStartAndEndTime.ProposedEnd,"function"==typeof d&&d.call(this,this,this.taskStartAndEndTime));null!=t&&(this.Activity.Model.CanAddNewDependency(this.Activity,t.Activity)&&this.Activity.Model.CreateNewDependency(this.Activity,t.Activity),
t=null);f.RemoveDragOrResizeContent(f);a("#clone").remove();a("#rq-gc-dependencyCue-parent",this.GanttChart.element).remove();if(!0==q||this.IsDepLinesReadOnly)q=!1;!0==r&&(r=!1);x={x:0,y:0};this.UpdateTooltipContent(this.ActivityView);a(document).unbind("touchmove."+this.widgetName).unbind("touchend."+this.widgetName).unbind("keydown");a(document).unbind("mousemove."+this.widgetName).unbind("mouseup."+this.widgetName).unbind("keydown")};_getGanttDragMousePosition=function(a,b,c,d){if(!0==d)if(a.originalEvent.touches[0].pageX||
a.originalEvent.touches[0].pageY)var e=a.originalEvent.touches[0].pageX,f=a.originalEvent.touches[0].pageY;else{if(a.originalEvent.touches[0].clientX||a.originalEvent.touches[0].clientY)e=a.originalEvent.touches[0].clientX,f=a.originalEvent.touches[0].clientY}else if(a.pageX||a.pageY)e=a.pageX,f=a.pageY;else if(a.clientX||a.clientY)e=a.clientX,f=a.clientY;return{x:e,y:f}};var z=!1;_ganttMouseMovedTo=function(a,b,c,d,f){p++;if(!(6>p)&&null!=c[0].parentElement){var g=c.closest("tr"),h=g.attr("list-index");
h||(h=g.index());m=a;!1==q&&!1==r&&(4<=Math.abs(b)&&!this.IsDepLinesReadOnly&&!this.GanttControl.options.IsReadOnly?q=!0:4<=Math.abs(a)&&!0!=q&&!this.ActivityView.IsParent&&!this.GanttControl.options.IsStartTimesReadOnly&&(r=!0));q?e.call(this,h,c,d,f):r&&(a=s.CanvasLeft,a=rqTCUtils.ConvertToEndTimeInBaseScaleType(this.GanttChart.options.BaseTimeScaleType,s.StartTime.clone(),a/this.GanttChart.options.BaseTimeUnitWidth,(a+m)/this.GanttChart.options.BaseTimeUnitWidth,null),c=Date.today(),b={Value:a},
c={Value:c},RadiantQ.FlexyGantt.ConvertToValidTimes(s.DataContext,a,rqTCUtils.GetTimeSpan(s.StartTime,s.EndTime),b,c),a=b.Value,c=c.Value,u&&(a=u?u.ConvertToNextWorkingTime(a):a,c=u?u.GetEnd(this.taskStartAndEndTime.ProposedStart,this.Activity.Effort):this.taskStartAndEndTime.ProposedStart.addTimeSpan(this.Activity.Effort)),this.taskStartAndEndTime.ProposedStart=this.GanttControl.RoundUp(a),this.taskStartAndEndTime.ProposedEnd=this.GanttControl.RoundUp(c),0==this.taskStartAndEndTime.ProposedStart.compareTo(this.taskStartAndEndTime.OriginalStart)&&
0==this.taskStartAndEndTime.ProposedEnd.compareTo(this.taskStartAndEndTime.OriginalEnd)?this.taskStartAndEndTime.HasChanged=!1:this.taskStartAndEndTime.HasChanged=!0)}};_ganttUpdatePosition=function(c,d,e,f){var m=_getGanttDragMousePosition(c,d,e,f),p=m.x-g+k;_ganttMouseMovedTo.call(this,m.x-g,m.y-h,e,c,f);!0==r&&a(d).css("margin-left",p+"px");a(document).bind("keydown",function(c){27==c.keyCode&&(a(document).unbind("mousemove."+this.widgetName,l).unbind("mouseup."+this.widgetName,n).unbind("keydown"),
a(this).RemoveDragOrResizeContent(e),b=!1,e[0].uiTooltip&&(e[0].disableTooltip=!1),a("#clone").remove(),a("#rq-gc-dependencyCue-parent",this.GanttChart.element).remove(),!0==q&&(q=!1),null!=t&&(t=null),!0==r&&(r=!1))}.bind(this))}};a.fn.ganttResizeTracker=function(c,d){var e=this,f,g,h,k,l={isTrue:!1},n,p=new ObjectEvent("ResizeComplete");$ganttResizer=a("<div class='rq-pg-gc-taskBarResizer'></div>");$progressResizer=a("<div class='rq-gc-progressbar-resizer'></div>");$ganttResizer.css("height",e.css("height"));
var m=e.find("div.rq-gc-parentBar-middle"),q=e.find("div.progressbarStyle");0==m.length&&(m=e.find("div.parentMiddleBar-style"));0==q.length&&(q=e.find("div.rq-gc-progressbar"));var r=null,s=null;$progressResizer.css("height",4);c.GanttControl.options.IsEffortReadOnly||(0!=m.length?m.append($ganttResizer):e.append($ganttResizer));m=!1;0<e.parent("div.rq-gc-progressbar-resizer").length?m=!0:0<e.parent("div.ui-progress-resizer").length&&(m=!0);q&&!1==m&&e.parent().append($progressResizer);$ganttResizer.bind("mousedown."+
c.widgetName,function(b){document.mouseButtonPressed=!0;b.preventDefault();l={isTrue:!1};var d=_commonTaskMouseDown.call(this,b,e,l,!1);h=function(a){l={isTrue:!1};return _ganttResizerMouseMove.call(this,a,d,e,!1,l)};k=function(a){document.mouseButtonPressed=!1;return _ganttResizerMouseUp.call(this,a,d,e,l,!1)};a(document).bind("mousemove."+c.widgetName,h.bind(this)).bind("mouseup."+c.widgetName,k.bind(this))}.bind(c));$ganttResizer.bind("touchstart."+c.widgetName,function(b){b.preventDefault();l=
{isTrue:!1};var c=_commonTaskMouseDown.call(this,b,e,l,!0);h=function(a){l={isTrue:!1};return _ganttResizerMouseMove.call(this,a,c,e,!0,l)};k=function(a){return _ganttResizerMouseUp.call(this,a,c,e,l,!0)};a(document).bind("touchmove."+this.widgetName,h.bind(this)).bind("touchend."+this.widgetName,k.bind(this))}.bind(c));_commonTaskMouseDown=function(b,c,d,e){this.taskStartAndEndTime={Name:this.options.ActivityView.Activity.ActivityName,OriginalStart:this.Activity.StartTime,OriginalEnd:this.Activity.EndTime,
originalWidth:this.TaskBarRectangle.width(),originalLeft:this.TaskBarRectangle.css("margin-left"),ProgressEndTime:null,ProposedEnd:null,ProposedStart:null};$taskClone=a("<div id='clone' class='taskclone rq-taskbar-clone ui-state-default'></div>");$taskClone.css({width:c[0].offsetWidth-2+"px",height:c[0].offsetHeight-3+"px"});!1==d.isTrue&&c.addClass("rq-taskbar-shadow");c.append($taskClone);_ganttResizerMouseClick.call(this,b,$taskClone,c,d,e);b.stopPropagation();b=this.GanttChart.options.TimeIndicatorLineOption;
if((b&ns_gantt.TimeIndicatorLines.OnResize)==ns_gantt.TimeIndicatorLines.OnResize||(b&ns_gantt.TimeIndicatorLines.Always)==ns_gantt.TimeIndicatorLines.Always)r=c.find("div.rq-gc-start-verticalLine").clone().show(),s=c.find("div.rq-gc-end-verticalLine").clone().show(),$taskClone.append(r),$taskClone.append(s);return $taskClone};$progressResizer.bind("mousedown."+c.widgetName,function(b){document.mouseButtonPressed=!0;b.preventDefault();var c=b.currentTarget;l={isTrue:!0};var d=_commonProgressMouseDone.call(this,
b,e,q,l,!1);h=function(a){l={isTrue:!0};return _ganttResizerMouseMove.call(this,a,d,q,!1,l)};k=function(a){document.mouseButtonPressed=!1;l={isTrue:!0};return _ganttResizerMouseUp.call(this,a,d,q,l,!1,c)};a(document).bind("mousemove."+this.widgetName,h.bind(this)).bind("mouseup."+this.widgetName,k.bind(this))}.bind(c));$progressResizer.bind("touchstart."+c.widgetName,function(b){b.preventDefault();var c=b.currentTarget;l={isTrue:!0};var d=_commonProgressMouseDone.call(this,b,e,q,l,!0);h=function(a){l=
{isTrue:!0};return _ganttResizerMouseMove.call(this,a,d,q,!0,l)};k=function(a){l={isTrue:!0};return _ganttResizerMouseUp.call(this,a,d,q,l,!0,c)};a(document).bind("touchmove."+this.widgetName,h.bind(this)).bind("touchend."+this.widgetName,k.bind(this))}.bind(c));_commonProgressMouseDone=function(b,c,d,e,f){$progressClone=a("<div id='clone' class='taskclone rq-taskbar-clone ui-state-default'></div>");$progressClone.css({width:d[0].offsetWidth-2+"px",height:c[0].offsetHeight-3+"px"});c.append($progressClone);
_ganttResizerMouseClick.call(this,b,$progressClone,d,e,f);b.stopPropagation();return $progressClone};_ganttResizerMouseClick=function(c,d,e,h,k){b=!0;c.preventDefault();e[0].uiTooltip&&(e[0].disableTooltip=!0);f=_getGanttMousePosition(c,d,e,k).x;g=d[0].offsetWidth;this.taskStartAndEndTime.ProposedStart=this.taskStartAndEndTime.OriginalStart;this.taskStartAndEndTime.ProposedEnd=this.taskStartAndEndTime.OriginalEnd;this.taskStartAndEndTime.ProgressEndTime=this.taskStartAndEndTime.ProgressEndTime;n=
this.Activity.ProgressPercent;this.taskStartAndEndTime.OriginalDuration=this.Activity.Duration;this.ProposedDuration=this.taskStartAndEndTime.OriginalDuration;d=e.closest(".rq-gc-taskbar");0==d.length&&(d=e.closest(".taskbar-style"));!0==h.isTrue?a(this).GetDragOrResizeContent(this.ProgressResizeContent,c,d,k):a(this).GetDragOrResizeContent(this.ResizeTooltipContent,c,e,k)};_ganttResizerMouseMove=function(a,b,c,d,e){_ganttUpdateWidth.call(this,a,b,c,d,e)};_ganttResizerMouseUp=function(c,e,f,g,h,k){b=
document.mouseButtonPressed=!1;f[0].uiTooltip&&(f[0].disableTooltip=!1);a(this).RemoveDragOrResizeContent(f);a("#clone").remove();this.taskStartAndEndTime.OriginalEnd=this.taskStartAndEndTime.ProposedEnd?this.taskStartAndEndTime.ProposedEnd:this.taskStartAndEndTime.OriginalEnd;this.taskStartAndEndTime.OriginalDuration=this.ProposedDuration;!0==g.isTrue&&(this.Activity.ProgressPercent=n,c=a(e).css("width"))&&(f.css({width:c}),0!=c&&f.css({"border-width":"1px"}),c=parseInt(f.parent().css("margin-left")),
a(k).css("margin-left",c+parseInt(f.css("width"))+"px"));this.taskStartAndEndTime.ProgressEndTime=this.taskStartAndEndTime.ProgressEndTime>this.taskStartAndEndTime.OriginalEnd?this.taskStartAndEndTime.OriginalEnd:this.taskStartAndEndTime.ProgressEndTime;p.subscribe(d,this);p.raise(this,{taskStartAndEndTime:this.taskStartAndEndTime,forProgressBar:g});this.UpdateTooltipContent(this.ActivityView);p.unsubscribe(d,this);f.removeClass("rq-taskbar-shadow");a(document).unbind("touchmove."+this.widgetName).unbind("touchend."+
this.widgetName).unbind("keydown");a(document).unbind("mousemove."+this.widgetName).unbind("mouseup."+this.widgetName).unbind("keydown")};_ganttResizeTo=function(b,c,d,e,f){!1==f.isTrue&&d.addClass("rq-taskbar-shadow");c=this.options.WorkTimeSchedule;this.taskStartAndEndTime.OriginalDuration.equals(this.ProposedDuration)?this.taskStartAndEndTime.HasChanged=!1:this.taskStartAndEndTime.HasChanged=!0;100<n?n=100:0>n&&(n=0);this.taskStartAndEndTime.ProgressPercent=n;b=rqTCUtils.ConvertUnitsInBaseScaleTypeToDurationInHours(this.GanttChart.options.BaseTimeScaleType,
this.taskStartAndEndTime.OriginalStart,this.OriginalLeft/this.GanttChart.options.BaseTimeUnitWidth,(this.OriginalLeft+b)/this.GanttChart.options.BaseTimeUnitWidth,null);b=new RQTimeSpan(0,b,0,0,0);b=f.isTrue?b:this.GanttControl.RoundUpDuration(b);e=rqTCUtils.ConvertTimeSpanToTimeUnits(this.GanttChart.options.BaseTimeScaleType,b)*this.GanttChart.options.BaseTimeUnitWidth;this.ProposedDuration=b;e=rqTCUtils.ConvertUnitsInBaseScaleTypeToDurationInHours(this.GanttChart.options.BaseTimeScaleType,this.taskStartAndEndTime.OriginalStart,
this.OriginalLeft/this.GanttChart.options.BaseTimeUnitWidth,(this.OriginalLeft+e)/this.GanttChart.options.BaseTimeUnitWidth,c);new RQTimeSpan(0,e,0,0);b.isLessThan(RQTimeSpan.Zero)&&(b=RQTimeSpan.Zero);this.taskStartAndEndTime.ProposedEnd=this.taskStartAndEndTime.OriginalStart.clone().add(b);c&&(this.ProposedDuration=c.GetEffort(this.taskStartAndEndTime.OriginalStart,this.taskStartAndEndTime.ProposedEnd),this.taskStartAndEndTime.ProposedEnd=c.GetEnd(this.taskStartAndEndTime.OriginalStart,this.ProposedDuration),
this.ProposedDuration=c.GetEffort(this.taskStartAndEndTime.OriginalStart,this.taskStartAndEndTime.ProposedEnd));this.taskStartAndEndTime.Duration=this.ProposedDuration;this.UpdateTooltipContent(this.taskStartAndEndTime);c=a(".dragPopup");c.empty();!0==f.isTrue?c.append(this.ProgressResizeContent):c.append(this.ResizeTooltipContent);c.css("visibility","visible");d[0].uiTooltip&&d[0].uiTooltip.hide()};_getGanttMousePosition=function(a,b,c,d,e){if(!0==d)if(a.originalEvent.touches[0].pageX||a.originalEvent.touches[0].pageY)var f=
a.originalEvent.touches[0].pageX,g=a.originalEvent.touches[0].pageY;else{if(a.originalEvent.touches[0].clientX||a.originalEvent.touches[0].clientY)f=a.originalEvent.touches[0].clientX,g=a.originalEvent.touches[0].clientY}else if(a.pageX||a.pageY)f=a.pageX,g=a.pageY;else if(a.clientX||a.clientY)f=a.clientX,g=a.clientY;return{x:f,y:g}};_ganttUpdateWidth=function(c,d,e,l,m){var p=_getGanttMousePosition(c,d,e,l,m).x-f+g;p>e[0].parentElement.offsetWidth?a(d).css("width",e[0].parentElement.offsetWidth-
3+"px"):0<p?(a(d).css("width",p+"px"),null!=s&&null!=s[0]&&(s[0].style["margin-left"]=p+"px")):(a(d).css("width","0px"),s&&null!=s[0]&&(s[0].style["margin-left"]=p+"px"));!0==m.isTrue&&(n=Math.round(100*(p/e[0].parentElement.offsetWidth)));_ganttResizeTo.call(this,p,c,e,l,m);a(document).bind("keydown",function(c){27==c.keyCode&&(a(document).unbind("mousemove."+this.widgetName,h).unbind("mouseup."+this.widgetName,k).unbind("keydown"),a(document).unbind("touchmove."+this.widgetName,h).unbind("touchend."+
this.widgetName,k).unbind("keydown"),b=!1,e[0].uiTooltip&&(e[0].disableTooltip=!1),a(this).RemoveDragOrResizeContent(e),a("#clone").remove())}.bind(this))}}})(jQuery);
(function(a){a.widget("radiantq.GanttDependencyControl",{Visibility:null,options:{Data:null,DependencyViews:null,UseChartVirtualization:null,ToggleVisibilityForVirtualizationSetting:null,GanttChart:null,GanttModel:null},_create:function(){var b=this,c=this.element.parents("div.rq-ganttChart");c.bind("ganttchartrefreshui",function(a,c){this.options.GanttControl=this;b.element.empty();this.Refresh()}.bind(this));this.element.parents("div.rq-ganttBase");c.bind("ganttchartsourceupdated",function(b,c){this._destroy();
this.options.DependencyViews=this.options.GanttChart.options.Parent.GetGanttFlatDependenciesList();a.observable(this.options.Data).bind("insert remove replaceAll",function(a,b){this.DependencyViewsColletionChange(a,b)}.bind(this));this.options.DependencyViews.CollectionChanged.subscribe(this.DependencyViewsColletionChange,this)}.bind(this));a.observable(this.options.Data).bind("insert remove replaceAll",function(a,b){this.DependencyViewsColletionChange(a,b)}.bind(this));this.UpdateVisibility();this.options.DependencyViews.CollectionChanged.subscribe(this.DependencyViewsColletionChange,
this);var c=[{keyName:"Delete",name:window.RadiantQ_Delete,icon:"Delete"},{keyName:"ChangeToFinishToStart",name:window.RadiantQ_ChangeToFinishToStart,icon:"Change to Finish to Start"},{keyName:"ChangeToFinishToFinish",name:window.RadiantQ_ChangetoFinishtoFinish,icon:"Change to Finish to Finish"},{keyName:"ChangeToStartToFinish",name:window.RadiantQ_ChangeToStartToFinish,icon:"Change to Start to Finish"},{keyName:"ChangeToStartToStart",name:window.RadiantQ_ChangeToStartToStart,icon:"Change to Start to Start"}],
d=new RadiantQ.Gantt.ContextMenuImpl.ContextMenu("div#DependencyContainer div.rq-gc-dependencyLine, div.rq-gc-dependencyLine-arrow ");d.AddNewItems(c);d.ItemClicked.subscribe(this.itemClicked,this);d.BeforeContextMenu.subscribe(function(c,d){var g=a(c[0].parentElement).data(),g=(g.GanttDependencyLine||g.radiantqGanttDependencyLine).options.DependencyView.DependencyType;"FinishToStart"==g&&(d.data.items.ChangeToFinishToStart.disabled=function(){return!0});if(b.options.GanttChart.options.Parent.options.IsReadOnly||
b.options.GanttChart.options.Parent.options.IsDependencyLinesReadOnly)d.data.items.Delete.disabled=function(){return!0},d.data.items.ChangeToFinishToStart.disabled=function(){return!0},d.data.items.ChangeToFinishToFinish.disabled=function(){return!0},d.data.items.ChangeToStartToStart.disabled=function(){return!0},d.data.items.ChangeToStartToFinish.disabled=function(){return!0};switch(g){case "FinishToStart":d.data.items.ChangeToFinishToStart.disabled=function(){return!0};break;case "FinishToFinish":d.data.items.ChangeToFinishToFinish.disabled=
function(){return!0};break;case "StartToStart":d.data.items.ChangeToStartToStart.disabled=function(){return!0};break;case "StartToFinish":d.data.items.ChangeToStartToFinish.disabled=function(){return!0}}});this.options.GanttChart.options.Parent.DependencyContextMenu=d},itemClicked:function(b,c){var d=a(c.$trigger[0].parentElement).data(),d=d.GanttDependencyLine;switch(b){case "Delete":for(var e=0;e<d.options.Parent.options.DependencyViews.length;e++)if(d.options.Parent.options.DependencyViews[e].StartRowIndex==
d.options.DependencyView.StartRowIndex&&d.options.Parent.options.DependencyViews[e].EndRowIndex==d.options.DependencyView.EndRowIndex){var f=d.options.Parent.options.DependencyViews[e].Dependency,g=new RadiantQ.Gantt.Utils.DelayUpdates;f.Model.Dependencies.remove(f);g.Dispose()}a(d.options.Parent.element).empty();d.options.Parent.Refresh();break;case "ChangeToFinishToStart":for(e=0;e<d.options.Parent.options.DependencyViews.length;e++)d.options.Parent.options.DependencyViews[e].StartRowIndex==d.options.DependencyView.StartRowIndex&&
d.options.Parent.options.DependencyViews[e].EndRowIndex==d.options.DependencyView.EndRowIndex&&(f=d.options.Parent.options.DependencyViews[e].Dependency,g=d.options.Parent.options.DependencyViews[e].Dependency.Model,g.Dependencies.remove(d.options.Parent.options.DependencyViews[e].Dependency),g.CreateNewDependency(f.FromActivity,f.ToActivity,"FinishToStart",f.Lag));a(d.options.Parent.element).empty();d.options.Parent.Refresh();break;case "ChangeToFinishToFinish":for(e=0;e<d.options.Parent.options.DependencyViews.length;e++)if(d.options.Parent.options.DependencyViews[e].StartRowIndex==
d.options.DependencyView.StartRowIndex&&d.options.Parent.options.DependencyViews[e].EndRowIndex==d.options.DependencyView.EndRowIndex){f=d.options.Parent.options.DependencyViews[e].Dependency;g=d.options.Parent.options.DependencyViews[e].Dependency.Model;g.Dependencies.remove(d.options.Parent.options.DependencyViews[e].Dependency);g.CreateNewDependency(f.FromActivity,f.ToActivity,"FinishToFinish",f.Lag);break}a(d.options.Parent.element).empty();d.options.Parent.Refresh();break;case "ChangeToStartToStart":for(e=
0;e<d.options.Parent.options.DependencyViews.length;e++)d.options.Parent.options.DependencyViews[e].StartRowIndex==d.options.DependencyView.StartRowIndex&&d.options.Parent.options.DependencyViews[e].EndRowIndex==d.options.DependencyView.EndRowIndex&&(f=d.options.Parent.options.DependencyViews[e].Dependency,g=d.options.Parent.options.DependencyViews[e].Dependency.Model,g.Dependencies.remove(d.options.Parent.options.DependencyViews[e].Dependency),g.CreateNewDependency(f.FromActivity,f.ToActivity,"StartToStart",
f.Lag));a(d.options.Parent.element).empty();d.options.Parent.Refresh();break;case "ChangeToStartToFinish":for(e=0;e<d.options.Parent.options.DependencyViews.length;e++)d.options.Parent.options.DependencyViews[e].StartRowIndex==d.options.DependencyView.StartRowIndex&&d.options.Parent.options.DependencyViews[e].EndRowIndex==d.options.DependencyView.EndRowIndex&&(f=d.options.Parent.options.DependencyViews[e].Dependency,g=d.options.Parent.options.DependencyViews[e].Dependency.Model,g.Dependencies.remove(d.options.Parent.options.DependencyViews[e].Dependency),
g.CreateNewDependency(f.FromActivity,f.ToActivity,"StartToFinish",f.Lag));a(d.options.Parent.element).empty();d.options.Parent.Refresh()}},timer:null,DependencyViewsColletionChange:function(a,c){null!=this.timer&&clearTimeout(this.timer);this.timer=setTimeout(function(){this.element.empty();this.Refresh()}.bind(this),0)},UpdateVisibility:function(){var a=this.options;this.Visibility=a.ToggleVisibilityForVirtualizationSetting?a.UseChartVirtualization?"Collapsed":"Visible":a.UseChartVirtualization?
"Visible":"Collapsed"},_refreshTimer:null,Refresh:function(){null!=this._refreshTimer&&clearTimeout(this._refreshTimer);this._refreshTimer=setTimeout(function(){var b=this.options;if(0!=b.DependencyViews.length)for(var c=0;c<b.DependencyViews.length;c++)if(b.DependencyViews[c].Visibility){var d=a("<div id='DependencyContainer' style='position:absolute;'></div>");d.GanttDependencyLine({DependencyView:b.DependencyViews[c],Visibility:"Visible",IsTemplateApplied:!0,GanttChart:b.GanttChart,StartTime:b.DependencyViews[c].StartTime,
EndTime:b.DependencyViews[c].EndTime,Parent:this});d.children(":not(#depArrow)");d.hover(function(){a(this).children().addClass("dependencyShadow")});d.mouseleave(function(){a(this).children().removeClass("dependencyShadow")});this.element.append(d)}}.bind(this),0)},_destroy:function(){this.element.empty();this.options.DependencyViews.CollectionChanged.clear()}})})(jQuery);var depindex=0;
(function(a){a.widget("radiantq.GanttDependencyLine",{options:{DependencyLineBarStroke:null,CustomColor:null,StartTime:null,EndTime:null,RowHeight:null,Visibility:null,PolylineGeometry:null,ArrowGeometry:null,HighlightEffect:null,IsTemplateApplied:null,DependencyView:null,GanttChart:null,DependencyTooltipTemplate:null,VirtualizationHeightOffset:null,Parent:null},_depStartTime:null,DepStartTime:function(a){if(void 0==a)return this._depStartTime;a!=this._depStartTime&&(this._depStartTime=a,this.OnPropertyChanged("StartTime",
a),this.element.empty(),!1==this.IsInit&&this.OnRecomputeLocation(this.element))},_depEndTime:null,DepEndTime:function(a){if(void 0==a)return this._depEndTime;a!=this._depEndTime&&(this._depEndTime=a,this.OnPropertyChanged("EndTime",a),this.element.empty(),!1==this.IsInit&&this.OnRecomputeLocation(this.element))},_create:function(){this.IsInit=!0;var a=this.options;this.PropertyChanged=new ObjectEvent("PropertyChanged");this.element.data("GanttDependencyLine",this);new Binding(a.DependencyView,"StartTime",
this,"DepStartTime",null,RadiantQ.Gantt.BindingMode.TwoWay);new Binding(a.DependencyView,"EndTime",this,"DepEndTime",null,RadiantQ.Gantt.BindingMode.TwoWay);null==a.VirtualizationHeightOffset&&(a.VirtualizationHeightOffset=0);a.DependencyView.PropertyChanged.subscribe(this.DependencyViewPropertyChange,this);this.IsInit&&(this.IsInit=!1,this.OnRecomputeLocation(this.element))},OnPropertyChanged:function(a,c){this.PropertyChanged.raise(this,{PropertyName:a,value:c})},timer:null,DependencyViewPropertyChange:function(a,
c){"Visibility"==c.PropertyName&&(this.options.Visibility=!0==c.value?"visible":"collapse",null!=this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){this.element.empty();this.OnRecomputeLocation(this.element)}.bind(this),0))},CreateTooltip:function(b,c){function d(){title="#"+a(c).attr("aria-describedby");a(title).remove();a(c).removeAttr("aria-describedby")}c.attr("title","");var e=this,f=a(document);c.tooltip({content:function(a){return"<b>TaskLink:</b> "+e.options.DependencyView.DependencyType+
" <b>Lag:</b> "+e.options.DependencyView.Dependency.Lag.toString()+"<br/><b>From: &nbsp;</b><b>(ID "+e.options.DependencyView.StartActivity.id+")</b> "+e.options.DependencyView.StartActivity.ActivityName+"<br/><b>To:  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b><b>(ID "+e.options.DependencyView.EndActivity.id+")</b> "+e.options.DependencyView.EndActivity.ActivityName+""},open:function(a,b){document.mouseButtonPressed&&(b.tooltip.remove(),d());b.tooltip.addClass("dependencyLineTooltip");f.bind("mousedown.divEvents mouseup.divEvents",
function(){b.tooltip.remove();d();f.unbind(".divEvents")})},close:function(){f.unbind(".divEvents")},position:{my:"left top",at:"bottom",offset:"10"},track:!0});a(c).mouseout(function(){d()})},OnRecomputeLocation:function(a){a=this.options;var c=a.DependencyView,d=a.GanttChart.options,e=this._depStartTime,f=this._depEndTime;null==c||"collapse"==a.Visibility||!1==a.IsTemplateApplied||null==e||null==f||d.ComputedStartTime==d.ComputedEndTime||-1==c.StartRowIndex&&-1==c.EndRowIndex||c.StartRowIndex==
c.EndRowIndex||this._drawRelatedDepLine()},_drawRelatedDepLine:function(){var b=this.options,c=b.DependencyView,d=b.GanttChart.options,e=d.RowHeight,f=this.element,g=this._depStartTime,h=this._depEndTime,k=RadiantQ.Gantt.Utils.TimeComputingUtils,l=d.WorkTimeSchedule,n=c.StartRowIndex,p=c.EndRowIndex,m;null!=d.DependencyLineColor&&(m=d.DependencyLineColor);switch(c.DependencyType){case RadiantQ.Gantt.DependencyType.FinishToFinish:startX=k.ConvertToUnitsOfBaseScaleType(d.BaseTimeScaleType,d.ComputedStartTime,
g,l)*d.BaseTimeUnitWidth;b=startY=n*d.RowHeight+d.RowHeight/2+b.VirtualizationHeightOffset;startY+=c.StartItemYPosAdjustment;endX=startX+k.ConvertToUnitsOfBaseScaleType(d.BaseTimeScaleType,g,h,l)*d.BaseTimeUnitWidth;endY=b+(p-n)*e;endY+=c.EndItemYPosAdjustment;startX>endX?(k=21,l=startX-endX,c=startX-endX+16,g=5,d=startX-endX+20,f.css("margin-left",endX)):(k=endX-startX+20,l=0,c=15,g=endX+5-startX,d=k-1,f.css("margin-left",startX));startY>endY&&(h=startY,startY=endY,endY=h);n>p?(n=a("<div  class='rq-gc-dependency rq-gc-dependencyLine ui-state-default' style='z-index:2;  position:relative;  background-color:"+
m+" !important; border-bottom:3px solid transparent;  height:1px; margin-left:"+(l+2)+"px;  width:"+k+"px; '></div>"),p=a("<div class='rq-gc-dependency rq-gc-dependencyLine ui-state-default' style='z-index:2;  position:relative;  background-color:"+m+" !important; border-right:3px solid transparent; margin-top:-3px;  margin-left:"+(d+2)+"px; width:1px; height:"+(endY-startY)+"px;'></div> "),h=a("<div class='rq-gc-dependency rq-gc-dependencyLine ui-state-default' style='z-index:2;  position:absolute; background-color:"+
m+" !important;  border-bottom:3px solid transparent;   margin-left:"+(g+2)+"px; height:1px; width:"+c+"px;'></div>"),m=a("<div id='depArrow' class='rq-gc-dependency rq-gc-dependencyLine-arrow ui-state-default'style='z-index:2;  position:absolute; width:0; height:0; border-top:5px solid transparent !important; border-bottom:5px solid transparent !important;border-right-color:"+m+" !important; border-right-width:5px; border-right-style:solid;border-left-color:transparent !important;margin-top:"+(-(e/
4)+2)+"px; margin-left:"+(d-c-2)+"px;'></div> "),f.append(m),f.append(h),f.append(p),f.append(n)):(n=a("<div  class='rq-gc-dependency rq-gc-dependencyLine ui-state-default' style='z-index:2;  position:relative;  background-color:"+m+" !important; border-bottom:3px solid transparent; margin-top:-1px; height:1px; margin-left:"+(l+2)+"px;  width:"+k+"px; '></div>"),p=a("<div class='rq-gc-dependency rq-gc-dependencyLine ui-state-default' style='z-index:2;  position:relative;  background-color:"+m+" !important; border-right:3px solid transparent; margin-top:-3px;  margin-left:"+
(d+2)+"px; width:1px; height:"+(endY-startY)+"px;'></div> "),h=a("<div class='rq-gc-dependency rq-gc-dependencyLine ui-state-default' style='z-index:2;  position:relative; background-color:"+m+" !important;  border-bottom:3px solid transparent;  margin-left:"+(g+2)+"px; height:1px; width:"+c+"px;'></div>"),m=a("<div id='depArrow' class='rq-gc-dependency rq-gc-dependencyLine-arrow ui-state-default'style='z-index:2;  position:relative; width:0; height:0; border-top:5px solid transparent !important; border-bottom:5px solid transparent !important;border-right-color:"+
m+" !important; border-right-width:5px; border-right-style:solid;border-left-color:transparent !important;margin-top:"+(-(e/4)+1)+"px; margin-left:"+(d-c-2)+"px;'></div> "),f.append(n),f.append(p),f.append(h),f.append(m));f.css("margin-top",startY+"px");break;case RadiantQ.Gantt.DependencyType.StartToStart:startX=k.ConvertToUnitsOfBaseScaleType(d.BaseTimeScaleType,d.ComputedStartTime,g,l)*d.BaseTimeUnitWidth+1;b=startY=n*e+e/2+b.VirtualizationHeightOffset;startY+=c.StartItemYPosAdjustment;endX=startX+
k.ConvertToUnitsOfBaseScaleType(d.BaseTimeScaleType,g,h,l)*d.BaseTimeUnitWidth;endY=b+(p-n)*e;endY+=c.EndItemYPosAdjustment;startX>endX?(k=startX-endX+20,c=20,d=-5,g=endX):(k=20,c=endX-startX+20,d=c-25,g=startX);startY>endY&&(h=startY,startY=endY,endY=h);n>p?(n=a("<div class='rq-gc-dependency rq-gc-dependencyLine top ui-state-default' style='z-index:2;  position:relative; background-color:"+m+" !important; border-bottom:3px solid transparent; margin-left:-20px; height:1px; width:"+k+"px; '></div>"),
p=a("<div class='rq-gc-dependency rq-gc-dependencyLine mi ui-state-default' style='z-index:2;  position:relative;  background-color:"+m+" !important; border-right:3px solid transparent; margin-top:-3px;   margin-left:-20px; width:1px;  height:"+(endY-startY)+"px;'></div> "),h=a("<div class='rq-gc-dependency rq-gc-dependencyLine bot ui-state-default' style='z-index:2;  position:relative;  background-color:"+m+" !important; border-bottom:3px solid transparent;   margin-left:-20px; height:1px; width:"+
c+"px;'></div>"),m=a("<div id='depArrow' class='rq-gc-dependency rq-gc-dependencyLine-arrow ui-state-default' style='z-index:2;  position:absolute; width:0; height:0; border-top:5px solid transparent !important;  border-bottom:5px solid transparent !important; border-left-color:"+m+" !important; border-left-width:5px; border-left-style:solid;border-right-color:transparent !important; margin-top:"+(-(e/4)+2)+"px; margin-left:"+d+"px;'></div> "),f.append(m),f.append(h),f.append(p),f.append(n)):(n=a("<div class='rq-gc-dependency rq-gc-dependencyLine top ui-state-default' style='z-index:2;  position:relative; background-color:"+
m+" !important; border-bottom:3px solid transparent; margin-left:-20px; height:1px; width:"+k+"px; '></div>"),p=a("<div class='rq-gc-dependency rq-gc-dependencyLine ui-state-default' style='z-index:2;  position:relative;  background-color:"+m+" !important; border-right:3px solid transparent; margin-top:-3px;   margin-left:-20px; width:1px;  height:"+(endY-startY)+"px;'></div> "),h=a("<div class='rq-gc-dependency rq-gc-dependencyLine ui-state-default' style='z-index:2;  position:relative;  background-color:"+
m+" !important; border-bottom:3px solid transparent;   margin-left:-20px; height:1px; width:"+c+"px;'></div>"),m=a("<div id='depArrow' class='rq-gc-dependency rq-gc-dependencyLine-arrow ui-state-default' style='z-index:2;  position:relative; width:0; height:0; border-top:5px solid transparent !important;  border-bottom:5px solid transparent !important; border-left-color:"+m+" !important; border-left-width:5px; border-left-style:solid;border-right-color:transparent !important; margin-top:"+(-(e/4)+
1)+"px; margin-left:"+d+"px;'></div> "),f.append(n),f.append(p),f.append(h),f.append(m));f.css({"margin-top":startY+"px","margin-left":g});break;case RadiantQ.Gantt.DependencyType.StartToFinish:startX=k.ConvertToUnitsOfBaseScaleType(d.BaseTimeScaleType,d.ComputedStartTime,g,l)*d.BaseTimeUnitWidth+1;b=startY=n*e+e/2+b.VirtualizationHeightOffset;startY+=c.StartItemYPosAdjustment;endX=startX+k.ConvertToUnitsOfBaseScaleType(d.BaseTimeScaleType,g,h,l)*d.BaseTimeUnitWidth;endY=b+(p-n)*e;endY+=c.EndItemYPosAdjustment;
startY>endY&&(h=startY,startY=endY,endY=h);startX>endX?n>p?(n=a("<div class='rq-gc-dependency rq-gc-dependencyLine ui-state-default' style=' z-index:2;  position:relative;  background-color:"+m+" !important; border-bottom:3px solid transparent; height:1px; width:"+(startX-endX)+"px; '></div>"),p=a("<div class='rq-gc-dependency rq-gc-dependencyLine ui-state-default' style=' z-index:2;  position:relative; background-color:"+m+" !important; border-left:3px solid transparent;  width:1px;  height:"+(endY-
startY-e/2)+"px;'></div> "),m=a("<div id='depArrow' class='rq-gc-dependency rq-gc-dependencyLine-arrow ui-state-default' style='z-index:2; margin-left:-4px; position:relative; width:0; height:0; border-top:none !important;  border-bottom-style:solid;  border-bottom:5px solid; border-bottom-color: "+m+" !important; border-right:5px solid transparent !important; border-left:5px solid transparent !important;'></div> "),f.css("margin-left",endX+"px"),f.css("margin-top",startY+(e/4+3)+"px"),f.append(m),
f.append(p),f.append(n)):(n=a("<div class='rq-gc-dependency rq-gc-dependencyLine ui-state-default' style=' z-index:2;  position:relative;  background-color:"+m+" !important; border-bottom:3px solid transparent; height:1px; width:"+(startX-endX)+"px; '></div>"),p=a("<div class='rq-gc-dependency rq-gc-dependencyLine ui-state-default' style=' z-index:2;  position:relative; background-color:"+m+" !important; border-left:3px solid transparent;  width:1px;  height:"+(endY-startY-e/2+2)+"px;'></div> "),
m=a("<div id='depArrow' class='rq-gc-dependency rq-gc-dependencyLine-arrow ui-state-default' style='width:0; height:0; z-index:2;  position:relative; border-top-color:"+m+" !important; border-top-width:5px; border-top-style:solid; border-bottom-width:0px !important; border-right:5px solid transparent !important; border-left:5px solid transparent !important; margin-left:-4px; margin-top:-3px;'></div> "),f.css("margin-left",endX+"px"),f.css("margin-top",startY+"px"),f.append(n),f.append(p),f.append(m)):
n>p?(n=a("<div class='rq-gc-dependency rq-gc-dependencyLine ui-state-default' style='z-index:2;  position:relative; background-color:"+m+" !important; border-bottom:3px solid transparent;  margin-left:-20px; height:1px; width:20px; '></div>"),p=a("<div class='rq-gc-dependency rq-gc-dependencyLine ui-state-default' style='z-index:2;  position:relative; background-color:"+m+" !important; border-right:3px solid transparent;  margin-top:-3px; margin-left:-20px; width:1px; height:"+(e/2-2)+"px;'></div> "),
c=a("<div class='rq-gc-dependency rq-gc-dependencyLine ui-state-default' style='z-index:2;  position:relative; background-color:"+m+" !important; border-bottom:3px solid transparent; margin-left:-20px; height:1px;  width:"+(endX-startX+41)+"px;'></div> "),d=a("<div class='rq-gc-dependency rq-gc-dependencyLine ui-state-default' style='z-index:2;  position:relative;  background-color:"+m+" !important; border-right:3px solid transparent; margin-left:"+(endX-startX+20)+"px; margin-top:-3px; width:1px; height:"+
(endY-startY-e/2)+"px;'></div> "),g=a("<div class='rq-gc-dependency rq-gc-dependencyLine ui-state-default' style='z-index:2;  position:relative;  background-color:"+m+" !important; border-bottom:3px solid transparent;  margin-left:"+(endX-startX+5)+"px;  height:1px; width:16px;'></div> "),m=a("<div id='depArrow' class='rq-gc-dependency rq-gc-dependencyLine-arrow ui-state-default' style='z-index:2;  position:absolute; width:0; height:0;  border-top:5px solid transparent !important; border-bottom:5px solid transparent !important; border-left-color:transparent  !important; border-right-color:"+
m+" !important; border-right-width:5px; border-right-style:solid; margin-top:"+(-(e/4)+2)+"px; margin-left:"+(endX-startX+3)+"px;'></div> "),f.css("margin-left",startX+"px"),f.css("margin-top",startY+"px"),f.append(m),f.append(g),f.append(d),f.append(c),f.append(p),f.append(n)):(n=a("<div class='rq-gc-dependency rq-gc-dependencyLine ui-state-default' style='z-index:2;  position:relative; background-color:"+m+" !important; border-bottom:3px solid transparent;  margin-left:-20px; height:1px; width:20px; '></div>"),
p=a("<div class='rq-gc-dependency rq-gc-dependencyLine ui-state-default' style='z-index:2;  position:relative; background-color:"+m+" !important; border-right:3px solid transparent;  margin-top:-3px; margin-left:-20px; width:1px; height:"+e/2+"px;'></div> "),c=a("<div class='rq-gc-dependency rq-gc-dependencyLine ui-state-default' style='z-index:2;  position:relative; background-color:"+m+" !important; border-bottom:3px solid transparent; margin-left:-20px; height:1px;  width:"+(endX-startX+41)+"px;'></div> "),
d=a("<div class='rq-gc-dependency rq-gc-dependencyLine ui-state-default' style='z-index:2;  position:relative;  background-color:"+m+" !important; border-right:3px solid transparent; margin-left:"+(endX-startX+20)+"px; margin-top:-3px; width:1px; height:"+(endY-startY-2-e/2)+"px;'></div> "),g=a("<div class='rq-gc-dependency rq-gc-dependencyLine ui-state-default' style='z-index:2;  position:relative;  background-color:"+m+" !important; border-bottom:3px solid transparent;  margin-left:"+(endX-startX+
5)+"px;  height:1px; width:16px;'></div> "),m=a("<div id='depArrow' class='rq-gc-dependency rq-gc-dependencyLine-arrow ui-state-default' style='z-index:2;  position:relative; width:0; height:0;  border-top:5px solid transparent !important; border-bottom:5px solid transparent !important; border-left-color:transparent  !important; border-right-color:"+m+" !important; border-right-width:5px; border-right-style:solid; margin-top:"+(-(e/4)+2)+"px; margin-left:"+(endX-startX+3)+"px;'></div> "),f.css("margin-left",
startX+"px"),f.css("margin-top",startY+"px"),f.append(n),f.append(p),f.append(c),f.append(d),f.append(g),f.append(m));break;default:startX=k.ConvertToUnitsOfBaseScaleType(d.BaseTimeScaleType,d.ComputedStartTime,g,l)*d.BaseTimeUnitWidth,b=startY=n*e+e/2+b.VirtualizationHeightOffset,startY+=c.StartItemYPosAdjustment,endX=startX+k.ConvertToUnitsOfBaseScaleType(d.BaseTimeScaleType,g,h,l)*d.BaseTimeUnitWidth,endY=b+(p-n)*e,endY+=c.EndItemYPosAdjustment,startY>endY&&(h=startY,startY=endY,endY=h),startX<=
endX?(n>p?(n=endX-startX+5,g=endX-startX+4,p=endY-startY-3,d=endX-startX,!0==c.EndActivity.Effort.equals(RQTimeSpan.Zero)&&(n=endX-startX-1,g=endX-startX-2,p=endY-startY-4,d=endX-startX-6.5,n=0<n?n:5,g=0<g?g:5,d=0<d?d:1),n=a("<div class='rq-gc-dependency rq-gc-dependencyLine ui-state-default' style='z-index:2; position:relative;  background-color:"+m+" !important; border-bottom:3px solid transparent; height:1px;  width:"+n+"px; '></div>"),p=a("<div class='rq-gc-dependency rq-gc-dependencyLine ui-state-default' style=' z-index:2; position:relative;  background-color:"+
m+" !important; margin-top:-3px; border-right:3px solid transparent; width:1px; margin-left:"+g+"px;  height:"+(p-e/2)+"px;'></div>"),m=a("<div id='depArrow' class='rq-gc-dependency rq-gc-dependencyLine-arrow ui-state-default' style='z-index:2;  position:relative; width:0; height:0;border-bottom-color:"+m+" !important; border-top:none !important; margin-top:3px; border-bottom-width:5px; border-bottom-style:solid; border-bottom:5px solid "+m+" !important; border-right:5px solid transparent !important; border-left:5px solid transparent !important; margin-left:"+
d+"px;'></div> "),f.css({"margin-left":startX+2+"px","margin-top":startY+(e/4+2)+"px"}),e=document.createDocumentFragment(),e.appendChild(m[0]),e.appendChild(p[0]),e.appendChild(n[0])):(n=endX-startX+5,g=endX-startX+4,p=endY-startY-3,d=endX-startX,!0==c.EndActivity.Effort.equals(RQTimeSpan.Zero)&&(n=endX-startX-1,g=endX-startX-2,p=endY-startY-4,d=endX-startX-6.5,n=0<n?n:5,g=0<g?g:5,d=0<d?d:1),n=a("<div class='rq-gc-dependency rq-gc-dependencyLine ui-state-default' style='z-index:2; position:relative; margin-top:1px; background-color:"+
m+" !important;   border-bottom:3px solid transparent; height:1px;  width:"+n+"px; '></div>"),p=a("<div class='rq-gc-dependency rq-gc-dependencyLine ui-state-default' style=' z-index:2;  position:relative; background-color:"+m+" !important;  width:1px; border-right:3px solid transparent; margin-top:-3px; margin-left:"+g+"px;  height:"+(p-e/2)+"px;'></div> "),m=a("<div id='depArrow' class='rq-gc-dependency rq-gc-dependencyLine-arrow ui-state-default' style='z-index:2;  position:relative; width:0; height:0; border-top-color:"+
m+" !important ; border-top-width:5px; border-top-style:solid; border-bottom-width:0px; border-right:5px solid transparent !important; border-left:5px solid transparent !important; margin-left:"+d+"px;'></div> "),f.css({"margin-left":startX+2+"px","margin-top":startY+"px"}),e=document.createDocumentFragment(),e.appendChild(n[0]),e.appendChild(p[0]),e.appendChild(m[0])),f[0].appendChild(e)):n>p?(n=a("<div  class='rq-gc-dependency rq-gc-dependencyLine ui-state-default' style='z-index:2;  position:relative;  background-color:"+
m+" !important; border-bottom:3px solid transparent; margin-top:-1px; height:1px; margin-left:"+(endX-startX)+"px;  width:"+(startX-endX)+"px; '></div>"),p=a("<div class='rq-gc-dependency rq-gc-dependencyLine ui-state-default' style=' z-index:2;  position:relative; background-color:"+m+" !important;  width:1px; border-right:3px solid transparent; margin-top:-3px; margin-left:"+(endX-startX)+"px;  height:"+(endY-startY-e/2)+"px;'></div> "),m=a("<div id='depArrow' class='rq-gc-dependency rq-gc-dependencyLine-arrow ui-state-default' style='z-index:2; margin-left:-4px; position:relative; width:0; height:0; border-top:none !important;  border-bottom-style:solid;  border-bottom:5px solid; border-bottom-color: "+
m+" !important; border-right:5px solid transparent !important; border-left:5px solid transparent !important;  margin-left:"+(endX-(startX+4))+"px;'></div> "),f.css({"margin-left":startX+2+"px","margin-top":startY+(e/4+2)+"px"}),f.append(m),f.append(p),f.append(n)):(n=a("<div class='rq-gc-dependency rq-gc-dependencyLine ui-state-default' style='z-index:2;  position:relative;  background-color:"+m+" !important; border-bottom:3px solid transparent; margin-top:-1px; height:1px; margin-left:"+(endX-startX)+
"px;  width:"+(startX-endX)+"px; '></div>"),p=a("<div class='rq-gc-dependency rq-gc-dependencyLine ui-state-default' style=' z-index:2;  position:relative; background-color:"+m+" !important;  width:1px; border-right:3px solid transparent; margin-top:-3px; margin-left:"+(endX-startX)+"px;  height:"+(endY-startY-3-e/2)+"px;'></div> "),m=a("<div id='depArrow' class='rq-gc-dependency rq-gc-dependencyLine-arrow ui-state-default' style='z-index:2;  position:relative; width:0; height:0; border-top-color:"+
m+" !important ; border-top-width:5px; border-top-style:solid; border-bottom-width:0px; border-right:5px solid transparent !important; border-left:5px solid transparent !important; margin-left:"+(endX-(startX+4))+"px;'></div> "),f.css({"margin-left":startX+2+"px","margin-top":startY+"px"}),f.append(n),f.append(p),f.append(m))}f=a(".rq-gc-dependency",f);this.CreateTooltip(this,f)}})})(jQuery);
(function(a){var b=RadiantQ.Gantt.DefaultStyles;a.widget("radiantq.GanttRows",{currentUniqueRowSuffix:0,options:{Data:null,ParentTasksListProperty:null,TasksListProperty:null,Expand:null,TaskTemplate:null,OverlappedTasksRenderingOptimization:null,ParentTaskTemplate:null,TaskStartTime:null,ParentTaskStartTime:null,TaskEndTime:null,ParentTaskEndTime:null,GanttChart:null,RowHeight:null,TaskBarHeight:null,KnockoutObjectName:null,ViewWidth:null,TaskTooltipTemplate:null,ResizeInfoPopup:null,MovingInfoPopup:null,
FlexyGantt:null,TimeIndicatorLineOption:null,UseChartVirtualization:!1,EnableAlternativeRowBackground:null,TaskBarBrowseToCueLeftTemplate:null,TaskBarBrowseToCueRightTemplate:null,IsPrinting:!1},CreateTaskListControl:function(a,b,e){a.TasksListControl({Data:b,ParentTasksListProperty:this.options.ParentTasksListProperty,TasksListProperty:this.options.TasksListProperty,TaskTemplate:this.options.TaskTemplate,ParentTaskTemplate:this.options.ParentTaskTemplate,OverlappedTasksRenderingOptimization:this.options.OverlappedTasksRenderingOptimization,
TaskStartTime:this.options.TaskStartTime,ParentTaskStartTime:this.options.ParentTaskStartTime,TaskEndTime:this.options.TaskEndTime,ParentTaskEndTime:this.options.ParentTaskEndTime,RowCount:this.currentUniqueRowSuffix,GanttChart:this.options.GanttChart,Parent:this,KnockoutObjectName:this.options.KnockoutObjectName,TaskTooltipTemplate:this.options.TaskTooltipTemplate,ResizeInfoPopup:this.options.ResizeInfoPopup,MovingInfoPopup:this.options.MovingInfoPopup,TaskBarHeight:this.options.TaskBarHeight,FlexyGantt:this.options.FlexyGantt,
UseChartVirtualization:this.options.UseChartVirtualization,TaskBarBrowseToCueLeftTemplate:this.options.TaskBarBrowseToCueLeftTemplate,TaskBarBrowseToCueRightTemplate:this.options.TaskBarBrowseToCueRightTemplate,IsPrinting:this.options.IsPrinting,TimeIndicatorLineOption:this.options.TimeIndicatorLineOption});this.options.GanttChart.LoadingRow({Row:e,Data:b})},$Area:null,$tableBody:null,_create:function(){b.init();var c=this;this.yPosition=0;this.itemHeight=this.options.RowHeight;this.SCROLLBAR_MIN_SIZE=
10;this.VirtualizationID=0;this.totalItems=[];this.listItems=[];this.$chartTableBody=a("<tbody style='overflow:hidden;'></tbody>");var d=a("<table class='chartRowsContainer rq-gc-rowsParent-table'></table").append(this.$chartTableBody);this.table=d;d[0].style.cssText=b.ZeroStyle;d[0].style.height=null;var e=eval(this.options.KnockoutObjectName),f=this.element.parents("div").filter(".rq-ganttChart");this.$Area=a(".rq-gc-chartArea-div",f);this.$tableBody=a(".ui-grid-body",f.parent());var g=this.$Area.height();
this.bindDataCollectionChanged=function(){a.observable(c.options.Data).bind("insert remove replaceAll",function(a,b){"insert"==a.type&&c.InsertRow(c.element,b,d,c.options.ViewWidth);"remove"==a.type&&c.RemoveRow(b,d);e&&ko.applyBindingsToDescendants(e,c.element[0])})};this.bindDataCollectionChanged();null!=c.options.Data&&(c.Refresh(c.element,c.options.Data,d,c.options.ViewWidth,g),this._enableAlternativeRowBackground());a(f).bind("ganttchartsourceupdated",function(b,c){a.extend(this.options,c.options);
this.options.Data=c.options.FlatItemsSource;this.options.ParentTaskTemplate=c.options.ParentTaskItemTemplate;this.options.TaskTemplate=c.options.TaskItemTemplate;this.VirtualizationID=0;this.totalItems=[];this.listItems=[];this._destroy();this.bindDataCollectionChanged();this.renderBars(c)}.bind(this));a(f).bind("ganttchartrefreshui",function(a,b){!0==c.options.GanttChart.options.ResizeToFit&&(width=c.options.GanttChart.element.width(),c.$chartTableBody.width(width));!0==b.ForceToReDrawRows&&(c._cachedRows=
{},c.renderBars(b))});a(window).resize(function(){g=a(".rq-gc-chartArea-div",f).height();c.options.UseChartVirtualization&&(null!=c.options.Data&&c.Refresh(c.element,c.options.Data,d,c.options.ViewWidth,g),c._enableAlternativeRowBackground())});var h=a(".ui-grid-body",f[0].parentElement);h.scroll(function(){this.options.UseChartVirtualization&&(this.yPosition=h.scrollTop(),null!=this.options.Data&&this.Refresh(this.element,this.options.Data,d,this.options.ViewWidth,g),this._enableAlternativeRowBackground())}.bind(this));
this.renderBars=function(a){this.$chartTableBody.empty();null!=a.options.FlatItemsSource&&c.Refresh(c.element,a.options.FlatItemsSource,d,a.options.ViewWidth,g);c.knockoutObjectName&&ko.applyBindingsToDescendants(c.knockoutObjectName,c.element[0]);this._enableAlternativeRowBackground()};this.element.data("GanttRows",this)},_enableAlternativeRowBackground:function(){if(!0==this.options.EnableAlternativeRowBackground){var b=this;a("td",this.table).removeClass("rq-grid-alternative-background");a("td",
this.table).addClass(function(){var d=a(this),e=!1,e=b.options.IsPrinting?0==this.parentElement.rowIndex%2:0==a(d.parent()[0]["data-grid-item"].TableRow()).index()%2;if(!0==e)return"rq-grid-alternative-background"})}},_cachedRowCont:a("<div id='cache'></div>"),_cachedRows:{},Refresh:function(b,d,e,f,g){if(this.options.UseChartVirtualization){var h=this.$tableBody.scrollTop();this._cachedRowCont.append(this.$chartTableBody.children());g=this.$Area.height();var k=a("div.grid-body-actualContent",this.$tableBody).height();
g=Math.min(k,g);var k=Math.floor(h/this.itemHeight),l=0;e[0].style.setProperty("margin-top",-(h%this.itemHeight)+"px","important");for(this.processedItems={};l*this.itemHeight<g;){h=Math.max(k+l,0);if(h>=d.length)break;var n=this.getItemAtIndex(h,d,f);n[0]["data-grid-item"]=d[h];this.totalItems.push(n);this.processedItems[h.toString()]=n;this.$chartTableBody.append(n);l++}this.cleanupListItems(!0)}else{g=document.createDocumentFragment();for(k=0;k<d.length;k++)l=d[k],h=a("<tr style='height:"+this.options.RowHeight+
"px;width:100%' > <td id='ChartRow' class='FlexyChartRow rq-fg-gc-row' style='height:"+(this.options.RowHeight-1)+"px;width:100%;border-top-width: 0;border-right-width: 0;'> </td> </tr>"),n=h.find("td"),n[0].DataContext=l,!1==this.options.IsPrinting&&l.ChartRow(h),h[0]["data-grid-item"]=d[k],this.CreateTaskListControl(n,l,h),g.appendChild(h[0]),this.currentUniqueRowSuffix++,l.IsSelected()&&h.addClass("rq-row-selected ui-state-active");this.$chartTableBody.append(g)}e.width(f);b.css("height","auto").append(e);
e.css("height","auto");this.options.UseChartVirtualization||b.css("height",this.$tableBody[0].clientHeight);b="#"+this.options.GanttChart.$GanttChart[0].id;b=new RadiantQ.Gantt.ContextMenuImpl.ContextMenu(b+" .rq-gc-taskbar, "+b+" .taskbar-style");d=0==a("#"+this.options.GanttChart.$GanttChart[0].id+" .rq-fg-gc-row").length?new RadiantQ.Gantt.ContextMenuImpl.ContextMenu("#"+this.options.GanttChart.$GanttChart[0].id+" .FlexyChartRow"):new RadiantQ.Gantt.ContextMenuImpl.ContextMenu("#"+this.options.GanttChart.$GanttChart[0].id+
" .rq-fg-gc-row");this.options.GanttChart.options.Parent.TaskContextMenu=b;this.options.GanttChart.options.Parent.RowContextMenu=d;this.options.KnockoutObjectName&&(b=eval(this.options.KnockoutObjectName),ko.applyBindingsToDescendants(b,this.element[0]));this._enableAlternativeRowBackground()},getItemAtIndex:function(b,d,e){if(0<=b&&b<this.options.Data.length){var f=this.options.Data[b],g,h=b.toString();if(void 0!=this._cachedRows[f._guid])g=this._cachedRows[f._guid];else{g=a("<tr style='height:"+
this.options.RowHeight+"px;width:100%' > <td name="+d[b]._data.TName+" class='FlexyChartRow rq-fg-gc-row' style='height:"+this.options.RowHeight+"px;width:100%;border-top-width: 0; border-right-width: 0;'> </td> </tr>");var k=g.find("td");k.width(e);k[0].DataContext=d[b];!1==this.options.IsPrinting&&d[b].ChartRow(g);this.CreateTaskListControl(k,d[b],g);g[0]["data-grid-item"]=d[b];this.currentUniqueRowSuffix++;d[b].IsSelected()&&g.addClass("rq-row-selected ui-state-active");if(null===this.listItems[h]||
void 0===this.listItems[h])this.listItems[h]=g;this._cachedRows[f._guid]=g}g.attr("list-index",b);return g}},cleanupListItems:function(a){var b,e=[];if(this.processedItems)for(b in this.processedItems)e.push(this.processedItems[b]);this.totalItems=e;!0!==a&&this.ScrollBar.fadeTo(300,0)},InsertRow:function(b,d,e,f){for(b=0;b<d.items.length;b++){var g=null,g=a("<tr style='height:"+this.options.RowHeight+"px;width:100%' > <td class='FlexyChartRow rq-fg-gc-row' style='height:"+(this.options.RowHeight-
1)+"px;width:100%;border-top-width: 0; border-right-width: 0;'> </td> </tr>"),h=g.find("td");h[0].DataContext=d.items[b];d.items[b].ChartRow(g);g[0]["data-grid-item"]=d.items[b];this.options.UseChartVirtualization?this.Refresh(this.element,this.options.Data,e,this.options.ViewWidth):(this.CreateTaskListControl(h,d.items[b],g),0==d.index?e.find("tr").eq(0).before(g[0]):e.find("tr").eq(d.index-1).after(g[0]));h.width(f);this.currentUniqueRowSuffix++;d.items[b].IsSelected()&&g.addClass("rq-row-selected  ui-state-active ")}!0==
this.options.EnableAlternativeRowBackground&&(a("td",e).removeClass("rq-grid-alternative-background"),a("td",e).addClass(function(){var b=a(this);if(!0==(0==a(b.parent()[0]["data-grid-item"].TableRow()).index()%2))return"rq-grid-alternative-background"}))},RemoveRow:function(b,d){if(this.options.UseChartVirtualization){this.listItems.splice(b.index,1);0<this.itemindex?this.totalItems.splice(b.index-this.itemindex-1,1):this.totalItems.splice(b.index-this.itemindex,1);var e=b.items[0];this._cachedRows[e._guid]&&
delete this._cachedRows[e._guid];this.Refresh(this.element,this.options.Data,d,this.options.ViewWidth)}else e=d.find("tr").eq(b.index),e.remove(),a(d).css("height",parseInt(a(d).css("height"))-parseInt(a(e).css("height")));!0==this.options.EnableAlternativeRowBackground&&(a("td",d).removeClass("rq-grid-alternative-background"),a("td",d).addClass(function(){var b=a(this);if(!0==(0==a(b.parent()[0]["data-grid-item"].TableRow()).index()%2))return"rq-grid-alternative-background"}))},_destroy:function(){this._cachedRows=
{};this._cachedRowCont.empty()}})})(jQuery);
(function(a,b){a.widget("radiantq.rowbase",{options:{filter:"tbody > tr",canhHighlightAdjacentElement:null},_create:function(){this.options.canhHighlightAdjacentElement=!0},IsChart:function(b){return a(b).parents("table").hasClass("rq-gc-rowsParent-table")?!0:a(b).parents("table").hasClass("ui-grid-body-table")?!1:null},getParent:function(b){return this.IsChart(b)?a(b).parents(".rq-ganttChart")[0]:a(b).parents(".rq-FlexyTable")[0]},getAdjacentTR:function(c,d){if(c){var e=-1==c[0].rowIndex?c.index():
c[0].rowIndex,f=this.IsChart(c),g;!0==f?(f=a(".ui-grid-body-table",this.element)[0],f.rows!=b&&(g=f.rows[e])):!1==f&&null!=f&&(f=a(".rq-gc-rowsParent-table",this.element)[0])&&f.rows!=b&&(g=f.rows[e]);return a(g,this.element)}}})})(jQuery);
(function(a){a.widget("radiantq.GanttRowselectable",a.radiantq.rowbase,{options:{SelectionMode:RadiantQ.Gantt.SelectionMode.Multiple,IsFlexyGantt:!0},selectedItems:new ObservableCollection,_create:function(){var b=this;this.selectedItems=new ObservableCollection;a(".ui-grid-body-table",this.element).addClass("ui-selectable");a(".rq-gc-rowsParent-table",this.element).addClass("ui-selectable");a.radiantq.rowbase.prototype._create.apply(this,arguments);this.element.data("GanttRowselectable",this);this.element.bind("mousedown",
function(a){b._mousedown(a)});this.UpdateSource();a.observable(this.selectedItems).bind("insert remove replaceAll",function(a,d){b.UpdateSelection(a,d)})},UpdateSource:function(){var b=this,c=this.options.IsFlexyGantt?a(this.element).FlexyGantt("option","FlatItemsSource"):a(this.element).GanttControl("option","FlatItemsSource");c&&c.CollectionChanged.subscribe(function(a,c){var f=c.items[0].IsSelected();"remove"===a.type&&!0==f&&b.selectedItems.remove(c.items[0])})},_mousedown:function(b){var c=a(b.target).closest("tr"),
d=a(c.parents("table")[0]);if(!d)return!1;if(d.hasClass("ui-grid-body-table")||d.hasClass("rq-gc-rowsParent-table")){if(!b.ctrlKey&&0!=c.length||this.options.SelectionMode==RadiantQ.Gantt.SelectionMode.Single)this.removeAllHighlight();else if(0!=c.length&&c.hasClass("rq-row-selected")&&3!==b.which)return this.selectedItems.remove(c[0]["data-grid-item"]),!1;this.hightlighRow(c,b)}return!1},selectItemByitem:function(a){this.removeAllHighlight();this.hightlighRowByData(a)},UpdateSelection:function(b,
c){var d=c.items[0];if(void 0==d.IsSelected())return!1;if("insert"===b.type){d.IsSelected(!0);var e=d.TableRow(),f=d.ChartRow();a("td",e).addClass("rq-row-selected-children");a("td",f).addClass("rq-row-selected-children");e=a("#arrow",e);0!=e.length&&e.addClass("ui-selected-arrow");e=a("div.label",f);0!=e.length&&e.addClass("ui-selected-label");e=a("div.rq-gc-taskbar",f);0!=e.length?e.addClass("ui-selected-bar"):a("div.taskbar-style ",f).addClass("ui-selected-bar");e=a("div.rq-gc-parentBar-leftCue",
f);0!=e.length&&e.addClass("ui-selected-parentLeftPoly");e=a("div.rq-gc-parentBar-rightCue",f);0!=e.length&&e.addClass("ui-selected-parentRightPoly");f=a("div.rq-gc-parentBar-middle",f);0!=f.length&&f.addClass("ui-selected-parentMiddleBar");d=new RadiantQ.Gantt.SelectionChanged({TableRow:d.TableRow(),ChartRow:d.ChartRow(),Data:c.items[0]},[]);this._trigger("selectedChange",b,d)}else"remove"===b.type&&(d.IsSelected(!1),e=d.TableRow(),f=d.ChartRow(),a("td",e).removeClass("rq-row-selected-children"),
a("td",f).removeClass("rq-row-selected-children"),e=a("div#arrow",e),0!=e.length&&e.removeClass("ui-selected-arrow"),e=a("div.label",f),0!=e.length&&e.removeClass("ui-selected-label"),e=a("div.rq-gc-taskbar",f),0!=e.length?e.removeClass("ui-selected-bar"):a("div.taskbar-style ",f).removeClass("ui-selected-bar"),e=a("div.rq-gc-parentBar-leftCue",f),0!=e.length&&e.removeClass("ui-selected-parentLeftPoly"),e=a("div.rq-gc-parentBar-rightCue",f),0!=e.length&&e.removeClass("ui-selected-parentRightPoly"),
f=a("div.rq-gc-parentBar-middle",f),0!=f.length&&f.removeClass("ui-selected-parentMiddleBar"),d=new RadiantQ.Gantt.SelectionChanged([],{TableRow:d.TableRow(),ChartRow:d.ChartRow(),Data:c.items[0]}),this._trigger("selectedChange",b,d))},IsTable:function(b){return b.parent().parent().is(a(".ui-grid-body-table",this.element))},SelectedItems:function(){return this.selectedItems},hightlighRow:function(a){0!=a.length&&this.selectedItems.add(a[0]["data-grid-item"])},hightlighRowByData:function(a){null!=
a&&this.selectedItems.add(a)},removeAllHighlight:function(){for(var a=this.selectedItems.length,c=0;c<a;c++)this.selectedItems.remove(this.selectedItems[0])},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments);switch(b){case "Source":this.removeAllHighlight(),this.UpdateSource()}},destroy:function(){a.radiantq.rowbase.prototype.destroy.apply(this,arguments);this.removeAllHighlight();this.element.unbind("mousedown")}})})(jQuery);
(function(a,b){a.widget("radiantq.hoverable",a.radiantq.rowbase,{options:{},currentData:null,currentTr:null,_create:function(){var b=this;a.radiantq.rowbase.prototype._create.apply(this,arguments);this.element.bind("mouseover",function(a){b._mousehover(a)});this.element.bind("mouseleave",function(a){b.removehighlight(a);return!1})},_mousehover:function(b){this.removehighlight();this.currentTr=a(b.target).closest("tr");0!=this.currentTr.length&&(this.currentData=this.currentTr[0]["data-grid-item"],
null!=this.currentData&&this.currentData.IsMouseIn(!0));return!1},removehighlight:function(){null!=this.currentData&&this.currentData.IsMouseIn(!1)},destroy:function(){a.radiantq.rowbase.prototype.destroy.apply(this,arguments);this.element.unbind("mouseover");this.element.unbind("mouseleave")}})})(jQuery);
$.widget("ui.timespinner",$.ui.spinner,{options:{step:1,page:60,change:null,start:new Date,minutes:30,current:null},TimeFormat:/^([0-9])(:[0-5]\d) [APap][mM]$/,_parse:function(a){if("string"===typeof a&&Number(a)===a){a=this.GetHourAndMinute(a);var b=this.options.start;return new Date(b.getFullYear(),b.getMonth(),b.getDate(),+a.hour,+a.minute,0,0)}return this.options.start},_format:function(a){var b=Date.CultureInfo.formatPatterns.shortTime;this.options.current=a.toString(b);return(new Date(a)).toString(b)},
_increment:function(a,b){this.options.start=a.addMinutes(this.options.minutes*b);return this.options.start},_setOption:function(a,b){$.Widget.prototype._setOption.apply(this,arguments)},_value:function(a,b){var c;""!==a&&(c=this._parse(a),null!==c&&(a=this._format(c)));this.element.val(a);this._refresh()},getTime:function(){return this.element.val().toString()},getRoundDate:function(a){var b=this.GetHourAndMinute(this._format(this.options.start));return new Date(a.getFullYear(),a.getMonth(),a.getDate(),
+b.hour,+b.minute,0,0)},setTime:function(a){this.options.start=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),0,0);this._refresh();this._value(a)},_spin:function(a,b){var c=this.value()||0;this.counter||(this.counter=1);"string"===typeof c||-1==a&&0==c.totalMilliseconds||(c=this._increment(c,a));this.spinning&&!1===this._trigger("spin",b,{value:c})||(this._value(c,!0),this.counter++)},_events:{keydown:function(a){this._start(a)&&this._keydown(a)&&a.preventDefault();
this.element.val()},keyup:"_stop",focus:function(){this.uiSpinner.addClass("ui-state-active");this.options.current=this.element.val()},blur:function(a){this._refresh();this.uiSpinner.removeClass("ui-state-active");var b=this.element.val(),c=!1;if(!0==this.TimeFormat.test(b)){var c=!0,d=this.GetHourAndMinute(b),e=this.options.start;this.options.start=new Date(e.getFullYear(),e.getMonth(),e.getDate(),+d.hour,+d.minute,0,0)}!1==c&&this.element.val(this.options.current);this.options.current!==b&&this._trigger("change",
a)}},GetHourAndMinute:function(a){a=a.split(":");var b=a[1].split(" ");return{hour:a[0],minute:b[0]}}});
$.widget("radiatq.DurationPicker",$.ui.spinner,{options:{minutes:30},TimeSapanWithDay:/^(\d*.\d{2}:\d{2}:\d{2})$/,TimeSapanWithoutday:/^(\d{2}:\d{2}:\d{2})$/,_create:function(){this.element.addClass("radiantq.DurationPicker");$.ui.spinner.prototype._create.apply(this,arguments)},_parse:function(a){return"string"===typeof a&&(this.TimeSapanWithDay.test(a)||this.TimeSapanWithoutday.test(a))?RQTimeSpan.parse(a):a},_increment:function(a,b){var c=a.addMinutes(this.options.minutes*b);return c.isLessThan(RQTimeSpan.Zero)?
RQTimeSpan.Zero:c},_value:function(a,b){var c;""!==a&&(c=this._parse(a),null!==c&&(a=this._format(c)));this.element.val(a);this._refresh()},GetDuration:function(){this._parse(this.element.val())},_spin:function(a,b){var c=this.value()||0;this.counter||(this.counter=1);"string"===typeof c||-1==a&&0==c.totalMilliseconds||(c=this._increment(c,a));this.spinning&&!1===this._trigger("spin",b,{value:c})||(this._value(c,!0),this.counter++)},_events:{keydown:function(a){this._start(a)&&this._keydown(a)&&a.preventDefault()},
keyup:"_stop",focus:function(){this.uiSpinner.addClass("ui-state-active");this.previous=this.element.val()},blur:function(a){this._refresh();this.uiSpinner.removeClass("ui-state-active");var b=this.element.val(),c=!1;!0==this.TimeSapanWithDay.test(b)&&!1==this.TimeSapanWithoutday.test(b)?c=!0:!1==this.TimeSapanWithDay.test(b)&&!0==this.TimeSapanWithoutday.test(b)&&(c=!0);!1==c&&this.element.val(this.previous);this.previous!==b&&this._trigger("change",a)},mousewheel:function(a,b){if(b){if(!this.spinning&&
!this._start(a))return!1;this._spin((0<b?1:-1)*this.options.step,a);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(a)},100);a.preventDefault()}},"mousedown .ui-spinner-button":function(a){a.preventDefault();this.document[0].activeElement!==this.element[0]&&this.element.focus();!1!==this._start(a)&&this._repeat(null,$(a.currentTarget).hasClass("ui-spinner-up")?1:-1,a)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(a){if($(a.currentTarget).hasClass("ui-state-active")){if(!1===
this._start(a))return!1;this._repeat(null,$(a.currentTarget).hasClass("ui-spinner-up")?1:-1,a)}},"mouseleave .ui-spinner-button":"_stop"},_format:function(a){return a.toString()}});
(function(a){a.widget("radiantq.DateTimePicker",{options:{setdate:null,dateformat:"mm-dd-yy"},wrapper:null,timePicker:null,_create:function(){var b=this;this.element.data("DateTimePicker",this);var c=null,d=0;this.wrapper=a('<div class="datetimepicker wrapper" style="height:'+this.element.height()+'px"></div>');this.timePicker=a('<input id="time" class="spinner"value="00:00 AM"/>');this.element.wrap(this.wrapper);this.wrapper=this.element.parent();this.wrapper.append(this.timePicker);var e=this.timePicker;
this.element.datepicker({dateFormat:this.options.dateformat,onSelect:function(){c=d=a(this).datepicker("getDate")}}).on("change",function(b){RegExp(/\b\d{1,2}[\/-]\d{1,2}[\/-]\d{4}\b/).test(this.value)||(a(this).datepicker("setDate",new Date(c)),b.preventDefault())});e.timespinner({start:new Date(0,0,0,0,0,0,0)});b=this;this.RefreshWidthandHeight();a(document).click(function(){!a("input",b.wrapper).is(":focus")&&a("input",b.wrapper).is(":visible")&&(b.wrapper.change(),b.element.datepicker("hide"))})},
GetDate:function(){var a=this.element.val();return this.timePicker.timespinner("getRoundDate",Date.parse(a))},setDate:function(a){this.element.datepicker("setDate",new Date(a));this.timePicker.timespinner("setTime",new Date(a))},widget:function(){return this.element.parent()},RefreshWidthandHeight:function(){var a=this.element,c=this.timePicker.timespinner("widget");a.css({margin:"0px"});c.css("height",a.height()+(a.outerHeight()-a.height()-1)).removeClass("ui-corner-all");c.css({"margin-top":"0px",
"vertical-align":"top"});this.wrapper.css("width",a.width()+"px");var d=c.find("input"),c=c.find("span");a.css("width","46%");var e=48*this.wrapper.width()/100;c.css({width:e+"px"});d.css({width:c.width(),margin:"0px","vertical-align":"top","font-size":a.css("font-size"),"font-family":a.css("font-family"),height:this.element.height()+2})}})})(jQuery);
(function(a){a.fn.longPress=function(a,c){var d=null;this.bind("touchstart",function(e){d=setTimeout(function(){c.call(a,e)},600)});this.bind("touchmove",function(){clearTimeout(d)});this.bind("touchend",function(a){clearTimeout(d)})};(a.ui.editor={}).editors={};a.widget("radiantq.RQeditor",{options:{editor:null,editorOptions:null,context:null,cancel:null,submit:null,editorElement:null,items:null,property:null},datePickerevents:function(b){b.datepicker("widget").click(function(a){a.preventDefault();
b.focus()});a(document).blur(function(){b.datepicker("hide")})},refreshEdit:function(b){var c=a(b.target),d=a(b.target).closest(this.options.items),e=this.options.context.grid.options.columns[d[0].cellIndex];if(!0==c.hasClass("rq-grid-expand-arrow")||!0==c.hasClass("rq-grid-collapse-arrow"))return!1;if(!1!=e.iseditable){c=d.closest("tr")[0]["data-grid-item"];if(!0==c.IsParent&&("ActivityName"!=this.options.property&&"Assignments"!=this.options.property&&(void 0==e.isparentcelleditable||!1==e.isparentcelleditable)||
!1==e.isparentcelleditable)||!0==c.IsReadOnly&&"ActivityName"!=this.options.property)return!1;this.input.is(":visible")||this.start(b)}},_create:function(){this.inner=this.element.wrapInner("<div class='editor-wrapper'></div>").children();this.element.data("RQeditor",this);this._on({dblclick:this.refreshEdit});this.element.longPress(this,this.refreshEdit);void 0==this.options.editorElement&&(this.options.editorElement="input");this.input=this.inputWrapper=a("<"+this.options.editorElement+" class='editor'>");
this.inputWrapper.appendTo(this.element);this.input.width(this.inner.width());this.options.editor in a.ui.editor.editors&&(this.inputWrapper=a.ui.editor.editors[this.options.editor](this.input,this.options.editorOptions));(this.input.hasClass("hasDatepicker")||this.input.hasClass("datetimepicker wrapper"))&&this.datePickerevents(this.input);this._on(this.inputWrapper,{focusin:function(){clearTimeout(this.timer);clearTimeout(this.Foucusouttimer)},focusout:function(b){var c=this;a(b.currentTarget);
this.Foucusouttimer=setTimeout(function(){c.submit(b)},100)},change:function(a){var c=this;this.timer=setTimeout(function(){c.submit(a)},100)},keydown:function(a){a.stopPropagation()},keyup:function(b){b.stopPropagation();b.keyCode===a.ui.keyCode.ENTER||b.keyCode===a.ui.keyCode.NUMPAD_ENTER?this.submit(b):b.keyCode===a.ui.keyCode.ESCAPE&&this.cancel(b)}})},start:function(a){!1!=this._trigger("beforeStart",a)?(this.inner.hide(),this.inputWrapper.show(),this._trigger("start",a)):this.cancel()},_hide:function(a){!0==
this.input.is(":focus")&&this.input.blur();!0==this.input.hasClass("hasDatepicker")&&this.input.datepicker("hide");!0==this.input.hasClass("ResourcePicker")&&this.input.data("ResourcePicker").close();this.inputWrapper.hide();this.inner.show()},submit:function(a){clearTimeout(this.timer);clearTimeout(this.Foucusouttimer);if(!0==this.input.is(":visible")){var c=this.input.val(),d={value:c};this._hide();!1!==this._trigger("submit",a,d)&&this.inner.text(c)}},cancel:function(a){this._hide();this._trigger("cancel",
a)}});a.widget("radiantq.gridEditor",{options:{editor:function(a,c){return c.options.columns[a[0].cellIndex].editor},editorOptions:function(a,c){return c.options.columns[a[0].cellIndex].editorOptions},items:"td",IsProjectGantt:!0},grid:null,_create:function(){this.grid=this.element.data("GanttTable");null==this.grid&&(this.grid=this.element.data("FlexyTable"));a.radiantq.DateTimePicker||alert("Gantt supports DateTime editing, please include the DateTimePicker.js");this._on({dblclick:this.refreshEdit});
this.element.longPress(this,this.refreshEdit)},refreshEdit:function(b){var c=this;b=a(b.target);if(!0==b.hasClass("rq-grid-expand-arrow")||!0==b.hasClass("rq-grid-collapse-arrow"))return!1;var d=b.closest(this.options.items);b=this.grid.options.columns[d[0].cellIndex];var e=b.property;this.colInfo=b;if(!1==b.iseditable)return!1;var f=d.closest("tr")[0]["data-grid-item"];if(!0==f.IsParent&&("ActivityName"!=e&&"Assignments"!=e&&(void 0==b.isparentcelleditable||!1==b.isparentcelleditable)||!1==b.isparentcelleditable)||
!0==f.IsReadOnly&&"ActivityName"!=e)return!1;"ID"!=e&&"resource"!=e&&"id"!=e&&d.length&&!d.data("RQeditor")&&(d.RQeditor({editor:this.options.editor(d,this.grid),editorOptions:this.options.editorOptions(d,this.grid),editorElement:b.editorElement,context:this,items:this.options.items,property:e,beforeStart:function(a,b){var e=d.closest("tr")[0]["data-grid-item"];return c._trigger("beforeStart",a,{data:e,grid:c.grid,property:c.grid.options.columns[d[0].cellIndex].property,target:d})},submit:function(b,
e){var f=d.closest("tr")[0]["data-grid-item"],l=c.grid.options.columns[d[0].cellIndex].property,n=c.grid.options.columns[d[0].cellIndex].type;d.focus();if(!1!==c._trigger("submit",b,{data:f,property:l,value:e.value})){var p=a("div.rq-grid-expander-text",this);if(0!=p.length)return p.html(e.value),!1;"Date"==n&&(e.value=Date.parse(e.value));"DateTime"==n&&(p=a(b.currentTarget).find("input.editor"),e.value=p.data("DateTimePicker").GetDate());"TimeSpan"==n&&(e.value=RQTimeSpan.parse(e.value));"number"==
n&&(isNaN(e.value)||-1==e.value.toString().indexOf(".")?(e.value=parseInt(e.value),isNaN(e.value)&&(e.value=0)):e.value=parseFloat(e.value));"StartTime"==l&&(f.Activity.PreferredStartTime=e.value);"Assignments"==l&&((n=a(b.currentTarget).find(".editor").data("ResourcePicker"))?(p=n.selectedItems.asArray,!0==n.IsChanged()&&RadiantQ.Gantt.ValueConverters.ConverterUtils.ConvertSelectedResourcesToAssignments(p,f.Activity.Assignments)):(n=a("option:selected",e.input).data("boundedObject"),null!=n&&RadiantQ.Gantt.ValueConverters.ConverterUtils.ConvertSelectedResourcesToAssignments([n],
f.Activity.Assignments)));"PredecessorIndexString"===l?c.setNestedValue(f,l,e.value):"Assignments"!=l&&c.setNestedValue(f.Activity,l,e.value)}return!1},cancel:function(){c.grid.element.focus()},start:function(b,e){var f=d.closest("tr")[0]["data-grid-item"],l=c.grid.options.columns[d[0].cellIndex].property,n=c.grid.options.columns[d[0].cellIndex].type,p=d.find(".editor").focus();if(!1!==c._trigger("start",b,{data:f,grid:c.grid,property:l,input:p})){var m=c.getNestedValue(f.Activity,l);if("Date"==n)p.datepicker("setDate",
m);else if("DateTime"==n)p.DateTimePicker("setDate",m);else if(""==m&&"number"==n)p.val(0);else if("Assignments"==l)if(p.data("ResourcePicker")){m=[];for(l=0;l<f.Activity.Assignments.length;l++)n=f.Activity.Assignments[l],m.push(n._resource);p.ResourcePicker({source:f.Activity.Model.GanttResources,SelectedResources:m,ResourceNameProperty:f.Activity.Model.ResourceNameBinding.Property,ResourceIDProperty:f.Activity.Model.ResourceIDBinding.Property})}else{if("Assignments"==l)for(p.empty(),m=f.Activity.Model.ResourceNameBinding.Property,
l=0;l<f.Activity.Model.GanttResources.length;l++){var n=f.Activity.Model.GanttResources[l],q=a("<option>"+n._boundObj[m]+"</option>");q.data("boundedObject",n);p.append(q)}}else p.val(c.getNestedValue(f.Activity,l))}}}),d.data("RQeditor").start())},getNestedValue:function(b,c){for(var d=c.split("."),e=0;e<d.length;e++)"undefined"!=typeof b&&(b=b[d[e]]);return!0==a.isFunction(b)?b():b||""},setNestedValue:function(b,c,d){c=c.split(".");previousLevel=c.length-1;for(var e=0;e<previousLevel;e++)"undefined"!=
typeof b&&(b=b[c[e]]);if(!0==a.isFunction(b[c[previousLevel]]))b[c[previousLevel]](d);else b[c[previousLevel]]!=d&&(b[c[previousLevel]]=d)}})})(jQuery);
(function(a){var b=null,c=0;createSVG=function(a,c){var f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.setAttribute("version","1.1");f.setAttribute("viewBox","0 0 1 1");f.setAttribute("preserveAspectRatio","none");void 0!=a.y2?(b=document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),b.setAttribute("id","gradient"),b.setAttribute("gradientUnits","userSpaceOnUse"),b.setAttribute("x1",""+a.x1+"%"),b.setAttribute("y1",""+a.y1+"%"),b.setAttribute("x2",""+a.x2+"%"),b.setAttribute("y2",
""+a.y2+"%")):void 0==a.y2&&(b=document.createElementNS("http://www.w3.org/2000/svg","radialGradient"),b.setAttribute("id","gradient"),b.setAttribute("gradientUnits","userSpaceOnUse"),b.setAttribute("cx",""+a.x1+"%"),b.setAttribute("cy",""+a.y1+"%"),b.setAttribute("r",""+a.x2+"%"));for(var g=0;g<c.length;g++){var h=c[g],k=document.createElementNS("http://www.w3.org/2000/svg","stop"),l;for(l in h)h.hasOwnProperty(l)&&k.setAttribute(l,h[l]);b.appendChild(k)}f.appendChild(b);g=document.createElementNS("http://www.w3.org/2000/svg",
"rect");g.setAttribute("x","0");g.setAttribute("y","0");g.setAttribute("height","100%");g.setAttribute("width","100%");g.setAttribute("fill","url(#gradient)");f.appendChild(g);return f};getGradientImageURL=function(b,c){if(0==a("script[src*=canvg]",document).length||void 0===canvg)window.console?console.error("canvg.js file is not found."):alert("canvg.js file is not found.");else{var f=createSVG(b,c),f=(new XMLSerializer).serializeToString(f),g=a('<canvas id="canvas" style="display:none;"></canvas>');
canvg(g[0],f);return g[0].toDataURL()}};window.RadiantQ&&RadiantQ.Gantt&&(RadiantQ.Gantt.GetGradientImageURL=getGradientImageURL);setGradientAsBackground=function(b,c,f){c=getGradientImageURL(c,f);f=a("<style></style>");f.append(""+b+"{background-image:url("+c+") !important;}");a(document.head).append(f)};a.fn.setGradientAsBackground=function(b,e){if(0==a("script[src*=canvg]",document).length||void 0===canvg)window.console?console.error("canvg.js file is not found."):alert("canvg.js file is not found.");
else{var f=this.selector;if(""===f){var g="dynamicGradient"+c,f="."+g;this.addClass(g);c++}setGradientAsBackground(f,b,e)}}})(jQuery);
(function(){var a=null,b=null,c=!1;RadiantQ.Gantt.RowDragDropTracker=function(d){var e=null,f=null,g=null,h=!1,k=!1,l=!1,n=!1,p=!1,m=null,q=!1,r=d,s=r.options.Parent,t=!1,u=null,y=!1,w=r.element.data("GanttTableBase"),x=null,z=[],v=r.element;_enableDropAsChild=s.options.EnableDropAsChild;_destIndex=_topSelectedIndex=null;_inChildRows=_isInLastRow=!1;_timer=0;this.Source=d;var D=null;v.bind("mousedown.popupHandler",function(a){_rowHeaderMouseDown(a)});v.bind("touchstart.popupHandler",function(a){_rowHeaderMouseDown(a)});
_rowHeaderMouseDown=function(a){$(a.target).hasClass("rq-grid-column-0")&&(t||(t=!0,_createPopup()),e.css("display","block"))};s.element.bind("ganttcontrolselectionchanged.RowDragDropTracker",function(a,b){_initialize(a,b)});s.element.bind("flexyganttselectionchanged.RowDragDropTracker",function(a,b){_initialize(a,b)});_initialize=function(a,b){!s.options.CanUserReorderRows||s._isReadOnly||0==r.element.width()||0==r.element.height()||k||0==s.SelectedItems.length||(0<_timer&&clearTimeout(_timer),_timer=
setTimeout(function(){_updatePopup(s.SelectedItems);null!=m&&$(m).unbind(".rowHeaderMouseEvents");m=s.SelectedItems[0].TableRow()[0].firstChild;$(m).bind("mouseenter.rowHeaderMouseEvents",function(){null!=_topSelectedIndex&&void 0!=_topSelectedIndex?k||e.css("display","block"):e.css("display","block")}).bind("mouseleave.rowHeaderMouseEvents",function(){e.css("display","none")}).dblclick(function(a){a.preventDefault();a.stopPropagation()});0<s.SelectedItems.length&&_sourceSelectionChanged(null,s.SelectedItems)}.bind(this),
0))};_updatePopup=function(a){t||(t=!0,_createPopup())};_createPopup=function(){e=$('<div class="handleCue rq-dnd-handleCue"></div>');f=$('<div class="avoidCue rq-dnd-avoidCue" style="align:center; pointer-events:none;"></div>');$gridBody=$(".ui-grid-body",s.element);g=$('<div style="display:none; pointer-events:none; width:100%; border:1.2px solid black; position:absolute;"></div>');$gridBody.prepend(g);$gridBody.append(f)};_sourceSelectionChanged=function(a,b){if(b&&!k){$(".ui-grid-body",s.element);
z=b;var c=z[0].TableRow();_topSelectedIndex=s.options.UseVirtualization?c[0]._displayIndex:c[0].rowIndex;$itempeer=D=c;$(m).append(e);e.unbind(".handleCueMouseDown");e.bind("mousedown.handleCueMouseDown",function(a){_handleCueMouseDown(a);a.preventDefault();a.stopPropagation()});e.bind("touchstart.handleCueMouseDown",function(a){_handleCueMouseDown(a);a.preventDefault();a.stopPropagation()})}};_handleCueMouseDown=function(a){var b=$itempeer.position().top;g.css("top",b);c=k=!0;v.bind("mouseenter.RowDragDropTracker",
function(a){c=!0;f.css("display","none");l?g.css("display","none"):g.css("display","block")});v.bind("mouseleave.RowDragDropTracker",function(a){c=!1;var b=$(a.target).closest("tr"),d=v[0].offsetTop+v.height();a.pageY>d||0==b.length?f.css({top:d}):f.css({top:b.position().top+4});g.css("display","none");f.css("display","block")});a.preventDefault();a.stopPropagation();x=s.element.data("GanttRowselectable");v.bind("mousemove.RowDragDropTracker",function(a){_handleCueMouseMove(a)});v.bind("touchmove.RowDragDropTracker",
function(a){_clearAutoScrollTimers();c=!0;var b;if(void 0!=a.originalEvent.changedTouches||null!=a.originalEvent.changedTouches)b=$(document.elementFromPoint(a.originalEvent.changedTouches[0].clientX,a.originalEvent.changedTouches[0].clientY)).closest("tr");b.hasClass("rq-grid-row")?_handleCueMouseMove(a):(c=!1,f.css({top:D.position().top+4}),g.css("display","none"),f.css("display","block"));a.preventDefault();a.stopPropagation()});$(document).unbind(".RowDragDropTracker");$(document).bind("mouseup.RowDragDropTracker",
function(a){k=!1;_clearAutoScrollTimers();_handleCueMouseUp()});$(document).bind("touchend.RowDragDropTracker",function(a){window.console&&console.log("end event");k=!1;_clearAutoScrollTimers();_handleCueMouseUp();c=!1});$(document).bind("keyup.RowDragDropTracker",function(a){_clearAutoScrollTimers();_sourceKeyUp(a)});$(document).bind("keydown.RowDragDropTracker",function(a){_sourceKeyDown(a)})};_handleCueMouseMove=function(a){if(k){y||(y=!0,w.OnBeforeDragStart(_topSelectedIndex,z.length),z=x.selectedItems.slice(0));
var b=$(".ui-grid-body",s.element);b.prev();_clearAutoScrollTimers();var d=b.offset().top,e=s.options.RowHeight;(a.pageY||a.originalEvent.changedTouches[0].pageY)<d+e/2&&c?_autoScrollUp():(a.pageY||a.originalEvent.changedTouches[0].pageY)>d+b[0].clientHeight-e&&c&&_autoScrollDown();u=void 0!=a.originalEvent.changedTouches||null!=a.originalEvent.changedTouches?D=$(document.elementFromPoint(a.originalEvent.changedTouches[0].clientX,a.originalEvent.changedTouches[0].clientY)).closest("tr"):$(a.target).closest("tr");
null==u||void 0==u||0==u.length?y=!1:_destIndex=s.options.UseVirtualization?u[0]._displayIndex:u[0].rowIndex;_getIsMousePositionInChildRows();_raiseToCheck(a)}};_getIsMousePositionInChildRows=function(){_inChildRows=!1;var a=_destIndex-_topSelectedIndex;s.SelectedItems.containsValue(null!=s.ActivityViews&&void 0!=s.ActivityViews?s.ActivityViews[_destIndex]:s.FlatHierarchicalItemsList[_destIndex].corrFlexyNodeData)?_inChildRows=!0:a==s.SelectedItems.length&&(_enableDropAsChild&&n?_inChildRows=!0:_enableDropAsChild||
p&&_isInLastRow||(_inChildRows=!0))};_raiseCanDrop=function(a,b){return w.CanDrop(a,b)};_raiseToCheck=function(a){if(null!=u&&void 0!=u&&0!=u.length){var b=s.options.RowHeight,c=u.position().top;if(void 0!=a.originalEvent.changedTouches||null!=a.originalEvent.changedTouches){var d=$(document.elementFromPoint(a.originalEvent.changedTouches[0].clientX,a.originalEvent.changedTouches[0].clientY)).closest("tr");a=a.originalEvent.changedTouches[0].pageY-d.offset().top}else a=void 0==a.offsetY?a.pageY-$(a.target).offset().top:
a.offsetY;d=b/4;n=a<=d;p=a>=3*d;q=a>d&&a<3*d;_raiseCanDrop(_destIndex,_enableDropAsChild&&q)||_destIndex==_topSelectedIndex||_inChildRows?(l=!0,f.css({top:u.position().top+4}),g.css("display","none"),f.css("display","block"),e.css("display","none")):(l=!1,g.css("display","block"),f.css("display","none"));a=u.next();_isInLastRow=!1;_enableDropAsChild?q?_verticalOffsetSet(c,"1.5px",b+"px"):n?_verticalOffsetSet(c,"1px","0px"):0<a.length?_verticalOffsetSet(a.position().top,"1px","0px"):(_isInLastRow=
!0,_verticalOffsetSet(u.position().top+b,"1px","0px")):0<a.length?_verticalOffsetSet(u.position().top,"1px","0px"):p?(_isInLastRow=!0,_verticalOffsetSet(u.position().top+b,"1px","0px")):0==a.length&&(_isInLastRow=!0,_verticalOffsetSet(u.position().top,"1px","0px"))}};_handleCueMouseUp=function(){if(null!=z){if(_checkDrop())return;if(c&&y){_destIndex=s.options.UseVirtualization?u[0]._displayIndex:u[0].rowIndex;p&&_enableDropAsChild&&(_destIndex+=1);_isInLastRow&&(_destIndex=null!=s.ActivityViews&&
void 0!=s.ActivityViews?s.ActivityViews.length-1:s.FlatHierarchicalItemsList.length-1);_isInLastRow&&p&&(_destIndex=-1);var a=!1;q&&_enableDropAsChild&&(a=_checkIsSameParent(_topSelectedIndex,_destIndex));q&&_topSelectedIndex==_destIndex&&_enableDropAsChild&&(a=!0);var b=z.length,d=z.slice(0),h=w.OnDrop(_topSelectedIndex,b,_destIndex,_enableDropAsChild&&q);if(!a&&!l&&h&&0<=_topSelectedIndex&&!_inChildRows){_isInLastRow&&p&&(_destIndex=null!=s.ActivityViews&&void 0!=s.ActivityViews?s.ActivityViews.length:
s.FlatHierarchicalItemsList.length);!1!=_enableDropAsChild&&q?w.InsertRowsAsChild(_topSelectedIndex,b,_destIndex):w.MoveRows(_topSelectedIndex,b,_destIndex-1);for(a=0;a<b;a++)!1==x.selectedItems.containsValue(d[a])&&x.selectedItems.add(d[a]);w.OnDropped(z)}}f.css("display","none");g.css("display","none");e.css("display","none");z=[];y=!1}$(document).unbind(".RowDragDropTracker");v.unbind(".RowDragDropTracker")};_verticalOffsetSet=function(a,b,c){g.css({top:a});g.height(c);g.css("border-width",b)};
_checkDrop=function(){return h?(l=!0,k=y=!1,e.css("display","none"),f.css("display","none"),g.css("display","none"),v.unbind(".RowDragDropTracker"),$(document).unbind(".RowDragDropTracker"),!0):!1};_sourceKeyUp=function(a){27==a.keyCode&&(_checkDrop(),h=!1)};_sourceKeyDown=function(a){27==a.keyCode&&(l=h=!0)};_checkIsSameParent=function(a,b){var c=s.options.FlatItemsSource[a],d=s.options.FlatItemsSource[b];return"ProjectGantt"==this.GanttType&&(parentActivityIndex=null!=c._parentView&&void 0!=c._parentView?
c._parentView._activity._displayIndex:c._activity._displayIndex,d.activity._displayIndex==parentActivityIndex)?!0:!1};_autoScrollUp=function(){null==a&&(a=setInterval(function(){0<100*$gridBody[0].scrollTop/($gridBody[0].scrollHeight-$gridBody[0].clientHeight)?__autoScroll(-10):_clearAutoScrollTimers()},0))};_autoScrollDown=function(){null==b&&(b=setInterval(function(){$gridBody[0].scrollHeight==$gridBody[0].scrollTop+$gridBody[0].clientHeight?_clearAutoScrollTimers():__autoScroll(10)},0))};__autoScroll=
function(a){$gridBody.animate({scrollTop:$gridBody[0].scrollTop+a},0)};_clearAutoScrollTimers=function(){null!=a&&clearInterval(a);null!=b&&clearInterval(b);a=b=null};Dispose=function(){y=!1;l=!0;r=g=f=e=null;c=!1;_topSelectedIndex=null;k=!1;_clearAutoScrollTimers();null==m&&void 0==m||$(m).unbind(".rowHeaderMouseEvents");null==e&&void 0==e||e.unbind(".handleCueMouseDown");null==s&&void 0==s||s.element.unbind("ganttcontrolselectionchanged.RowDragDropTracker");if(null!=v||void 0!=v)v.unbind(".popupHandler"),
v.unbind(".RowDragDropTracker");$(document).unbind(".RowDragDropTracker")}}})();
